(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{401:function(t,s,e){"use strict";e.r(s);var a=e(17),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"getting-started-with-venus-cluster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-with-venus-cluster"}},[t._v("#")]),t._v(" Getting started with venus-cluster")]),t._v(" "),e("p",[t._v("This guide will walk you through how to qiuckly get started with venus-cluster")]),t._v(" "),e("h2",{attrs:{id:"preparation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#preparation"}},[t._v("#")]),t._v(" Preparation")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Install 3rd party dependencies. Please refer to instrcutions "),e("a",{attrs:{href:"https://lotus.filecoin.io/docs/set-up/install/#building-from-source",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("li",[e("p",[t._v("Download source code.")])])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/ipfs-force-community/venus-cluster.git\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Compile "),e("code",[t._v("venus-cluster")]),t._v(" component.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" venus-cluster\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" all\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("After completion, you should be able to find binaries for both "),e("code",[t._v("venus-worker")]),t._v(" and "),e("code",[t._v("venus-sector-manager")]),t._v(".")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[e("p",[t._v("Copy the binaries to your machine(s).")])]),t._v(" "),e("li",[e("p",[t._v("Copy "),e("code",[t._v("./venus-worker/create-cgroup.sh")]),t._v(" to all "),e("code",[t._v("venus-worker")]),t._v(" machine and execute the script under same user which you are going to run "),e("code",[t._v("venus-worker")]),t._v(".")])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The script will generate "),e("code",[t._v("cgroup")]),t._v(" for the user, which allows "),e("code",[t._v("venus-worker")]),t._v(" to allocate hardware resources accordingly.")])]),t._v(" "),e("h2",{attrs:{id:"mock-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mock-mode"}},[t._v("#")]),t._v(" Mock mode")]),t._v(" "),e("p",[t._v("By default, starting a set of "),e("code",[t._v("mock")]),t._v(" instance can be done by a series of commands.")]),t._v(" "),e("h3",{attrs:{id:"venus-sector-manager"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-sector-manager"}},[t._v("#")]),t._v(" venus-sector-manager")]),t._v(" "),e("p",[t._v("For example, start "),e("code",[t._v("venus-sector-manager")]),t._v(" with a dummy miner actor "),e("code",[t._v("t010000")]),t._v(" and schedule sealing jobs with sector size of 2KiB.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ./dist/bin/venus-sector-manager mock --miner"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v(" --sector-size"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("2KiB\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[e("code",[t._v("./mock/start_smgr.sh")]),t._v(" could also be used to do this.")])]),t._v(" "),e("h3",{attrs:{id:"venus-worker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-worker"}},[t._v("#")]),t._v(" venus-worker")]),t._v(" "),e("ol",[e("li",[t._v("Init both sealing and permanent storage.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ./dist/bin/venus-worker store sealing-init -l ./mock-tmp/store1 ./mock-tmp/store2 ./mock-tmp/store3\n\n$ ./dist/bin/venus-worker store file-init -l ./mock-tmp/remote\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[e("code",[t._v("./mock/cleanup_store.sh")]),t._v(" could also be used to do this.")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Start "),e("code",[t._v("venus-worker")]),t._v(" in "),e("code",[t._v("mock")]),t._v(" mode.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ./dist/bin/venus-worker daemon -c ./venus-worker/assets/venus-worker.mock.toml\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[e("code",[t._v("./mock/start_worker.sh")]),t._v(" could also be used to do this.")])]),t._v(" "),e("h2",{attrs:{id:"production-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#production-mode"}},[t._v("#")]),t._v(" Production mode")]),t._v(" "),e("h3",{attrs:{id:"venus-sector-manager-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-sector-manager-2"}},[t._v("#")]),t._v(" venus-sector-manager")]),t._v(" "),e("ol",[e("li",[t._v("Init working directories.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ./dist/bin/venus-sector-manager daemon init\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Configure "),e("code",[t._v("~/.venus-sector-manager/sector-manager.cfg")]),t._v(" per your use case.")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("For more details on what each configuration does, please refer to "),e("a",{attrs:{href:"https://github.com/ipfs-force-community/venus-cluster/blob/main/docs/zh/04.venus-sector-manager%E7%9A%84%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("this document"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Start "),e("code",[t._v("venus-sector-manager")]),t._v(".")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ./dist/bin/venus-sector-manager --net"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cali"')]),t._v(" daemon run\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[e("code",[t._v("--net")]),t._v(" defaults to "),e("code",[t._v("mainnet")]),t._v(".")])]),t._v(" "),e("h3",{attrs:{id:"venus-worker-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#venus-worker-2"}},[t._v("#")]),t._v(" venus-worker")]),t._v(" "),e("ol",[e("li",[t._v("Init sealing path for unsealed sector(s).")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ./dist/bin/venus-worker store sealing-init -l "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dir"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dir"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dir"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("3")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Init permanent storage path for sealed sector(s).")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ ./dist/bin/venus-worker store file-init -l "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dir"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Configure your "),e("code",[t._v("venus-worker")]),t._v(" according to your planning of CPU cores, numa, zone and etc for each sealing phases.")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("For more details on what each configuration does, please refer to "),e("a",{attrs:{href:"https://github.com/ipfs-force-community/venus-cluster/blob/main/docs/zh/03.venus-worker%E7%9A%84%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("this document"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Start "),e("code",[t._v("venus-worker")]),t._v(".")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ /path/to/venus-worker daemon -c /path/to/venus-worker.toml\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);