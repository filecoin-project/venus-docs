(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{554:function(e,t,a){"use strict";a.r(t);var s=a(17),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"background"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#background"}},[e._v("#")]),e._v(" Background")]),e._v(" "),a("p",[e._v("Sealing as a service has grown from an "),a("a",{attrs:{href:"https://filecoinproject.slack.com/archives/C0320QCV8SY/p1644244480718559",target:"_blank",rel:"noopener noreferrer"}},[e._v("idea"),a("OutboundLink")],1),e._v(" summarized in a "),a("a",{attrs:{href:"https://docs.google.com/document/d/1zF1F6Q_Ya6IOUe9nfDOa0bNifvIa0TY4nR89omxy0kQ/edit",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google doc"),a("OutboundLink")],1),e._v(" to one of the priorities among Filecoin data-onboarding roadmap. There are many potential merits of SaaS which includes lowering entry to Filecoin network, further separation of different roles, and the possibility of creating "),a("a",{attrs:{href:"https://github.com/filecoin-project/lotus/discussions/9079",target:"_blank",rel:"noopener noreferrer"}},[e._v("new line of business"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/1591330/185077991-a8db1738-2611-4ba2-9b09-d88d14b66800.png",alt:"image"}})]),e._v(" "),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[e._v("#")]),e._v(" Abstract")]),e._v(" "),a("p",[e._v("There are many ways that Sealing-as-a-Service could be carried out, but we think that an all-purpose and generic solution would include the following...")]),e._v(" "),a("ul",[a("li",[e._v("SaaS which can serve different miner_id at the same time")]),e._v(" "),a("li",[e._v("SaaS which can be scaled quickly to meet SP's sealing needs")]),e._v(" "),a("li",[e._v("SaaS which allows SP to retain control of their funds needed for PoRep")]),e._v(" "),a("li",[e._v("A smart transfer scheme to send sealed sectors to SP (out of scope of this discussion)")]),e._v(" "),a("li",[e._v("Sectors meta information for SP to continue PoST on sealed sectors")])]),e._v(" "),a("p",[e._v("Given the above, "),a("a",{attrs:{href:"https://venus.filecoin.io/cluster/",target:"_blank",rel:"noopener noreferrer"}},[e._v("venus-cluster"),a("OutboundLink")],1),e._v(" is well situated to serve as the underlying platform of such SaaS type of service.")]),e._v(" "),a("h2",{attrs:{id:"venus-cluster-features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#venus-cluster-features"}},[e._v("#")]),e._v(" "),a("code",[e._v("venus-cluster")]),e._v(" Features")]),e._v(" "),a("p",[e._v("For readers who may not as well versed in Venus, please refer to this "),a("a",{attrs:{href:"https://venus.filecoin.io/cs/#mining-architecture",target:"_blank",rel:"noopener noreferrer"}},[e._v("document"),a("OutboundLink")],1),e._v(" to get an overall idea of Venus architecture.")]),e._v(" "),a("p",[e._v("Through working with many SPs (small and large) and directing much efforts into the development, "),a("code",[e._v("venus-cluster")]),e._v(" storage power solution has been built from ground up to be configurable, scalable and customizable. Some of the design principles and key features make it very compatible with the SaaS initiative include...(but not limited to)")]),e._v(" "),a("ul",[a("li",[e._v("Revamped sealing pipeline where hardware resources for each sealing tasks are pre-configured and could be used as a template to scale sealing operattions")]),e._v(" "),a("li",[e._v("Revamped job scheduling where instead of active scheduling tasks to workers, a manager now passively receive reports on the progress of workers. We think this could be one of the keys to a generic SaaS solution")]),e._v(" "),a("li",[e._v("Configurable target miner_id for the sealing resources")]),e._v(" "),a("li",[e._v("Customizable proof code and execution stack (CPU, GPU, sector sealing storage)")]),e._v(" "),a("li",[e._v("Customizable persistent storage strategy")]),e._v(" "),a("li",[e._v("And much more")])]),e._v(" "),a("h2",{attrs:{id:"saas-design"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#saas-design"}},[e._v("#")]),e._v(" SaaS design")]),e._v(" "),a("p",[e._v("For a comprehensive understanding of what "),a("code",[e._v("venus-cluster")]),e._v(" is, please refer to the documentation "),a("a",{attrs:{href:"https://venus.filecoin.io/cluster/#what-is-venus-cluster",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(". We believe that it will be crucial for the understanding of the design we presented below.")]),e._v(" "),a("p",[e._v("Again there are many ways that "),a("code",[e._v("SaaS")]),e._v(" could be achieved, below are 3 different approaches...")]),e._v(" "),a("h3",{attrs:{id:"saas-architecture-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#saas-architecture-1"}},[e._v("#")]),e._v(" SaaS Architecture 1")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/1591330/185859458-2025492b-5b5b-4eb1-a0d5-44a76c0d9e58.png",alt:"image"}})]),e._v(" "),a("p",[e._v('This is clearly not the "renting computation resources" model of '),a("code",[e._v("sealing-as-a-service")]),e._v(" initiative but is a good starting point for understanding "),a("code",[e._v("venus-cluster")]),e._v(" architecture.")]),e._v(" "),a("p",[e._v('In the design presented above, the "SaaS" actually take care of both sealing and persistent storage while storage provider maintain full custody of its wallets and funds. Storage provider essentially, in this scenario, outsourced both PoRep and PoST to a third-party service provider. When signatures are needed for either PoRep or PoST, storage provider could remotely sign the necessary messages through its secure connection to '),a("code",[e._v("venus-gateway")]),e._v(" with a trusted Venus chain service, decoupling message signing with the rest of the systems.")]),e._v(" "),a("h3",{attrs:{id:"saas-architecture-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#saas-architecture-2"}},[e._v("#")]),e._v(" SaaS Architecture 2")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/1591330/185875453-ab331a3d-44af-408a-b03d-772452c0cb09.png",alt:"image"}})]),e._v(" "),a("p",[e._v("In the design above, a storage provider would need to manage its persistent storage and maintain PoSTing while PoRep is completely outsourced to a "),a("code",[e._v("SaaS")]),e._v(". Again the setup is similar for storage provider in design 1 where it needs to setup "),a("code",[e._v("venus-wallet")]),e._v(" (owner, worker, controller) and connect it to a trusted Venus chain service to sign PoRep messages that are produced by "),a("code",[e._v("SaaS")]),e._v(" with the benefit of storage provider retaining full control of their private keys.")]),e._v(" "),a("p",[e._v("On the "),a("code",[e._v("SaaS")]),e._v(" side, by taking advantages of "),a("a",{attrs:{href:"https://venus.filecoin.io/cluster/#complete-revamp-of-existing-job-scheduling",target:"_blank",rel:"noopener noreferrer"}},[e._v("passive job scheduling"),a("OutboundLink")],1),e._v(" feature of "),a("code",[e._v("venus-cluster")]),e._v(" where venus-worker is able to change the state machine of a sealing sector, a pool of "),a("code",[e._v("venus-worker")]),e._v(" can be configured to report to a remote "),a("code",[e._v("venus-sector-manager")]),e._v(" and start sealing for a particular miner_id.")]),e._v(" "),a("p",[e._v("Then by the flexibility of "),a("code",[e._v("venus-cluster")]),e._v("'s customizable framework, a "),a("code",[e._v("SaaS")]),e._v(" provider could write their own storage strategy and plug it into "),a("code",[e._v("venus-worker")]),e._v("'s "),a("a",{attrs:{href:"https://github.com/ipfs-force-community/venus-cluster/blob/main/docs/en/03.venus-worker-config.md#processorsstage_name",target:"_blank",rel:"noopener noreferrer"}},[e._v("configuration file"),a("OutboundLink")],1),e._v(" so that when a sector is sealed the custom storage logic will be executed by the said worker.")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("processors.transfer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Custom external processor executable file path, optional, string type")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# By default, the executable file path corresponding to the main process will be used")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("bin")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"./dist/bin/venus-worker-plugin-transfer"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Customize the parameters of the external processor, optional item, string array type")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The default value is null, `venus-worker`'s own executor default parameters will be used")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("args")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"--args-1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"--args-2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("h3",{attrs:{id:"saas-architecture-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#saas-architecture-3"}},[e._v("#")]),e._v(" SaaS Architecture 3")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/1591330/185887602-14fc834d-bce2-4b36-81b1-2091e198c47b.png",alt:"image"}})]),e._v(" "),a("p",[e._v("In the design 3 above, it further builds upon the architecture of design 2 and potentially optimize the work flow on both "),a("code",[e._v("SaaS")]),e._v(" side and storage provider side. For example, APIs for "),a("code",[e._v("SaaS")]),e._v(" related admin features, a "),a("code",[e._v("venus-sector-manager")]),e._v(" for "),a("code",[e._v("SaaS")]),e._v(" provider to transfer meta data of sealed sectors to its counter-part on storage provider side, worker pool configurations specific to "),a("code",[e._v("SaaS")]),e._v(" provider and etc.")]),e._v(" "),a("h2",{attrs:{id:"conclusion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[e._v("#")]),e._v(" Conclusion")]),e._v(" "),a("p",[e._v("We believe that "),a("code",[e._v("venus-cluster")]),e._v(" along with Venus systems are well positioned to be one of the platforms for a fully fledged "),a("code",[e._v("SaaS")]),e._v(" solution. Relevant API designs and how exactly "),a("code",[e._v("venus-sector-manager")]),e._v(" interact with "),a("code",[e._v("venus-worker")]),e._v(" could be found at "),a("a",{attrs:{href:"https://github.com/ipfs-force-community/venus-cluster",target:"_blank",rel:"noopener noreferrer"}},[e._v("venus-cluster repo"),a("OutboundLink")],1),e._v(". Thoughts, comments or questions are welcomed!")]),e._v(" "),a("h2",{attrs:{id:"other-solutions-on-the-market"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#other-solutions-on-the-market"}},[e._v("#")]),e._v(" Other Solutions on the Market")]),e._v(" "),a("ul",[a("li",[e._v("[ ] https://github.com/ipfs-force-community/venus-cluster/discussions/359")])])])}),[],!1,null,null,null);t.default=r.exports}}]);