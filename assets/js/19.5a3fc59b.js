(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{384:function(s,e,t){"use strict";t.r(e);var a=t(17),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"how-to-start-a-test-network"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-start-a-test-network"}},[s._v("#")]),s._v(" How to start a test network")]),s._v(" "),t("p",[s._v("This document takes building a 2k private network as an example.")]),s._v(" "),t("h2",{attrs:{id:"necessary-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#necessary-environment"}},[s._v("#")]),s._v(" Necessary environment")]),s._v(" "),t("p",[s._v("Based on CentOS 7.* :")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yum install epel-release -y\nyum install ocl-icd-devel -y\nyum install opencl-headers -y\nyum install hwloc\nyum install jq -y \n")])])]),t("p",[s._v("During the process, there is a prompt to install any components.")]),s._v(" "),t("p",[s._v("Software: venus-wallet,venus,venus-sealer,venus-miner, genesis nodes and ordinary nodes share services: venus,venus-wallet,venus-miner.")]),s._v(" "),t("h2",{attrs:{id:"wallet-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wallet-service"}},[s._v("#")]),s._v(" Wallet service")]),s._v(" "),t("ol",[t("li",[s._v("Start")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./venus-wallet run\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("Set password")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Only need to be set once")]),s._v("\n./venus-wallet set-password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Unlock the wallet and release private key, need to be executed every restart")]),s._v("\n./venus-wallet unlock "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# List")]),s._v("\n./venus-wallet list,ls\n")])])]),t("h2",{attrs:{id:"generating-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generating-node"}},[s._v("#")]),s._v(" Generating node")]),s._v(" "),t("ol",[t("li",[s._v("Generate pre-seal files and data")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./venus seed pre-seal --sector-size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" --num-sectors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n./venus seed genesis new localnet.json\n./venus seed genesis add-miner localnet.json ~/.genesis-sectors/pre-seal-t01000.json\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("Start daemon")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./venus daemon --make-genesis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("devgen.car --genesis-template"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localnet.json --network"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2k\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Set wallet password")]),s._v("\n./venus wallet set-password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n./venus wallet "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" ~/.genesis-sectors/pre-seal-t01000.key\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# After restarting the deamon, you need to unlock the wallet")]),s._v("\n./venus wallet unlock "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("Signature use venus-wallet")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Import wallet to venus-wallet")]),s._v("\n./venus wallet "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("addr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n./venus-wallet "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" keys\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Get token with API info required to connect to venus-wallet")]),s._v("\n./venus-wallet auth api-info --perm"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Modify venus configuration: [walletModule]")]),s._v("\n./venus config walletModule.remoteEnable "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n./venus config walletModule.remoteBackend "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("api-info"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])])]),t("p",[s._v("Please restart the venus service after everything is configured.")]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("Initialize miner")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# init sealer")]),s._v("\n./venus-sealer init --genesis-miner --actor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t01000 --sector-size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" --pre-sealed-sectors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~/.genesis-sectors --pre-sealed-metadata"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~/.genesis-sectors/pre-seal-t01000.json --nosync --network"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("2k\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# init miner, one program can be responsible for mining of multiple miners (joint mining)")]),s._v("\n./venus-miner init\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("Start service of Genesis Miners")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Start the sealing service")]),s._v("\n./venus-sealer run --nosync\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Start the mining service")]),s._v("\n./venus-miner run --nosync\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# get venus-wallet rpc api & token")]),s._v("\n./venus-wallet auth api-info --perm"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WALLET-TOKEN:WALLET-API"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add the miner, start mining")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .venussealer/api  -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SEALER-API\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .venussealer/token -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SEALER-TOKEN  \n./venus-miner address "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --addr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("t0100"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" --sealer-listen-api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SEALER-API"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --sealer-token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SEALER-TOKEN"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --wallet-token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("WALLET-TOKEN"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --wallet-listen-api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("WALLET-API"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# miner list")]),s._v("\n./venus-miner address list\n")])])]),t("h2",{attrs:{id:"start-venus-normal-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start-venus-normal-node"}},[s._v("#")]),s._v(" Start venus normal node")]),s._v(" "),t("ol",[t("li",[s._v("Create wallet")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./venus-wallet new bls\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("Copy the ~/.venus/api & token\nCopy the api and token files to the current user root directory, modify the [ip] in the api file to the [ip] of the venus node:\n/ip4/[ip]/tcp/3453")])]),s._v(" "),t("h2",{attrs:{id:"generate-normal-miner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generate-normal-miner"}},[s._v("#")]),s._v(" Generate normal miner")]),s._v(" "),t("ol",[t("li",[s._v("Send")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./venus send "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WALLET_T3_ADDR")]),s._v(" --value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --from"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("FROM_WALLET_ADDR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n./venus wallet balance "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WALLET_T3_ADDR")]),s._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("Create miner")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./venus-sealer init --owner"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WALLET_T3_ADDR")]),s._v(" --worker"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WALLET_T3_ADDR")]),s._v(" --sector-size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" --nosync\n")])])]),t("h2",{attrs:{id:"start-service-of-normal-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start-service-of-normal-node"}},[s._v("#")]),s._v(" Start service of normal node")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start sealing service")]),s._v("\n./venus-sealer run --nosync\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# seal once")]),s._v("\n./venus-sealer sectors pledge\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start mining service, execute commands on the started miner node")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .venussealer/api  -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SEALER01-API\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .venussealer/token -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SEALER01-TOKEN  \n./venus-miner address "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --addr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("miner addr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --sealer-listen-api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SEALER01-API"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --sealer-token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SEALER01-TOKEN"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --wallet-token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("WALLET-TOKEN"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --wallet-listen-api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("WALLET-API"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);