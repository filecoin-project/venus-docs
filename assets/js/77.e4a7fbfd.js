(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{449:function(t,e,a){"use strict";a.r(e);var s=a(17),o=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"upgrading-to-network-version-15"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-to-network-version-15"}},[t._v("#")]),t._v(" Upgrading to network version 15")]),t._v(" "),a("p",[t._v("Please upgrade each venus component in the order as it is presented in this document. We recommend that you go through the document before upgrading. When in doubt, please do not hesitate to reach out to us "),a("a",{attrs:{href:"https://github.com/filecoin-project/venus/discussions/4688",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("Please make sure that your storage system is not doing any windowPost when you upgrade and leave ample time before the next upcoming windowPost")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("If you have partitions in all deadlines, it is recommended that you build another transition environment for the upgrade.")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("It is recommended that you backup your old binary and critical data as you go through the upgrade process.")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("For large scale storage systems, it is recommended that running chain-co with both venus daemon and venus wrapped daemon.")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("venus-auth: "),a("code",[t._v("optional")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v1.3.2")]),t._v(";")])]),t._v(" "),a("li",[a("p",[t._v("venus-wallet: "),a("code",[t._v("optional")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v1.4.0")]),t._v(";")])]),t._v(" "),a("li",[a("p",[t._v("venus daemon: "),a("code",[t._v("mandatory")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v1.2.1")]),t._v(";")])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Checkups after upgrading:")]),t._v(" "),a("ul",[a("li",[t._v("integrity of vk files")]),t._v(" "),a("li",[t._v("see if upgrade epochs are properly set in config files")])]),t._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cali")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"upgradeOhSnapHeight"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("682006")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mainnet")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"upgradeOhSnapHeight"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1594680")]),t._v("\n")])])]),a("ul",[a("li",[t._v("see if "),a("code",[t._v("maxfee")]),t._v(" under "),a("code",[t._v("mpool")]),t._v(" section is now in the format of "),a("code",[t._v("[x] Fil")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"mpool": {\n\t"maxNonceGap": 100,\n   \t"maxFee": "10 FIL"\n},\n')])])]),a("ul",[a("li",[t._v("see if chain synchronization is working properly")])])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("As a result of a mandatory network upgrade with API changes, sealer connection maybe lost during the this step of the upgrade.")])]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("venus wrapped deamon: "),a("code",[t._v("mandatory")]),t._v(" upgrade (if you are using "),a("code",[t._v("chain-co")]),t._v("); branch/tag "),a("code",[t._v("venus/v1.14.0")]),t._v(";")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Checkups after upgrading:")]),t._v(" "),a("ul",[a("li",[t._v("see if chain synchronization is working properly")]),t._v(" "),a("li",[t._v("see if connection to venus-auth is okay")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('curl http://127.0.0.1:3453/rpc/v0 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer <YOUR_TOKEN>" -d \'{"method": "Filecoin.ChainHead","params":[], "id": 0}\'\n')])])])]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("chain-co: "),a("code",[t._v("mandatory")]),t._v(" upgrade (if you deployed chain-co for your HA solution); branch/tag "),a("code",[t._v("v0.1.0")]),t._v(";")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Checkups after upgrading:")]),t._v(" "),a("ul",[a("li",[t._v("see if two new API MpoolPending and MpoolGetNonce are working properly")])])]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[a("p",[t._v("venus-messager: "),a("code",[t._v("mandatory")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v1.4.0")]),t._v(";")])]),t._v(" "),a("li",[a("p",[t._v("venus-gateway: "),a("code",[t._v("mandatory")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v1.2.0")]),t._v(";")])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("ul",[a("li",[t._v("support for both old and new API due to changes in ComputeProof's params")]),t._v(" "),a("li",[t._v("see if both v0 and v1 APIs are working properly")])])]),t._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[t._v("venus-miner: "),a("code",[t._v("mandatory")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v1.4.0")]),t._v(";")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Parameter changes for ComputeProof.")])]),t._v(" "),a("ol",{attrs:{start:"9"}},[a("li",[a("p",[t._v("venus-market: "),a("code",[t._v("optional")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v2.0.0")]),t._v(";")])]),t._v(" "),a("li",[a("p",[t._v("venus-sealer: "),a("code",[t._v("mandatory")]),t._v(" upgrade; branch/tag "),a("code",[t._v("v1.4.0")]),t._v(";")])])]),t._v(" "),a("p",[t._v("For more question regarding nv15 upgrade, please refer to this discussion "),a("a",{attrs:{href:"https://github.com/filecoin-project/venus/discussions/4688",target:"_blank",rel:"noopener noreferrer"}},[t._v("thread"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=o.exports}}]);