(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{444:function(e,a,v){"use strict";v.r(a);var t=v(17),s=Object(t.a)({},(function(){var e=this,a=e.$createElement,v=e._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"nv17-各组件升级文档"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#nv17-各组件升级文档"}},[e._v("#")]),e._v(" nv17 各组件升级文档")]),e._v(" "),v("p",[e._v("如果 "),v("code",[e._v("venus-wallet")]),e._v(" 或者 "),v("code",[e._v("venus-gateway")]),e._v(" 的版本从 "),v("code",[e._v("v1.6.x")]),e._v(" 升级到 "),v("code",[e._v("v1.8.0")]),e._v("，请先阅读 "),v("a",{attrs:{href:"https://github.com/filecoin-project/venus/discussions/5265",target:"_blank",rel:"noopener noreferrer"}},[e._v("Venus 组件 v1.7.0 使用注意事项 "),v("OutboundLink")],1),e._v("，注意 "),v("code",[e._v("venus-gateway")]),e._v(" 和 "),v("code",[e._v("venus-wallet")]),e._v("的升级顺序。")]),e._v(" "),v("h3",{attrs:{id:"时间线"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#时间线"}},[e._v("#")]),e._v(" 时间线")]),e._v(" "),v("p",[e._v("升级时间：2022-11-30T14:00:00Z，北京时间是 2022-11-30 22:00:00")]),e._v(" "),v("h3",{attrs:{id:"各组件版本"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#各组件版本"}},[e._v("#")]),e._v(" 各组件版本")]),e._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"https://github.com/filecoin-project/venus/discussions/5386#discussioncomment-3893446",target:"_blank",rel:"noopener noreferrer"}},[e._v("calibrationnet"),v("OutboundLink")],1)]),e._v(" "),v("li",[v("a",{attrs:{href:"https://github.com/filecoin-project/venus/discussions/5386#discussioncomment-3893449",target:"_blank",rel:"noopener noreferrer"}},[e._v("mainnet"),v("OutboundLink")],1)])]),e._v(" "),v("h3",{attrs:{id:"venus-auth"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#venus-auth"}},[e._v("#")]),e._v(" venus-auth")]),e._v(" "),v("p",[e._v("影响功能：")]),e._v(" "),v("p",[e._v("依赖升级组件：无")]),e._v(" "),v("p",[e._v("注意事项：")]),e._v(" "),v("ol",[v("li",[v("code",[e._v("miners")]),e._v(" 表增加字段 "),v("code",[e._v("open_mining")]),e._v("，0 表示不出块，1 表示出块，默认是 1")])]),e._v(" "),v("h3",{attrs:{id:"venus"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#venus"}},[e._v("#")]),e._v(" venus")]),e._v(" "),v("p",[e._v("影响功能：支持 nv17 网络")]),e._v(" "),v("p",[e._v("依赖升级组件：无")]),e._v(" "),v("p",[e._v("注意事项：")]),e._v(" "),v("p",[e._v("编译：先 "),v("code",[e._v("make dist-clean")]),e._v(" 再 "),v("code",[e._v("make")]),e._v("，这样可以防止未能正常升级 "),v("code",[e._v("filecoin-ffi")]),e._v(" 而带来的问题")]),e._v(" "),v("ol",[v("li",[v("p",[e._v("升级后检查 vk 文件是否完整")])]),e._v(" "),v("li",[v("p",[e._v("升级后检查配置文件，升级高度是否正常设置，配置文件默认在 "),v("code",[e._v("~/.venus/config.json")]),e._v(" :")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('# cali\n"upgradeSkyrHeight": 16800\n# mainnet\n"upgradeSkyrHeight": 2383680\n')])])])]),e._v(" "),v("li",[v("p",[e._v("升级后需检查是否正常同步区块")])]),e._v(" "),v("li",[v("p",[e._v("检查主网 v9 actors code，确保与下面输出一样")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("./venus state actor-cids --network-version 17\n\n# 顺序可能会不一样\nNetwork Version: 17\nActor Version: 9\nActor             CID\nreward            bafk2bzacebezgbbmcm2gbcqwisus5fjvpj7hhmu5ubd37phuku3hmkfulxm2o\nsystem            bafk2bzaceagvlo2jtahj7dloshrmwfulrd6e2izqev32qm46eumf754weec6c\n_manifest         bafy2bzaceb6j6666h36xnhksu3ww4kxb6e25niayfgkdnifaqi6m6ooc66i6i\nstoragemarket     bafk2bzacec3j7p6gklk64stax5px3xxd7hdtejaepnd4nw7s2adihde6emkcu\nmultisig          bafk2bzacec4va3nmugyqjqrs3lqyr2ij67jhjia5frvx7omnh2isha6abxzya\npaymentchannel    bafk2bzacebhdvjbjcgupklddfavzef4e4gnkt3xk3rbmgfmk7xhecszhfxeds\nstoragepower      bafk2bzacedsetphfajgne4qy3vdrpyd6ekcmtfs2zkjut4r34cvnuoqemdrtw\nverifiedregistry  bafk2bzacecf3yodlyudzukumehbuabgqljyhjt5ifiv4vetcfohnvsxzynwga\ndatacap           bafk2bzacebb6uy2ys7tapekmtj7apnjg7oyj4ia5t7tlkvbmwtxwv74lb2pug\naccount           bafk2bzacect2p7urje3pylrrrjy3tngn6yaih4gtzauuatf2jllk3ksgfiw2y\ncron              bafk2bzacebcec3lffmos3nawm5cvwehssxeqwxixoyyfvejy7viszzsxzyu26\ninit              bafk2bzacebtdq4zyuxk2fzbdkva6kc4mx75mkbfmldplfntayhbl5wkqou33i\nstorageminer      bafk2bzacedyux5hlrildwutvvjdcsvjtwsoc5xnqdjl73ouiukgklekeuyfl4\n")])])])]),e._v(" "),v("li",[v("p",[e._v("若不排查问题，rust 日志级别"),v("strong",[e._v("不建议")]),e._v("设置为 "),v("code",[e._v("trace")]),e._v("，因为会打印较多日志")])]),e._v(" "),v("li",[v("p",[e._v("升级后可以通过命令来 "),v("code",[e._v("./venus state get-actor t01000")]),e._v(" 来确认是否升级成功")])])]),e._v(" "),v("h3",{attrs:{id:"venus-messager"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#venus-messager"}},[e._v("#")]),e._v(" venus-messager")]),e._v(" "),v("p",[e._v("功能：")]),e._v(" "),v("ol",[v("li",[e._v("增加对 basefee 的控制，可以对某个地址单独设置 basefee，当链上 basefee 高于限制的 basefee，消息将不会被推送出去")])]),e._v(" "),v("p",[e._v("依赖升级组件：")]),e._v(" "),v("p",[e._v("注意事项：")]),e._v(" "),v("ol",[v("li",[e._v("升级后观察消息能否正常上链")])]),e._v(" "),v("h3",{attrs:{id:"venus-miner"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#venus-miner"}},[e._v("#")]),e._v(" venus-miner")]),e._v(" "),v("p",[e._v("影响功能：")]),e._v(" "),v("p",[e._v("依赖升级组件：")]),e._v(" "),v("p",[e._v("注意事项：")]),e._v(" "),v("ol",[v("li",[e._v("从 "),v("code",[e._v("1.7.*")]),e._v("升级到"),v("code",[e._v("v1.8.0")]),e._v("会自动迁移配置文件，从 "),v("code",[e._v("1.6.*")]),e._v(" 升级到"),v("code",[e._v("v1.8.0")]),e._v("需重新初始化"),v("code",[e._v("repo")]),e._v("(init)，"),v("a",{attrs:{href:"https://github.com/filecoin-project/venus-miner/blob/master/docs/zh/CHANGELOG.md#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考"),v("OutboundLink")],1)]),e._v(" "),v("li",[e._v("升级后能否正常出块")])]),e._v(" "),v("h3",{attrs:{id:"venus-gateway"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#venus-gateway"}},[e._v("#")]),e._v(" venus-gateway")]),e._v(" "),v("p",[e._v("影响功能：")]),e._v(" "),v("p",[e._v("注意事项：")]),e._v(" "),v("p",[e._v("编译：先 "),v("code",[e._v("make dist-clean")]),e._v(" 再 "),v("code",[e._v("make")])]),e._v(" "),v("ol",[v("li",[e._v("升级后检查钱包："),v("code",[e._v("./venus-gateway wallet list")])]),e._v(" "),v("li",[e._v("升级后检查矿工："),v("code",[e._v("./venus-gateway miner list")])])]),e._v(" "),v("h3",{attrs:{id:"venus-market"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#venus-market"}},[e._v("#")]),e._v(" venus-market")]),e._v(" "),v("p",[e._v("影响功能：")]),e._v(" "),v("p",[e._v("注意事项：")]),e._v(" "),v("p",[e._v("编译：先 "),v("code",[e._v("make dist-clean")]),e._v(" 再 "),v("code",[e._v("make")])]),e._v(" "),v("h3",{attrs:{id:"venus-wallet"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#venus-wallet"}},[e._v("#")]),e._v(" venus-wallet")]),e._v(" "),v("p",[e._v("影响功能：")]),e._v(" "),v("p",[e._v("注意事项：")]),e._v(" "),v("ol",[v("li",[e._v("启动后需要解锁钱包")]),e._v(" "),v("li",[e._v("是否注册到 gateway")])])])}),[],!1,null,null,null);a.default=s.exports}}]);