(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(e){function n(n){for(var r,i,s=n[0],c=n[1],l=n[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(n);d.length;)d.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,s=1;s<t.length;s++){var c=t[s];0!==o[c]&&(r=!1)}r&&(a.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},o={1:0},a=[];function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var r=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+"assets/js/"+({}[e]||e)+"."+{2:"0bbd4042",3:"56e079c2",4:"506518be",5:"34e2ab1e",6:"14585a82",7:"48dffc11",8:"5880ef83",9:"f2fc0f61",10:"f0629376",11:"f97206d7",12:"675130ad",13:"29d03f5f",14:"e52ce5c2",15:"987eb157",16:"bb30ec13",17:"d0f11ffb",18:"12917fcb",19:"00c21b62",20:"6f5ead3f",21:"846a0b51",22:"f15c4ba3",23:"d61f9472",24:"5b92c5bd",25:"4a2e53d4",26:"7c902e8b",27:"4fe997fb",28:"11845a08",29:"66608a9c",30:"22af68d7",31:"f5d0a700",32:"f4b496d6",33:"744bc253",34:"6e235e33",35:"d6ee49fe",36:"2c5d6337",37:"3bb4c4ae",38:"71a46475",39:"956a95ec",40:"50e9288f",41:"7b0163e6",42:"2c7e7d11",43:"5b6ab3ab",44:"a6db91a1",45:"cff082c6",46:"3f7f7c20",47:"c2f09830",48:"0b0e4565",49:"a791a15d",50:"f78b3cc6",51:"b3848ef1",52:"379b6380",53:"a9819940",54:"0417d0d2",55:"dd412c48",56:"ecd1135e",57:"a2961a77",58:"4c5fcf9b",59:"db6d23f5",60:"9e52dcc3",61:"0a1724c0",62:"ec46d831"}[e]+".js"}(e);var c=new Error;a=function(n){s.onerror=s.onload=null,clearTimeout(l);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",c.name="ChunkLoadError",c.type=r,c.request=a,t[1](c)}o[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(n)},i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var u=c;a.push([197,0]),t()}([function(e,n,t){var r=t(2),o=t(20).f,a=t(13),i=t(9),s=t(78),c=t(128),l=t(74);e.exports=function(e,n){var t,u,p,d,h,f=e.target,m=e.global,g=e.stat;if(t=m?r:g?r[f]||s(f,{}):(r[f]||{}).prototype)for(u in n){if(d=n[u],p=e.noTargetGet?(h=o(t,u))&&h.value:t[u],!l(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(e.sham||p&&p.sham)&&a(d,"sham",!0),i(t,u,d,e)}}},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(e,n,t){var r=t(2),o=t(76),a=t(7),i=t(53),s=t(80),c=t(122),l=o("wks"),u=r.Symbol,p=c?u:u&&u.withoutSetter||i;e.exports=function(e){return a(l,e)||(s&&a(u,e)?l[e]=u[e]:l[e]=p("Symbol."+e)),l[e]}},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n,t){var r=t(1);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,n,t){var r=t(4);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){var r=t(5),o=t(121),a=t(6),i=t(39),s=Object.defineProperty;n.f=r?s:function(e,n,t){if(a(e),n=i(n,!0),a(t),o)try{return s(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var r=t(2),o=t(13),a=t(7),i=t(78),s=t(83),c=t(31),l=c.get,u=c.enforce,p=String(String).split("String");(e.exports=function(e,n,t,s){var c,l=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof t&&("string"!=typeof n||a(t,"name")||o(t,"name",n),(c=u(t)).source||(c.source=p.join("string"==typeof n?n:""))),e!==r?(l?!h&&e[n]&&(d=!0):delete e[n],d?e[n]=t:o(e,n,t)):d?e[n]=t:i(n,t)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},function(e,n,t){var r=t(88),o=t(9),a=t(208);r||o(Object.prototype,"toString",a,{unsafe:!0})},function(e,n,t){var r=t(38),o=t(21);e.exports=function(e){return r(o(e))}},function(e,n,t){var r=t(21);e.exports=function(e){return Object(r(e))}},function(e,n,t){var r=t(5),o=t(8),a=t(35);e.exports=r?function(e,n,t){return o.f(e,n,a(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var r=t(46),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,n){var t=Array.isArray;e.exports=t},function(e,n,t){var r=t(152),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},function(e,n,t){"use strict";function r(e,n,t,r,o,a,i,s){var c,l="function"==typeof e?e.options:e;if(n&&(l.render=n,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,n){return c.call(n),u(e,n)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:l}}t.d(n,"a",(function(){return r}))},function(e,n,t){var r=t(5),o=t(1),a=t(7),i=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,n){if(a(s,e))return s[e];n||(n={});var t=[][e],l=!!a(n,"ACCESSORS")&&n.ACCESSORS,u=a(n,0)?n[0]:c,p=a(n,1)?n[1]:void 0;return s[e]=!!t&&!o((function(){if(l&&!r)return!0;var e={length:-1};l?i(e,1,{enumerable:!0,get:c}):e[1]=1,t.call(e,u,p)}))}},function(e,n,t){var r=t(126),o=t(2),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,n){return arguments.length<2?a(r[e])||a(o[e]):r[e]&&r[e][n]||o[e]&&o[e][n]}},function(e,n,t){var r=t(5),o=t(84),a=t(35),i=t(11),s=t(39),c=t(7),l=t(121),u=Object.getOwnPropertyDescriptor;n.f=r?u:function(e,n){if(e=i(e),n=s(n,!0),l)try{return u(e,n)}catch(e){}if(c(e,n))return a(!o.f.call(e,n),e[n])}},function(e,n){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,n,t){"use strict";var r=t(0),o=t(32).filter,a=t(59),i=t(18),s=a("filter"),c=i("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n){e.exports=!1},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,n,t){var r=t(235),o=t(238);e.exports=function(e,n){var t=o(e,n);return r(t)?t:void 0}},function(e,n,t){"use strict";var r=t(114).charAt,o=t(31),a=t(127),i=o.set,s=o.getterFor("String Iterator");a(String,"String",(function(e){i(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,n=s(this),t=n.string,o=n.index;return o>=t.length?{value:void 0,done:!0}:(e=r(t,o),n.index+=e.length,{value:e,done:!1})}))},function(e,n,t){var r,o=t(6),a=t(110),i=t(82),s=t(40),c=t(125),l=t(79),u=t(55),p=u("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},f=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,n;f=r?function(e){e.write(h("")),e.close();var n=e.parentWindow.Object;return e=null,n}(r):((n=l("iframe")).style.display="none",c.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var t=i.length;t--;)delete f.prototype[i[t]];return f()};s[p]=!0,e.exports=Object.create||function(e,n){var t;return null!==e?(d.prototype=o(e),t=new d,d.prototype=null,t[p]=e):t=f(),void 0===n?t:a(t,n)}},function(e,n){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,n,t){"use strict";var r=t(0),o=t(75);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,n,t){var r,o,a,i=t(198),s=t(2),c=t(4),l=t(13),u=t(7),p=t(77),d=t(55),h=t(40),f=s.WeakMap;if(i){var m=p.state||(p.state=new f),g=m.get,v=m.has,b=m.set;r=function(e,n){return n.facade=e,b.call(m,e,n),n},o=function(e){return g.call(m,e)||{}},a=function(e){return v.call(m,e)}}else{var y=d("state");h[y]=!0,r=function(e,n){return n.facade=e,l(e,y,n),n},o=function(e){return u(e,y)?e[y]:{}},a=function(e){return u(e,y)}}e.exports={set:r,get:o,has:a,enforce:function(e){return a(e)?o(e):r(e,{})},getterFor:function(e){return function(n){var t;if(!c(n)||(t=o(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}}}},function(e,n,t){var r=t(48),o=t(38),a=t(12),i=t(14),s=t(113),c=[].push,l=function(e){var n=1==e,t=2==e,l=3==e,u=4==e,p=6==e,d=7==e,h=5==e||p;return function(f,m,g,v){for(var b,y,w=a(f),k=o(w),x=r(m,g,3),z=i(k.length),_=0,j=v||s,T=n?j(f,z):t||d?j(f,0):void 0;z>_;_++)if((h||_ in k)&&(y=x(b=k[_],_,w),e))if(n)T[_]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return _;case 2:c.call(T,b)}else switch(e){case 4:return!1;case 7:c.call(T,b)}return p?-1:l||u?u:T}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},function(e,n,t){var r=t(2),o=t(140),a=t(109),i=t(13),s=t(3),c=s("iterator"),l=s("toStringTag"),u=a.values;for(var p in o){var d=r[p],h=d&&d.prototype;if(h){if(h[c]!==u)try{i(h,c,u)}catch(e){h[c]=u}if(h[l]||i(h,l,p),o[p])for(var f in a)if(h[f]!==a[f])try{i(h,f,a[f])}catch(e){h[f]=a[f]}}}},function(e,n,t){"use strict";var r=t(1);e.exports=function(e,n){var t=[][e];return!!t&&r((function(){t.call(null,n||function(){throw 1},1)}))}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var r=t(24);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,n,t){var r=t(43),o=t(220),a=t(221),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},function(e,n,t){var r=t(1),o=t(24),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,n,t){var r=t(4);e.exports=function(e,n){if(!r(e))return e;var t,o;if(n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;if("function"==typeof(t=e.valueOf)&&!r(o=t.call(e)))return o;if(!n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports={}},function(e,n){e.exports={}},function(e,n,t){"use strict";var r=t(0),o=t(2),a=t(19),i=t(23),s=t(5),c=t(80),l=t(122),u=t(1),p=t(7),d=t(36),h=t(4),f=t(6),m=t(12),g=t(11),v=t(39),b=t(35),y=t(28),w=t(54),k=t(52),x=t(215),z=t(85),_=t(20),j=t(8),T=t(84),C=t(13),S=t(9),A=t(76),q=t(55),P=t(40),I=t(53),O=t(3),E=t(148),L=t(149),U=t(47),R=t(31),N=t(32).forEach,$=q("hidden"),F=O("toPrimitive"),D=R.set,M=R.getterFor("Symbol"),V=Object.prototype,G=o.Symbol,H=a("JSON","stringify"),B=_.f,W=j.f,K=x.f,X=T.f,Z=A("symbols"),Y=A("op-symbols"),J=A("string-to-symbol-registry"),Q=A("symbol-to-string-registry"),ee=A("wks"),ne=o.QObject,te=!ne||!ne.prototype||!ne.prototype.findChild,re=s&&u((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(e,n,t){var r=B(V,n);r&&delete V[n],W(e,n,t),r&&e!==V&&W(V,n,r)}:W,oe=function(e,n){var t=Z[e]=y(G.prototype);return D(t,{type:"Symbol",tag:e,description:n}),s||(t.description=n),t},ae=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof G},ie=function(e,n,t){e===V&&ie(Y,n,t),f(e);var r=v(n,!0);return f(t),p(Z,r)?(t.enumerable?(p(e,$)&&e[$][r]&&(e[$][r]=!1),t=y(t,{enumerable:b(0,!1)})):(p(e,$)||W(e,$,b(1,{})),e[$][r]=!0),re(e,r,t)):W(e,r,t)},se=function(e,n){f(e);var t=g(n),r=w(t).concat(pe(t));return N(r,(function(n){s&&!ce.call(t,n)||ie(e,n,t[n])})),e},ce=function(e){var n=v(e,!0),t=X.call(this,n);return!(this===V&&p(Z,n)&&!p(Y,n))&&(!(t||!p(this,n)||!p(Z,n)||p(this,$)&&this[$][n])||t)},le=function(e,n){var t=g(e),r=v(n,!0);if(t!==V||!p(Z,r)||p(Y,r)){var o=B(t,r);return!o||!p(Z,r)||p(t,$)&&t[$][r]||(o.enumerable=!0),o}},ue=function(e){var n=K(g(e)),t=[];return N(n,(function(e){p(Z,e)||p(P,e)||t.push(e)})),t},pe=function(e){var n=e===V,t=K(n?Y:g(e)),r=[];return N(t,(function(e){!p(Z,e)||n&&!p(V,e)||r.push(Z[e])})),r};(c||(S((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,n=I(e),t=function(e){this===V&&t.call(Y,e),p(this,$)&&p(this[$],n)&&(this[$][n]=!1),re(this,n,b(1,e))};return s&&te&&re(V,n,{configurable:!0,set:t}),oe(n,e)}).prototype,"toString",(function(){return M(this).tag})),S(G,"withoutSetter",(function(e){return oe(I(e),e)})),T.f=ce,j.f=ie,_.f=le,k.f=x.f=ue,z.f=pe,E.f=function(e){return oe(O(e),e)},s&&(W(G.prototype,"description",{configurable:!0,get:function(){return M(this).description}}),i||S(V,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:G}),N(w(ee),(function(e){L(e)})),r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var n=String(e);if(p(J,n))return J[n];var t=G(n);return J[n]=t,Q[t]=n,t},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(p(Q,e))return Q[e]},useSetter:function(){te=!0},useSimple:function(){te=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,n){return void 0===n?y(e):se(y(e),n)},defineProperty:ie,defineProperties:se,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ue,getOwnPropertySymbols:pe}),r({target:"Object",stat:!0,forced:u((function(){z.f(1)}))},{getOwnPropertySymbols:function(e){return z.f(m(e))}}),H)&&r({target:"JSON",stat:!0,forced:!c||u((function(){var e=G();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))},{stringify:function(e,n,t){for(var r,o=[e],a=1;arguments.length>a;)o.push(arguments[a++]);if(r=n,(h(n)||void 0!==e)&&!ae(e))return d(n)||(n=function(e,n){if("function"==typeof r&&(n=r.call(this,e,n)),!ae(n))return n}),o[1]=n,H.apply(null,o)}});G.prototype[F]||C(G.prototype,F,G.prototype.valueOf),U(G,"Symbol"),P[$]=!0},function(e,n,t){var r=t(16).Symbol;e.exports=r},function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));t(106);var r=t(45);t(42),t(62),t(89),t(150),t(10),t(27),t(33);var o=t(68);function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,"a",(function(){return r}))},function(e,n){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},function(e,n,t){var r=t(8).f,o=t(7),a=t(3)("toStringTag");e.exports=function(e,n,t){e&&!o(e=t?e:e.prototype,a)&&r(e,a,{configurable:!0,value:n})}},function(e,n,t){var r=t(25);e.exports=function(e,n,t){if(r(e),void 0===n)return e;switch(t){case 0:return function(){return e.call(n)};case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)}}return function(){return e.apply(n,arguments)}}},function(e,n,t){"use strict";var r=t(0),o=t(4),a=t(36),i=t(124),s=t(14),c=t(11),l=t(60),u=t(3),p=t(59),d=t(18),h=p("slice"),f=d("slice",{ACCESSORS:!0,0:0,1:2}),m=u("species"),g=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!h||!f},{slice:function(e,n){var t,r,u,p=c(this),d=s(p.length),h=i(e,d),f=i(void 0===n?d:n,d);if(a(p)&&("function"!=typeof(t=p.constructor)||t!==Array&&!a(t.prototype)?o(t)&&null===(t=t[m])&&(t=void 0):t=void 0,t===Array||void 0===t))return g.call(p,h,f);for(r=new(void 0===t?Array:t)(v(f-h,0)),u=0;h<f;h++,u++)h in p&&l(r,u,p[h]);return r.length=u,r}})},function(e,n,t){"use strict";var r=t(0),o=t(141);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(e,n,t){var r=t(2),o=t(140),a=t(141),i=t(13);for(var s in o){var c=r[s],l=c&&c.prototype;if(l&&l.forEach!==a)try{i(l,"forEach",a)}catch(e){l.forEach=a}}},function(e,n,t){var r=t(123),o=t(82).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,n){var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},function(e,n,t){var r=t(123),o=t(82);e.exports=Object.keys||function(e){return r(e,o)}},function(e,n,t){var r=t(76),o=t(53),a=r("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e,n,t){var r=t(19);e.exports=r("navigator","userAgent")||""},function(e,n,t){var r=t(24),o=t(2);e.exports="process"==r(o.process)},function(e,n,t){var r,o,a=t(2),i=t(56),s=a.process,c=s&&s.versions,l=c&&c.v8;l?o=(r=l.split("."))[0]+r[1]:i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},function(e,n,t){var r=t(1),o=t(3),a=t(58),i=o("species");e.exports=function(e){return a>=51||!r((function(){var n=[];return(n.constructor={})[i]=function(){return{foo:1}},1!==n[e](Boolean).foo}))}},function(e,n,t){"use strict";var r=t(39),o=t(8),a=t(35);e.exports=function(e,n,t){var i=r(n);i in e?o.f(e,i,a(0,t)):e[i]=t}},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(10);function r(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var n=this,t=arguments;return new Promise((function(o,a){var i=e.apply(n,t);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))}}},function(e,n,t){"use strict";var r=t(0),o=t(5),a=t(2),i=t(7),s=t(4),c=t(8).f,l=t(128),u=a.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var p={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof d?new u(e):void 0===e?u():u(e);return""===e&&(p[n]=!0),n};l(d,u);var h=d.prototype=u.prototype;h.constructor=d;var f=h.toString,m="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,n=f.call(e);if(i(p,e))return"";var t=m?n.slice(7,-1):n.replace(g,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:d})}},function(e,n,t){var r=t(225),o=t(226),a=t(227),i=t(228),s=t(229);function c(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},function(e,n,t){var r=t(154);e.exports=function(e,n){for(var t=e.length;t--;)if(r(e[t][0],n))return t;return-1}},function(e,n,t){var r=t(26)(Object,"create");e.exports=r},function(e,n,t){var r=t(247);e.exports=function(e,n){var t=e.__data__;return r(n)?t["string"==typeof n?"string":"hash"]:t.map}},function(e,n,t){var r=t(98);e.exports=function(e){if("string"==typeof e||r(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(150),t(49),t(116),t(90),t(10),t(107),t(27);var r=t(45);function o(e,n){if(e){if("string"==typeof e)return Object(r.a)(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(e,n):void 0}}},function(e,n){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,p=Math.max,d=Math.min,h=function(){return l.Date.now()};function f(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(f(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=f(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var s=o.test(e);return s||a.test(e)?i(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,n,t){var r,o,a,i,s,c,l=0,u=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(n){var t=r,a=o;return r=o=void 0,l=n,i=e.apply(a,t)}function y(e){return l=e,s=setTimeout(k,n),u?b(e):i}function w(e){var t=e-c;return void 0===c||t>=n||t<0||g&&e-l>=a}function k(){var e=h();if(w(e))return x(e);s=setTimeout(k,function(e){var t=n-(e-c);return g?d(t,a-(e-l)):t}(e))}function x(e){return s=void 0,v&&r?b(e):(r=o=void 0,i)}function z(){var e=h(),t=w(e);if(r=arguments,o=this,c=e,t){if(void 0===s)return y(c);if(g)return s=setTimeout(k,n),b(c)}return void 0===s&&(s=setTimeout(k,n)),i}return n=m(n)||0,f(t)&&(u=!!t.leading,a=(g="maxWait"in t)?p(m(t.maxWait)||0,n):a,v="trailing"in t?!!t.trailing:v),z.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},z.flush=function(){return void 0===s?i:x(h())},z}},function(e,n,t){var r,o;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(o="function"==typeof(r=function(){var e,n,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(e,n,t){return e<n?n:e>t?t:e}function a(e){return 100*(-1+e)}t.configure=function(e){var n,t;for(n in e)void 0!==(t=e[n])&&e.hasOwnProperty(n)&&(r[n]=t);return this},t.status=null,t.set=function(e){var n=t.isStarted();e=o(e,r.minimum,1),t.status=1===e?null:e;var c=t.render(!n),l=c.querySelector(r.barSelector),u=r.speed,p=r.easing;return c.offsetWidth,i((function(n){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(l,function(e,n,t){var o;return(o="translate3d"===r.positionUsing?{transform:"translate3d("+a(e)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+a(e)+"%,0)"}:{"margin-left":a(e)+"%"}).transition="all "+n+"ms "+t,o}(e,u,p)),1===e?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){t.remove(),n()}),u)}),u)):setTimeout(n,u)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var e=function(){setTimeout((function(){t.status&&(t.trickle(),e())}),r.trickleSpeed)};return r.trickle&&e(),this},t.done=function(e){return e||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(e){var n=t.status;return n?("number"!=typeof e&&(e=(1-n)*o(Math.random()*n,.1,.95)),n=o(n+e,0,.994),t.set(n)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},e=0,n=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&t.start(),e++,n++,r.always((function(){0==--n?(e=0,t.done()):t.set((e-n)/e)})),this):this},t.render=function(e){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=r.template;var o,i=n.querySelector(r.barSelector),c=e?"-100":a(t.status||0),u=document.querySelector(r.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(o=n.querySelector(r.spinnerSelector))&&d(o),u!=document.body&&l(u,"nprogress-custom-parent"),u.appendChild(n),n},t.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(r.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&d(e)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var e=document.body.style,n="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return n+"Perspective"in e?"translate3d":n+"Transform"in e?"translate":"margin"};var i=function(){var e=[];function n(){var t=e.shift();t&&t(n)}return function(t){e.push(t),1==e.length&&n()}}(),s=function(){var e=["Webkit","O","Moz","ms"],n={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,n){return n.toUpperCase()})),n[t]||(n[t]=function(n){var t=document.body.style;if(n in t)return n;for(var r,o=e.length,a=n.charAt(0).toUpperCase()+n.slice(1);o--;)if((r=e[o]+a)in t)return r;return n}(t))}function r(e,n,r){n=t(n),e.style[n]=r}return function(e,n){var t,o,a=arguments;if(2==a.length)for(t in n)void 0!==(o=n[t])&&n.hasOwnProperty(t)&&r(e,t,o);else r(e,a[1],a[2])}}();function c(e,n){return("string"==typeof e?e:p(e)).indexOf(" "+n+" ")>=0}function l(e,n){var t=p(e),r=t+n;c(t,n)||(e.className=r.substring(1))}function u(e,n){var t,r=p(e);c(e,n)&&(t=r.replace(" "+n+" "," "),e.className=t.substring(1,t.length-1))}function p(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return t})?r.call(n,t,n,e):r)||(e.exports=o)},function(e,n,t){"use strict";var r=t(0),o=t(32).map,a=t(59),i=t(18),s=a("map"),c=i("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";var r=t(179),o=t(6),a=t(14),i=t(46),s=t(21),c=t(184),l=t(214),u=t(180),p=Math.max,d=Math.min;r("replace",2,(function(e,n,t,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=r.REPLACE_KEEPS_$0,m=h?"$":"$0";return[function(t,r){var o=s(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,o,r):n.call(String(o),t,r)},function(e,r){if(!h&&f||"string"==typeof r&&-1===r.indexOf(m)){var s=t(n,e,this,r);if(s.done)return s.value}var g=o(e),v=String(this),b="function"==typeof r;b||(r=String(r));var y=g.global;if(y){var w=g.unicode;g.lastIndex=0}for(var k=[];;){var x=u(g,v);if(null===x)break;if(k.push(x),!y)break;""===String(x[0])&&(g.lastIndex=c(v,a(g.lastIndex),w))}for(var z,_="",j=0,T=0;T<k.length;T++){x=k[T];for(var C=String(x[0]),S=p(d(i(x.index),v.length),0),A=[],q=1;q<x.length;q++)A.push(void 0===(z=x[q])?z:String(z));var P=x.groups;if(b){var I=[C].concat(A,S,v);void 0!==P&&I.push(P);var O=String(r.apply(void 0,I))}else O=l(C,v,S,A,P,r);S>=j&&(_+=v.slice(j,S)+O,j=S+C.length)}return _+v.slice(j)}]}))},function(e,n,t){var r=t(0),o=t(12),a=t(54);r({target:"Object",stat:!0,forced:t(1)((function(){a(1)}))},{keys:function(e){return a(o(e))}})},function(e,n,t){var r=t(1),o=/#|\.prototype\./,a=function(e,n){var t=s[i(e)];return t==l||t!=c&&("function"==typeof n?r(n):!!n)},i=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},function(e,n,t){"use strict";var r,o,a=t(115),i=t(191),s=RegExp.prototype.exec,c=String.prototype.replace,l=s,u=(r=/a/,o=/b*/g,s.call(r,"a"),s.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),p=i.UNSUPPORTED_Y||i.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||p)&&(l=function(e){var n,t,r,o,i=this,l=p&&i.sticky,h=a.call(i),f=i.source,m=0,g=e;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),g=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,m++),t=new RegExp("^(?:"+f+")",h)),d&&(t=new RegExp("^"+f+"$(?!\\s)",h)),u&&(n=i.lastIndex),r=s.call(l?t:i,g),l?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:u&&r&&(i.lastIndex=i.global?r.index+r[0].length:n),d&&r&&r.length>1&&c.call(r[0],t,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=l},function(e,n,t){var r=t(23),o=t(77);(e.exports=function(e,n){return o[e]||(o[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.8.2",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,n,t){var r=t(2),o=t(78),a=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=a},function(e,n,t){var r=t(2),o=t(13);e.exports=function(e,n){try{o(r,e,n)}catch(t){r[e]=n}return n}},function(e,n,t){var r=t(2),o=t(4),a=r.document,i=o(a)&&o(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,n,t){var r=t(1);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,n,t){var r=t(11),o=t(14),a=t(124),i=function(e){return function(n,t,i){var s,c=r(n),l=o(c.length),u=a(i,l);if(e&&t!=t){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===t)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},function(e,n){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n,t){var r=t(77),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,n,t){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!r.call({1:2},1);n.f=a?function(e){var n=o(this,e);return!!n&&n.enumerable}:r},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,t){var r=t(7),o=t(12),a=t(55),i=t(131),s=a("IE_PROTO"),c=Object.prototype;e.exports=i?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,n,t){var r=t(6),o=t(199);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,t={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),n=t instanceof Array}catch(e){}return function(t,a){return r(t),o(a),n?e.call(t,a):t.__proto__=a,t}}():void 0)},function(e,n,t){var r={};r[t(3)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,n,t){t(149)("iterator")},function(e,n,t){var r=t(5),o=t(8).f,a=Function.prototype,i=a.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in a)&&o(a,"name",{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})},function(e,n,t){var r=t(219),o=t(29),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,n,t){var r=t(26)(t(16),"Map");e.exports=r},function(e,n){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},function(e,n,t){var r=t(239),o=t(246),a=t(248),i=t(249),s=t(250);function c(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}},function(e,n){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,n,t){var r=t(15),o=t(98),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,n){if(r(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!o(e))||(i.test(e)||!a.test(e)||null!=n&&e in Object(n))}},function(e,n,t){var r=t(37),o=t(29);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},function(e,n){e.exports=function(e){return e}},function(e,n,t){var r=t(0),o=t(2),a=t(56),i=[].slice,s=function(e){return function(n,t){var r=arguments.length>2,o=r?i.call(arguments,2):void 0;return e(r?function(){("function"==typeof n?n:Function(n)).apply(this,o)}:n,t)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:s(o.setTimeout),setInterval:s(o.setInterval)})},function(e,n,t){var r=t(0),o=t(5);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:t(8).f})},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(106);t(42),t(62),t(89),t(10),t(27),t(33);var r=t(68);function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return t}}(e,n)||Object(r.a)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,n,t){var r=t(3),o=t(28),a=t(8),i=r("unscopables"),s=Array.prototype;null==s[i]&&a.f(s,i,{configurable:!0,value:o(null)}),e.exports=function(e){s[i][e]=!0}},function(e,n,t){var r=t(111),o=t(41),a=t(3)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||o[r(e)]}},function(e,n,t){var r=function(e){"use strict";var n=Object.prototype,t=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{s({},"")}catch(e){s=function(e,n,t){return e[n]=t}}function c(e,n,t,r){var o=n&&n.prototype instanceof p?n:p,a=Object.create(o.prototype),i=new z(r||[]);return a._invoke=function(e,n,t){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(t.method=o,t.arg=a;;){var i=t.delegate;if(i){var s=w(i,t);if(s){if(s===u)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=l(e,n,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(e,t,i),a}function l(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function d(){}function h(){}var f={};f[o]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==n&&t.call(g,o)&&(f=g);var v=h.prototype=p.prototype=Object.create(f);function b(e){["next","throw","return"].forEach((function(n){s(e,n,(function(e){return this._invoke(n,e)}))}))}function y(e,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(e[o],e,a);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&t.call(p,"__await")?n.resolve(p.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):n.resolve(p).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function w(e,n){var t=e.iterator[n.method];if(void 0===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(t,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function k(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function x(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(t.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=v.constructor=h,h.constructor=d,d.displayName=s(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===d||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[a]=function(){return this},e.AsyncIterator=y,e.async=function(n,t,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,t,r,o),a);return e.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),s(v,i,"Generator"),v[o]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=_,z.prototype={constructor:z,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=t.call(a,"catchLoc"),c=t.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),u},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),x(t),u}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;x(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:_(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,n,t){t(0)({target:"Array",stat:!0},{isArray:t(36)})},function(e,n,t){"use strict";var r=t(9),o=t(6),a=t(1),i=t(115),s=RegExp.prototype,c=s.toString,l=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u="toString"!=c.name;(l||u)&&r(RegExp.prototype,"toString",(function(){var e=o(this),n=String(e.source),t=e.flags;return"/"+n+"/"+String(void 0===t&&e instanceof RegExp&&!("flags"in s)?i.call(e):t)}),{unsafe:!0})},function(e,n,t){"use strict";var r=t(0),o=t(1),a=t(36),i=t(4),s=t(12),c=t(14),l=t(60),u=t(113),p=t(59),d=t(3),h=t(58),f=d("isConcatSpreadable"),m=h>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),g=p("concat"),v=function(e){if(!i(e))return!1;var n=e[f];return void 0!==n?!!n:a(e)};r({target:"Array",proto:!0,forced:!m||!g},{concat:function(e){var n,t,r,o,a,i=s(this),p=u(i,0),d=0;for(n=-1,r=arguments.length;n<r;n++)if(v(a=-1===n?i:arguments[n])){if(d+(o=c(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(t=0;t<o;t++,d++)t in a&&l(p,d,a[t])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(p,d++,a)}return p.length=d,p}})},function(e,n,t){"use strict";var r=t(11),o=t(103),a=t(41),i=t(31),s=t(127),c=i.set,l=i.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,n){c(this,{type:"Array Iterator",target:r(e),index:0,kind:n})}),(function(){var e=l(this),n=e.target,t=e.kind,r=e.index++;return!n||r>=n.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:n[r],done:!1}:{value:[r,n[r]],done:!1}}),"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,n,t){var r=t(5),o=t(8),a=t(6),i=t(54);e.exports=r?Object.defineProperties:function(e,n){a(e);for(var t,r=i(n),s=r.length,c=0;s>c;)o.f(e,t=r[c++],n[t]);return e}},function(e,n,t){var r=t(88),o=t(24),a=t(3)("toStringTag"),i="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var n,t,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,n){try{return e[n]}catch(e){}}(n=Object(e),a))?t:i?o(n):"Object"==(r=o(n))&&"function"==typeof n.callee?"Arguments":r}},function(e,n,t){var r=t(6),o=t(25),a=t(3)("species");e.exports=function(e,n){var t,i=r(e).constructor;return void 0===i||null==(t=r(i)[a])?n:o(t)}},function(e,n,t){var r=t(4),o=t(36),a=t(3)("species");e.exports=function(e,n){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)?r(t)&&null===(t=t[a])&&(t=void 0):t=void 0),new(void 0===t?Array:t)(0===n?0:n)}},function(e,n,t){var r=t(46),o=t(21),a=function(e){return function(n,t){var a,i,s=String(o(n)),c=r(t),l=s.length;return c<0||c>=l?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===l||(i=s.charCodeAt(c+1))<56320||i>57343?e?s.charAt(c):a:e?s.slice(c,c+2):i-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,n,t){"use strict";var r=t(6);e.exports=function(){var e=r(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n}},function(e,n,t){var r=t(9),o=Date.prototype,a=o.toString,i=o.getTime;new Date(NaN)+""!="Invalid Date"&&r(o,"toString",(function(){var e=i.call(this);return e==e?a.call(this):"Invalid Date"}))},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n,t){var r=t(21),o="["+t(119)+"]",a=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),s=function(e){return function(n){var t=String(r(n));return 1&e&&(t=t.replace(a,"")),2&e&&(t=t.replace(i,"")),t}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,n){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));t(42),t(22),t(50),t(312),t(101),t(313),t(143),t(73),t(51);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}},function(e,n,t){var r=t(5),o=t(1),a=t(79);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var r=t(80);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,n,t){var r=t(7),o=t(11),a=t(81).indexOf,i=t(40);e.exports=function(e,n){var t,s=o(e),c=0,l=[];for(t in s)!r(i,t)&&r(s,t)&&l.push(t);for(;n.length>c;)r(s,t=n[c++])&&(~a(l,t)||l.push(t));return l}},function(e,n,t){var r=t(46),o=Math.max,a=Math.min;e.exports=function(e,n){var t=r(e);return t<0?o(t+n,0):a(t,n)}},function(e,n,t){var r=t(19);e.exports=r("document","documentElement")},function(e,n,t){var r=t(2);e.exports=r},function(e,n,t){"use strict";var r=t(0),o=t(186),a=t(86),i=t(87),s=t(47),c=t(13),l=t(9),u=t(3),p=t(23),d=t(41),h=t(130),f=h.IteratorPrototype,m=h.BUGGY_SAFARI_ITERATORS,g=u("iterator"),v=function(){return this};e.exports=function(e,n,t,u,h,b,y){o(t,n,u);var w,k,x,z=function(e){if(e===h&&S)return S;if(!m&&e in T)return T[e];switch(e){case"keys":case"values":case"entries":return function(){return new t(this,e)}}return function(){return new t(this)}},_=n+" Iterator",j=!1,T=e.prototype,C=T[g]||T["@@iterator"]||h&&T[h],S=!m&&C||z(h),A="Array"==n&&T.entries||C;if(A&&(w=a(A.call(new e)),f!==Object.prototype&&w.next&&(p||a(w)===f||(i?i(w,f):"function"!=typeof w[g]&&c(w,g,v)),s(w,_,!0,!0),p&&(d[_]=v))),"values"==h&&C&&"values"!==C.name&&(j=!0,S=function(){return C.call(this)}),p&&!y||T[g]===S||c(T,g,S),d[n]=S,h)if(k={values:z("values"),keys:b?S:z("keys"),entries:z("entries")},y)for(x in k)(m||j||!(x in T))&&l(T,x,k[x]);else r({target:n,proto:!0,forced:m||j},k);return k}},function(e,n,t){var r=t(7),o=t(129),a=t(20),i=t(8);e.exports=function(e,n){for(var t=o(n),s=i.f,c=a.f,l=0;l<t.length;l++){var u=t[l];r(e,u)||s(e,u,c(n,u))}}},function(e,n,t){var r=t(19),o=t(52),a=t(85),i=t(6);e.exports=r("Reflect","ownKeys")||function(e){var n=o.f(i(e)),t=a.f;return t?n.concat(t(e)):n}},function(e,n,t){"use strict";var r,o,a,i=t(86),s=t(13),c=t(7),l=t(3),u=t(23),p=l("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(o=i(i(a)))!==Object.prototype&&(r=o):d=!0),null==r&&(r={}),u||c(r,p)||s(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(e,n,t){var r=t(1);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,n,t){var r=t(2);e.exports=r.Promise},function(e,n,t){var r=t(3),o=t(41),a=r("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||i[a]===e)}},function(e,n,t){var r=t(6);e.exports=function(e){var n=e.return;if(void 0!==n)return r(n.call(e)).value}},function(e,n,t){var r=t(3)("iterator"),o=!1;try{var a=0,i={next:function(){return{done:!!a++}},return:function(){o=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,n){if(!n&&!o)return!1;var t=!1;try{var a={};a[r]=function(){return{next:function(){return{done:t=!0}}}},e(a)}catch(e){}return t}},function(e,n,t){var r,o,a,i=t(2),s=t(1),c=t(48),l=t(125),u=t(79),p=t(137),d=t(57),h=i.location,f=i.setImmediate,m=i.clearImmediate,g=i.process,v=i.MessageChannel,b=i.Dispatch,y=0,w={},k=function(e){if(w.hasOwnProperty(e)){var n=w[e];delete w[e],n()}},x=function(e){return function(){k(e)}},z=function(e){k(e.data)},_=function(e){i.postMessage(e+"",h.protocol+"//"+h.host)};f&&m||(f=function(e){for(var n=[],t=1;arguments.length>t;)n.push(arguments[t++]);return w[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,n)},r(y),y},m=function(e){delete w[e]},d?r=function(e){g.nextTick(x(e))}:b&&b.now?r=function(e){b.now(x(e))}:v&&!p?(a=(o=new v).port2,o.port1.onmessage=z,r=c(a.postMessage,a,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts&&h&&"file:"!==h.protocol&&!s(_)?(r=_,i.addEventListener("message",z,!1)):r="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),k(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:f,clear:m}},function(e,n,t){var r=t(56);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,n,t){var r=t(6),o=t(4),a=t(139);e.exports=function(e,n){if(r(e),o(n)&&n.constructor===e)return n;var t=a.f(e);return(0,t.resolve)(n),t.promise}},function(e,n,t){"use strict";var r=t(25),o=function(e){var n,t;this.promise=new e((function(e,r){if(void 0!==n||void 0!==t)throw TypeError("Bad Promise constructor");n=e,t=r})),this.resolve=r(n),this.reject=r(t)};e.exports.f=function(e){return new o(e)}},function(e,n){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,n,t){"use strict";var r=t(32).forEach,o=t(34),a=t(18),i=o("forEach"),s=a("forEach");e.exports=i&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,n,t){var r=t(1);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,n,t){var r=t(0),o=t(5),a=t(129),i=t(11),s=t(20),c=t(60);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var n,t,r=i(e),o=s.f,l=a(r),u={},p=0;l.length>p;)void 0!==(t=o(r,n=l[p++]))&&c(u,n,t);return u}})},function(e,n,t){var r=t(0),o=t(1),a=t(12),i=t(86),s=t(131);r({target:"Object",stat:!0,forced:o((function(){i(1)})),sham:!s},{getPrototypeOf:function(e){return i(a(e))}})},function(e,n,t){var r=t(183);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,n,t){var r=t(3)("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,"/./"[e](n)}catch(e){}}return!1}},function(e,n,t){t(0)({target:"Object",stat:!0,sham:!t(5)},{create:t(28)})},function(e,n,t){var r=t(3);n.f=r},function(e,n,t){var r=t(126),o=t(7),a=t(148),i=t(8).f;e.exports=function(e){var n=r.Symbol||(r.Symbol={});o(n,e)||i(n,e,{value:a.f(e)})}},function(e,n,t){var r=t(0),o=t(193);r({target:"Array",stat:!0,forced:!t(135)((function(e){Array.from(e)}))},{from:o})},function(e,n){e.exports=function(e,n){for(var t=-1,r=n.length,o=e.length;++t<r;)e[o+t]=n[t];return e}},function(e,n){var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},function(e,n,t){var r=t(63),o=t(230),a=t(231),i=t(232),s=t(233),c=t(234);function l(e){var n=this.__data__=new r(e);this.size=n.size}l.prototype.clear=o,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,e.exports=l},function(e,n){e.exports=function(e,n){return e===n||e!=e&&n!=n}},function(e,n,t){var r=t(37),o=t(93);e.exports=function(e){if(!o(e))return!1;var n=r(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},function(e,n){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,n,t){var r=t(251),o=t(29);e.exports=function e(n,t,a,i,s){return n===t||(null==n||null==t||!o(n)&&!o(t)?n!=n&&t!=t:r(n,t,a,i,e,s))}},function(e,n,t){var r=t(159),o=t(254),a=t(160);e.exports=function(e,n,t,i,s,c){var l=1&t,u=e.length,p=n.length;if(u!=p&&!(l&&p>u))return!1;var d=c.get(e),h=c.get(n);if(d&&h)return d==n&&h==e;var f=-1,m=!0,g=2&t?new r:void 0;for(c.set(e,n),c.set(n,e);++f<u;){var v=e[f],b=n[f];if(i)var y=l?i(b,v,f,n,e,c):i(v,b,f,e,n,c);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!o(n,(function(e,n){if(!a(g,n)&&(v===e||s(v,e,t,i,c)))return g.push(n)}))){m=!1;break}}else if(v!==b&&!s(v,b,t,i,c)){m=!1;break}}return c.delete(e),c.delete(n),m}},function(e,n,t){var r=t(94),o=t(252),a=t(253);function i(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new r;++n<t;)this.add(e[n])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,n){e.exports=function(e,n){return e.has(n)}},function(e,n,t){var r=t(264),o=t(270),a=t(165);e.exports=function(e){return a(e)?r(e):o(e)}},function(e,n,t){(function(e){var r=t(16),o=t(266),a=n&&!n.nodeType&&n,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(this,t(117)(e))},function(e,n){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},function(e,n,t){var r=t(267),o=t(268),a=t(269),i=a&&a.isTypedArray,s=i?o(i):r;e.exports=s},function(e,n,t){var r=t(155),o=t(96);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,n,t){var r=t(26)(t(16),"Set");e.exports=r},function(e,n,t){var r=t(93);e.exports=function(e){return e==e&&!r(e)}},function(e,n){e.exports=function(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in Object(t)))}}},function(e,n,t){var r=t(170),o=t(67);e.exports=function(e,n){for(var t=0,a=(n=r(n,e)).length;null!=e&&t<a;)e=e[o(n[t++])];return t&&t==a?e:void 0}},function(e,n,t){var r=t(15),o=t(97),a=t(281),i=t(284);e.exports=function(e,n){return r(e)?e:o(e,n)?[e]:a(i(e))}},function(e,n,t){},function(e,n,t){},function(e,n,t){t(0)({target:"Object",stat:!0},{setPrototypeOf:t(87)})},function(e,n,t){var r=t(0),o=t(19),a=t(25),i=t(6),s=t(4),c=t(28),l=t(321),u=t(1),p=o("Reflect","construct"),d=u((function(){function e(){}return!(p((function(){}),[],e)instanceof e)})),h=!u((function(){p((function(){}))})),f=d||h;r({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(e,n){a(e),i(n);var t=arguments.length<3?e:a(arguments[2]);if(h&&!d)return p(e,n,t);if(e==t){switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3])}var r=[null];return r.push.apply(r,n),new(l.apply(e,r))}var o=t.prototype,u=c(s(o)?o:Object.prototype),f=Function.apply.call(e,u,n);return s(f)?f:u}})},function(e,n,t){},function(e,n,t){},function(e,n,t){var r=t(217),o=t(222),a=t(293),i=t(301),s=t(310),c=t(194),l=a((function(e){var n=c(e);return s(n)&&(n=void 0),i(r(e,1,s,!0),o(n,2))}));e.exports=l},function(e,n,t){"use strict";var r=t(0),o=t(32).some,a=t(34),i=t(18),s=a("some"),c=i("some");r({target:"Array",proto:!0,forced:!s||!c},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";t(30);var r=t(9),o=t(1),a=t(3),i=t(75),s=t(13),c=a("species"),l=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),p=a("replace"),d=!!/./[p]&&""===/./[p]("a","$0"),h=!o((function(){var e=/(?:)/,n=e.exec;e.exec=function(){return n.apply(this,arguments)};var t="ab".split(e);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}));e.exports=function(e,n,t,p){var f=a(e),m=!o((function(){var n={};return n[f]=function(){return 7},7!=""[e](n)})),g=m&&!o((function(){var n=!1,t=/a/;return"split"===e&&((t={}).constructor={},t.constructor[c]=function(){return t},t.flags="",t[f]=/./[f]),t.exec=function(){return n=!0,null},t[f](""),!n}));if(!m||!g||"replace"===e&&(!l||!u||d)||"split"===e&&!h){var v=/./[f],b=t(f,""[e],(function(e,n,t,r,o){return n.exec===i?m&&!o?{done:!0,value:v.call(n,t,r)}:{done:!0,value:e.call(t,n,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=b[0],w=b[1];r(String.prototype,e,y),r(RegExp.prototype,f,2==n?function(e,n){return w.call(e,this,n)}:function(e){return w.call(e,this)})}p&&s(RegExp.prototype[f],"sham",!0)}},function(e,n,t){var r=t(24),o=t(75);e.exports=function(e,n){var t=e.exec;if("function"==typeof t){var a=t.call(e,n);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,n)}},function(e,n,t){"use strict";var r=t(0),o=t(81).indexOf,a=t(34),i=t(18),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),u=i("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?s.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n){e.exports=function(e,n,t){if(!(e instanceof n))throw TypeError("Incorrect "+(t?t+" ":"")+"invocation");return e}},function(e,n,t){var r=t(4),o=t(24),a=t(3)("match");e.exports=function(e){var n;return r(e)&&(void 0!==(n=e[a])?!!n:"RegExp"==o(e))}},function(e,n,t){"use strict";var r=t(114).charAt;e.exports=function(e,n,t){return n+(t?r(e,n).length:1)}},function(e,n,t){"use strict";var r=t(0),o=t(38),a=t(11),i=t(34),s=[].join,c=o!=Object,l=i("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},function(e,n,t){"use strict";var r=t(130).IteratorPrototype,o=t(28),a=t(35),i=t(47),s=t(41),c=function(){return this};e.exports=function(e,n,t){var l=n+" Iterator";return e.prototype=o(r,{next:a(1,t)}),i(e,l,!1,!0),s[l]=c,e}},function(e,n,t){var r=t(9);e.exports=function(e,n,t){for(var o in n)r(e,o,n[o],t);return e}},function(e,n,t){"use strict";var r=t(19),o=t(8),a=t(3),i=t(5),s=a("species");e.exports=function(e){var n=r(e),t=o.f;i&&n&&!n[s]&&t(n,s,{configurable:!0,get:function(){return this}})}},function(e,n,t){"use strict";var r=t(5),o=t(1),a=t(54),i=t(85),s=t(84),c=t(12),l=t(38),u=Object.assign,p=Object.defineProperty;e.exports=!u||o((function(){if(r&&1!==u({b:1},u(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},n={},t=Symbol();return e[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),7!=u({},e)[t]||"abcdefghijklmnopqrst"!=a(u({},n)).join("")}))?function(e,n){for(var t=c(e),o=arguments.length,u=1,p=i.f,d=s.f;o>u;)for(var h,f=l(arguments[u++]),m=p?a(f).concat(p(f)):a(f),g=m.length,v=0;g>v;)h=m[v++],r&&!d.call(f,h)||(t[h]=f[h]);return t}:u},function(e,n,t){"use strict";var r=t(0),o=t(81).includes,a=t(103);r({target:"Array",proto:!0,forced:!t(18)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(e,n,t){"use strict";var r=t(1);function o(e,n){return RegExp(e,n)}n.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,n,t){"use strict";var r=t(0),o=t(145),a=t(21);r({target:"String",proto:!0,forced:!t(146)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";var r=t(48),o=t(12),a=t(216),i=t(133),s=t(14),c=t(60),l=t(104);e.exports=function(e){var n,t,u,p,d,h,f=o(e),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,b=void 0!==v,y=l(f),w=0;if(b&&(v=r(v,g>2?arguments[2]:void 0,2)),null==y||m==Array&&i(y))for(t=new m(n=s(f.length));n>w;w++)h=b?v(f[w],w):f[w],c(t,w,h);else for(d=(p=y.call(f)).next,t=new m;!(u=d.call(p)).done;w++)h=b?a(p,v,[u.value,w],!0):u.value,c(t,w,h);return t.length=w,t}},function(e,n){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},function(e,n,t){var r=t(0),o=t(314);r({global:!0,forced:parseInt!=o},{parseInt:o})},function(e,n,t){var r=t(4),o=t(87);e.exports=function(e,n,t){var a,i;return o&&"function"==typeof(a=n.constructor)&&a!==t&&r(i=a.prototype)&&i!==t.prototype&&o(e,i),e}},function(e,n,t){e.exports=t(324)},function(e,n,t){var r=t(2),o=t(83),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(o(a))},function(e,n,t){var r=t(4);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,n,t){"use strict";var r,o,a,i,s=t(0),c=t(23),l=t(2),u=t(19),p=t(132),d=t(9),h=t(187),f=t(47),m=t(188),g=t(4),v=t(25),b=t(182),y=t(83),w=t(201),k=t(135),x=t(112),z=t(136).set,_=t(202),j=t(138),T=t(204),C=t(139),S=t(205),A=t(31),q=t(74),P=t(3),I=t(57),O=t(58),E=P("species"),L="Promise",U=A.get,R=A.set,N=A.getterFor(L),$=p,F=l.TypeError,D=l.document,M=l.process,V=u("fetch"),G=C.f,H=G,B=!!(D&&D.createEvent&&l.dispatchEvent),W="function"==typeof PromiseRejectionEvent,K=q(L,(function(){if(!(y($)!==String($))){if(66===O)return!0;if(!I&&!W)return!0}if(c&&!$.prototype.finally)return!0;if(O>=51&&/native code/.test($))return!1;var e=$.resolve(1),n=function(e){e((function(){}),(function(){}))};return(e.constructor={})[E]=n,!(e.then((function(){}))instanceof n)})),X=K||!k((function(e){$.all(e).catch((function(){}))})),Z=function(e){var n;return!(!g(e)||"function"!=typeof(n=e.then))&&n},Y=function(e,n){if(!e.notified){e.notified=!0;var t=e.reactions;_((function(){for(var r=e.value,o=1==e.state,a=0;t.length>a;){var i,s,c,l=t[a++],u=o?l.ok:l.fail,p=l.resolve,d=l.reject,h=l.domain;try{u?(o||(2===e.rejection&&ne(e),e.rejection=1),!0===u?i=r:(h&&h.enter(),i=u(r),h&&(h.exit(),c=!0)),i===l.promise?d(F("Promise-chain cycle")):(s=Z(i))?s.call(i,p,d):p(i)):d(r)}catch(e){h&&!c&&h.exit(),d(e)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Q(e)}))}},J=function(e,n,t){var r,o;B?((r=D.createEvent("Event")).promise=n,r.reason=t,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:n,reason:t},!W&&(o=l["on"+e])?o(r):"unhandledrejection"===e&&T("Unhandled promise rejection",t)},Q=function(e){z.call(l,(function(){var n,t=e.facade,r=e.value;if(ee(e)&&(n=S((function(){I?M.emit("unhandledRejection",r,t):J("unhandledrejection",t,r)})),e.rejection=I||ee(e)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){z.call(l,(function(){var n=e.facade;I?M.emit("rejectionHandled",n):J("rejectionhandled",n,e.value)}))},te=function(e,n,t){return function(r){e(n,r,t)}},re=function(e,n,t){e.done||(e.done=!0,t&&(e=t),e.value=n,e.state=2,Y(e,!0))},oe=function(e,n,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===n)throw F("Promise can't be resolved itself");var r=Z(n);r?_((function(){var t={done:!1};try{r.call(n,te(oe,t,e),te(re,t,e))}catch(n){re(t,n,e)}})):(e.value=n,e.state=1,Y(e,!1))}catch(n){re({done:!1},n,e)}}};K&&($=function(e){b(this,$,L),v(e),r.call(this);var n=U(this);try{e(te(oe,n),te(re,n))}catch(e){re(n,e)}},(r=function(e){R(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h($.prototype,{then:function(e,n){var t=N(this),r=G(x(this,$));return r.ok="function"!=typeof e||e,r.fail="function"==typeof n&&n,r.domain=I?M.domain:void 0,t.parent=!0,t.reactions.push(r),0!=t.state&&Y(t,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,n=U(e);this.promise=e,this.resolve=te(oe,n),this.reject=te(re,n)},C.f=G=function(e){return e===$||e===a?new o(e):H(e)},c||"function"!=typeof p||(i=p.prototype.then,d(p.prototype,"then",(function(e,n){var t=this;return new $((function(e,n){i.call(t,e,n)})).then(e,n)}),{unsafe:!0}),"function"==typeof V&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return j($,V.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:K},{Promise:$}),f($,L,!1,!0),m(L),a=u(L),s({target:L,stat:!0,forced:K},{reject:function(e){var n=G(this);return n.reject.call(void 0,e),n.promise}}),s({target:L,stat:!0,forced:c||K},{resolve:function(e){return j(c&&this===a?$:this,e)}}),s({target:L,stat:!0,forced:X},{all:function(e){var n=this,t=G(n),r=t.resolve,o=t.reject,a=S((function(){var t=v(n.resolve),a=[],i=0,s=1;w(e,(function(e){var c=i++,l=!1;a.push(void 0),s++,t.call(n,e).then((function(e){l||(l=!0,a[c]=e,--s||r(a))}),o)})),--s||r(a)}));return a.error&&o(a.value),t.promise},race:function(e){var n=this,t=G(n),r=t.reject,o=S((function(){var o=v(n.resolve);w(e,(function(e){o.call(n,e).then(t.resolve,r)}))}));return o.error&&r(o.value),t.promise}})},function(e,n,t){var r=t(6),o=t(133),a=t(14),i=t(48),s=t(104),c=t(134),l=function(e,n){this.stopped=e,this.result=n};e.exports=function(e,n,t){var u,p,d,h,f,m,g,v=t&&t.that,b=!(!t||!t.AS_ENTRIES),y=!(!t||!t.IS_ITERATOR),w=!(!t||!t.INTERRUPTED),k=i(n,v,1+b+w),x=function(e){return u&&c(u),new l(!0,e)},z=function(e){return b?(r(e),w?k(e[0],e[1],x):k(e[0],e[1])):w?k(e,x):k(e)};if(y)u=e;else{if("function"!=typeof(p=s(e)))throw TypeError("Target is not iterable");if(o(p)){for(d=0,h=a(e.length);h>d;d++)if((f=z(e[d]))&&f instanceof l)return f;return new l(!1)}u=p.call(e)}for(m=u.next;!(g=m.call(u)).done;){try{f=z(g.value)}catch(e){throw c(u),e}if("object"==typeof f&&f&&f instanceof l)return f}return new l(!1)}},function(e,n,t){var r,o,a,i,s,c,l,u,p=t(2),d=t(20).f,h=t(136).set,f=t(137),m=t(203),g=t(57),v=p.MutationObserver||p.WebKitMutationObserver,b=p.document,y=p.process,w=p.Promise,k=d(p,"queueMicrotask"),x=k&&k.value;x||(r=function(){var e,n;for(g&&(e=y.domain)&&e.exit();o;){n=o.fn,o=o.next;try{n()}catch(e){throw o?i():a=void 0,e}}a=void 0,e&&e.enter()},f||g||m||!v||!b?w&&w.resolve?(l=w.resolve(void 0),u=l.then,i=function(){u.call(l,r)}):i=g?function(){y.nextTick(r)}:function(){h.call(p,r)}:(s=!0,c=b.createTextNode(""),new v(r).observe(c,{characterData:!0}),i=function(){c.data=s=!s})),e.exports=x||function(e){var n={fn:e,next:void 0};a&&(a.next=n),o||(o=n,i()),a=n}},function(e,n,t){var r=t(56);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,n,t){var r=t(2);e.exports=function(e,n){var t=r.console;t&&t.error&&(1===arguments.length?t.error(e):t.error(e,n))}},function(e,n){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,n,t){var r=t(0),o=t(189);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,n,t){"use strict";var r=t(0),o=t(23),a=t(132),i=t(1),s=t(19),c=t(112),l=t(138),u=t(9);r({target:"Promise",proto:!0,real:!0,forced:!!a&&i((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var n=c(this,s("Promise")),t="function"==typeof e;return this.then(t?function(t){return l(n,e()).then((function(){return t}))}:e,t?function(t){return l(n,e()).then((function(){throw t}))}:e)}}),o||"function"!=typeof a||a.prototype.finally||u(a.prototype,"finally",s("Promise").prototype.finally)},function(e,n,t){"use strict";var r=t(88),o=t(111);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,n,t){"use strict";var r=t(0),o=t(210).left,a=t(34),i=t(18),s=t(58),c=t(57),l=a("reduce"),u=i("reduce",{1:0});r({target:"Array",proto:!0,forced:!l||!u||!c&&s>79&&s<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var r=t(25),o=t(12),a=t(38),i=t(14),s=function(e){return function(n,t,s,c){r(t);var l=o(n),u=a(l),p=i(l.length),d=e?p-1:0,h=e?-1:1;if(s<2)for(;;){if(d in u){c=u[d],d+=h;break}if(d+=h,e?d<0:p<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:p>d;d+=h)d in u&&(c=t(c,u[d],d,l));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,n,t){var r=t(0),o=t(142),a=t(1),i=t(4),s=t(212).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:a((function(){c(1)})),sham:!o},{freeze:function(e){return c&&i(e)?c(s(e)):e}})},function(e,n,t){var r=t(40),o=t(4),a=t(7),i=t(8).f,s=t(53),c=t(142),l=s("meta"),u=0,p=Object.isExtensible||function(){return!0},d=function(e){i(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,n){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,l)){if(!p(e))return"F";if(!n)return"E";d(e)}return e[l].objectID},getWeakData:function(e,n){if(!a(e,l)){if(!p(e))return!0;if(!n)return!1;d(e)}return e[l].weakData},onFreeze:function(e){return c&&h.REQUIRED&&p(e)&&!a(e,l)&&d(e),e}};r[l]=!0},function(e,n,t){"use strict";var r,o=t(0),a=t(20).f,i=t(14),s=t(145),c=t(21),l=t(146),u=t(23),p="".startsWith,d=Math.min,h=l("startsWith");o({target:"String",proto:!0,forced:!!(u||h||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!h},{startsWith:function(e){var n=String(c(this));s(e);var t=i(d(arguments.length>1?arguments[1]:void 0,n.length)),r=String(e);return p?p.call(n,r,t):n.slice(t,t+r.length)===r}})},function(e,n,t){var r=t(12),o=Math.floor,a="".replace,i=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;e.exports=function(e,n,t,c,l,u){var p=t+e.length,d=c.length,h=s;return void 0!==l&&(l=r(l),h=i),a.call(u,h,(function(r,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,t);case"'":return n.slice(p);case"<":i=l[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>d){var u=o(s/10);return 0===u?r:u<=d?void 0===c[u-1]?a.charAt(1):c[u-1]+a.charAt(1):r}i=c[s-1]}return void 0===i?"":i}))}},function(e,n,t){var r=t(11),o=t(52).f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return i&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return i.slice()}}(e):o(r(e))}},function(e,n,t){var r=t(6),o=t(134);e.exports=function(e,n,t,a){try{return a?n(r(t)[0],t[1]):n(t)}catch(n){throw o(e),n}}},function(e,n,t){var r=t(151),o=t(218);e.exports=function e(n,t,a,i,s){var c=-1,l=n.length;for(a||(a=o),s||(s=[]);++c<l;){var u=n[c];t>0&&a(u)?t>1?e(u,t-1,a,i,s):r(s,u):i||(s[s.length]=u)}return s}},function(e,n,t){var r=t(43),o=t(91),a=t(15),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},function(e,n,t){var r=t(37),o=t(29);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,n,t){var r=t(43),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var n=a.call(e,s),t=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(n?e[s]=t:delete e[s]),o}},function(e,n){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},function(e,n,t){var r=t(223),o=t(279),a=t(99),i=t(15),s=t(290);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):s(e)}},function(e,n,t){var r=t(224),o=t(278),a=t(168);e.exports=function(e){var n=o(e);return 1==n.length&&n[0][2]?a(n[0][0],n[0][1]):function(t){return t===e||r(t,e,n)}}},function(e,n,t){var r=t(153),o=t(157);e.exports=function(e,n,t,a){var i=t.length,s=i,c=!a;if(null==e)return!s;for(e=Object(e);i--;){var l=t[i];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<s;){var u=(l=t[i])[0],p=e[u],d=l[1];if(c&&l[2]){if(void 0===p&&!(u in e))return!1}else{var h=new r;if(a)var f=a(p,d,u,e,n,h);if(!(void 0===f?o(d,p,3,a,h):f))return!1}}return!0}},function(e,n){e.exports=function(){this.__data__=[],this.size=0}},function(e,n,t){var r=t(64),o=Array.prototype.splice;e.exports=function(e){var n=this.__data__,t=r(n,e);return!(t<0)&&(t==n.length-1?n.pop():o.call(n,t,1),--this.size,!0)}},function(e,n,t){var r=t(64);e.exports=function(e){var n=this.__data__,t=r(n,e);return t<0?void 0:n[t][1]}},function(e,n,t){var r=t(64);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,n,t){var r=t(64);e.exports=function(e,n){var t=this.__data__,o=r(t,e);return o<0?(++this.size,t.push([e,n])):t[o][1]=n,this}},function(e,n,t){var r=t(63);e.exports=function(){this.__data__=new r,this.size=0}},function(e,n){e.exports=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}},function(e,n){e.exports=function(e){return this.__data__.get(e)}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n,t){var r=t(63),o=t(92),a=t(94);e.exports=function(e,n){var t=this.__data__;if(t instanceof r){var i=t.__data__;if(!o||i.length<199)return i.push([e,n]),this.size=++t.size,this;t=this.__data__=new a(i)}return t.set(e,n),this.size=t.size,this}},function(e,n,t){var r=t(155),o=t(236),a=t(93),i=t(156),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,p=l.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?d:s).test(i(e))}},function(e,n,t){var r,o=t(237),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},function(e,n,t){var r=t(16)["__core-js_shared__"];e.exports=r},function(e,n){e.exports=function(e,n){return null==e?void 0:e[n]}},function(e,n,t){var r=t(240),o=t(63),a=t(92);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},function(e,n,t){var r=t(241),o=t(242),a=t(243),i=t(244),s=t(245);function c(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},function(e,n,t){var r=t(65);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,n){e.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(e,n,t){var r=t(65),o=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;if(r){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return o.call(n,e)?n[e]:void 0}},function(e,n,t){var r=t(65),o=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;return r?void 0!==n[e]:o.call(n,e)}},function(e,n,t){var r=t(65);e.exports=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=r&&void 0===n?"__lodash_hash_undefined__":n,this}},function(e,n,t){var r=t(66);e.exports=function(e){var n=r(this,e).delete(e);return this.size-=n?1:0,n}},function(e,n){e.exports=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}},function(e,n,t){var r=t(66);e.exports=function(e){return r(this,e).get(e)}},function(e,n,t){var r=t(66);e.exports=function(e){return r(this,e).has(e)}},function(e,n,t){var r=t(66);e.exports=function(e,n){var t=r(this,e),o=t.size;return t.set(e,n),this.size+=t.size==o?0:1,this}},function(e,n,t){var r=t(153),o=t(158),a=t(255),i=t(258),s=t(274),c=t(15),l=t(162),u=t(164),p="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,h,f,m){var g=c(e),v=c(n),b=g?"[object Array]":s(e),y=v?"[object Array]":s(n),w=(b="[object Arguments]"==b?p:b)==p,k=(y="[object Arguments]"==y?p:y)==p,x=b==y;if(x&&l(e)){if(!l(n))return!1;g=!0,w=!1}if(x&&!w)return m||(m=new r),g||u(e)?o(e,n,t,h,f,m):a(e,n,b,t,h,f,m);if(!(1&t)){var z=w&&d.call(e,"__wrapped__"),_=k&&d.call(n,"__wrapped__");if(z||_){var j=z?e.value():e,T=_?n.value():n;return m||(m=new r),f(j,T,t,h,m)}}return!!x&&(m||(m=new r),i(e,n,t,h,f,m))}},function(e,n){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}},function(e,n,t){var r=t(43),o=t(256),a=t(154),i=t(158),s=t(257),c=t(95),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,n,t,r,l,p,d){switch(t){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!p(new o(e),new o(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var h=s;case"[object Set]":var f=1&r;if(h||(h=c),e.size!=n.size&&!f)return!1;var m=d.get(e);if(m)return m==n;r|=2,d.set(e,n);var g=i(h(e),h(n),r,l,p,d);return d.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(n)}return!1}},function(e,n,t){var r=t(16).Uint8Array;e.exports=r},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}},function(e,n,t){var r=t(259),o=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,a,i,s){var c=1&t,l=r(e),u=l.length;if(u!=r(n).length&&!c)return!1;for(var p=u;p--;){var d=l[p];if(!(c?d in n:o.call(n,d)))return!1}var h=s.get(e),f=s.get(n);if(h&&f)return h==n&&f==e;var m=!0;s.set(e,n),s.set(n,e);for(var g=c;++p<u;){var v=e[d=l[p]],b=n[d];if(a)var y=c?a(b,v,d,n,e,s):a(v,b,d,e,n,s);if(!(void 0===y?v===b||i(v,b,t,a,s):y)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var w=e.constructor,k=n.constructor;w==k||!("constructor"in e)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(m=!1)}return s.delete(e),s.delete(n),m}},function(e,n,t){var r=t(260),o=t(261),a=t(161);e.exports=function(e){return r(e,a,o)}},function(e,n,t){var r=t(151),o=t(15);e.exports=function(e,n,t){var a=n(e);return o(e)?a:r(a,t(e))}},function(e,n,t){var r=t(262),o=t(263),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(n){return a.call(e,n)})))}:o;e.exports=s},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length,o=0,a=[];++t<r;){var i=e[t];n(i,t,e)&&(a[o++]=i)}return a}},function(e,n){e.exports=function(){return[]}},function(e,n,t){var r=t(265),o=t(91),a=t(15),i=t(162),s=t(163),c=t(164),l=Object.prototype.hasOwnProperty;e.exports=function(e,n){var t=a(e),u=!t&&o(e),p=!t&&!u&&i(e),d=!t&&!u&&!p&&c(e),h=t||u||p||d,f=h?r(e.length,String):[],m=f.length;for(var g in e)!n&&!l.call(e,g)||h&&("length"==g||p&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},function(e,n){e.exports=function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}},function(e,n){e.exports=function(){return!1}},function(e,n,t){var r=t(37),o=t(96),a=t(29),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},function(e,n){e.exports=function(e){return function(n){return e(n)}}},function(e,n,t){(function(e){var r=t(152),o=n&&!n.nodeType&&n,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}).call(this,t(117)(e))},function(e,n,t){var r=t(271),o=t(272),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var n=[];for(var t in Object(e))a.call(e,t)&&"constructor"!=t&&n.push(t);return n}},function(e,n){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},function(e,n,t){var r=t(273)(Object.keys,Object);e.exports=r},function(e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},function(e,n,t){var r=t(275),o=t(92),a=t(276),i=t(166),s=t(277),c=t(37),l=t(156),u=l(r),p=l(o),d=l(a),h=l(i),f=l(s),m=c;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||a&&"[object Promise]"!=m(a.resolve())||i&&"[object Set]"!=m(new i)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var n=c(e),t="[object Object]"==n?e.constructor:void 0,r=t?l(t):"";if(r)switch(r){case u:return"[object DataView]";case p:return"[object Map]";case d:return"[object Promise]";case h:return"[object Set]";case f:return"[object WeakMap]"}return n}),e.exports=m},function(e,n,t){var r=t(26)(t(16),"DataView");e.exports=r},function(e,n,t){var r=t(26)(t(16),"Promise");e.exports=r},function(e,n,t){var r=t(26)(t(16),"WeakMap");e.exports=r},function(e,n,t){var r=t(167),o=t(161);e.exports=function(e){for(var n=o(e),t=n.length;t--;){var a=n[t],i=e[a];n[t]=[a,i,r(i)]}return n}},function(e,n,t){var r=t(157),o=t(280),a=t(287),i=t(97),s=t(167),c=t(168),l=t(67);e.exports=function(e,n){return i(e)&&s(n)?c(l(e),n):function(t){var i=o(t,e);return void 0===i&&i===n?a(t,e):r(n,i,3)}}},function(e,n,t){var r=t(169);e.exports=function(e,n,t){var o=null==e?void 0:r(e,n);return void 0===o?t:o}},function(e,n,t){var r=t(282),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=r((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(o,(function(e,t,r,o){n.push(r?o.replace(a,"$1"):t||e)})),n}));e.exports=i},function(e,n,t){var r=t(283);e.exports=function(e){var n=r(e,(function(e){return 500===t.size&&t.clear(),e})),t=n.cache;return n}},function(e,n,t){var r=t(94);function o(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function(){var r=arguments,o=n?n.apply(this,r):r[0],a=t.cache;if(a.has(o))return a.get(o);var i=e.apply(this,r);return t.cache=a.set(o,i)||a,i};return t.cache=new(o.Cache||r),t}o.Cache=r,e.exports=o},function(e,n,t){var r=t(285);e.exports=function(e){return null==e?"":r(e)}},function(e,n,t){var r=t(43),o=t(286),a=t(15),i=t(98),s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(n){if("string"==typeof n)return n;if(a(n))return o(n,e)+"";if(i(n))return c?c.call(n):"";var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length,o=Array(r);++t<r;)o[t]=n(e[t],t,e);return o}},function(e,n,t){var r=t(288),o=t(289);e.exports=function(e,n){return null!=e&&o(e,n,r)}},function(e,n){e.exports=function(e,n){return null!=e&&n in Object(e)}},function(e,n,t){var r=t(170),o=t(91),a=t(15),i=t(163),s=t(96),c=t(67);e.exports=function(e,n,t){for(var l=-1,u=(n=r(n,e)).length,p=!1;++l<u;){var d=c(n[l]);if(!(p=null!=e&&t(e,d)))break;e=e[d]}return p||++l!=u?p:!!(u=null==e?0:e.length)&&s(u)&&i(d,u)&&(a(e)||o(e))}},function(e,n,t){var r=t(291),o=t(292),a=t(97),i=t(67);e.exports=function(e){return a(e)?r(i(e)):o(e)}},function(e,n){e.exports=function(e){return function(n){return null==n?void 0:n[e]}}},function(e,n,t){var r=t(169);e.exports=function(e){return function(n){return r(n,e)}}},function(e,n,t){var r=t(99),o=t(294),a=t(296);e.exports=function(e,n){return a(o(e,n,r),e+"")}},function(e,n,t){var r=t(295),o=Math.max;e.exports=function(e,n,t){return n=o(void 0===n?e.length-1:n,0),function(){for(var a=arguments,i=-1,s=o(a.length-n,0),c=Array(s);++i<s;)c[i]=a[n+i];i=-1;for(var l=Array(n+1);++i<n;)l[i]=a[i];return l[n]=t(c),r(e,this,l)}}},function(e,n){e.exports=function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}},function(e,n,t){var r=t(297),o=t(300)(r);e.exports=o},function(e,n,t){var r=t(298),o=t(299),a=t(99),i=o?function(e,n){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(n),writable:!0})}:a;e.exports=i},function(e,n){e.exports=function(e){return function(){return e}}},function(e,n,t){var r=t(26),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,n){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),a=16-(o-r);if(r=o,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},function(e,n,t){var r=t(159),o=t(302),a=t(307),i=t(160),s=t(308),c=t(95);e.exports=function(e,n,t){var l=-1,u=o,p=e.length,d=!0,h=[],f=h;if(t)d=!1,u=a;else if(p>=200){var m=n?null:s(e);if(m)return c(m);d=!1,u=i,f=new r}else f=n?[]:h;e:for(;++l<p;){var g=e[l],v=n?n(g):g;if(g=t||0!==g?g:0,d&&v==v){for(var b=f.length;b--;)if(f[b]===v)continue e;n&&f.push(v),h.push(g)}else u(f,v,t)||(f!==h&&f.push(v),h.push(g))}return h}},function(e,n,t){var r=t(303);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},function(e,n,t){var r=t(304),o=t(305),a=t(306);e.exports=function(e,n,t){return n==n?a(e,n,t):r(e,o,t)}},function(e,n){e.exports=function(e,n,t,r){for(var o=e.length,a=t+(r?1:-1);r?a--:++a<o;)if(n(e[a],a,e))return a;return-1}},function(e,n){e.exports=function(e){return e!=e}},function(e,n){e.exports=function(e,n,t){for(var r=t-1,o=e.length;++r<o;)if(e[r]===n)return r;return-1}},function(e,n){e.exports=function(e,n,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(n,e[r]))return!0;return!1}},function(e,n,t){var r=t(166),o=t(309),a=t(95),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},function(e,n){e.exports=function(){}},function(e,n,t){var r=t(165),o=t(29);e.exports=function(e){return o(e)&&r(e)}},function(e,n,t){},function(e,n,t){var r=t(0),o=t(5);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:t(110)})},function(e,n,t){var r=t(0),o=t(1),a=t(11),i=t(20).f,s=t(5),c=o((function(){i(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,n){return i(a(e),n)}})},function(e,n,t){var r=t(2),o=t(118).trim,a=t(119),i=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==i(a+"08")||22!==i(a+"0x16");e.exports=c?function(e,n){var t=o(String(e));return i(t,n>>>0||(s.test(t)?16:10))}:i},function(e,n,t){"use strict";t(171)},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";var r=t(5),o=t(2),a=t(74),i=t(9),s=t(7),c=t(24),l=t(196),u=t(39),p=t(1),d=t(28),h=t(52).f,f=t(20).f,m=t(8).f,g=t(118).trim,v=o.Number,b=v.prototype,y="Number"==c(d(b)),w=function(e){var n,t,r,o,a,i,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(43===(n=(l=g(l)).charCodeAt(0))||45===n){if(88===(t=l.charCodeAt(2))||120===t)return NaN}else if(48===n){switch(l.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+l}for(i=(a=l.slice(2)).length,s=0;s<i;s++)if((c=a.charCodeAt(s))<48||c>o)return NaN;return parseInt(a,r)}return+l};if(a("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,x=function(e){var n=arguments.length<1?0:e,t=this;return t instanceof x&&(y?p((function(){b.valueOf.call(t)})):"Number"!=c(t))?l(new v(w(n)),t,x):w(n)},z=r?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;z.length>_;_++)s(v,k=z[_])&&!s(x,k)&&m(x,k,f(v,k));x.prototype=b,b.constructor=x,i(o,"Number",x)}},function(e,n,t){"use strict";t(172)},function(e,n,t){},function(e,n,t){"use strict";var r=t(25),o=t(4),a=[].slice,i={},s=function(e,n,t){if(!(n in i)){for(var r=[],o=0;o<n;o++)r[o]="a["+o+"]";i[n]=Function("C,a","return new C("+r.join(",")+")")}return i[n](e,t)};e.exports=Function.bind||function(e){var n=r(this),t=a.call(arguments,1),i=function(){var r=t.concat(a.call(arguments));return this instanceof i?s(n,r.length,r):n.apply(e,r)};return o(n.prototype)&&(i.prototype=n.prototype),i}},function(e,n,t){"use strict";t(175)},function(e,n,t){"use strict";t(176)},function(e,n,t){"use strict";t.r(n);t(109),t(200),t(206),t(207),t(22),t(71),t(49),t(10),t(27),t(33),t(105);var r=t(61),o=Object.freeze({});function a(e){return null==e}function i(e){return null!=e}function s(e){return!0===e}function c(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function l(e){return null!==e&&"object"==typeof e}var u=Object.prototype.toString;function p(e){return"[object Object]"===u.call(e)}function d(e){return"[object RegExp]"===u.call(e)}function h(e){var n=parseFloat(String(e));return n>=0&&Math.floor(n)===n&&isFinite(e)}function f(e){return i(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function m(e){return null==e?"":Array.isArray(e)||p(e)&&e.toString===u?JSON.stringify(e,null,2):String(e)}function g(e){var n=parseFloat(e);return isNaN(n)?e:n}function v(e,n){for(var t=Object.create(null),r=e.split(","),o=0;o<r.length;o++)t[r[o]]=!0;return n?function(e){return t[e.toLowerCase()]}:function(e){return t[e]}}v("slot,component",!0);var b=v("key,ref,slot,slot-scope,is");function y(e,n){if(e.length){var t=e.indexOf(n);if(t>-1)return e.splice(t,1)}}var w=Object.prototype.hasOwnProperty;function k(e,n){return w.call(e,n)}function x(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var z=/-(\w)/g,_=x((function(e){return e.replace(z,(function(e,n){return n?n.toUpperCase():""}))})),j=x((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),T=/\B([A-Z])/g,C=x((function(e){return e.replace(T,"-$1").toLowerCase()}));var S=Function.prototype.bind?function(e,n){return e.bind(n)}:function(e,n){function t(t){var r=arguments.length;return r?r>1?e.apply(n,arguments):e.call(n,t):e.call(n)}return t._length=e.length,t};function A(e,n){n=n||0;for(var t=e.length-n,r=new Array(t);t--;)r[t]=e[t+n];return r}function q(e,n){for(var t in n)e[t]=n[t];return e}function P(e){for(var n={},t=0;t<e.length;t++)e[t]&&q(n,e[t]);return n}function I(e,n,t){}var O=function(e,n,t){return!1},E=function(e){return e};function L(e,n){if(e===n)return!0;var t=l(e),r=l(n);if(!t||!r)return!t&&!r&&String(e)===String(n);try{var o=Array.isArray(e),a=Array.isArray(n);if(o&&a)return e.length===n.length&&e.every((function(e,t){return L(e,n[t])}));if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();if(o||a)return!1;var i=Object.keys(e),s=Object.keys(n);return i.length===s.length&&i.every((function(t){return L(e[t],n[t])}))}catch(e){return!1}}function U(e,n){for(var t=0;t<e.length;t++)if(L(e[t],n))return t;return-1}function R(e){var n=!1;return function(){n||(n=!0,e.apply(this,arguments))}}var N=["component","directive","filter"],$=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:O,isReservedAttr:O,isUnknownElement:O,getTagNamespace:I,parsePlatformTagName:E,mustUseProp:O,async:!0,_lifecycleHooks:$},D=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function M(e,n,t,r){Object.defineProperty(e,n,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var V=new RegExp("[^"+D.source+".$_\\d]");var G,H="__proto__"in{},B="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,K=W&&WXEnvironment.platform.toLowerCase(),X=B&&window.navigator.userAgent.toLowerCase(),Z=X&&/msie|trident/.test(X),Y=X&&X.indexOf("msie 9.0")>0,J=X&&X.indexOf("edge/")>0,Q=(X&&X.indexOf("android"),X&&/iphone|ipad|ipod|ios/.test(X)||"ios"===K),ee=(X&&/chrome\/\d+/.test(X),X&&/phantomjs/.test(X),X&&X.match(/firefox\/(\d+)/)),ne={}.watch,te=!1;if(B)try{var re={};Object.defineProperty(re,"passive",{get:function(){te=!0}}),window.addEventListener("test-passive",null,re)}catch(e){}var oe=function(){return void 0===G&&(G=!B&&!W&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),G},ae=B&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ie(e){return"function"==typeof e&&/native code/.test(e.toString())}var se,ce="undefined"!=typeof Symbol&&ie(Symbol)&&"undefined"!=typeof Reflect&&ie(Reflect.ownKeys);se="undefined"!=typeof Set&&ie(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var le=I,ue=0,pe=function(){this.id=ue++,this.subs=[]};pe.prototype.addSub=function(e){this.subs.push(e)},pe.prototype.removeSub=function(e){y(this.subs,e)},pe.prototype.depend=function(){pe.target&&pe.target.addDep(this)},pe.prototype.notify=function(){var e=this.subs.slice();for(var n=0,t=e.length;n<t;n++)e[n].update()},pe.target=null;var de=[];function he(e){de.push(e),pe.target=e}function fe(){de.pop(),pe.target=de[de.length-1]}var me=function(e,n,t,r,o,a,i,s){this.tag=e,this.data=n,this.children=t,this.text=r,this.elm=o,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ge={child:{configurable:!0}};ge.child.get=function(){return this.componentInstance},Object.defineProperties(me.prototype,ge);var ve=function(e){void 0===e&&(e="");var n=new me;return n.text=e,n.isComment=!0,n};function be(e){return new me(void 0,void 0,void 0,String(e))}function ye(e){var n=new me(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return n.ns=e.ns,n.isStatic=e.isStatic,n.key=e.key,n.isComment=e.isComment,n.fnContext=e.fnContext,n.fnOptions=e.fnOptions,n.fnScopeId=e.fnScopeId,n.asyncMeta=e.asyncMeta,n.isCloned=!0,n}var we=Array.prototype,ke=Object.create(we);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var n=we[e];M(ke,e,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var o,a=n.apply(this,t),i=this.__ob__;switch(e){case"push":case"unshift":o=t;break;case"splice":o=t.slice(2)}return o&&i.observeArray(o),i.dep.notify(),a}))}));var xe=Object.getOwnPropertyNames(ke),ze=!0;function _e(e){ze=e}var je=function(e){this.value=e,this.dep=new pe,this.vmCount=0,M(e,"__ob__",this),Array.isArray(e)?(H?function(e,n){e.__proto__=n}(e,ke):function(e,n,t){for(var r=0,o=t.length;r<o;r++){var a=t[r];M(e,a,n[a])}}(e,ke,xe),this.observeArray(e)):this.walk(e)};function Te(e,n){var t;if(l(e)&&!(e instanceof me))return k(e,"__ob__")&&e.__ob__ instanceof je?t=e.__ob__:ze&&!oe()&&(Array.isArray(e)||p(e))&&Object.isExtensible(e)&&!e._isVue&&(t=new je(e)),n&&t&&t.vmCount++,t}function Ce(e,n,t,r,o){var a=new pe,i=Object.getOwnPropertyDescriptor(e,n);if(!i||!1!==i.configurable){var s=i&&i.get,c=i&&i.set;s&&!c||2!==arguments.length||(t=e[n]);var l=!o&&Te(t);Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var n=s?s.call(e):t;return pe.target&&(a.depend(),l&&(l.dep.depend(),Array.isArray(n)&&qe(n))),n},set:function(n){var r=s?s.call(e):t;n===r||n!=n&&r!=r||s&&!c||(c?c.call(e,n):t=n,l=!o&&Te(n),a.notify())}})}}function Se(e,n,t){if(Array.isArray(e)&&h(n))return e.length=Math.max(e.length,n),e.splice(n,1,t),t;if(n in e&&!(n in Object.prototype))return e[n]=t,t;var r=e.__ob__;return e._isVue||r&&r.vmCount?t:r?(Ce(r.value,n,t),r.dep.notify(),t):(e[n]=t,t)}function Ae(e,n){if(Array.isArray(e)&&h(n))e.splice(n,1);else{var t=e.__ob__;e._isVue||t&&t.vmCount||k(e,n)&&(delete e[n],t&&t.dep.notify())}}function qe(e){for(var n=void 0,t=0,r=e.length;t<r;t++)(n=e[t])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&qe(n)}je.prototype.walk=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)Ce(e,n[t])},je.prototype.observeArray=function(e){for(var n=0,t=e.length;n<t;n++)Te(e[n])};var Pe=F.optionMergeStrategies;function Ie(e,n){if(!n)return e;for(var t,r,o,a=ce?Reflect.ownKeys(n):Object.keys(n),i=0;i<a.length;i++)"__ob__"!==(t=a[i])&&(r=e[t],o=n[t],k(e,t)?r!==o&&p(r)&&p(o)&&Ie(r,o):Se(e,t,o));return e}function Oe(e,n,t){return t?function(){var r="function"==typeof n?n.call(t,t):n,o="function"==typeof e?e.call(t,t):e;return r?Ie(r,o):o}:n?e?function(){return Ie("function"==typeof n?n.call(this,this):n,"function"==typeof e?e.call(this,this):e)}:n:e}function Ee(e,n){var t=n?e?e.concat(n):Array.isArray(n)?n:[n]:e;return t?function(e){for(var n=[],t=0;t<e.length;t++)-1===n.indexOf(e[t])&&n.push(e[t]);return n}(t):t}function Le(e,n,t,r){var o=Object.create(e||null);return n?q(o,n):o}Pe.data=function(e,n,t){return t?Oe(e,n,t):n&&"function"!=typeof n?e:Oe(e,n)},$.forEach((function(e){Pe[e]=Ee})),N.forEach((function(e){Pe[e+"s"]=Le})),Pe.watch=function(e,n,t,r){if(e===ne&&(e=void 0),n===ne&&(n=void 0),!n)return Object.create(e||null);if(!e)return n;var o={};for(var a in q(o,e),n){var i=o[a],s=n[a];i&&!Array.isArray(i)&&(i=[i]),o[a]=i?i.concat(s):Array.isArray(s)?s:[s]}return o},Pe.props=Pe.methods=Pe.inject=Pe.computed=function(e,n,t,r){if(!e)return n;var o=Object.create(null);return q(o,e),n&&q(o,n),o},Pe.provide=Oe;var Ue=function(e,n){return void 0===n?e:n};function Re(e,n,t){if("function"==typeof n&&(n=n.options),function(e,n){var t=e.props;if(t){var r,o,a={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(o=t[r])&&(a[_(o)]={type:null});else if(p(t))for(var i in t)o=t[i],a[_(i)]=p(o)?o:{type:o};else 0;e.props=a}}(n),function(e,n){var t=e.inject;if(t){var r=e.inject={};if(Array.isArray(t))for(var o=0;o<t.length;o++)r[t[o]]={from:t[o]};else if(p(t))for(var a in t){var i=t[a];r[a]=p(i)?q({from:a},i):{from:i}}else 0}}(n),function(e){var n=e.directives;if(n)for(var t in n){var r=n[t];"function"==typeof r&&(n[t]={bind:r,update:r})}}(n),!n._base&&(n.extends&&(e=Re(e,n.extends,t)),n.mixins))for(var r=0,o=n.mixins.length;r<o;r++)e=Re(e,n.mixins[r],t);var a,i={};for(a in e)s(a);for(a in n)k(e,a)||s(a);function s(r){var o=Pe[r]||Ue;i[r]=o(e[r],n[r],t,r)}return i}function Ne(e,n,t,r){if("string"==typeof t){var o=e[n];if(k(o,t))return o[t];var a=_(t);if(k(o,a))return o[a];var i=j(a);return k(o,i)?o[i]:o[t]||o[a]||o[i]}}function $e(e,n,t,r){var o=n[e],a=!k(t,e),i=t[e],s=Me(Boolean,o.type);if(s>-1)if(a&&!k(o,"default"))i=!1;else if(""===i||i===C(e)){var c=Me(String,o.type);(c<0||s<c)&&(i=!0)}if(void 0===i){i=function(e,n,t){if(!k(n,"default"))return;var r=n.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[t]&&void 0!==e._props[t])return e._props[t];return"function"==typeof r&&"Function"!==Fe(n.type)?r.call(e):r}(r,o,e);var l=ze;_e(!0),Te(i),_e(l)}return i}function Fe(e){var n=e&&e.toString().match(/^\s*function (\w+)/);return n?n[1]:""}function De(e,n){return Fe(e)===Fe(n)}function Me(e,n){if(!Array.isArray(n))return De(n,e)?0:-1;for(var t=0,r=n.length;t<r;t++)if(De(n[t],e))return t;return-1}function Ve(e,n,t){he();try{if(n)for(var r=n;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var a=0;a<o.length;a++)try{if(!1===o[a].call(r,e,n,t))return}catch(e){He(e,r,"errorCaptured hook")}}He(e,n,t)}finally{fe()}}function Ge(e,n,t,r,o){var a;try{(a=t?e.apply(n,t):e.call(n))&&!a._isVue&&f(a)&&!a._handled&&(a.catch((function(e){return Ve(e,r,o+" (Promise/async)")})),a._handled=!0)}catch(e){Ve(e,r,o)}return a}function He(e,n,t){if(F.errorHandler)try{return F.errorHandler.call(null,e,n,t)}catch(n){n!==e&&Be(n,null,"config.errorHandler")}Be(e,n,t)}function Be(e,n,t){if(!B&&!W||"undefined"==typeof console)throw e;console.error(e)}var We,Ke=!1,Xe=[],Ze=!1;function Ye(){Ze=!1;var e=Xe.slice(0);Xe.length=0;for(var n=0;n<e.length;n++)e[n]()}if("undefined"!=typeof Promise&&ie(Promise)){var Je=Promise.resolve();We=function(){Je.then(Ye),Q&&setTimeout(I)},Ke=!0}else if(Z||"undefined"==typeof MutationObserver||!ie(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())We="undefined"!=typeof setImmediate&&ie(setImmediate)?function(){setImmediate(Ye)}:function(){setTimeout(Ye,0)};else{var Qe=1,en=new MutationObserver(Ye),nn=document.createTextNode(String(Qe));en.observe(nn,{characterData:!0}),We=function(){Qe=(Qe+1)%2,nn.data=String(Qe)},Ke=!0}function tn(e,n){var t;if(Xe.push((function(){if(e)try{e.call(n)}catch(e){Ve(e,n,"nextTick")}else t&&t(n)})),Ze||(Ze=!0,We()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){t=e}))}var rn=new se;function on(e){!function e(n,t){var r,o,a=Array.isArray(n);if(!a&&!l(n)||Object.isFrozen(n)||n instanceof me)return;if(n.__ob__){var i=n.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(a)for(r=n.length;r--;)e(n[r],t);else for(o=Object.keys(n),r=o.length;r--;)e(n[o[r]],t)}(e,rn),rn.clear()}var an=x((function(e){var n="&"===e.charAt(0),t="~"===(e=n?e.slice(1):e).charAt(0),r="!"===(e=t?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:t,capture:r,passive:n}}));function sn(e,n){function t(){var e=arguments,r=t.fns;if(!Array.isArray(r))return Ge(r,null,arguments,n,"v-on handler");for(var o=r.slice(),a=0;a<o.length;a++)Ge(o[a],null,e,n,"v-on handler")}return t.fns=e,t}function cn(e,n,t,r,o,i){var c,l,u,p;for(c in e)l=e[c],u=n[c],p=an(c),a(l)||(a(u)?(a(l.fns)&&(l=e[c]=sn(l,i)),s(p.once)&&(l=e[c]=o(p.name,l,p.capture)),t(p.name,l,p.capture,p.passive,p.params)):l!==u&&(u.fns=l,e[c]=u));for(c in n)a(e[c])&&r((p=an(c)).name,n[c],p.capture)}function ln(e,n,t){var r;e instanceof me&&(e=e.data.hook||(e.data.hook={}));var o=e[n];function c(){t.apply(this,arguments),y(r.fns,c)}a(o)?r=sn([c]):i(o.fns)&&s(o.merged)?(r=o).fns.push(c):r=sn([o,c]),r.merged=!0,e[n]=r}function un(e,n,t,r,o){if(i(n)){if(k(n,t))return e[t]=n[t],o||delete n[t],!0;if(k(n,r))return e[t]=n[r],o||delete n[r],!0}return!1}function pn(e){return c(e)?[be(e)]:Array.isArray(e)?function e(n,t){var r,o,l,u,p=[];for(r=0;r<n.length;r++)a(o=n[r])||"boolean"==typeof o||(l=p.length-1,u=p[l],Array.isArray(o)?o.length>0&&(dn((o=e(o,(t||"")+"_"+r))[0])&&dn(u)&&(p[l]=be(u.text+o[0].text),o.shift()),p.push.apply(p,o)):c(o)?dn(u)?p[l]=be(u.text+o):""!==o&&p.push(be(o)):dn(o)&&dn(u)?p[l]=be(u.text+o.text):(s(n._isVList)&&i(o.tag)&&a(o.key)&&i(t)&&(o.key="__vlist"+t+"_"+r+"__"),p.push(o)));return p}(e):void 0}function dn(e){return i(e)&&i(e.text)&&!1===e.isComment}function hn(e,n){if(e){for(var t=Object.create(null),r=ce?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++){var a=r[o];if("__ob__"!==a){for(var i=e[a].from,s=n;s;){if(s._provided&&k(s._provided,i)){t[a]=s._provided[i];break}s=s.$parent}if(!s)if("default"in e[a]){var c=e[a].default;t[a]="function"==typeof c?c.call(n):c}else 0}}return t}}function fn(e,n){if(!e||!e.length)return{};for(var t={},r=0,o=e.length;r<o;r++){var a=e[r],i=a.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,a.context!==n&&a.fnContext!==n||!i||null==i.slot)(t.default||(t.default=[])).push(a);else{var s=i.slot,c=t[s]||(t[s]=[]);"template"===a.tag?c.push.apply(c,a.children||[]):c.push(a)}}for(var l in t)t[l].every(mn)&&delete t[l];return t}function mn(e){return e.isComment&&!e.asyncFactory||" "===e.text}function gn(e,n,t){var r,a=Object.keys(n).length>0,i=e?!!e.$stable:!a,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(i&&t&&t!==o&&s===t.$key&&!a&&!t.$hasNormal)return t;for(var c in r={},e)e[c]&&"$"!==c[0]&&(r[c]=vn(n,c,e[c]))}else r={};for(var l in n)l in r||(r[l]=bn(n,l));return e&&Object.isExtensible(e)&&(e._normalized=r),M(r,"$stable",i),M(r,"$key",s),M(r,"$hasNormal",a),r}function vn(e,n,t){var r=function(){var e=arguments.length?t.apply(null,arguments):t({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:pn(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return t.proxy&&Object.defineProperty(e,n,{get:r,enumerable:!0,configurable:!0}),r}function bn(e,n){return function(){return e[n]}}function yn(e,n){var t,r,o,a,s;if(Array.isArray(e)||"string"==typeof e)for(t=new Array(e.length),r=0,o=e.length;r<o;r++)t[r]=n(e[r],r);else if("number"==typeof e)for(t=new Array(e),r=0;r<e;r++)t[r]=n(r+1,r);else if(l(e))if(ce&&e[Symbol.iterator]){t=[];for(var c=e[Symbol.iterator](),u=c.next();!u.done;)t.push(n(u.value,t.length)),u=c.next()}else for(a=Object.keys(e),t=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],t[r]=n(e[s],s,r);return i(t)||(t=[]),t._isVList=!0,t}function wn(e,n,t,r){var o,a=this.$scopedSlots[e];a?(t=t||{},r&&(t=q(q({},r),t)),o=a(t)||n):o=this.$slots[e]||n;var i=t&&t.slot;return i?this.$createElement("template",{slot:i},o):o}function kn(e){return Ne(this.$options,"filters",e)||E}function xn(e,n){return Array.isArray(e)?-1===e.indexOf(n):e!==n}function zn(e,n,t,r,o){var a=F.keyCodes[n]||t;return o&&r&&!F.keyCodes[n]?xn(o,r):a?xn(a,e):r?C(r)!==n:void 0}function _n(e,n,t,r,o){if(t)if(l(t)){var a;Array.isArray(t)&&(t=P(t));var i=function(i){if("class"===i||"style"===i||b(i))a=e;else{var s=e.attrs&&e.attrs.type;a=r||F.mustUseProp(n,s,i)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=_(i),l=C(i);c in a||l in a||(a[i]=t[i],o&&((e.on||(e.on={}))["update:"+i]=function(e){t[i]=e}))};for(var s in t)i(s)}else;return e}function jn(e,n){var t=this._staticTrees||(this._staticTrees=[]),r=t[e];return r&&!n||Cn(r=t[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),r}function Tn(e,n,t){return Cn(e,"__once__"+n+(t?"_"+t:""),!0),e}function Cn(e,n,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&Sn(e[r],n+"_"+r,t);else Sn(e,n,t)}function Sn(e,n,t){e.isStatic=!0,e.key=n,e.isOnce=t}function An(e,n){if(n)if(p(n)){var t=e.on=e.on?q({},e.on):{};for(var r in n){var o=t[r],a=n[r];t[r]=o?[].concat(o,a):a}}else;return e}function qn(e,n,t,r){n=n||{$stable:!t};for(var o=0;o<e.length;o++){var a=e[o];Array.isArray(a)?qn(a,n,t):a&&(a.proxy&&(a.fn.proxy=!0),n[a.key]=a.fn)}return r&&(n.$key=r),n}function Pn(e,n){for(var t=0;t<n.length;t+=2){var r=n[t];"string"==typeof r&&r&&(e[n[t]]=n[t+1])}return e}function In(e,n){return"string"==typeof e?n+e:e}function On(e){e._o=Tn,e._n=g,e._s=m,e._l=yn,e._t=wn,e._q=L,e._i=U,e._m=jn,e._f=kn,e._k=zn,e._b=_n,e._v=be,e._e=ve,e._u=qn,e._g=An,e._d=Pn,e._p=In}function En(e,n,t,r,a){var i,c=this,l=a.options;k(r,"_uid")?(i=Object.create(r))._original=r:(i=r,r=r._original);var u=s(l._compiled),p=!u;this.data=e,this.props=n,this.children=t,this.parent=r,this.listeners=e.on||o,this.injections=hn(l.inject,r),this.slots=function(){return c.$slots||gn(e.scopedSlots,c.$slots=fn(t,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return gn(e.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=gn(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,n,t,o){var a=Dn(i,e,n,t,o,p);return a&&!Array.isArray(a)&&(a.fnScopeId=l._scopeId,a.fnContext=r),a}:this._c=function(e,n,t,r){return Dn(i,e,n,t,r,p)}}function Ln(e,n,t,r,o){var a=ye(e);return a.fnContext=t,a.fnOptions=r,n.slot&&((a.data||(a.data={})).slot=n.slot),a}function Un(e,n){for(var t in n)e[_(t)]=n[t]}On(En.prototype);var Rn={init:function(e,n){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var t=e;Rn.prepatch(t,t)}else{(e.componentInstance=function(e,n){var t={_isComponent:!0,_parentVnode:e,parent:n},r=e.data.inlineTemplate;i(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new e.componentOptions.Ctor(t)}(e,Yn)).$mount(n?e.elm:void 0,n)}},prepatch:function(e,n){var t=n.componentOptions;!function(e,n,t,r,a){0;var i=r.data.scopedSlots,s=e.$scopedSlots,c=!!(i&&!i.$stable||s!==o&&!s.$stable||i&&e.$scopedSlots.$key!==i.$key),l=!!(a||e.$options._renderChildren||c);e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r);if(e.$options._renderChildren=a,e.$attrs=r.data.attrs||o,e.$listeners=t||o,n&&e.$options.props){_e(!1);for(var u=e._props,p=e.$options._propKeys||[],d=0;d<p.length;d++){var h=p[d],f=e.$options.props;u[h]=$e(h,f,n,e)}_e(!0),e.$options.propsData=n}t=t||o;var m=e.$options._parentListeners;e.$options._parentListeners=t,Zn(e,t,m),l&&(e.$slots=fn(a,r.context),e.$forceUpdate());0}(n.componentInstance=e.componentInstance,t.propsData,t.listeners,n,t.children)},insert:function(e){var n,t=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,nt(r,"mounted")),e.data.keepAlive&&(t._isMounted?((n=r)._inactive=!1,rt.push(n)):et(r,!0))},destroy:function(e){var n=e.componentInstance;n._isDestroyed||(e.data.keepAlive?function e(n,t){if(t&&(n._directInactive=!0,Qn(n)))return;if(!n._inactive){n._inactive=!0;for(var r=0;r<n.$children.length;r++)e(n.$children[r]);nt(n,"deactivated")}}(n,!0):n.$destroy())}},Nn=Object.keys(Rn);function $n(e,n,t,r,c){if(!a(e)){var u=t.$options._base;if(l(e)&&(e=u.extend(e)),"function"==typeof e){var p;if(a(e.cid)&&void 0===(e=function(e,n){if(s(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var t=Vn;t&&i(e.owners)&&-1===e.owners.indexOf(t)&&e.owners.push(t);if(s(e.loading)&&i(e.loadingComp))return e.loadingComp;if(t&&!i(e.owners)){var r=e.owners=[t],o=!0,c=null,u=null;t.$on("hook:destroyed",(function(){return y(r,t)}));var p=function(e){for(var n=0,t=r.length;n<t;n++)r[n].$forceUpdate();e&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},d=R((function(t){e.resolved=Gn(t,n),o?r.length=0:p(!0)})),h=R((function(n){i(e.errorComp)&&(e.error=!0,p(!0))})),m=e(d,h);return l(m)&&(f(m)?a(e.resolved)&&m.then(d,h):f(m.component)&&(m.component.then(d,h),i(m.error)&&(e.errorComp=Gn(m.error,n)),i(m.loading)&&(e.loadingComp=Gn(m.loading,n),0===m.delay?e.loading=!0:c=setTimeout((function(){c=null,a(e.resolved)&&a(e.error)&&(e.loading=!0,p(!1))}),m.delay||200)),i(m.timeout)&&(u=setTimeout((function(){u=null,a(e.resolved)&&h(null)}),m.timeout)))),o=!1,e.loading?e.loadingComp:e.resolved}}(p=e,u)))return function(e,n,t,r,o){var a=ve();return a.asyncFactory=e,a.asyncMeta={data:n,context:t,children:r,tag:o},a}(p,n,t,r,c);n=n||{},zt(e),i(n.model)&&function(e,n){var t=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(n.attrs||(n.attrs={}))[t]=n.model.value;var o=n.on||(n.on={}),a=o[r],s=n.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}(e.options,n);var d=function(e,n,t){var r=n.options.props;if(!a(r)){var o={},s=e.attrs,c=e.props;if(i(s)||i(c))for(var l in r){var u=C(l);un(o,c,l,u,!0)||un(o,s,l,u,!1)}return o}}(n,e);if(s(e.options.functional))return function(e,n,t,r,a){var s=e.options,c={},l=s.props;if(i(l))for(var u in l)c[u]=$e(u,l,n||o);else i(t.attrs)&&Un(c,t.attrs),i(t.props)&&Un(c,t.props);var p=new En(t,c,a,r,e),d=s.render.call(null,p._c,p);if(d instanceof me)return Ln(d,t,p.parent,s,p);if(Array.isArray(d)){for(var h=pn(d)||[],f=new Array(h.length),m=0;m<h.length;m++)f[m]=Ln(h[m],t,p.parent,s,p);return f}}(e,d,n,t,r);var h=n.on;if(n.on=n.nativeOn,s(e.options.abstract)){var m=n.slot;n={},m&&(n.slot=m)}!function(e){for(var n=e.hook||(e.hook={}),t=0;t<Nn.length;t++){var r=Nn[t],o=n[r],a=Rn[r];o===a||o&&o._merged||(n[r]=o?Fn(a,o):a)}}(n);var g=e.options.name||c;return new me("vue-component-"+e.cid+(g?"-"+g:""),n,void 0,void 0,void 0,t,{Ctor:e,propsData:d,listeners:h,tag:c,children:r},p)}}}function Fn(e,n){var t=function(t,r){e(t,r),n(t,r)};return t._merged=!0,t}function Dn(e,n,t,r,o,u){return(Array.isArray(t)||c(t))&&(o=r,r=t,t=void 0),s(u)&&(o=2),function(e,n,t,r,o){if(i(t)&&i(t.__ob__))return ve();i(t)&&i(t.is)&&(n=t.is);if(!n)return ve();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===o?r=pn(r):1===o&&(r=function(e){for(var n=0;n<e.length;n++)if(Array.isArray(e[n]))return Array.prototype.concat.apply([],e);return e}(r));var c,u;if("string"==typeof n){var p;u=e.$vnode&&e.$vnode.ns||F.getTagNamespace(n),c=F.isReservedTag(n)?new me(F.parsePlatformTagName(n),t,r,void 0,void 0,e):t&&t.pre||!i(p=Ne(e.$options,"components",n))?new me(n,t,r,void 0,void 0,e):$n(p,t,e,r,n)}else c=$n(n,t,e,r);return Array.isArray(c)?c:i(c)?(i(u)&&function e(n,t,r){n.ns=t,"foreignObject"===n.tag&&(t=void 0,r=!0);if(i(n.children))for(var o=0,c=n.children.length;o<c;o++){var l=n.children[o];i(l.tag)&&(a(l.ns)||s(r)&&"svg"!==l.tag)&&e(l,t,r)}}(c,u),i(t)&&function(e){l(e.style)&&on(e.style);l(e.class)&&on(e.class)}(t),c):ve()}(e,n,t,r,o)}var Mn,Vn=null;function Gn(e,n){return(e.__esModule||ce&&"Module"===e[Symbol.toStringTag])&&(e=e.default),l(e)?n.extend(e):e}function Hn(e){return e.isComment&&e.asyncFactory}function Bn(e){if(Array.isArray(e))for(var n=0;n<e.length;n++){var t=e[n];if(i(t)&&(i(t.componentOptions)||Hn(t)))return t}}function Wn(e,n){Mn.$on(e,n)}function Kn(e,n){Mn.$off(e,n)}function Xn(e,n){var t=Mn;return function r(){var o=n.apply(null,arguments);null!==o&&t.$off(e,r)}}function Zn(e,n,t){Mn=e,cn(n,t||{},Wn,Kn,Xn,e),Mn=void 0}var Yn=null;function Jn(e){var n=Yn;return Yn=e,function(){Yn=n}}function Qn(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function et(e,n){if(n){if(e._directInactive=!1,Qn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var t=0;t<e.$children.length;t++)et(e.$children[t]);nt(e,"activated")}}function nt(e,n){he();var t=e.$options[n],r=n+" hook";if(t)for(var o=0,a=t.length;o<a;o++)Ge(t[o],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+n),fe()}var tt=[],rt=[],ot={},at=!1,it=!1,st=0;var ct=0,lt=Date.now;if(B&&!Z){var ut=window.performance;ut&&"function"==typeof ut.now&&lt()>document.createEvent("Event").timeStamp&&(lt=function(){return ut.now()})}function pt(){var e,n;for(ct=lt(),it=!0,tt.sort((function(e,n){return e.id-n.id})),st=0;st<tt.length;st++)(e=tt[st]).before&&e.before(),n=e.id,ot[n]=null,e.run();var t=rt.slice(),r=tt.slice();st=tt.length=rt.length=0,ot={},at=it=!1,function(e){for(var n=0;n<e.length;n++)e[n]._inactive=!0,et(e[n],!0)}(t),function(e){var n=e.length;for(;n--;){var t=e[n],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&nt(r,"updated")}}(r),ae&&F.devtools&&ae.emit("flush")}var dt=0,ht=function(e,n,t,r,o){this.vm=e,o&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++dt,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"==typeof n?this.getter=n:(this.getter=function(e){if(!V.test(e)){var n=e.split(".");return function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}}(n),this.getter||(this.getter=I)),this.value=this.lazy?void 0:this.get()};ht.prototype.get=function(){var e;he(this);var n=this.vm;try{e=this.getter.call(n,n)}catch(e){if(!this.user)throw e;Ve(e,n,'getter for watcher "'+this.expression+'"')}finally{this.deep&&on(e),fe(),this.cleanupDeps()}return e},ht.prototype.addDep=function(e){var n=e.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(e),this.depIds.has(n)||e.addSub(this))},ht.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var n=this.deps[e];this.newDepIds.has(n.id)||n.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},ht.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var n=e.id;if(null==ot[n]){if(ot[n]=!0,it){for(var t=tt.length-1;t>st&&tt[t].id>e.id;)t--;tt.splice(t+1,0,e)}else tt.push(e);at||(at=!0,tn(pt))}}(this)},ht.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var n=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,n)}catch(e){Ve(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,n)}}},ht.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ht.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},ht.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var ft={enumerable:!0,configurable:!0,get:I,set:I};function mt(e,n,t){ft.get=function(){return this[n][t]},ft.set=function(e){this[n][t]=e},Object.defineProperty(e,t,ft)}function gt(e){e._watchers=[];var n=e.$options;n.props&&function(e,n){var t=e.$options.propsData||{},r=e._props={},o=e.$options._propKeys=[];e.$parent&&_e(!1);var a=function(a){o.push(a);var i=$e(a,n,t,e);Ce(r,a,i),a in e||mt(e,"_props",a)};for(var i in n)a(i);_e(!0)}(e,n.props),n.methods&&function(e,n){e.$options.props;for(var t in n)e[t]="function"!=typeof n[t]?I:S(n[t],e)}(e,n.methods),n.data?function(e){var n=e.$options.data;p(n=e._data="function"==typeof n?function(e,n){he();try{return e.call(n,n)}catch(e){return Ve(e,n,"data()"),{}}finally{fe()}}(n,e):n||{})||(n={});var t=Object.keys(n),r=e.$options.props,o=(e.$options.methods,t.length);for(;o--;){var a=t[o];0,r&&k(r,a)||(i=void 0,36!==(i=(a+"").charCodeAt(0))&&95!==i&&mt(e,"_data",a))}var i;Te(n,!0)}(e):Te(e._data={},!0),n.computed&&function(e,n){var t=e._computedWatchers=Object.create(null),r=oe();for(var o in n){var a=n[o],i="function"==typeof a?a:a.get;0,r||(t[o]=new ht(e,i||I,I,vt)),o in e||bt(e,o,a)}}(e,n.computed),n.watch&&n.watch!==ne&&function(e,n){for(var t in n){var r=n[t];if(Array.isArray(r))for(var o=0;o<r.length;o++)kt(e,t,r[o]);else kt(e,t,r)}}(e,n.watch)}var vt={lazy:!0};function bt(e,n,t){var r=!oe();"function"==typeof t?(ft.get=r?yt(n):wt(t),ft.set=I):(ft.get=t.get?r&&!1!==t.cache?yt(n):wt(t.get):I,ft.set=t.set||I),Object.defineProperty(e,n,ft)}function yt(e){return function(){var n=this._computedWatchers&&this._computedWatchers[e];if(n)return n.dirty&&n.evaluate(),pe.target&&n.depend(),n.value}}function wt(e){return function(){return e.call(this,this)}}function kt(e,n,t,r){return p(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=e[t]),e.$watch(n,t,r)}var xt=0;function zt(e){var n=e.options;if(e.super){var t=zt(e.super);if(t!==e.superOptions){e.superOptions=t;var r=function(e){var n,t=e.options,r=e.sealedOptions;for(var o in t)t[o]!==r[o]&&(n||(n={}),n[o]=t[o]);return n}(e);r&&q(e.extendOptions,r),(n=e.options=Re(t,e.extendOptions)).name&&(n.components[n.name]=e)}}return n}function _t(e){this._init(e)}function jt(e){e.cid=0;var n=1;e.extend=function(e){e=e||{};var t=this,r=t.cid,o=e._Ctor||(e._Ctor={});if(o[r])return o[r];var a=e.name||t.options.name;var i=function(e){this._init(e)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.cid=n++,i.options=Re(t.options,e),i.super=t,i.options.props&&function(e){var n=e.options.props;for(var t in n)mt(e.prototype,"_props",t)}(i),i.options.computed&&function(e){var n=e.options.computed;for(var t in n)bt(e.prototype,t,n[t])}(i),i.extend=t.extend,i.mixin=t.mixin,i.use=t.use,N.forEach((function(e){i[e]=t[e]})),a&&(i.options.components[a]=i),i.superOptions=t.options,i.extendOptions=e,i.sealedOptions=q({},i.options),o[r]=i,i}}function Tt(e){return e&&(e.Ctor.options.name||e.tag)}function Ct(e,n){return Array.isArray(e)?e.indexOf(n)>-1:"string"==typeof e?e.split(",").indexOf(n)>-1:!!d(e)&&e.test(n)}function St(e,n){var t=e.cache,r=e.keys,o=e._vnode;for(var a in t){var i=t[a];if(i){var s=Tt(i.componentOptions);s&&!n(s)&&At(t,a,r,o)}}}function At(e,n,t,r){var o=e[n];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),e[n]=null,y(t,n)}_t.prototype._init=function(e){var n=this;n._uid=xt++,n._isVue=!0,e&&e._isComponent?function(e,n){var t=e.$options=Object.create(e.constructor.options),r=n._parentVnode;t.parent=n.parent,t._parentVnode=r;var o=r.componentOptions;t.propsData=o.propsData,t._parentListeners=o.listeners,t._renderChildren=o.children,t._componentTag=o.tag,n.render&&(t.render=n.render,t.staticRenderFns=n.staticRenderFns)}(n,e):n.$options=Re(zt(n.constructor),e||{},n),n._renderProxy=n,n._self=n,function(e){var n=e.$options,t=n.parent;if(t&&!n.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(e)}e.$parent=t,e.$root=t?t.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(n),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var n=e.$options._parentListeners;n&&Zn(e,n)}(n),function(e){e._vnode=null,e._staticTrees=null;var n=e.$options,t=e.$vnode=n._parentVnode,r=t&&t.context;e.$slots=fn(n._renderChildren,r),e.$scopedSlots=o,e._c=function(n,t,r,o){return Dn(e,n,t,r,o,!1)},e.$createElement=function(n,t,r,o){return Dn(e,n,t,r,o,!0)};var a=t&&t.data;Ce(e,"$attrs",a&&a.attrs||o,null,!0),Ce(e,"$listeners",n._parentListeners||o,null,!0)}(n),nt(n,"beforeCreate"),function(e){var n=hn(e.$options.inject,e);n&&(_e(!1),Object.keys(n).forEach((function(t){Ce(e,t,n[t])})),_e(!0))}(n),gt(n),function(e){var n=e.$options.provide;n&&(e._provided="function"==typeof n?n.call(e):n)}(n),nt(n,"created"),n.$options.el&&n.$mount(n.$options.el)},function(e){var n={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",n),Object.defineProperty(e.prototype,"$props",t),e.prototype.$set=Se,e.prototype.$delete=Ae,e.prototype.$watch=function(e,n,t){if(p(n))return kt(this,e,n,t);(t=t||{}).user=!0;var r=new ht(this,e,n,t);if(t.immediate)try{n.call(this,r.value)}catch(e){Ve(e,this,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}(_t),function(e){var n=/^hook:/;e.prototype.$on=function(e,t){var r=this;if(Array.isArray(e))for(var o=0,a=e.length;o<a;o++)r.$on(e[o],t);else(r._events[e]||(r._events[e]=[])).push(t),n.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,n){var t=this;function r(){t.$off(e,r),n.apply(t,arguments)}return r.fn=n,t.$on(e,r),t},e.prototype.$off=function(e,n){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(e)){for(var r=0,o=e.length;r<o;r++)t.$off(e[r],n);return t}var a,i=t._events[e];if(!i)return t;if(!n)return t._events[e]=null,t;for(var s=i.length;s--;)if((a=i[s])===n||a.fn===n){i.splice(s,1);break}return t},e.prototype.$emit=function(e){var n=this,t=n._events[e];if(t){t=t.length>1?A(t):t;for(var r=A(arguments,1),o='event handler for "'+e+'"',a=0,i=t.length;a<i;a++)Ge(t[a],n,r,n,o)}return n}}(_t),function(e){e.prototype._update=function(e,n){var t=this,r=t.$el,o=t._vnode,a=Jn(t);t._vnode=e,t.$el=o?t.__patch__(o,e):t.__patch__(t.$el,e,n,!1),a(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){nt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var n=e.$parent;!n||n._isBeingDestroyed||e.$options.abstract||y(n.$children,e),e._watcher&&e._watcher.teardown();for(var t=e._watchers.length;t--;)e._watchers[t].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),nt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(_t),function(e){On(e.prototype),e.prototype.$nextTick=function(e){return tn(e,this)},e.prototype._render=function(){var e,n=this,t=n.$options,r=t.render,o=t._parentVnode;o&&(n.$scopedSlots=gn(o.data.scopedSlots,n.$slots,n.$scopedSlots)),n.$vnode=o;try{Vn=n,e=r.call(n._renderProxy,n.$createElement)}catch(t){Ve(t,n,"render"),e=n._vnode}finally{Vn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof me||(e=ve()),e.parent=o,e}}(_t);var qt=[String,RegExp,Array],Pt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:qt,exclude:qt,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)At(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(n){St(e,(function(e){return Ct(n,e)}))})),this.$watch("exclude",(function(n){St(e,(function(e){return!Ct(n,e)}))}))},render:function(){var e=this.$slots.default,n=Bn(e),t=n&&n.componentOptions;if(t){var r=Tt(t),o=this.include,a=this.exclude;if(o&&(!r||!Ct(o,r))||a&&r&&Ct(a,r))return n;var i=this.cache,s=this.keys,c=null==n.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):n.key;i[c]?(n.componentInstance=i[c].componentInstance,y(s,c),s.push(c)):(i[c]=n,s.push(c),this.max&&s.length>parseInt(this.max)&&At(i,s[0],s,this._vnode)),n.data.keepAlive=!0}return n||e&&e[0]}}};!function(e){var n={get:function(){return F}};Object.defineProperty(e,"config",n),e.util={warn:le,extend:q,mergeOptions:Re,defineReactive:Ce},e.set=Se,e.delete=Ae,e.nextTick=tn,e.observable=function(e){return Te(e),e},e.options=Object.create(null),N.forEach((function(n){e.options[n+"s"]=Object.create(null)})),e.options._base=e,q(e.options.components,Pt),function(e){e.use=function(e){var n=this._installedPlugins||(this._installedPlugins=[]);if(n.indexOf(e)>-1)return this;var t=A(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):"function"==typeof e&&e.apply(null,t),n.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Re(this.options,e),this}}(e),jt(e),function(e){N.forEach((function(n){e[n]=function(e,t){return t?("component"===n&&p(t)&&(t.name=t.name||e,t=this.options._base.extend(t)),"directive"===n&&"function"==typeof t&&(t={bind:t,update:t}),this.options[n+"s"][e]=t,t):this.options[n+"s"][e]}}))}(e)}(_t),Object.defineProperty(_t.prototype,"$isServer",{get:oe}),Object.defineProperty(_t.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(_t,"FunctionalRenderContext",{value:En}),_t.version="2.6.12";var It=v("style,class"),Ot=v("input,textarea,option,select,progress"),Et=v("contenteditable,draggable,spellcheck"),Lt=v("events,caret,typing,plaintext-only"),Ut=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Rt="http://www.w3.org/1999/xlink",Nt=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},$t=function(e){return Nt(e)?e.slice(6,e.length):""},Ft=function(e){return null==e||!1===e};function Dt(e){for(var n=e.data,t=e,r=e;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(n=Mt(r.data,n));for(;i(t=t.parent);)t&&t.data&&(n=Mt(n,t.data));return function(e,n){if(i(e)||i(n))return Vt(e,Gt(n));return""}(n.staticClass,n.class)}function Mt(e,n){return{staticClass:Vt(e.staticClass,n.staticClass),class:i(e.class)?[e.class,n.class]:n.class}}function Vt(e,n){return e?n?e+" "+n:e:n||""}function Gt(e){return Array.isArray(e)?function(e){for(var n,t="",r=0,o=e.length;r<o;r++)i(n=Gt(e[r]))&&""!==n&&(t&&(t+=" "),t+=n);return t}(e):l(e)?function(e){var n="";for(var t in e)e[t]&&(n&&(n+=" "),n+=t);return n}(e):"string"==typeof e?e:""}var Ht={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Bt=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Wt=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Kt=function(e){return Bt(e)||Wt(e)};var Xt=Object.create(null);var Zt=v("text,number,password,search,email,tel,url");var Yt=Object.freeze({createElement:function(e,n){var t=document.createElement(e);return"select"!==e||n.data&&n.data.attrs&&void 0!==n.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(e,n){return document.createElementNS(Ht[e],n)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,n,t){e.insertBefore(n,t)},removeChild:function(e,n){e.removeChild(n)},appendChild:function(e,n){e.appendChild(n)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,n){e.textContent=n},setStyleScope:function(e,n){e.setAttribute(n,"")}}),Jt={create:function(e,n){Qt(n)},update:function(e,n){e.data.ref!==n.data.ref&&(Qt(e,!0),Qt(n))},destroy:function(e){Qt(e,!0)}};function Qt(e,n){var t=e.data.ref;if(i(t)){var r=e.context,o=e.componentInstance||e.elm,a=r.$refs;n?Array.isArray(a[t])?y(a[t],o):a[t]===o&&(a[t]=void 0):e.data.refInFor?Array.isArray(a[t])?a[t].indexOf(o)<0&&a[t].push(o):a[t]=[o]:a[t]=o}}var er=new me("",{},[]),nr=["create","activate","update","remove","destroy"];function tr(e,n){return e.key===n.key&&(e.tag===n.tag&&e.isComment===n.isComment&&i(e.data)===i(n.data)&&function(e,n){if("input"!==e.tag)return!0;var t,r=i(t=e.data)&&i(t=t.attrs)&&t.type,o=i(t=n.data)&&i(t=t.attrs)&&t.type;return r===o||Zt(r)&&Zt(o)}(e,n)||s(e.isAsyncPlaceholder)&&e.asyncFactory===n.asyncFactory&&a(n.asyncFactory.error))}function rr(e,n,t){var r,o,a={};for(r=n;r<=t;++r)i(o=e[r].key)&&(a[o]=r);return a}var or={create:ar,update:ar,destroy:function(e){ar(e,er)}};function ar(e,n){(e.data.directives||n.data.directives)&&function(e,n){var t,r,o,a=e===er,i=n===er,s=sr(e.data.directives,e.context),c=sr(n.data.directives,n.context),l=[],u=[];for(t in c)r=s[t],o=c[t],r?(o.oldValue=r.value,o.oldArg=r.arg,lr(o,"update",n,e),o.def&&o.def.componentUpdated&&u.push(o)):(lr(o,"bind",n,e),o.def&&o.def.inserted&&l.push(o));if(l.length){var p=function(){for(var t=0;t<l.length;t++)lr(l[t],"inserted",n,e)};a?ln(n,"insert",p):p()}u.length&&ln(n,"postpatch",(function(){for(var t=0;t<u.length;t++)lr(u[t],"componentUpdated",n,e)}));if(!a)for(t in s)c[t]||lr(s[t],"unbind",e,e,i)}(e,n)}var ir=Object.create(null);function sr(e,n){var t,r,o=Object.create(null);if(!e)return o;for(t=0;t<e.length;t++)(r=e[t]).modifiers||(r.modifiers=ir),o[cr(r)]=r,r.def=Ne(n.$options,"directives",r.name);return o}function cr(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function lr(e,n,t,r,o){var a=e.def&&e.def[n];if(a)try{a(t.elm,e,t,r,o)}catch(r){Ve(r,t.context,"directive "+e.name+" "+n+" hook")}}var ur=[Jt,or];function pr(e,n){var t=n.componentOptions;if(!(i(t)&&!1===t.Ctor.options.inheritAttrs||a(e.data.attrs)&&a(n.data.attrs))){var r,o,s=n.elm,c=e.data.attrs||{},l=n.data.attrs||{};for(r in i(l.__ob__)&&(l=n.data.attrs=q({},l)),l)o=l[r],c[r]!==o&&dr(s,r,o);for(r in(Z||J)&&l.value!==c.value&&dr(s,"value",l.value),c)a(l[r])&&(Nt(r)?s.removeAttributeNS(Rt,$t(r)):Et(r)||s.removeAttribute(r))}}function dr(e,n,t){e.tagName.indexOf("-")>-1?hr(e,n,t):Ut(n)?Ft(t)?e.removeAttribute(n):(t="allowfullscreen"===n&&"EMBED"===e.tagName?"true":n,e.setAttribute(n,t)):Et(n)?e.setAttribute(n,function(e,n){return Ft(n)||"false"===n?"false":"contenteditable"===e&&Lt(n)?n:"true"}(n,t)):Nt(n)?Ft(t)?e.removeAttributeNS(Rt,$t(n)):e.setAttributeNS(Rt,n,t):hr(e,n,t)}function hr(e,n,t){if(Ft(t))e.removeAttribute(n);else{if(Z&&!Y&&"TEXTAREA"===e.tagName&&"placeholder"===n&&""!==t&&!e.__ieph){var r=function(n){n.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(n,t)}}var fr={create:pr,update:pr};function mr(e,n){var t=n.elm,r=n.data,o=e.data;if(!(a(r.staticClass)&&a(r.class)&&(a(o)||a(o.staticClass)&&a(o.class)))){var s=Dt(n),c=t._transitionClasses;i(c)&&(s=Vt(s,Gt(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var gr,vr={create:mr,update:mr};function br(e,n,t){var r=gr;return function o(){var a=n.apply(null,arguments);null!==a&&kr(e,o,t,r)}}var yr=Ke&&!(ee&&Number(ee[1])<=53);function wr(e,n,t,r){if(yr){var o=ct,a=n;n=a._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=o||e.timeStamp<=0||e.target.ownerDocument!==document)return a.apply(this,arguments)}}gr.addEventListener(e,n,te?{capture:t,passive:r}:t)}function kr(e,n,t,r){(r||gr).removeEventListener(e,n._wrapper||n,t)}function xr(e,n){if(!a(e.data.on)||!a(n.data.on)){var t=n.data.on||{},r=e.data.on||{};gr=n.elm,function(e){if(i(e.__r)){var n=Z?"change":"input";e[n]=[].concat(e.__r,e[n]||[]),delete e.__r}i(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(t),cn(t,r,wr,kr,br,n.context),gr=void 0}}var zr,_r={create:xr,update:xr};function jr(e,n){if(!a(e.data.domProps)||!a(n.data.domProps)){var t,r,o=n.elm,s=e.data.domProps||{},c=n.data.domProps||{};for(t in i(c.__ob__)&&(c=n.data.domProps=q({},c)),s)t in c||(o[t]="");for(t in c){if(r=c[t],"textContent"===t||"innerHTML"===t){if(n.children&&(n.children.length=0),r===s[t])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===t&&"PROGRESS"!==o.tagName){o._value=r;var l=a(r)?"":String(r);Tr(o,l)&&(o.value=l)}else if("innerHTML"===t&&Wt(o.tagName)&&a(o.innerHTML)){(zr=zr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var u=zr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}else if(r!==s[t])try{o[t]=r}catch(e){}}}}function Tr(e,n){return!e.composing&&("OPTION"===e.tagName||function(e,n){var t=!0;try{t=document.activeElement!==e}catch(e){}return t&&e.value!==n}(e,n)||function(e,n){var t=e.value,r=e._vModifiers;if(i(r)){if(r.number)return g(t)!==g(n);if(r.trim)return t.trim()!==n.trim()}return t!==n}(e,n))}var Cr={create:jr,update:jr},Sr=x((function(e){var n={},t=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(t);r.length>1&&(n[r[0].trim()]=r[1].trim())}})),n}));function Ar(e){var n=qr(e.style);return e.staticStyle?q(e.staticStyle,n):n}function qr(e){return Array.isArray(e)?P(e):"string"==typeof e?Sr(e):e}var Pr,Ir=/^--/,Or=/\s*!important$/,Er=function(e,n,t){if(Ir.test(n))e.style.setProperty(n,t);else if(Or.test(t))e.style.setProperty(C(n),t.replace(Or,""),"important");else{var r=Ur(n);if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++)e.style[r]=t[o];else e.style[r]=t}},Lr=["Webkit","Moz","ms"],Ur=x((function(e){if(Pr=Pr||document.createElement("div").style,"filter"!==(e=_(e))&&e in Pr)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),t=0;t<Lr.length;t++){var r=Lr[t]+n;if(r in Pr)return r}}));function Rr(e,n){var t=n.data,r=e.data;if(!(a(t.staticStyle)&&a(t.style)&&a(r.staticStyle)&&a(r.style))){var o,s,c=n.elm,l=r.staticStyle,u=r.normalizedStyle||r.style||{},p=l||u,d=qr(n.data.style)||{};n.data.normalizedStyle=i(d.__ob__)?q({},d):d;var h=function(e,n){var t,r={};if(n)for(var o=e;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(t=Ar(o.data))&&q(r,t);(t=Ar(e.data))&&q(r,t);for(var a=e;a=a.parent;)a.data&&(t=Ar(a.data))&&q(r,t);return r}(n,!0);for(s in p)a(h[s])&&Er(c,s,"");for(s in h)(o=h[s])!==p[s]&&Er(c,s,null==o?"":o)}}var Nr={create:Rr,update:Rr},$r=/\s+/;function Fr(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split($r).forEach((function(n){return e.classList.add(n)})):e.classList.add(n);else{var t=" "+(e.getAttribute("class")||"")+" ";t.indexOf(" "+n+" ")<0&&e.setAttribute("class",(t+n).trim())}}function Dr(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split($r).forEach((function(n){return e.classList.remove(n)})):e.classList.remove(n),e.classList.length||e.removeAttribute("class");else{for(var t=" "+(e.getAttribute("class")||"")+" ",r=" "+n+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?e.setAttribute("class",t):e.removeAttribute("class")}}function Mr(e){if(e){if("object"==typeof e){var n={};return!1!==e.css&&q(n,Vr(e.name||"v")),q(n,e),n}return"string"==typeof e?Vr(e):void 0}}var Vr=x((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Gr=B&&!Y,Hr="transition",Br="transitionend",Wr="animation",Kr="animationend";Gr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Hr="WebkitTransition",Br="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Wr="WebkitAnimation",Kr="webkitAnimationEnd"));var Xr=B?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Zr(e){Xr((function(){Xr(e)}))}function Yr(e,n){var t=e._transitionClasses||(e._transitionClasses=[]);t.indexOf(n)<0&&(t.push(n),Fr(e,n))}function Jr(e,n){e._transitionClasses&&y(e._transitionClasses,n),Dr(e,n)}function Qr(e,n,t){var r=no(e,n),o=r.type,a=r.timeout,i=r.propCount;if(!o)return t();var s="transition"===o?Br:Kr,c=0,l=function(){e.removeEventListener(s,u),t()},u=function(n){n.target===e&&++c>=i&&l()};setTimeout((function(){c<i&&l()}),a+1),e.addEventListener(s,u)}var eo=/\b(transform|all)(,|$)/;function no(e,n){var t,r=window.getComputedStyle(e),o=(r[Hr+"Delay"]||"").split(", "),a=(r[Hr+"Duration"]||"").split(", "),i=to(o,a),s=(r[Wr+"Delay"]||"").split(", "),c=(r[Wr+"Duration"]||"").split(", "),l=to(s,c),u=0,p=0;return"transition"===n?i>0&&(t="transition",u=i,p=a.length):"animation"===n?l>0&&(t="animation",u=l,p=c.length):p=(t=(u=Math.max(i,l))>0?i>l?"transition":"animation":null)?"transition"===t?a.length:c.length:0,{type:t,timeout:u,propCount:p,hasTransform:"transition"===t&&eo.test(r[Hr+"Property"])}}function to(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max.apply(null,n.map((function(n,t){return ro(n)+ro(e[t])})))}function ro(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function oo(e,n){var t=e.elm;i(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Mr(e.data.transition);if(!a(r)&&!i(t._enterCb)&&1===t.nodeType){for(var o=r.css,s=r.type,c=r.enterClass,u=r.enterToClass,p=r.enterActiveClass,d=r.appearClass,h=r.appearToClass,f=r.appearActiveClass,m=r.beforeEnter,v=r.enter,b=r.afterEnter,y=r.enterCancelled,w=r.beforeAppear,k=r.appear,x=r.afterAppear,z=r.appearCancelled,_=r.duration,j=Yn,T=Yn.$vnode;T&&T.parent;)j=T.context,T=T.parent;var C=!j._isMounted||!e.isRootInsert;if(!C||k||""===k){var S=C&&d?d:c,A=C&&f?f:p,q=C&&h?h:u,P=C&&w||m,I=C&&"function"==typeof k?k:v,O=C&&x||b,E=C&&z||y,L=g(l(_)?_.enter:_);0;var U=!1!==o&&!Y,N=so(I),$=t._enterCb=R((function(){U&&(Jr(t,q),Jr(t,A)),$.cancelled?(U&&Jr(t,S),E&&E(t)):O&&O(t),t._enterCb=null}));e.data.show||ln(e,"insert",(function(){var n=t.parentNode,r=n&&n._pending&&n._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),I&&I(t,$)})),P&&P(t),U&&(Yr(t,S),Yr(t,A),Zr((function(){Jr(t,S),$.cancelled||(Yr(t,q),N||(io(L)?setTimeout($,L):Qr(t,s,$)))}))),e.data.show&&(n&&n(),I&&I(t,$)),U||N||$()}}}function ao(e,n){var t=e.elm;i(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=Mr(e.data.transition);if(a(r)||1!==t.nodeType)return n();if(!i(t._leaveCb)){var o=r.css,s=r.type,c=r.leaveClass,u=r.leaveToClass,p=r.leaveActiveClass,d=r.beforeLeave,h=r.leave,f=r.afterLeave,m=r.leaveCancelled,v=r.delayLeave,b=r.duration,y=!1!==o&&!Y,w=so(h),k=g(l(b)?b.leave:b);0;var x=t._leaveCb=R((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[e.key]=null),y&&(Jr(t,u),Jr(t,p)),x.cancelled?(y&&Jr(t,c),m&&m(t)):(n(),f&&f(t)),t._leaveCb=null}));v?v(z):z()}function z(){x.cancelled||(!e.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[e.key]=e),d&&d(t),y&&(Yr(t,c),Yr(t,p),Zr((function(){Jr(t,c),x.cancelled||(Yr(t,u),w||(io(k)?setTimeout(x,k):Qr(t,s,x)))}))),h&&h(t,x),y||w||x())}}function io(e){return"number"==typeof e&&!isNaN(e)}function so(e){if(a(e))return!1;var n=e.fns;return i(n)?so(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function co(e,n){!0!==n.data.show&&oo(n)}var lo=function(e){var n,t,r={},o=e.modules,l=e.nodeOps;for(n=0;n<nr.length;++n)for(r[nr[n]]=[],t=0;t<o.length;++t)i(o[t][nr[n]])&&r[nr[n]].push(o[t][nr[n]]);function u(e){var n=l.parentNode(e);i(n)&&l.removeChild(n,e)}function p(e,n,t,o,a,c,u){if(i(e.elm)&&i(c)&&(e=c[u]=ye(e)),e.isRootInsert=!a,!function(e,n,t,o){var a=e.data;if(i(a)){var c=i(e.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(e,!1),i(e.componentInstance))return d(e,n),h(t,e.elm,o),s(c)&&function(e,n,t,o){var a,s=e;for(;s.componentInstance;)if(s=s.componentInstance._vnode,i(a=s.data)&&i(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](er,s);n.push(s);break}h(t,e.elm,o)}(e,n,t,o),!0}}(e,n,t,o)){var p=e.data,m=e.children,v=e.tag;i(v)?(e.elm=e.ns?l.createElementNS(e.ns,v):l.createElement(v,e),b(e),f(e,m,n),i(p)&&g(e,n),h(t,e.elm,o)):s(e.isComment)?(e.elm=l.createComment(e.text),h(t,e.elm,o)):(e.elm=l.createTextNode(e.text),h(t,e.elm,o))}}function d(e,n){i(e.data.pendingInsert)&&(n.push.apply(n,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,m(e)?(g(e,n),b(e)):(Qt(e),n.push(e))}function h(e,n,t){i(e)&&(i(t)?l.parentNode(t)===e&&l.insertBefore(e,n,t):l.appendChild(e,n))}function f(e,n,t){if(Array.isArray(n)){0;for(var r=0;r<n.length;++r)p(n[r],t,e.elm,null,!0,n,r)}else c(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return i(e.tag)}function g(e,t){for(var o=0;o<r.create.length;++o)r.create[o](er,e);i(n=e.data.hook)&&(i(n.create)&&n.create(er,e),i(n.insert)&&t.push(e))}function b(e){var n;if(i(n=e.fnScopeId))l.setStyleScope(e.elm,n);else for(var t=e;t;)i(n=t.context)&&i(n=n.$options._scopeId)&&l.setStyleScope(e.elm,n),t=t.parent;i(n=Yn)&&n!==e.context&&n!==e.fnContext&&i(n=n.$options._scopeId)&&l.setStyleScope(e.elm,n)}function y(e,n,t,r,o,a){for(;r<=o;++r)p(t[r],a,e,n,!1,t,r)}function w(e){var n,t,o=e.data;if(i(o))for(i(n=o.hook)&&i(n=n.destroy)&&n(e),n=0;n<r.destroy.length;++n)r.destroy[n](e);if(i(n=e.children))for(t=0;t<e.children.length;++t)w(e.children[t])}function k(e,n,t){for(;n<=t;++n){var r=e[n];i(r)&&(i(r.tag)?(x(r),w(r)):u(r.elm))}}function x(e,n){if(i(n)||i(e.data)){var t,o=r.remove.length+1;for(i(n)?n.listeners+=o:n=function(e,n){function t(){0==--t.listeners&&u(e)}return t.listeners=n,t}(e.elm,o),i(t=e.componentInstance)&&i(t=t._vnode)&&i(t.data)&&x(t,n),t=0;t<r.remove.length;++t)r.remove[t](e,n);i(t=e.data.hook)&&i(t=t.remove)?t(e,n):n()}else u(e.elm)}function z(e,n,t,r){for(var o=t;o<r;o++){var a=n[o];if(i(a)&&tr(e,a))return o}}function _(e,n,t,o,c,u){if(e!==n){i(n.elm)&&i(o)&&(n=o[c]=ye(n));var d=n.elm=e.elm;if(s(e.isAsyncPlaceholder))i(n.asyncFactory.resolved)?C(e.elm,n,t):n.isAsyncPlaceholder=!0;else if(s(n.isStatic)&&s(e.isStatic)&&n.key===e.key&&(s(n.isCloned)||s(n.isOnce)))n.componentInstance=e.componentInstance;else{var h,f=n.data;i(f)&&i(h=f.hook)&&i(h=h.prepatch)&&h(e,n);var g=e.children,v=n.children;if(i(f)&&m(n)){for(h=0;h<r.update.length;++h)r.update[h](e,n);i(h=f.hook)&&i(h=h.update)&&h(e,n)}a(n.text)?i(g)&&i(v)?g!==v&&function(e,n,t,r,o){var s,c,u,d=0,h=0,f=n.length-1,m=n[0],g=n[f],v=t.length-1,b=t[0],w=t[v],x=!o;for(0;d<=f&&h<=v;)a(m)?m=n[++d]:a(g)?g=n[--f]:tr(m,b)?(_(m,b,r,t,h),m=n[++d],b=t[++h]):tr(g,w)?(_(g,w,r,t,v),g=n[--f],w=t[--v]):tr(m,w)?(_(m,w,r,t,v),x&&l.insertBefore(e,m.elm,l.nextSibling(g.elm)),m=n[++d],w=t[--v]):tr(g,b)?(_(g,b,r,t,h),x&&l.insertBefore(e,g.elm,m.elm),g=n[--f],b=t[++h]):(a(s)&&(s=rr(n,d,f)),a(c=i(b.key)?s[b.key]:z(b,n,d,f))?p(b,r,e,m.elm,!1,t,h):tr(u=n[c],b)?(_(u,b,r,t,h),n[c]=void 0,x&&l.insertBefore(e,u.elm,m.elm)):p(b,r,e,m.elm,!1,t,h),b=t[++h]);d>f?y(e,a(t[v+1])?null:t[v+1].elm,t,h,v,r):h>v&&k(n,d,f)}(d,g,v,t,u):i(v)?(i(e.text)&&l.setTextContent(d,""),y(d,null,v,0,v.length-1,t)):i(g)?k(g,0,g.length-1):i(e.text)&&l.setTextContent(d,""):e.text!==n.text&&l.setTextContent(d,n.text),i(f)&&i(h=f.hook)&&i(h=h.postpatch)&&h(e,n)}}}function j(e,n,t){if(s(t)&&i(e.parent))e.parent.data.pendingInsert=n;else for(var r=0;r<n.length;++r)n[r].data.hook.insert(n[r])}var T=v("attrs,class,staticClass,staticStyle,key");function C(e,n,t,r){var o,a=n.tag,c=n.data,l=n.children;if(r=r||c&&c.pre,n.elm=e,s(n.isComment)&&i(n.asyncFactory))return n.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(o=c.hook)&&i(o=o.init)&&o(n,!0),i(o=n.componentInstance)))return d(n,t),!0;if(i(a)){if(i(l))if(e.hasChildNodes())if(i(o=c)&&i(o=o.domProps)&&i(o=o.innerHTML)){if(o!==e.innerHTML)return!1}else{for(var u=!0,p=e.firstChild,h=0;h<l.length;h++){if(!p||!C(p,l[h],t,r)){u=!1;break}p=p.nextSibling}if(!u||p)return!1}else f(n,l,t);if(i(c)){var m=!1;for(var v in c)if(!T(v)){m=!0,g(n,t);break}!m&&c.class&&on(c.class)}}else e.data!==n.text&&(e.data=n.text);return!0}return function(e,n,t,o){if(!a(n)){var c,u=!1,d=[];if(a(e))u=!0,p(n,d);else{var h=i(e.nodeType);if(!h&&tr(e,n))_(e,n,d,null,null,o);else{if(h){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),t=!0),s(t)&&C(e,n,d))return j(n,d,!0),e;c=e,e=new me(l.tagName(c).toLowerCase(),{},[],void 0,c)}var f=e.elm,g=l.parentNode(f);if(p(n,d,f._leaveCb?null:g,l.nextSibling(f)),i(n.parent))for(var v=n.parent,b=m(n);v;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](v);if(v.elm=n.elm,b){for(var x=0;x<r.create.length;++x)r.create[x](er,v);var z=v.data.hook.insert;if(z.merged)for(var T=1;T<z.fns.length;T++)z.fns[T]()}else Qt(v);v=v.parent}i(g)?k([e],0,0):i(e.tag)&&w(e)}}return j(n,d,u),n.elm}i(e)&&w(e)}}({nodeOps:Yt,modules:[fr,vr,_r,Cr,Nr,B?{create:co,activate:co,remove:function(e,n){!0!==e.data.show?ao(e,n):n()}}:{}].concat(ur)});Y&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&bo(e,"input")}));var uo={inserted:function(e,n,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?ln(t,"postpatch",(function(){uo.componentUpdated(e,n,t)})):po(e,n,t.context),e._vOptions=[].map.call(e.options,mo)):("textarea"===t.tag||Zt(e.type))&&(e._vModifiers=n.modifiers,n.modifiers.lazy||(e.addEventListener("compositionstart",go),e.addEventListener("compositionend",vo),e.addEventListener("change",vo),Y&&(e.vmodel=!0)))},componentUpdated:function(e,n,t){if("select"===t.tag){po(e,n,t.context);var r=e._vOptions,o=e._vOptions=[].map.call(e.options,mo);if(o.some((function(e,n){return!L(e,r[n])})))(e.multiple?n.value.some((function(e){return fo(e,o)})):n.value!==n.oldValue&&fo(n.value,o))&&bo(e,"change")}}};function po(e,n,t){ho(e,n,t),(Z||J)&&setTimeout((function(){ho(e,n,t)}),0)}function ho(e,n,t){var r=n.value,o=e.multiple;if(!o||Array.isArray(r)){for(var a,i,s=0,c=e.options.length;s<c;s++)if(i=e.options[s],o)a=U(r,mo(i))>-1,i.selected!==a&&(i.selected=a);else if(L(mo(i),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));o||(e.selectedIndex=-1)}}function fo(e,n){return n.every((function(n){return!L(n,e)}))}function mo(e){return"_value"in e?e._value:e.value}function go(e){e.target.composing=!0}function vo(e){e.target.composing&&(e.target.composing=!1,bo(e.target,"input"))}function bo(e,n){var t=document.createEvent("HTMLEvents");t.initEvent(n,!0,!0),e.dispatchEvent(t)}function yo(e){return!e.componentInstance||e.data&&e.data.transition?e:yo(e.componentInstance._vnode)}var wo={model:uo,show:{bind:function(e,n,t){var r=n.value,o=(t=yo(t)).data&&t.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&o?(t.data.show=!0,oo(t,(function(){e.style.display=a}))):e.style.display=r?a:"none"},update:function(e,n,t){var r=n.value;!r!=!n.oldValue&&((t=yo(t)).data&&t.data.transition?(t.data.show=!0,r?oo(t,(function(){e.style.display=e.__vOriginalDisplay})):ao(t,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,n,t,r,o){o||(e.style.display=e.__vOriginalDisplay)}}},ko={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function xo(e){var n=e&&e.componentOptions;return n&&n.Ctor.options.abstract?xo(Bn(n.children)):e}function zo(e){var n={},t=e.$options;for(var r in t.propsData)n[r]=e[r];var o=t._parentListeners;for(var a in o)n[_(a)]=o[a];return n}function _o(e,n){if(/\d-keep-alive$/.test(n.tag))return e("keep-alive",{props:n.componentOptions.propsData})}var jo=function(e){return e.tag||Hn(e)},To=function(e){return"show"===e.name},Co={name:"transition",props:ko,abstract:!0,render:function(e){var n=this,t=this.$slots.default;if(t&&(t=t.filter(jo)).length){0;var r=this.mode;0;var o=t[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return o;var a=xo(o);if(!a)return o;if(this._leaving)return _o(e,o);var i="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?i+"comment":i+a.tag:c(a.key)?0===String(a.key).indexOf(i)?a.key:i+a.key:a.key;var s=(a.data||(a.data={})).transition=zo(this),l=this._vnode,u=xo(l);if(a.data.directives&&a.data.directives.some(To)&&(a.data.show=!0),u&&u.data&&!function(e,n){return n.key===e.key&&n.tag===e.tag}(a,u)&&!Hn(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var p=u.data.transition=q({},s);if("out-in"===r)return this._leaving=!0,ln(p,"afterLeave",(function(){n._leaving=!1,n.$forceUpdate()})),_o(e,o);if("in-out"===r){if(Hn(a))return l;var d,h=function(){d()};ln(s,"afterEnter",h),ln(s,"enterCancelled",h),ln(p,"delayLeave",(function(e){d=e}))}}return o}}},So=q({tag:String,moveClass:String},ko);function Ao(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function qo(e){e.data.newPos=e.elm.getBoundingClientRect()}function Po(e){var n=e.data.pos,t=e.data.newPos,r=n.left-t.left,o=n.top-t.top;if(r||o){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate("+r+"px,"+o+"px)",a.transitionDuration="0s"}}delete So.mode;var Io={Transition:Co,TransitionGroup:{props:So,beforeMount:function(){var e=this,n=this._update;this._update=function(t,r){var o=Jn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,o(),n.call(e,t,r)}},render:function(e){for(var n=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],a=this.children=[],i=zo(this),s=0;s<o.length;s++){var c=o[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))a.push(c),t[c.key]=c,(c.data||(c.data={})).transition=i;else;}if(r){for(var l=[],u=[],p=0;p<r.length;p++){var d=r[p];d.data.transition=i,d.data.pos=d.elm.getBoundingClientRect(),t[d.key]?l.push(d):u.push(d)}this.kept=e(n,null,l),this.removed=u}return e(n,null,a)},updated:function(){var e=this.prevChildren,n=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,n)&&(e.forEach(Ao),e.forEach(qo),e.forEach(Po),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var t=e.elm,r=t.style;Yr(t,n),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Br,t._moveCb=function e(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Br,e),t._moveCb=null,Jr(t,n))})}})))},methods:{hasMove:function(e,n){if(!Gr)return!1;if(this._hasMove)return this._hasMove;var t=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Dr(t,e)})),Fr(t,n),t.style.display="none",this.$el.appendChild(t);var r=no(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};_t.config.mustUseProp=function(e,n,t){return"value"===t&&Ot(e)&&"button"!==n||"selected"===t&&"option"===e||"checked"===t&&"input"===e||"muted"===t&&"video"===e},_t.config.isReservedTag=Kt,_t.config.isReservedAttr=It,_t.config.getTagNamespace=function(e){return Wt(e)?"svg":"math"===e?"math":void 0},_t.config.isUnknownElement=function(e){if(!B)return!0;if(Kt(e))return!1;if(e=e.toLowerCase(),null!=Xt[e])return Xt[e];var n=document.createElement(e);return e.indexOf("-")>-1?Xt[e]=n.constructor===window.HTMLUnknownElement||n.constructor===window.HTMLElement:Xt[e]=/HTMLUnknownElement/.test(n.toString())},q(_t.options.directives,wo),q(_t.options.components,Io),_t.prototype.__patch__=B?lo:I,_t.prototype.$mount=function(e,n){return function(e,n,t){var r;return e.$el=n,e.$options.render||(e.$options.render=ve),nt(e,"beforeMount"),r=function(){e._update(e._render(),t)},new ht(e,r,I,{before:function(){e._isMounted&&!e._isDestroyed&&nt(e,"beforeUpdate")}},!0),t=!1,null==e.$vnode&&(e._isMounted=!0,nt(e,"mounted")),e}(this,e=e&&B?function(e){if("string"==typeof e){var n=document.querySelector(e);return n||document.createElement("div")}return e}(e):void 0,n)},B&&setTimeout((function(){F.devtools&&ae&&ae.emit("init",_t)}),0);var Oo=_t;
/*!
  * vue-router v3.4.9
  * (c) 2020 Evan You
  * @license MIT
  */function Eo(e,n){for(var t in n)e[t]=n[t];return e}var Lo=/[!'()*]/g,Uo=function(e){return"%"+e.charCodeAt(0).toString(16)},Ro=/%2C/g,No=function(e){return encodeURIComponent(e).replace(Lo,Uo).replace(Ro,",")};function $o(e){try{return decodeURIComponent(e)}catch(e){0}return e}var Fo=function(e){return null==e||"object"==typeof e?e:String(e)};function Do(e){var n={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=$o(t.shift()),o=t.length>0?$o(t.join("=")):null;void 0===n[r]?n[r]=o:Array.isArray(n[r])?n[r].push(o):n[r]=[n[r],o]})),n):n}function Mo(e){var n=e?Object.keys(e).map((function(n){var t=e[n];if(void 0===t)return"";if(null===t)return No(n);if(Array.isArray(t)){var r=[];return t.forEach((function(e){void 0!==e&&(null===e?r.push(No(n)):r.push(No(n)+"="+No(e)))})),r.join("&")}return No(n)+"="+No(t)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?"+n:""}var Vo=/\/?$/;function Go(e,n,t,r){var o=r&&r.options.stringifyQuery,a=n.query||{};try{a=Ho(a)}catch(e){}var i={name:n.name||e&&e.name,meta:e&&e.meta||{},path:n.path||"/",hash:n.hash||"",query:a,params:n.params||{},fullPath:Ko(n,o),matched:e?Wo(e):[]};return t&&(i.redirectedFrom=Ko(t,o)),Object.freeze(i)}function Ho(e){if(Array.isArray(e))return e.map(Ho);if(e&&"object"==typeof e){var n={};for(var t in e)n[t]=Ho(e[t]);return n}return e}var Bo=Go(null,{path:"/"});function Wo(e){for(var n=[];e;)n.unshift(e),e=e.parent;return n}function Ko(e,n){var t=e.path,r=e.query;void 0===r&&(r={});var o=e.hash;return void 0===o&&(o=""),(t||"/")+(n||Mo)(r)+o}function Xo(e,n){return n===Bo?e===n:!!n&&(e.path&&n.path?e.path.replace(Vo,"")===n.path.replace(Vo,"")&&e.hash===n.hash&&Zo(e.query,n.query):!(!e.name||!n.name)&&(e.name===n.name&&e.hash===n.hash&&Zo(e.query,n.query)&&Zo(e.params,n.params)))}function Zo(e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!e||!n)return e===n;var t=Object.keys(e).sort(),r=Object.keys(n).sort();return t.length===r.length&&t.every((function(t,o){var a=e[t];if(r[o]!==t)return!1;var i=n[t];return null==a||null==i?a===i:"object"==typeof a&&"object"==typeof i?Zo(a,i):String(a)===String(i)}))}function Yo(e){for(var n=0;n<e.matched.length;n++){var t=e.matched[n];for(var r in t.instances){var o=t.instances[r],a=t.enteredCbs[r];if(o&&a){delete t.enteredCbs[r];for(var i=0;i<a.length;i++)o._isBeingDestroyed||a[i](o)}}}}var Jo={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,n){var t=n.props,r=n.children,o=n.parent,a=n.data;a.routerView=!0;for(var i=o.$createElement,s=t.name,c=o.$route,l=o._routerViewCache||(o._routerViewCache={}),u=0,p=!1;o&&o._routerRoot!==o;){var d=o.$vnode?o.$vnode.data:{};d.routerView&&u++,d.keepAlive&&o._directInactive&&o._inactive&&(p=!0),o=o.$parent}if(a.routerViewDepth=u,p){var h=l[s],f=h&&h.component;return f?(h.configProps&&Qo(f,a,h.route,h.configProps),i(f,a,r)):i()}var m=c.matched[u],g=m&&m.components[s];if(!m||!g)return l[s]=null,i();l[s]={component:g},a.registerRouteInstance=function(e,n){var t=m.instances[s];(n&&t!==e||!n&&t===e)&&(m.instances[s]=n)},(a.hook||(a.hook={})).prepatch=function(e,n){m.instances[s]=n.componentInstance},a.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[s]&&(m.instances[s]=e.componentInstance),Yo(c)};var v=m.props&&m.props[s];return v&&(Eo(l[s],{route:c,configProps:v}),Qo(g,a,c,v)),i(g,a,r)}};function Qo(e,n,t,r){var o=n.props=function(e,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(e);case"boolean":return n?e.params:void 0;default:0}}(t,r);if(o){o=n.props=Eo({},o);var a=n.attrs=n.attrs||{};for(var i in o)e.props&&i in e.props||(a[i]=o[i],delete o[i])}}function ea(e,n,t){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return n+e;var o=n.split("/");t&&o[o.length-1]||o.pop();for(var a=e.replace(/^\//,"").split("/"),i=0;i<a.length;i++){var s=a[i];".."===s?o.pop():"."!==s&&o.push(s)}return""!==o[0]&&o.unshift(""),o.join("/")}function na(e){return e.replace(/\/\//g,"/")}var ta=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},ra=va,oa=la,aa=function(e,n){return pa(la(e,n),n)},ia=pa,sa=ga,ca=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function la(e,n){for(var t,r=[],o=0,a=0,i="",s=n&&n.delimiter||"/";null!=(t=ca.exec(e));){var c=t[0],l=t[1],u=t.index;if(i+=e.slice(a,u),a=u+c.length,l)i+=l[1];else{var p=e[a],d=t[2],h=t[3],f=t[4],m=t[5],g=t[6],v=t[7];i&&(r.push(i),i="");var b=null!=d&&null!=p&&p!==d,y="+"===g||"*"===g,w="?"===g||"*"===g,k=t[2]||s,x=f||m;r.push({name:h||o++,prefix:d||"",delimiter:k,optional:w,repeat:y,partial:b,asterisk:!!v,pattern:x?ha(x):v?".*":"[^"+da(k)+"]+?"})}}return a<e.length&&(i+=e.substr(a)),i&&r.push(i),r}function ua(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function pa(e,n){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$",ma(n)));return function(n,r){for(var o="",a=n||{},i=(r||{}).pretty?ua:encodeURIComponent,s=0;s<e.length;s++){var c=e[s];if("string"!=typeof c){var l,u=a[c.name];if(null==u){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(ta(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(l=i(u[p]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");o+=(0===p?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(u).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):i(u),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');o+=c.prefix+l}}else o+=c}return o}}function da(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ha(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function fa(e,n){return e.keys=n,e}function ma(e){return e&&e.sensitive?"":"i"}function ga(e,n,t){ta(n)||(t=n||t,n=[]);for(var r=(t=t||{}).strict,o=!1!==t.end,a="",i=0;i<e.length;i++){var s=e[i];if("string"==typeof s)a+=da(s);else{var c=da(s.prefix),l="(?:"+s.pattern+")";n.push(s),s.repeat&&(l+="(?:"+c+l+")*"),a+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var u=da(t.delimiter||"/"),p=a.slice(-u.length)===u;return r||(a=(p?a.slice(0,-u.length):a)+"(?:"+u+"(?=$))?"),a+=o?"$":r&&p?"":"(?="+u+"|$)",fa(new RegExp("^"+a,ma(t)),n)}function va(e,n,t){return ta(n)||(t=n||t,n=[]),t=t||{},e instanceof RegExp?function(e,n){var t=e.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)n.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return fa(e,n)}(e,n):ta(e)?function(e,n,t){for(var r=[],o=0;o<e.length;o++)r.push(va(e[o],n,t).source);return fa(new RegExp("(?:"+r.join("|")+")",ma(t)),n)}(e,n,t):function(e,n,t){return ga(la(e,t),n,t)}(e,n,t)}ra.parse=oa,ra.compile=aa,ra.tokensToFunction=ia,ra.tokensToRegExp=sa;var ba=Object.create(null);function ya(e,n,t){n=n||{};try{var r=ba[e]||(ba[e]=ra.compile(e));return"string"==typeof n.pathMatch&&(n[0]=n.pathMatch),r(n,{pretty:!0})}catch(e){return""}finally{delete n[0]}}function wa(e,n,t,r){var o="string"==typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){var a=(o=Eo({},e)).params;return a&&"object"==typeof a&&(o.params=Eo({},a)),o}if(!o.path&&o.params&&n){(o=Eo({},o))._normalized=!0;var i=Eo(Eo({},n.params),o.params);if(n.name)o.name=n.name,o.params=i;else if(n.matched.length){var s=n.matched[n.matched.length-1].path;o.path=ya(s,i,n.path)}else 0;return o}var c=function(e){var n="",t="",r=e.indexOf("#");r>=0&&(n=e.slice(r),e=e.slice(0,r));var o=e.indexOf("?");return o>=0&&(t=e.slice(o+1),e=e.slice(0,o)),{path:e,query:t,hash:n}}(o.path||""),l=n&&n.path||"/",u=c.path?ea(c.path,l,t||o.append):l,p=function(e,n,t){void 0===n&&(n={});var r,o=t||Do;try{r=o(e||"")}catch(e){r={}}for(var a in n){var i=n[a];r[a]=Array.isArray(i)?i.map(Fo):Fo(i)}return r}(c.query,o.query,r&&r.options.parseQuery),d=o.hash||c.hash;return d&&"#"!==d.charAt(0)&&(d="#"+d),{_normalized:!0,path:u,query:p,hash:d}}var ka,xa=function(){},za={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(e){var n=this,t=this.$router,r=this.$route,o=t.resolve(this.to,r,this.append),a=o.location,i=o.route,s=o.href,c={},l=t.options.linkActiveClass,u=t.options.linkExactActiveClass,p=null==l?"router-link-active":l,d=null==u?"router-link-exact-active":u,h=null==this.activeClass?p:this.activeClass,f=null==this.exactActiveClass?d:this.exactActiveClass,m=i.redirectedFrom?Go(null,wa(i.redirectedFrom),null,t):i;c[f]=Xo(r,m),c[h]=this.exact?c[f]:function(e,n){return 0===e.path.replace(Vo,"/").indexOf(n.path.replace(Vo,"/"))&&(!n.hash||e.hash===n.hash)&&function(e,n){for(var t in n)if(!(t in e))return!1;return!0}(e.query,n.query)}(r,m);var g=c[f]?this.ariaCurrentValue:null,v=function(e){_a(e)&&(n.replace?t.replace(a,xa):t.push(a,xa))},b={click:_a};Array.isArray(this.event)?this.event.forEach((function(e){b[e]=v})):b[this.event]=v;var y={class:c},w=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:i,navigate:v,isActive:c[h],isExactActive:c[f]});if(w){if(1===w.length)return w[0];if(w.length>1||!w.length)return 0===w.length?e():e("span",{},w)}if("a"===this.tag)y.on=b,y.attrs={href:s,"aria-current":g};else{var k=function e(n){var t;if(n)for(var r=0;r<n.length;r++){if("a"===(t=n[r]).tag)return t;if(t.children&&(t=e(t.children)))return t}}(this.$slots.default);if(k){k.isStatic=!1;var x=k.data=Eo({},k.data);for(var z in x.on=x.on||{},x.on){var _=x.on[z];z in b&&(x.on[z]=Array.isArray(_)?_:[_])}for(var j in b)j in x.on?x.on[j].push(b[j]):x.on[j]=v;var T=k.data.attrs=Eo({},k.data.attrs);T.href=s,T["aria-current"]=g}else y.on=b}return e(this.tag,y,this.$slots.default)}};function _a(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}var ja="undefined"!=typeof window;function Ta(e,n,t,r){var o=n||[],a=t||Object.create(null),i=r||Object.create(null);e.forEach((function(e){!function e(n,t,r,o,a,i){var s=o.path,c=o.name;0;var l=o.pathToRegexpOptions||{},u=function(e,n,t){t||(e=e.replace(/\/$/,""));if("/"===e[0])return e;if(null==n)return e;return na(n.path+"/"+e)}(s,a,l.strict);"boolean"==typeof o.caseSensitive&&(l.sensitive=o.caseSensitive);var p={path:u,regex:Ca(u,l),components:o.components||{default:o.component},instances:{},enteredCbs:{},name:c,parent:a,matchAs:i,redirect:o.redirect,beforeEnter:o.beforeEnter,meta:o.meta||{},props:null==o.props?{}:o.components?o.props:{default:o.props}};o.children&&o.children.forEach((function(o){var a=i?na(i+"/"+o.path):void 0;e(n,t,r,o,p,a)}));t[p.path]||(n.push(p.path),t[p.path]=p);if(void 0!==o.alias)for(var d=Array.isArray(o.alias)?o.alias:[o.alias],h=0;h<d.length;++h){0;var f={path:d[h],children:o.children};e(n,t,r,f,a,p.path||"/")}c&&(r[c]||(r[c]=p))}(o,a,i,e)}));for(var s=0,c=o.length;s<c;s++)"*"===o[s]&&(o.push(o.splice(s,1)[0]),c--,s--);return{pathList:o,pathMap:a,nameMap:i}}function Ca(e,n){return ra(e,[],n)}function Sa(e,n){var t=Ta(e),r=t.pathList,o=t.pathMap,a=t.nameMap;function i(e,t,i){var s=wa(e,t,!1,n),l=s.name;if(l){var u=a[l];if(!u)return c(null,s);var p=u.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var d in t.params)!(d in s.params)&&p.indexOf(d)>-1&&(s.params[d]=t.params[d]);return s.path=ya(u.path,s.params),c(u,s,i)}if(s.path){s.params={};for(var h=0;h<r.length;h++){var f=r[h],m=o[f];if(Aa(m.regex,s.path,s.params))return c(m,s,i)}}return c(null,s)}function s(e,t){var r=e.redirect,o="function"==typeof r?r(Go(e,t,null,n)):r;if("string"==typeof o&&(o={path:o}),!o||"object"!=typeof o)return c(null,t);var s=o,l=s.name,u=s.path,p=t.query,d=t.hash,h=t.params;if(p=s.hasOwnProperty("query")?s.query:p,d=s.hasOwnProperty("hash")?s.hash:d,h=s.hasOwnProperty("params")?s.params:h,l){a[l];return i({_normalized:!0,name:l,query:p,hash:d,params:h},void 0,t)}if(u){var f=function(e,n){return ea(e,n.parent?n.parent.path:"/",!0)}(u,e);return i({_normalized:!0,path:ya(f,h),query:p,hash:d},void 0,t)}return c(null,t)}function c(e,t,r){return e&&e.redirect?s(e,r||t):e&&e.matchAs?function(e,n,t){var r=i({_normalized:!0,path:ya(t,n.params)});if(r){var o=r.matched,a=o[o.length-1];return n.params=r.params,c(a,n)}return c(null,n)}(0,t,e.matchAs):Go(e,t,r,n)}return{match:i,addRoutes:function(e){Ta(e,r,o,a)}}}function Aa(e,n,t){var r=n.match(e);if(!r)return!1;if(!t)return!0;for(var o=1,a=r.length;o<a;++o){var i=e.keys[o-1];i&&(t[i.name||"pathMatch"]="string"==typeof r[o]?$o(r[o]):r[o])}return!0}var qa=ja&&window.performance&&window.performance.now?window.performance:Date;function Pa(){return qa.now().toFixed(3)}var Ia=Pa();function Oa(){return Ia}function Ea(e){return Ia=e}var La=Object.create(null);function Ua(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,n=window.location.href.replace(e,""),t=Eo({},window.history.state);return t.key=Oa(),window.history.replaceState(t,"",n),window.addEventListener("popstate",$a),function(){window.removeEventListener("popstate",$a)}}function Ra(e,n,t,r){if(e.app){var o=e.options.scrollBehavior;o&&e.app.$nextTick((function(){var a=function(){var e=Oa();if(e)return La[e]}(),i=o.call(e,n,t,r?a:null);i&&("function"==typeof i.then?i.then((function(e){Ga(e,a)})).catch((function(e){0})):Ga(i,a))}))}}function Na(){var e=Oa();e&&(La[e]={x:window.pageXOffset,y:window.pageYOffset})}function $a(e){Na(),e.state&&e.state.key&&Ea(e.state.key)}function Fa(e){return Ma(e.x)||Ma(e.y)}function Da(e){return{x:Ma(e.x)?e.x:window.pageXOffset,y:Ma(e.y)?e.y:window.pageYOffset}}function Ma(e){return"number"==typeof e}var Va=/^#\d/;function Ga(e,n){var t,r="object"==typeof e;if(r&&"string"==typeof e.selector){var o=Va.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(o){var a=e.offset&&"object"==typeof e.offset?e.offset:{};n=function(e,n){var t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left-t.left-n.x,y:r.top-t.top-n.y}}(o,a={x:Ma((t=a).x)?t.x:0,y:Ma(t.y)?t.y:0})}else Fa(e)&&(n=Da(e))}else r&&Fa(e)&&(n=Da(e));n&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:n.x,top:n.y,behavior:e.behavior}):window.scrollTo(n.x,n.y))}var Ha,Ba=ja&&((-1===(Ha=window.navigator.userAgent).indexOf("Android 2.")&&-1===Ha.indexOf("Android 4.0")||-1===Ha.indexOf("Mobile Safari")||-1!==Ha.indexOf("Chrome")||-1!==Ha.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Wa(e,n){Na();var t=window.history;try{if(n){var r=Eo({},t.state);r.key=Oa(),t.replaceState(r,"",e)}else t.pushState({key:Ea(Pa())},"",e)}catch(t){window.location[n?"replace":"assign"](e)}}function Ka(e){Wa(e,!0)}function Xa(e,n,t){var r=function(o){o>=e.length?t():e[o]?n(e[o],(function(){r(o+1)})):r(o+1)};r(0)}var Za={redirected:2,aborted:4,cancelled:8,duplicated:16};function Ya(e,n){return Qa(e,n,Za.redirected,'Redirected when going from "'+e.fullPath+'" to "'+function(e){if("string"==typeof e)return e;if("path"in e)return e.path;var n={};return ei.forEach((function(t){t in e&&(n[t]=e[t])})),JSON.stringify(n,null,2)}(n)+'" via a navigation guard.')}function Ja(e,n){return Qa(e,n,Za.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+n.fullPath+'" with a new navigation.')}function Qa(e,n,t,r){var o=new Error(r);return o._isRouter=!0,o.from=e,o.to=n,o.type=t,o}var ei=["params","query","hash"];function ni(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function ti(e,n){return ni(e)&&e._isRouter&&(null==n||e.type===n)}function ri(e){return function(n,t,r){var o=!1,a=0,i=null;oi(e,(function(e,n,t,s){if("function"==typeof e&&void 0===e.cid){o=!0,a++;var c,l=si((function(n){var o;((o=n).__esModule||ii&&"Module"===o[Symbol.toStringTag])&&(n=n.default),e.resolved="function"==typeof n?n:ka.extend(n),t.components[s]=n,--a<=0&&r()})),u=si((function(e){var n="Failed to resolve async component "+s+": "+e;i||(i=ni(e)?e:new Error(n),r(i))}));try{c=e(l,u)}catch(e){u(e)}if(c)if("function"==typeof c.then)c.then(l,u);else{var p=c.component;p&&"function"==typeof p.then&&p.then(l,u)}}})),o||r()}}function oi(e,n){return ai(e.map((function(e){return Object.keys(e.components).map((function(t){return n(e.components[t],e.instances[t],e,t)}))})))}function ai(e){return Array.prototype.concat.apply([],e)}var ii="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function si(e){var n=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!n)return n=!0,e.apply(this,t)}}var ci=function(e,n){this.router=e,this.base=function(e){if(!e)if(ja){var n=document.querySelector("base");e=(e=n&&n.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";"/"!==e.charAt(0)&&(e="/"+e);return e.replace(/\/$/,"")}(n),this.current=Bo,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function li(e,n,t,r){var o=oi(e,(function(e,r,o,a){var i=function(e,n){"function"!=typeof e&&(e=ka.extend(e));return e.options[n]}(e,n);if(i)return Array.isArray(i)?i.map((function(e){return t(e,r,o,a)})):t(i,r,o,a)}));return ai(r?o.reverse():o)}function ui(e,n){if(n)return function(){return e.apply(n,arguments)}}ci.prototype.listen=function(e){this.cb=e},ci.prototype.onReady=function(e,n){this.ready?e():(this.readyCbs.push(e),n&&this.readyErrorCbs.push(n))},ci.prototype.onError=function(e){this.errorCbs.push(e)},ci.prototype.transitionTo=function(e,n,t){var r,o=this;try{r=this.router.match(e,this.current)}catch(e){throw this.errorCbs.forEach((function(n){n(e)})),e}var a=this.current;this.confirmTransition(r,(function(){o.updateRoute(r),n&&n(r),o.ensureURL(),o.router.afterHooks.forEach((function(e){e&&e(r,a)})),o.ready||(o.ready=!0,o.readyCbs.forEach((function(e){e(r)})))}),(function(e){t&&t(e),e&&!o.ready&&(ti(e,Za.redirected)&&a===Bo||(o.ready=!0,o.readyErrorCbs.forEach((function(n){n(e)}))))}))},ci.prototype.confirmTransition=function(e,n,t){var r=this,o=this.current;this.pending=e;var a,i,s=function(e){!ti(e)&&ni(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(n){n(e)})):console.error(e)),t&&t(e)},c=e.matched.length-1,l=o.matched.length-1;if(Xo(e,o)&&c===l&&e.matched[c]===o.matched[l])return this.ensureURL(),s(((i=Qa(a=o,e,Za.duplicated,'Avoided redundant navigation to current location: "'+a.fullPath+'".')).name="NavigationDuplicated",i));var u=function(e,n){var t,r=Math.max(e.length,n.length);for(t=0;t<r&&e[t]===n[t];t++);return{updated:n.slice(0,t),activated:n.slice(t),deactivated:e.slice(t)}}(this.current.matched,e.matched),p=u.updated,d=u.deactivated,h=u.activated,f=[].concat(function(e){return li(e,"beforeRouteLeave",ui,!0)}(d),this.router.beforeHooks,function(e){return li(e,"beforeRouteUpdate",ui)}(p),h.map((function(e){return e.beforeEnter})),ri(h)),m=function(n,t){if(r.pending!==e)return s(Ja(o,e));try{n(e,o,(function(n){!1===n?(r.ensureURL(!0),s(function(e,n){return Qa(e,n,Za.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+n.fullPath+'" via a navigation guard.')}(o,e))):ni(n)?(r.ensureURL(!0),s(n)):"string"==typeof n||"object"==typeof n&&("string"==typeof n.path||"string"==typeof n.name)?(s(Ya(o,e)),"object"==typeof n&&n.replace?r.replace(n):r.push(n)):t(n)}))}catch(e){s(e)}};Xa(f,m,(function(){Xa(function(e){return li(e,"beforeRouteEnter",(function(e,n,t,r){return function(e,n,t){return function(r,o,a){return e(r,o,(function(e){"function"==typeof e&&(n.enteredCbs[t]||(n.enteredCbs[t]=[]),n.enteredCbs[t].push(e)),a(e)}))}}(e,t,r)}))}(h).concat(r.router.resolveHooks),m,(function(){if(r.pending!==e)return s(Ja(o,e));r.pending=null,n(e),r.router.app&&r.router.app.$nextTick((function(){Yo(e)}))}))}))},ci.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},ci.prototype.setupListeners=function(){},ci.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=Bo,this.pending=null};var pi=function(e){function n(n,t){e.call(this,n,t),this._startLocation=di(this.base)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router,t=n.options.scrollBehavior,r=Ba&&t;r&&this.listeners.push(Ua());var o=function(){var t=e.current,o=di(e.base);e.current===Bo&&o===e._startLocation||e.transitionTo(o,(function(e){r&&Ra(n,e,t,!0)}))};window.addEventListener("popstate",o),this.listeners.push((function(){window.removeEventListener("popstate",o)}))}},n.prototype.go=function(e){window.history.go(e)},n.prototype.push=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){Wa(na(r.base+e.fullPath)),Ra(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){Ka(na(r.base+e.fullPath)),Ra(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.ensureURL=function(e){if(di(this.base)!==this.current.fullPath){var n=na(this.base+this.current.fullPath);e?Wa(n):Ka(n)}},n.prototype.getCurrentLocation=function(){return di(this.base)},n}(ci);function di(e){var n=window.location.pathname;return e&&0===n.toLowerCase().indexOf(e.toLowerCase())&&(n=n.slice(e.length)),(n||"/")+window.location.search+window.location.hash}var hi=function(e){function n(n,t,r){e.call(this,n,t),r&&function(e){var n=di(e);if(!/^\/#/.test(n))return window.location.replace(na(e+"/#"+n)),!0}(this.base)||fi()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router.options.scrollBehavior,t=Ba&&n;t&&this.listeners.push(Ua());var r=function(){var n=e.current;fi()&&e.transitionTo(mi(),(function(r){t&&Ra(e.router,r,n,!0),Ba||bi(r.fullPath)}))},o=Ba?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push((function(){window.removeEventListener(o,r)}))}},n.prototype.push=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){vi(e.fullPath),Ra(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this,o=this.current;this.transitionTo(e,(function(e){bi(e.fullPath),Ra(r.router,e,o,!1),n&&n(e)}),t)},n.prototype.go=function(e){window.history.go(e)},n.prototype.ensureURL=function(e){var n=this.current.fullPath;mi()!==n&&(e?vi(n):bi(n))},n.prototype.getCurrentLocation=function(){return mi()},n}(ci);function fi(){var e=mi();return"/"===e.charAt(0)||(bi("/"+e),!1)}function mi(){var e=window.location.href,n=e.indexOf("#");return n<0?"":e=e.slice(n+1)}function gi(e){var n=window.location.href,t=n.indexOf("#");return(t>=0?n.slice(0,t):n)+"#"+e}function vi(e){Ba?Wa(gi(e)):window.location.hash=e}function bi(e){Ba?Ka(gi(e)):window.location.replace(gi(e))}var yi=function(e){function n(n,t){e.call(this,n,t),this.stack=[],this.index=-1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.push=function(e,n,t){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),n&&n(e)}),t)},n.prototype.go=function(e){var n=this,t=this.index+e;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var e=n.current;n.index=t,n.updateRoute(r),n.router.afterHooks.forEach((function(n){n&&n(r,e)}))}),(function(e){ti(e,Za.duplicated)&&(n.index=t)}))}},n.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},n.prototype.ensureURL=function(){},n}(ci),wi=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Sa(e.routes||[],this);var n=e.mode||"hash";switch(this.fallback="history"===n&&!Ba&&!1!==e.fallback,this.fallback&&(n="hash"),ja||(n="abstract"),this.mode=n,n){case"history":this.history=new pi(this,e.base);break;case"hash":this.history=new hi(this,e.base,this.fallback);break;case"abstract":this.history=new yi(this,e.base);break;default:0}},ki={currentRoute:{configurable:!0}};function xi(e,n){return e.push(n),function(){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}wi.prototype.match=function(e,n,t){return this.matcher.match(e,n,t)},ki.currentRoute.get=function(){return this.history&&this.history.current},wi.prototype.init=function(e){var n=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var t=n.apps.indexOf(e);t>-1&&n.apps.splice(t,1),n.app===e&&(n.app=n.apps[0]||null),n.app||n.history.teardown()})),!this.app){this.app=e;var t=this.history;if(t instanceof pi||t instanceof hi){var r=function(e){t.setupListeners(),function(e){var r=t.current,o=n.options.scrollBehavior;Ba&&o&&"fullPath"in e&&Ra(n,e,r,!1)}(e)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(e){n.apps.forEach((function(n){n._route=e}))}))}},wi.prototype.beforeEach=function(e){return xi(this.beforeHooks,e)},wi.prototype.beforeResolve=function(e){return xi(this.resolveHooks,e)},wi.prototype.afterEach=function(e){return xi(this.afterHooks,e)},wi.prototype.onReady=function(e,n){this.history.onReady(e,n)},wi.prototype.onError=function(e){this.history.onError(e)},wi.prototype.push=function(e,n,t){var r=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){r.history.push(e,n,t)}));this.history.push(e,n,t)},wi.prototype.replace=function(e,n,t){var r=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){r.history.replace(e,n,t)}));this.history.replace(e,n,t)},wi.prototype.go=function(e){this.history.go(e)},wi.prototype.back=function(){this.go(-1)},wi.prototype.forward=function(){this.go(1)},wi.prototype.getMatchedComponents=function(e){var n=e?e.matched?e:this.resolve(e).route:this.currentRoute;return n?[].concat.apply([],n.matched.map((function(e){return Object.keys(e.components).map((function(n){return e.components[n]}))}))):[]},wi.prototype.resolve=function(e,n,t){var r=wa(e,n=n||this.history.current,t,this),o=this.match(r,n),a=o.redirectedFrom||o.fullPath;return{location:r,route:o,href:function(e,n,t){var r="hash"===t?"#"+n:n;return e?na(e+"/"+r):r}(this.history.base,a,this.mode),normalizedTo:r,resolved:o}},wi.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==Bo&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(wi.prototype,ki),wi.install=function e(n){if(!e.installed||ka!==n){e.installed=!0,ka=n;var t=function(e){return void 0!==e},r=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};n.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),n.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(n.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(n.prototype,"$route",{get:function(){return this._routerRoot._route}}),n.component("RouterView",Jo),n.component("RouterLink",za);var o=n.config.optionMergeStrategies;o.beforeRouteEnter=o.beforeRouteLeave=o.beforeRouteUpdate=o.created}},wi.version="3.4.9",wi.isNavigationFailure=ti,wi.NavigationFailureType=Za,ja&&window.Vue&&window.Vue.use(wi);var zi=wi;t(50),t(209),t(211),t(143),t(144),t(73),t(213),t(51);function _i(e){e.locales&&Object.keys(e.locales).forEach((function(n){e.locales[n].path=n})),Object.freeze(e)}t(190),t(147),t(30),t(192),t(72),t(42),t(62),t(89);function ji(e){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ti=t(44),Ci={NotFound:function(){return t.e(18).then(t.bind(null,395))},Layout:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,394))}},Si={"v-a63fb654":function(){return t.e(19).then(t.bind(null,399))},"v-8c6cd476":function(){return t.e(20).then(t.bind(null,400))},"v-4636b65a":function(){return t.e(21).then(t.bind(null,401))},"v-6632c65c":function(){return t.e(6).then(t.bind(null,402))},"v-138dd3b6":function(){return t.e(22).then(t.bind(null,403))},"v-986eabf6":function(){return t.e(23).then(t.bind(null,404))},"v-9a046382":function(){return t.e(8).then(t.bind(null,405))},"v-9848c836":function(){return t.e(9).then(t.bind(null,406))},"v-7b3117b6":function(){return t.e(10).then(t.bind(null,407))},"v-aa7f5176":function(){return t.e(11).then(t.bind(null,408))},"v-f0437936":function(){return t.e(24).then(t.bind(null,409))},"v-e78b61b4":function(){return t.e(25).then(t.bind(null,410))},"v-e8334676":function(){return t.e(27).then(t.bind(null,411))},"v-05feabe2":function(){return t.e(28).then(t.bind(null,412))},"v-62d6f28b":function(){return t.e(29).then(t.bind(null,413))},"v-bb95bd2a":function(){return t.e(30).then(t.bind(null,414))},"v-499e482e":function(){return t.e(31).then(t.bind(null,415))},"v-142c9667":function(){return t.e(32).then(t.bind(null,416))},"v-0d2b8d4f":function(){return t.e(26).then(t.bind(null,417))},"v-4d2850e5":function(){return t.e(33).then(t.bind(null,418))},"v-f3b7e93a":function(){return t.e(34).then(t.bind(null,419))},"v-b67c6696":function(){return t.e(35).then(t.bind(null,420))},"v-16b941b1":function(){return t.e(37).then(t.bind(null,421))},"v-3059b636":function(){return t.e(38).then(t.bind(null,422))},"v-4484f19a":function(){return t.e(36).then(t.bind(null,423))},"v-abd23af4":function(){return t.e(39).then(t.bind(null,424))},"v-e3334036":function(){return t.e(40).then(t.bind(null,425))},"v-8a78edf4":function(){return t.e(41).then(t.bind(null,426))},"v-5b14bf66":function(){return t.e(12).then(t.bind(null,427))},"v-1ca74985":function(){return t.e(42).then(t.bind(null,428))},"v-68c1b705":function(){return t.e(43).then(t.bind(null,429))},"v-1a80f121":function(){return t.e(14).then(t.bind(null,430))},"v-41764076":function(){return t.e(13).then(t.bind(null,431))},"v-161e7101":function(){return t.e(15).then(t.bind(null,432))},"v-6794a0e5":function(){return t.e(16).then(t.bind(null,433))},"v-04b09bc6":function(){return t.e(44).then(t.bind(null,434))},"v-2b7be474":function(){return t.e(45).then(t.bind(null,435))},"v-813ddbca":function(){return t.e(7).then(t.bind(null,436))},"v-b1b87fde":function(){return t.e(46).then(t.bind(null,437))},"v-6bc5020f":function(){return t.e(47).then(t.bind(null,438))},"v-6f04e94f":function(){return t.e(49).then(t.bind(null,439))},"v-5f13d676":function(){return t.e(50).then(t.bind(null,440))},"v-2554b505":function(){return t.e(51).then(t.bind(null,441))},"v-423c9cc5":function(){return t.e(48).then(t.bind(null,442))},"v-378b472d":function(){return t.e(52).then(t.bind(null,443))},"v-134c07e5":function(){return t.e(54).then(t.bind(null,444))},"v-4c2ccf85":function(){return t.e(53).then(t.bind(null,445))},"v-4b297f76":function(){return t.e(55).then(t.bind(null,446))},"v-bceb0eb6":function(){return t.e(56).then(t.bind(null,447))},"v-4c77c1a5":function(){return t.e(58).then(t.bind(null,448))},"v-1396fa05":function(){return t.e(59).then(t.bind(null,449))},"v-68a9b105":function(){return t.e(57).then(t.bind(null,450))},"v-1eb25f05":function(){return t.e(61).then(t.bind(null,451))},"v-4a939b36":function(){return t.e(60).then(t.bind(null,452))},"v-14c38005":function(){return t.e(62).then(t.bind(null,453))}};function Ai(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var qi=/-(\w)/g,Pi=Ai((function(e){return e.replace(qi,(function(e,n){return n?n.toUpperCase():""}))})),Ii=/\B([A-Z])/g,Oi=Ai((function(e){return e.replace(Ii,"-$1").toLowerCase()})),Ei=Ai((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}));function Li(e,n){if(n)return e(n)?e(n):n.includes("-")?e(Ei(Pi(n))):e(Ei(n))||e(Oi(n))}var Ui=Object.assign({},Ci,Si),Ri=function(e){return Ui[e]},Ni=function(e){return Si[e]},$i=function(e){return Ci[e]},Fi=function(e){return Oo.component(e)};function Di(e){return Li(Ni,e)}function Mi(e){return Li($i,e)}function Vi(e){return Li(Ri,e)}function Gi(e){return Li(Fi,e)}function Hi(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Promise.all(n.filter((function(e){return e})).map(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gi(n)||!Vi(n)){e.next=5;break}return e.next=3,Vi(n)();case 3:t=e.sent,Oo.component(n,t.default);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))}function Bi(e,n){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[e]=n)}t(108),t(185);var Wi=t(102),Ki=t(177),Xi=t.n(Ki),Zi={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(e){return"meta"===Object(Wi.a)(e,1)[0]})).map((function(e){var n=Object(Wi.a)(e,2);n[0];return n[1]})),this.$ssrContext){var e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map((function(e){var n="<meta";return Object.keys(e).forEach((function(t){n+=" ".concat(t,'="').concat(e[t],'"')})),n+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=Ji(this.$canonicalUrl)}var n},mounted:function(){this.currentMetaTags=Object(Ti.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var e=this.getMergedMetaTags();this.currentMetaTags=Qi(e,this.currentMetaTags)},getMergedMetaTags:function(){var e=this.$page.frontmatter.meta||[];return Xi()([{name:"description",content:this.$description}],e,this.siteMeta,es)},updateCanonicalLink:function(){Yi(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",Ji(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){Qi(null,this.currentMetaTags),Yi()}};function Yi(){var e=document.querySelector("link[rel='canonical']");e&&e.remove()}function Ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?'<link href="'.concat(e,'" rel="canonical" />'):""}function Qi(e,n){if(n&&Object(Ti.a)(n).filter((function(e){return e.parentNode===document.head})).forEach((function(e){return document.head.removeChild(e)})),e)return e.map((function(e){var n=document.createElement("meta");return Object.keys(e).forEach((function(t){n.setAttribute(t,e[t])})),document.head.appendChild(n),n}))}function es(e){for(var n=0,t=["name","property","itemprop"];n<t.length;n++){var r=t[n];if(e.hasOwnProperty(r))return e[r]+r}return JSON.stringify(e)}t(178);var ns=t(69),ts=t.n(ns),rs={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:ts()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var e=this,n=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(e){return n.some((function(n){return n.hash===e.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=window.innerHeight+r,i=0;i<t.length;i++){var s=t[i],c=t[i+1],l=0===i&&0===r||r>=s.parentElement.offsetTop+10&&(!c||r<c.parentElement.offsetTop-10),u=decodeURIComponent(this.$route.hash);if(l&&u!==decodeURIComponent(s.hash)){var p=s;if(a===o)for(var d=i+1;d<t.length;d++)if(u===decodeURIComponent(t[d].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(p.hash),(function(){e.$nextTick((function(){e.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},os=(t(90),t(70)),as=t.n(os),is={mounted:function(){var e=this;as.a.configure({showSpinner:!1}),this.$router.beforeEach((function(e,n,t){e.path===n.path||Oo.component(e.name)||as.a.start(),t()})),this.$router.afterEach((function(){as.a.done(),e.isSidebarOpen=!1}))}},ss=(t(100),t(311),Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}),cs=function(e){return"IMG"===e.tagName},ls=function(e){return e&&1===e.nodeType},us=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},ps=function(e){try{return Array.isArray(e)?e.filter(cs):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(cs):ls(e)?[e].filter(cs):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(cs):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},ds=function(e){var n=document.createElement("div");return n.classList.add("medium-zoom-overlay"),n.style.background=e,n},hs=function(e){var n=e.getBoundingClientRect(),t=n.top,r=n.left,o=n.width,a=n.height,i=e.cloneNode(),s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return i.removeAttribute("id"),i.style.position="absolute",i.style.top=t+s+"px",i.style.left=r+c+"px",i.style.width=o+"px",i.style.height=a+"px",i.style.transform="",i},fs=function(e,n){var t=ss({bubbles:!1,cancelable:!1,detail:void 0},n);if("function"==typeof window.CustomEvent)return new CustomEvent(e,t);var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r};!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}");var ms=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=window.Promise||function(e){function n(){}e(n,n)},o=function(e){var n=e.target;n!==j?-1!==y.indexOf(n)&&m({target:n}):f()},a=function(){if(!k&&_.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(x-e)>z.scrollOffset&&setTimeout(f,150)}},i=function(e){var n=e.key||e.keyCode;"Escape"!==n&&"Esc"!==n&&27!==n||f()},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e;if(e.background&&(j.style.background=e.background),e.container&&e.container instanceof Object&&(n.container=ss({},z.container,e.container)),e.template){var t=ls(e.template)?e.template:document.querySelector(e.template);n.template=t}return z=ss({},z,n),y.forEach((function(e){e.dispatchEvent(fs("medium-zoom:update",{detail:{zoom:T}}))})),T},c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(ss({},z,n))},l=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n.reduce((function(e,n){return[].concat(e,ps(n))}),[]);return r.filter((function(e){return-1===y.indexOf(e)})).forEach((function(e){y.push(e),e.classList.add("medium-zoom-image")})),w.forEach((function(e){var n=e.type,t=e.listener,o=e.options;r.forEach((function(e){e.addEventListener(n,t,o)}))})),T},u=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];_.zoomed&&f();var r=n.length>0?n.reduce((function(e,n){return[].concat(e,ps(n))}),[]):y;return r.forEach((function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(fs("medium-zoom:detach",{detail:{zoom:T}}))})),y=y.filter((function(e){return-1===r.indexOf(e)})),T},p=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.forEach((function(r){r.addEventListener("medium-zoom:"+e,n,t)})),w.push({type:"medium-zoom:"+e,listener:n,options:t}),T},d=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.forEach((function(r){r.removeEventListener("medium-zoom:"+e,n,t)})),w=w.filter((function(t){return!(t.type==="medium-zoom:"+e&&t.listener.toString()===n.toString())})),T},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.target,t=function(){var e={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},n=void 0,t=void 0;if(z.container)if(z.container instanceof Object)n=(e=ss({},e,z.container)).width-e.left-e.right-2*z.margin,t=e.height-e.top-e.bottom-2*z.margin;else{var r=(ls(z.container)?z.container:document.querySelector(z.container)).getBoundingClientRect(),o=r.width,a=r.height,i=r.left,s=r.top;e=ss({},e,{width:o,height:a,left:i,top:s})}n=n||e.width-2*z.margin,t=t||e.height-2*z.margin;var c=_.zoomedHd||_.original,l=us(c)?n:c.naturalWidth||n,u=us(c)?t:c.naturalHeight||t,p=c.getBoundingClientRect(),d=p.top,h=p.left,f=p.width,m=p.height,g=Math.min(l,n)/f,v=Math.min(u,t)/m,b=Math.min(g,v),y="scale("+b+") translate3d("+((n-f)/2-h+z.margin+e.left)/b+"px, "+((t-m)/2-d+z.margin+e.top)/b+"px, 0)";_.zoomed.style.transform=y,_.zoomedHd&&(_.zoomedHd.style.transform=y)};return new r((function(e){if(n&&-1===y.indexOf(n))e(T);else{if(_.zoomed)e(T);else{if(n)_.original=n;else{if(!(y.length>0))return void e(T);var r=y;_.original=r[0]}if(_.original.dispatchEvent(fs("medium-zoom:open",{detail:{zoom:T}})),x=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,k=!0,_.zoomed=hs(_.original),document.body.appendChild(j),z.template){var o=ls(z.template)?z.template:document.querySelector(z.template);_.template=document.createElement("div"),_.template.appendChild(o.content.cloneNode(!0)),document.body.appendChild(_.template)}if(document.body.appendChild(_.zoomed),window.requestAnimationFrame((function(){document.body.classList.add("medium-zoom--opened")})),_.original.classList.add("medium-zoom-image--hidden"),_.zoomed.classList.add("medium-zoom-image--opened"),_.zoomed.addEventListener("click",f),_.zoomed.addEventListener("transitionend",(function n(){k=!1,_.zoomed.removeEventListener("transitionend",n),_.original.dispatchEvent(fs("medium-zoom:opened",{detail:{zoom:T}})),e(T)})),_.original.getAttribute("data-zoom-src")){_.zoomedHd=_.zoomed.cloneNode(),_.zoomedHd.removeAttribute("srcset"),_.zoomedHd.removeAttribute("sizes"),_.zoomedHd.src=_.zoomed.getAttribute("data-zoom-src"),_.zoomedHd.onerror=function(){clearInterval(a),console.warn("Unable to reach the zoom image target "+_.zoomedHd.src),_.zoomedHd=null,t()};var a=setInterval((function(){_.zoomedHd.complete&&(clearInterval(a),_.zoomedHd.classList.add("medium-zoom-image--opened"),_.zoomedHd.addEventListener("click",f),document.body.appendChild(_.zoomedHd),t())}),10)}else if(_.original.hasAttribute("srcset")){_.zoomedHd=_.zoomed.cloneNode(),_.zoomedHd.removeAttribute("sizes"),_.zoomedHd.removeAttribute("loading");var i=_.zoomedHd.addEventListener("load",(function(){_.zoomedHd.removeEventListener("load",i),_.zoomedHd.classList.add("medium-zoom-image--opened"),_.zoomedHd.addEventListener("click",f),document.body.appendChild(_.zoomedHd),t()}))}else t()}}}))},f=function(){return new r((function(e){if(!k&&_.original){k=!0,document.body.classList.remove("medium-zoom--opened"),_.zoomed.style.transform="",_.zoomedHd&&(_.zoomedHd.style.transform=""),_.template&&(_.template.style.transition="opacity 150ms",_.template.style.opacity=0),_.original.dispatchEvent(fs("medium-zoom:close",{detail:{zoom:T}})),_.zoomed.addEventListener("transitionend",(function n(){_.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(_.zoomed),_.zoomedHd&&document.body.removeChild(_.zoomedHd),document.body.removeChild(j),_.zoomed.classList.remove("medium-zoom-image--opened"),_.template&&document.body.removeChild(_.template),k=!1,_.zoomed.removeEventListener("transitionend",n),_.original.dispatchEvent(fs("medium-zoom:closed",{detail:{zoom:T}})),_.original=null,_.zoomed=null,_.zoomedHd=null,_.template=null,e(T)}))}else e(T)}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.target;return _.original?f():h({target:n})},g=function(){return z},v=function(){return y},b=function(){return _.original},y=[],w=[],k=!1,x=0,z=t,_={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(n)?z=n:(n||"string"==typeof n)&&l(n),z=ss({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},z);var j=ds(z.background);document.addEventListener("click",o),document.addEventListener("keyup",i),document.addEventListener("scroll",a),window.addEventListener("resize",f);var T={open:h,close:f,toggle:m,update:s,clone:c,attach:l,detach:u,on:p,off:d,getOptions:g,getImages:v,getZoomedImage:b};return T},gs={data:function(){return{zoom:null}},mounted:function(){this.updateZoom()},updated:function(){this.updateZoom()},methods:{updateZoom:function(){var e=this;setTimeout((function(){e.zoom&&e.zoom.detach(),e.zoom=ms(".theme-default-content :not(a) > img",{})}),1e3)}}},vs=t(120),bs=(t(195),{props:{parent:Object,code:String,options:{align:String,color:String,backgroundTransition:Boolean,backgroundColor:String,successText:String,staticIcon:Boolean}},data:function(){return{success:!1,originalBackground:null,originalTransition:null}},computed:{alignStyle:function(){var e={};return e[this.options.align]="7.5px",e},iconClass:function(){return this.options.staticIcon?"":"hover"}},mounted:function(){this.originalTransition=this.parent.style.transition,this.originalBackground=this.parent.style.background},beforeDestroy:function(){this.parent.style.transition=this.originalTransition,this.parent.style.background=this.originalBackground},methods:{hexToRgb:function(e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},copyToClipboard:function(e){var n=this;if(navigator.clipboard)navigator.clipboard.writeText(this.code).then((function(){n.setSuccessTransitions()}),(function(){}));else{var t=document.createElement("textarea");document.body.appendChild(t),t.value=this.code,t.select(),document.execCommand("Copy"),t.remove(),this.setSuccessTransitions()}},setSuccessTransitions:function(){var e=this;if(clearTimeout(this.successTimeout),this.options.backgroundTransition){this.parent.style.transition="background 350ms";var n=this.hexToRgb(this.options.backgroundColor);this.parent.style.background="rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", 0.1)")}this.success=!0,this.successTimeout=setTimeout((function(){e.options.backgroundTransition&&(e.parent.style.background=e.originalBackground,e.parent.style.transition=e.originalTransition),e.success=!1}),500)}}}),ys=(t(315),t(17)),ws=Object(ys.a)(bs,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"code-copy"},[t("svg",{class:e.iconClass,style:e.alignStyle,attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},on:{click:e.copyToClipboard}},[t("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e._v(" "),t("path",{attrs:{fill:e.options.color,d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}})]),e._v(" "),t("span",{class:e.success?"success":"",style:e.alignStyle},[e._v("\n        "+e._s(e.options.successText)+"\n    ")])])}),[],!1,null,"49140617",null).exports,ks=(t(316),[Zi,rs,is,gs,{updated:function(){this.update()},methods:{update:function(){setTimeout((function(){document.querySelectorAll('div[class*="language-"] pre').forEach((function(e){if(!e.classList.contains("code-copy-added")){var n=new(Oo.extend(ws));n.options=Object(vs.a)({},{align:"bottom",color:"#27b1ff",backgroundTransition:!0,backgroundColor:"#0075b8",successText:"Copied!",staticIcon:!1}),n.code=e.innerText,n.parent=e,n.$mount(),e.classList.add("code-copy-added"),e.appendChild(n.$el)}}))}),100)}}}]),xs={name:"GlobalLayout",computed:{layout:function(){var e=this.getLayout();return Bi("layout",e),Oo.component(e)}},methods:{getLayout:function(){if(this.$page.path){var e=this.$page.frontmatter.layout;return e&&(this.$vuepress.getLayoutAsyncComponent(e)||this.$vuepress.getVueComponent(e))?e:"Layout"}return"NotFound"}}},zs=Object(ys.a)(xs,(function(){var e=this.$createElement;return(this._self._c||e)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(e,n,t){var r;switch(n){case"components":e[n]||(e[n]={}),Object.assign(e[n],t);break;case"mixins":e[n]||(e[n]=[]),(r=e[n]).push.apply(r,Object(Ti.a)(t));break;default:throw new Error("Unknown option name.")}}(zs,"mixins",ks);var _s=[{name:"v-a63fb654",path:"/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-a63fb654").then(t)}},{path:"/index.html",redirect:"/"},{name:"v-8c6cd476",path:"/_Footer.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-8c6cd476").then(t)}},{name:"v-4636b65a",path:"/about/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-4636b65a").then(t)}},{path:"/about/index.html",redirect:"/about/"},{name:"v-6632c65c",path:"/intro/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-6632c65c").then(t)}},{path:"/intro/index.html",redirect:"/intro/"},{name:"v-138dd3b6",path:"/intro/_Footer.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-138dd3b6").then(t)}},{name:"v-986eabf6",path:"/intro/contribute-docs.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-986eabf6").then(t)}},{name:"v-9a046382",path:"/intro/damocles.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-9a046382").then(t)}},{name:"v-9848c836",path:"/intro/droplet.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-9848c836").then(t)}},{name:"v-7b3117b6",path:"/intro/one-pager.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-7b3117b6").then(t)}},{name:"v-aa7f5176",path:"/intro/sophon.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-aa7f5176").then(t)}},{name:"v-f0437936",path:"/operation/Efficiency_of_sealing.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-f0437936").then(t)}},{name:"v-e78b61b4",path:"/operation/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-e78b61b4").then(t)}},{path:"/operation/index.html",redirect:"/operation/"},{name:"v-e8334676",path:"/operation/_Footer.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-e8334676").then(t)}},{name:"v-05feabe2",path:"/operation/example-single-box.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-05feabe2").then(t)}},{name:"v-62d6f28b",path:"/operation/lotus-vs-venus.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-62d6f28b").then(t)}},{name:"v-bb95bd2a",path:"/operation/nv15-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-bb95bd2a").then(t)}},{name:"v-499e482e",path:"/operation/nv16-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-499e482e").then(t)}},{name:"v-142c9667",path:"/operation/nv17-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-142c9667").then(t)}},{name:"v-0d2b8d4f",path:"/operation/System_monitor_of_Zabbix.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-0d2b8d4f").then(t)}},{name:"v-4d2850e5",path:"/operation/nv18-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-4d2850e5").then(t)}},{name:"v-f3b7e93a",path:"/operation/nv19-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-f3b7e93a").then(t)}},{name:"v-b67c6696",path:"/operation/nv21-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-b67c6696").then(t)}},{name:"v-16b941b1",path:"/operation/nv23-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-16b941b1").then(t)}},{name:"v-3059b636",path:"/questions.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-3059b636").then(t)}},{name:"v-4484f19a",path:"/operation/nv22-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-4484f19a").then(t)}},{name:"v-abd23af4",path:"/zh/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-abd23af4").then(t)}},{path:"/zh/index.html",redirect:"/zh/"},{name:"v-e3334036",path:"/zh/TODO.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-e3334036").then(t)}},{name:"v-8a78edf4",path:"/zh/about/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-8a78edf4").then(t)}},{path:"/zh/about/index.html",redirect:"/zh/about/"},{name:"v-5b14bf66",path:"/zh/intro/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-5b14bf66").then(t)}},{path:"/zh/intro/index.html",redirect:"/zh/intro/"},{name:"v-1ca74985",path:"/zh/intro/_Footer.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-1ca74985").then(t)}},{name:"v-68c1b705",path:"/zh/intro/contribute-doc.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-68c1b705").then(t)}},{name:"v-1a80f121",path:"/zh/intro/droplet.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-1a80f121").then(t)}},{name:"v-41764076",path:"/zh/intro/damocles.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-41764076").then(t)}},{name:"v-161e7101",path:"/zh/intro/one-pager.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-161e7101").then(t)}},{name:"v-6794a0e5",path:"/zh/intro/sophon.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-6794a0e5").then(t)}},{name:"v-04b09bc6",path:"/zh/operation/Efficiency_of_sealing.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-04b09bc6").then(t)}},{name:"v-2b7be474",path:"/zh/operation/",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-2b7be474").then(t)}},{path:"/zh/operation/index.html",redirect:"/zh/operation/"},{name:"v-813ddbca",path:"/zh/operation/Independent_com_access_analysis.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-813ddbca").then(t)}},{name:"v-b1b87fde",path:"/zh/operation/Sealing_deploy_plan_1.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-b1b87fde").then(t)}},{name:"v-6bc5020f",path:"/zh/operation/Sealing_deploy_plan_2.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-6bc5020f").then(t)}},{name:"v-6f04e94f",path:"/zh/operation/_Footer.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-6f04e94f").then(t)}},{name:"v-5f13d676",path:"/zh/operation/example-single-box.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-5f13d676").then(t)}},{name:"v-2554b505",path:"/zh/operation/lotus-vs-venus.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-2554b505").then(t)}},{name:"v-423c9cc5",path:"/zh/operation/System_monitor_of_Zabbix.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-423c9cc5").then(t)}},{name:"v-378b472d",path:"/zh/operation/migrate_market_v1_to_v2.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-378b472d").then(t)}},{name:"v-134c07e5",path:"/zh/operation/nv16-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-134c07e5").then(t)}},{name:"v-4c2ccf85",path:"/zh/operation/nv15-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-4c2ccf85").then(t)}},{name:"v-4b297f76",path:"/zh/operation/nv17-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-4b297f76").then(t)}},{name:"v-bceb0eb6",path:"/zh/operation/nv18-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-bceb0eb6").then(t)}},{name:"v-4c77c1a5",path:"/zh/operation/nv21-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-4c77c1a5").then(t)}},{name:"v-1396fa05",path:"/zh/operation/nv22-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-1396fa05").then(t)}},{name:"v-68a9b105",path:"/zh/operation/nv19-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-68a9b105").then(t)}},{name:"v-1eb25f05",path:"/zh/operation/prometheus-instruction.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-1eb25f05").then(t)}},{name:"v-4a939b36",path:"/zh/operation/nv23-upgrade.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-4a939b36").then(t)}},{name:"v-14c38005",path:"/zh/operation/troubleshoot-consensus-fault.html",component:zs,beforeEnter:function(e,n,t){Hi("Layout","v-14c38005").then(t)}},{path:"*",component:zs}],js={title:"Venus Filecoin",description:"Venus is a Go implementation of the Filecoin Distributed Storage Network.",base:"/",headTags:[["link",{rel:"icon",href:"/assets/venus-logo.png"}],["script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-SMSDTMGLTV"}],["script",{},["window.dataLayer = window.dataLayer || [];\nfunction gtag(){dataLayer.push(arguments);}\ngtag('js', new Date());\ngtag('config', 'G-SMSDTMGLTV');"]]],pages:[{title:"Home",frontmatter:{home:!0,heroImage:"/assets/venus-hero-logo.png",actionText:"Get Started →",actionLink:"/intro/",footer:"MIT Apache dual Licensed"},regularPath:"/",relativePath:"README.md",key:"v-a63fb654",path:"/",lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:null,content:"Distributed Infrastructure\n\nAdhering to design principles of distributed systems, Venus chain service enables you to scale and guarantees availability to your storage providing systems\n\n\nOptimized Storage Deal\n\nSolution for both storage client and storage provider enables seamless storage deal process\n\n\nReimagined Storage Power\n\nCompletely revamped sealer submodule to help you to grow and maintain your storage power with more efficiency and stability",normalizedContent:"distributed infrastructure\n\nadhering to design principles of distributed systems, venus chain service enables you to scale and guarantees availability to your storage providing systems\n\n\noptimized storage deal\n\nsolution for both storage client and storage provider enables seamless storage deal process\n\n\nreimagined storage power\n\ncompletely revamped sealer submodule to help you to grow and maintain your storage power with more efficiency and stability",charsets:{}},{frontmatter:{},regularPath:"/_Footer.html",relativePath:"_Footer.md",key:"v-8c6cd476",path:"/_Footer.html",lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:null,content:"See something missing? Have tips to share? File an issue, and we'll follow up as soon as possible. (If you have write permission in this repo, feel free to edit directly.)",normalizedContent:"see something missing? have tips to share? file an issue, and we'll follow up as soon as possible. (if you have write permission in this repo, feel free to edit directly.)",charsets:{}},{title:"Mission, Vision, Value",frontmatter:{},regularPath:"/about/",relativePath:"about/README.md",key:"v-4636b65a",path:"/about/",headers:[{level:2,title:"Mission, Vision, Value",slug:"mission-vision-value",normalizedTitle:"mission, vision, value",charIndex:2},{level:2,title:"Contacts",slug:"contacts",normalizedTitle:"contacts",charIndex:192},{level:2,title:"Resources",slug:"resources",normalizedTitle:"resources",charIndex:278}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Mission, Vision, Value Contacts Resources",content:"# Mission, Vision, Value\n\n * ❗️Mission: push ecosystem forward by driving Filcoin infrastructure\n * 🌏 Vision: democratize Filecoin ecosystem participation\n * ☯️ Value: Open and trustless\n\n\n# Contacts\n\n * Ask us any questions: #fil-venus, #fil-venus-cn, venus@ipfsforce.com\n\n\n# Resources\n\n * venus-docs: venus.filecoin.io\n * VenusHub: venushub.io\n * Github: venus, damocles, droplet\n * Social Media: Twitter, Wechat\n * Security audit report: link",normalizedContent:"# mission, vision, value\n\n * ❗️mission: push ecosystem forward by driving filcoin infrastructure\n * 🌏 vision: democratize filecoin ecosystem participation\n * ☯️ value: open and trustless\n\n\n# contacts\n\n * ask us any questions: #fil-venus, #fil-venus-cn, venus@ipfsforce.com\n\n\n# resources\n\n * venus-docs: venus.filecoin.io\n * venushub: venushub.io\n * github: venus, damocles, droplet\n * social media: twitter, wechat\n * security audit report: link",charsets:{}},{title:"Preface",frontmatter:{},regularPath:"/intro/",relativePath:"intro/README.md",key:"v-6632c65c",path:"/intro/",headers:[{level:2,title:"Preface",slug:"preface",normalizedTitle:"preface",charIndex:2},{level:2,title:"Why are we doing this",slug:"why-are-we-doing-this",normalizedTitle:"why are we doing this",charIndex:950},{level:2,title:"How Venus works",slug:"how-venus-works",normalizedTitle:"how venus works",charIndex:5701},{level:3,title:"Architecture",slug:"architecture",normalizedTitle:"architecture",charIndex:5721},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:442},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:796},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:751},{level:3,title:"sophon-messenger",slug:"sophon-messenger",normalizedTitle:"sophon-messenger",charIndex:10085},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:765},{level:3,title:"droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:5842},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:809},{level:3,title:"damocles",slug:"damocles",normalizedTitle:"damocles",charIndex:741},{level:2,title:"Learn more about Venus",slug:"learn-more-about-venus",normalizedTitle:"learn more about venus",charIndex:14405}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Preface Why are we doing this How Venus works Architecture venus sophon-auth sophon-miner sophon-messenger venus-wallet droplet sophon-gateway damocles Learn more about Venus",content:"# Preface\n\nMultiple interoperable implementations are required on the same public blockchain. Each implementation may has its own set of security issues, but they are not all the same . Therefore, launching cryptocurrency networks with multiple implementations can reduce the catastrophic errors. Venus is one of the four implementations in Filecoin network.\n\nVenus (Capital V) refers to one of the general implementations of Filecoin, while venus (v in lowercase) refers to one of the components of Venus. Venus is committed to helping small and medium-sized storage providers to join the Filecoin ecosystem network with a lower barrier.\n\nNow Venus has lead the way to the distributed storage pool of Filecoin through components like venus、damocles, sophon-miner, venus-wallet, sophon-messager, sophon-auth, sophon-gateway. In the future, Venus will continue its evolvement and jointly promote the open source development of Filecoin ecosystem.\n\n\n# Why are we doing this\n\nOn June 2020, Protocol Labs launched an RFP to handover the maintenance of go-filecoin to another community member, and IPFSForce applied for it and successfully obtain the project. In October, We renamed go-filecoin as Venus, and take over the maintenance of Venus Implementation.\n\nBefore IPFSForce’s application, maintenance effort is seriously lacking in Venus project. In terms of protocols and components, vm,mpool, chain, rpc are all available, but all have different kind of issue. It takes Venus team more than 3 months to gradually fix protocol layer, code layer, and problematic functions, making Venus complete the interoperability with Lotus, so that the nodes using Venus can run smoothly in the Filecoin network. And then we let Venus support calibration and 2K networks.\n\nAfter completing the above work, we start to set the roadmap of Venus development.\n\nWe plan to let Venus support the development of storage pool. At the beginning, we decide to achieve the best of expansion from a single storage provider. It is technically feasible, but the biggest problem was caused by the mechanism of Filecoin proofs. Storage providers in the Filecoin network have to submit the PoSt periodically, and in order to generate the proof, they need to read the data of a whole Partition. If all sectors are distributed in different places, to read the data through the public network will be heavy time-consuming.\n\nAfter that, through several times of re-design and modification, we finally decide to build it as a distributed storage pool. Distributed storage pool will not completely in charge with any single storage provider, but managed by multiple storage providers, which is more like a storage provider group/union.\n\nThe external features of Venus distributed storage pool are similar to other pools. Storage Providers can store their resources in distributed geographic nodes. As long as there is a stable connection to the network, the storage provider can create a node accessible to Venus storage pool; The probability of earning the block reward is proportional to the amount of storage the storage provider contributes to the Filecoin network, and the final result of separate calculation and overall calculation should be the same: n1/p+ n2/p+n3/p......= (n1+n2+n3+.....)/p, which provides a theoretical basis on the algorithm.\n\nFor the storage and retrieval, storage providers can access the network through the venus unified entrance or by themselves. In the design and with the permission from storage providers, venus will select the appropriate node to store data according to specific requirements, so that the data is closer to the real scenario.\n\n 1. Data storage: component sharing is supported, and the storage will be gradually migrated to MySQL to ensure the metadata security of Venus through some highly available solutions.\n\n 2. Shared Modules: support high availability, ensure the quality of service, reduce the time cost and maintenance cost of storage providers, which make it easier for storage providers to join the storage pool. Nowadays, mining is a high-tech activity, but to achieve Filecoin's goal to get the utmost out of storage resources, it is inevitable to lower the threshold to attract more participants.\n\n 3. Combine the right for more block rewards: storage providers can integrate resources together and help each other pack messages, so as to avoid the situation of small storage providers that no one can pack messages.\n\n 4. Improve the TPS of Filecoin network: if there are multiple blocks at the same height, sophon-miner can ensure that the messages in each block are different, as the avoidance of highly-repeated messages when blocks are separated.\n\n 5. Improve the stability of messages: messages in storing activities can be separated from nodes and managed by sophon-messager, which can track the latest state of the chain to set a relatively reasonable estimated gas parameter, and also supports users to set a message parameter themselves.\n\n 6. Improve the speed of data access: the current Filecoin network is more like a pool which is merely for data storage, but as a complete data service, it also needs data retrieval to realize its real value. With sufficient miner users, Venus has more chances to promote the real data application. For example, for data distribution, Venus can distribute the data to some storage providers' nodes nearest to the customers, which can improve the access speed; some public data can distribute these data to more nodes as much as possible to ensure that access at any location is effective, which can greatly improve the performance of IPFS network and further realize the goal of IPFS, as one of the Web3.0 solutions.\n\n\n# How Venus works\n\n\n# Architecture\n\nVenus architecture includes venus, sophon-miner, damocles, sophon-messager, venus-wallet, sophon-auth, and droplet. In the classic architecture, venus, sophon-miner, sophon-auth, sophon-messager and droplet are public components, and damocles and venus-wallet are local components.\n\nPublic components can be established by service providers or by multiple storage providers, and they only need to run damocles and venus-wallet locally. In fact, all components of Venus are protocol oriented. If storage providers have sufficient skills, they can also deploy all or part of the public components locally, so the deployment can be more flexible.\n\nThe following figure is a typical application scenario in our design.\n\n\n\nThe following contents show the relationship between components, which are similar in function, but with more powerful expanded functions in details and uses.\n\n * sophon-auth --\x3e token authentication service extend lotus jwt\n * sophon-miner --\x3e lotus-miner block produce part\n * damocles --\x3e lotus-miner sealer scheduler part/wd\n * venus daemon --\x3e lotus daemon\n * venus-wallet -> lotus wallet part\n * sophon-messager --\x3e lotus mpool\n\n\n# venus\n\nvenus is similar to lotus-daemon, which is used to support all nodes. venus is connected to the Filecoin blockchain network to provide data support for Venus. venus can be used as an ordinary node. It has all the necessary functions of blockchain nodes, such as chain, mpool and wallet. The APIs of venus are almost compatible with those of lotus (you can mention the issue of incompatible APIs). On venus, you can create private keys, query assets, transfer funds, etc. In a typical deployment environment, venus only provides data query service on the basic chain without private key restoration. The block data needed by slashfilter is stored in the database, and the node itself is stateless. In this case, venus node can realize its high availability through nginx reverse proxy.\n\n# Venus and Lotus,The Difference\n\n 1. External signature is supported in the API of creating block (request will be proposed to lotus too).\n 2. The API of message selection supports the selection of multiple batches of messages at the same time, which is used to select messages when multiple storage providers get the block rewards.\n 3. Support the centralized authorization access to sophon-auth.\n\nTherefore, if you are interested in the mixed deployment of venus / lotus, you need to use Venus project which is compatible to Lotus or pick your own CCS.\n\n\n# sophon-auth\n\nsophon-auth (formerly venus-auth) is a component used for authorization. In a typical deployment environment, sophon-auth is used to provide authorization services to venus, sophon-miner and sophon-messager. Local nodes need to be authorized to have access to the shared components. Based on the authorization, sophon-auth will expand its functions, such as security control, including access restriction and blacklist.\n\n\n# sophon-miner\n\nThe function of sophon-miner (formerly venus-miner) is to combine the rights to earn block rewards. The program can configure the location of multiple storage providers and their sealers and wallets, and generate blocks for these storage providers at the same time. sophon-miner has the following features:\n\n 1. Separate data: because the process of generating blocks needs to access data, and storage provider's sealer may be heterogeneous, but now most storage providers will use their own codes, so there is a problem about how to access these data to realize joint mining. By sophon-miner’s independence on the storage organization mode and completing the proofs by storage providers, no matter how the miner's sealer organizes the storage, as long as the Computeproof API is implemented, sophon-miner can generate the proof through it.\n 2. Separate private key: when calculating random numbers and signature blocks, all operations about private key are accessed through remote wallet, which can improve the security of mining activities.\n 3. Improve storage providers' wincount and TPS: when the miner who uses sophon-miner rto get multiple (> 1) rights of block rewards in a period, sophon-miner will try to select different messages from the message pool for packaging, which can somehow improve the speed of these messages on the chain, and make the block get more gas premium.\n\n\n# sophon-messenger\n\nThe goal of sophon-messager (formerly venus-messager) is to help messages on chain more efficiently, and to flexibly control the timing of messages on chain to reduce gas consumption and control the data traffic, etc. It includes remote wallet management, address management and message management.\n\n 1. Wallet management: sophon-messager connects multiple wallets and scans these addresses into the list.\n 2. Address management: the major purpose is to manage the nonce value to ensure that the value can be assigned in the correct order.\n 3. Message management: it is divided into three parts, namely \"message receiving and saving\", \"message selection and pushing\" and \"tracking the status of message on the chain\".\n\nIn terms of functions:\n\n 1. Support remote wallet: one messenger supports multiple wallets to manage their message separately.\n 2. Support local storage of SQLite and remote storage of MySQL for more secure and stable storage.\n 3. Dynamic Fill: gas related parameters and nonce are to be filled out when sending a message on chain according to gas and push policy, to make sure the gas-estimation and other setting are valid.\n 4. Maintain message status, including whether the message is chained and replaced and save the results of the execution.\n 5. Multi-point message delivery (directly to the blockchain network with libp2p, push to the node by Mpool API), to make sure that messages are propagated over the network.\n 6. Flexible config includes gas estimate, msg push strategy, etc.\n\n\n# venus-wallet\n\nvenus-wallet is a remote wallet, which can support both Lotus and Venus in terms of protocols. In a typical deployment environment, this module is deployed locally by storage providers, and the security of assets is guaranteed by certain policy configuration. venus-wallet has the following features:\n\n 1. Private key management function: currently it supports the private key management of asymmetric algorithms BLS and SECP, and it can generate random private key, and uses aes128 to encrypt and store the private key symmetrically whilst supports the private key to sign the data.\n 2. Signature verification: each signature type has its verification policy, which ensures that the signer won't do deceits the wallet through non-credible signature type.\n 3. Signature tactics module: for the Lotus and Venus implementation of Filecoin, the module is created to manage 10 existing data structures and more than 60 signature types in message data structure, and configure various combination methods on demand to bind private key signature rules, and then integrate several different private key signature rules and authorize them to external components for further usage.\n\n\n# droplet\n\nDroplet (formerly venus-market) is the market component in the Venus system. Its vision is to create a distributed storage and retrieval market in the Filecoin network. Currently, it has realized order storage and retrieval compatible with the Lotus protocol, and is gradually moving towards receiving orders from multiple clusters of droplet services and providing unified retrieval services to the outside world. You can refer to droplet design and roadmap.\n\n\n# sophon-gateway\n\nsophon-gateway (formerly venus-gateway) is a bridge between independent components and the chain service layer. It is used to simplify deployment and reduce the complexity of storage provider access, and increase the security of storage provider access. When the independent component is started, its service interface is registered with sophon-gateway. The chain service component needs to request the corresponding cluster’s service API through sophon-gateway.\n\n * Storage providers do not need external IP and exposed wallet service;\n * After the storage pool is configured with an SSL certificate, the connection between the cluster and the storage pool is secure;\n * Storage providers can simply register multiple clients (wallets/proofs) with the storage pool to achieve high availability.\n\n\n\n\n# damocles\n\ndamocles (formerly venus-cluster) is a new version of sector sealing and computing power maintenance components launched by Venus. Compared with the original venus-sealer, it has certain advantages in task scheduling and maximizing system resources, and its target users will also be different\n\n\n# Learn more about Venus\n\n * Docs\n * Discussion\n * Slack\n * GitHub\n * Chain explorer: filscan.io\n * Store on the MainNet: docs.filecoin.io",normalizedContent:"# preface\n\nmultiple interoperable implementations are required on the same public blockchain. each implementation may has its own set of security issues, but they are not all the same . therefore, launching cryptocurrency networks with multiple implementations can reduce the catastrophic errors. venus is one of the four implementations in filecoin network.\n\nvenus (capital v) refers to one of the general implementations of filecoin, while venus (v in lowercase) refers to one of the components of venus. venus is committed to helping small and medium-sized storage providers to join the filecoin ecosystem network with a lower barrier.\n\nnow venus has lead the way to the distributed storage pool of filecoin through components like venus、damocles, sophon-miner, venus-wallet, sophon-messager, sophon-auth, sophon-gateway. in the future, venus will continue its evolvement and jointly promote the open source development of filecoin ecosystem.\n\n\n# why are we doing this\n\non june 2020, protocol labs launched an rfp to handover the maintenance of go-filecoin to another community member, and ipfsforce applied for it and successfully obtain the project. in october, we renamed go-filecoin as venus, and take over the maintenance of venus implementation.\n\nbefore ipfsforce’s application, maintenance effort is seriously lacking in venus project. in terms of protocols and components, vm,mpool, chain, rpc are all available, but all have different kind of issue. it takes venus team more than 3 months to gradually fix protocol layer, code layer, and problematic functions, making venus complete the interoperability with lotus, so that the nodes using venus can run smoothly in the filecoin network. and then we let venus support calibration and 2k networks.\n\nafter completing the above work, we start to set the roadmap of venus development.\n\nwe plan to let venus support the development of storage pool. at the beginning, we decide to achieve the best of expansion from a single storage provider. it is technically feasible, but the biggest problem was caused by the mechanism of filecoin proofs. storage providers in the filecoin network have to submit the post periodically, and in order to generate the proof, they need to read the data of a whole partition. if all sectors are distributed in different places, to read the data through the public network will be heavy time-consuming.\n\nafter that, through several times of re-design and modification, we finally decide to build it as a distributed storage pool. distributed storage pool will not completely in charge with any single storage provider, but managed by multiple storage providers, which is more like a storage provider group/union.\n\nthe external features of venus distributed storage pool are similar to other pools. storage providers can store their resources in distributed geographic nodes. as long as there is a stable connection to the network, the storage provider can create a node accessible to venus storage pool; the probability of earning the block reward is proportional to the amount of storage the storage provider contributes to the filecoin network, and the final result of separate calculation and overall calculation should be the same: n1/p+ n2/p+n3/p......= (n1+n2+n3+.....)/p, which provides a theoretical basis on the algorithm.\n\nfor the storage and retrieval, storage providers can access the network through the venus unified entrance or by themselves. in the design and with the permission from storage providers, venus will select the appropriate node to store data according to specific requirements, so that the data is closer to the real scenario.\n\n 1. data storage: component sharing is supported, and the storage will be gradually migrated to mysql to ensure the metadata security of venus through some highly available solutions.\n\n 2. shared modules: support high availability, ensure the quality of service, reduce the time cost and maintenance cost of storage providers, which make it easier for storage providers to join the storage pool. nowadays, mining is a high-tech activity, but to achieve filecoin's goal to get the utmost out of storage resources, it is inevitable to lower the threshold to attract more participants.\n\n 3. combine the right for more block rewards: storage providers can integrate resources together and help each other pack messages, so as to avoid the situation of small storage providers that no one can pack messages.\n\n 4. improve the tps of filecoin network: if there are multiple blocks at the same height, sophon-miner can ensure that the messages in each block are different, as the avoidance of highly-repeated messages when blocks are separated.\n\n 5. improve the stability of messages: messages in storing activities can be separated from nodes and managed by sophon-messager, which can track the latest state of the chain to set a relatively reasonable estimated gas parameter, and also supports users to set a message parameter themselves.\n\n 6. improve the speed of data access: the current filecoin network is more like a pool which is merely for data storage, but as a complete data service, it also needs data retrieval to realize its real value. with sufficient miner users, venus has more chances to promote the real data application. for example, for data distribution, venus can distribute the data to some storage providers' nodes nearest to the customers, which can improve the access speed; some public data can distribute these data to more nodes as much as possible to ensure that access at any location is effective, which can greatly improve the performance of ipfs network and further realize the goal of ipfs, as one of the web3.0 solutions.\n\n\n# how venus works\n\n\n# architecture\n\nvenus architecture includes venus, sophon-miner, damocles, sophon-messager, venus-wallet, sophon-auth, and droplet. in the classic architecture, venus, sophon-miner, sophon-auth, sophon-messager and droplet are public components, and damocles and venus-wallet are local components.\n\npublic components can be established by service providers or by multiple storage providers, and they only need to run damocles and venus-wallet locally. in fact, all components of venus are protocol oriented. if storage providers have sufficient skills, they can also deploy all or part of the public components locally, so the deployment can be more flexible.\n\nthe following figure is a typical application scenario in our design.\n\n\n\nthe following contents show the relationship between components, which are similar in function, but with more powerful expanded functions in details and uses.\n\n * sophon-auth --\x3e token authentication service extend lotus jwt\n * sophon-miner --\x3e lotus-miner block produce part\n * damocles --\x3e lotus-miner sealer scheduler part/wd\n * venus daemon --\x3e lotus daemon\n * venus-wallet -> lotus wallet part\n * sophon-messager --\x3e lotus mpool\n\n\n# venus\n\nvenus is similar to lotus-daemon, which is used to support all nodes. venus is connected to the filecoin blockchain network to provide data support for venus. venus can be used as an ordinary node. it has all the necessary functions of blockchain nodes, such as chain, mpool and wallet. the apis of venus are almost compatible with those of lotus (you can mention the issue of incompatible apis). on venus, you can create private keys, query assets, transfer funds, etc. in a typical deployment environment, venus only provides data query service on the basic chain without private key restoration. the block data needed by slashfilter is stored in the database, and the node itself is stateless. in this case, venus node can realize its high availability through nginx reverse proxy.\n\n# venus and lotus,the difference\n\n 1. external signature is supported in the api of creating block (request will be proposed to lotus too).\n 2. the api of message selection supports the selection of multiple batches of messages at the same time, which is used to select messages when multiple storage providers get the block rewards.\n 3. support the centralized authorization access to sophon-auth.\n\ntherefore, if you are interested in the mixed deployment of venus / lotus, you need to use venus project which is compatible to lotus or pick your own ccs.\n\n\n# sophon-auth\n\nsophon-auth (formerly venus-auth) is a component used for authorization. in a typical deployment environment, sophon-auth is used to provide authorization services to venus, sophon-miner and sophon-messager. local nodes need to be authorized to have access to the shared components. based on the authorization, sophon-auth will expand its functions, such as security control, including access restriction and blacklist.\n\n\n# sophon-miner\n\nthe function of sophon-miner (formerly venus-miner) is to combine the rights to earn block rewards. the program can configure the location of multiple storage providers and their sealers and wallets, and generate blocks for these storage providers at the same time. sophon-miner has the following features:\n\n 1. separate data: because the process of generating blocks needs to access data, and storage provider's sealer may be heterogeneous, but now most storage providers will use their own codes, so there is a problem about how to access these data to realize joint mining. by sophon-miner’s independence on the storage organization mode and completing the proofs by storage providers, no matter how the miner's sealer organizes the storage, as long as the computeproof api is implemented, sophon-miner can generate the proof through it.\n 2. separate private key: when calculating random numbers and signature blocks, all operations about private key are accessed through remote wallet, which can improve the security of mining activities.\n 3. improve storage providers' wincount and tps: when the miner who uses sophon-miner rto get multiple (> 1) rights of block rewards in a period, sophon-miner will try to select different messages from the message pool for packaging, which can somehow improve the speed of these messages on the chain, and make the block get more gas premium.\n\n\n# sophon-messenger\n\nthe goal of sophon-messager (formerly venus-messager) is to help messages on chain more efficiently, and to flexibly control the timing of messages on chain to reduce gas consumption and control the data traffic, etc. it includes remote wallet management, address management and message management.\n\n 1. wallet management: sophon-messager connects multiple wallets and scans these addresses into the list.\n 2. address management: the major purpose is to manage the nonce value to ensure that the value can be assigned in the correct order.\n 3. message management: it is divided into three parts, namely \"message receiving and saving\", \"message selection and pushing\" and \"tracking the status of message on the chain\".\n\nin terms of functions:\n\n 1. support remote wallet: one messenger supports multiple wallets to manage their message separately.\n 2. support local storage of sqlite and remote storage of mysql for more secure and stable storage.\n 3. dynamic fill: gas related parameters and nonce are to be filled out when sending a message on chain according to gas and push policy, to make sure the gas-estimation and other setting are valid.\n 4. maintain message status, including whether the message is chained and replaced and save the results of the execution.\n 5. multi-point message delivery (directly to the blockchain network with libp2p, push to the node by mpool api), to make sure that messages are propagated over the network.\n 6. flexible config includes gas estimate, msg push strategy, etc.\n\n\n# venus-wallet\n\nvenus-wallet is a remote wallet, which can support both lotus and venus in terms of protocols. in a typical deployment environment, this module is deployed locally by storage providers, and the security of assets is guaranteed by certain policy configuration. venus-wallet has the following features:\n\n 1. private key management function: currently it supports the private key management of asymmetric algorithms bls and secp, and it can generate random private key, and uses aes128 to encrypt and store the private key symmetrically whilst supports the private key to sign the data.\n 2. signature verification: each signature type has its verification policy, which ensures that the signer won't do deceits the wallet through non-credible signature type.\n 3. signature tactics module: for the lotus and venus implementation of filecoin, the module is created to manage 10 existing data structures and more than 60 signature types in message data structure, and configure various combination methods on demand to bind private key signature rules, and then integrate several different private key signature rules and authorize them to external components for further usage.\n\n\n# droplet\n\ndroplet (formerly venus-market) is the market component in the venus system. its vision is to create a distributed storage and retrieval market in the filecoin network. currently, it has realized order storage and retrieval compatible with the lotus protocol, and is gradually moving towards receiving orders from multiple clusters of droplet services and providing unified retrieval services to the outside world. you can refer to droplet design and roadmap.\n\n\n# sophon-gateway\n\nsophon-gateway (formerly venus-gateway) is a bridge between independent components and the chain service layer. it is used to simplify deployment and reduce the complexity of storage provider access, and increase the security of storage provider access. when the independent component is started, its service interface is registered with sophon-gateway. the chain service component needs to request the corresponding cluster’s service api through sophon-gateway.\n\n * storage providers do not need external ip and exposed wallet service;\n * after the storage pool is configured with an ssl certificate, the connection between the cluster and the storage pool is secure;\n * storage providers can simply register multiple clients (wallets/proofs) with the storage pool to achieve high availability.\n\n\n\n\n# damocles\n\ndamocles (formerly venus-cluster) is a new version of sector sealing and computing power maintenance components launched by venus. compared with the original venus-sealer, it has certain advantages in task scheduling and maximizing system resources, and its target users will also be different\n\n\n# learn more about venus\n\n * docs\n * discussion\n * slack\n * github\n * chain explorer: filscan.io\n * store on the mainnet: docs.filecoin.io",charsets:{}},{frontmatter:{},regularPath:"/intro/_Footer.html",relativePath:"intro/_Footer.md",key:"v-138dd3b6",path:"/intro/_Footer.html",lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:null,content:"See something missing? Have tips to share? File an issue, and we'll follow up as soon as possible. (If you have write permission in this repo, feel free to edit directly.)",normalizedContent:"see something missing? have tips to share? file an issue, and we'll follow up as soon as possible. (if you have write permission in this repo, feel free to edit directly.)",charsets:{}},{title:"Contributing",frontmatter:{},regularPath:"/intro/contribute-docs.html",relativePath:"intro/contribute-docs.md",key:"v-986eabf6",path:"/intro/contribute-docs.html",headers:[{level:2,title:"Contributing",slug:"contributing",normalizedTitle:"contributing",charIndex:2},{level:2,title:"Deployment",slug:"deployment",normalizedTitle:"deployment",charIndex:281},{level:3,title:"Running locally",slug:"running-locally",normalizedTitle:"running locally",charIndex:296},{level:3,title:"Building",slug:"building",normalizedTitle:"building",charIndex:354},{level:3,title:"Deploy script",slug:"deploy-script",normalizedTitle:"deploy script",charIndex:530},{level:3,title:"Notes:",slug:"notes",normalizedTitle:"notes:",charIndex:1211}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Contributing Deployment Running locally Building Deploy script Notes:",content:"# Contributing\n\nPRs, bug reports, and issue suggestions are welcome! For major changes, please propose in an issue first so benefits and impacts can be discussed.\n\n👉 You can also click on click on Edit this page links at the bottom of each page to jump directly to Edit mode.\n\n\n# Deployment\n\n\n# Running locally\n\n  $ yarn install\n  $ yarn docs:dev \n\n\n\n# Building\n\n  $ yarn docs:links   # verify all links are well-formed\n  $ yarn docs:build\n\n\nThen deploy the docs/.vuepress/dist directory to the gh-pages branch of this repo.\n\n\n# Deploy script\n\nYou can also run the following script to combine building and deployment together. Make sure everything is running okay locally.\n\n#!/usr/bin/env sh\n\n# abort on errors\nset -e\n\n# build\nnpm run docs:build\n\n# navigate into the build output directory\ncd docs/.vuepress/dist\n\n# if you are deploying to a custom domain\necho 'venus.filecoin.io' > CNAME\n\ngit init\ngit add -A\ngit commit -m 'deploy'\n\n# if you are deploying to https://<USERNAME>.github.io\n# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master\n\n# if you are deploying to https://<USERNAME>.github.io/<REPO>\ngit push -f git@github.com:filecoin-project/venus-docs.git master:gh-pages\n\ncd -\n\n\n\n# Notes:\n\n * When new documentation pages are added ./docs/config.js will need to be manually updated in this repo",normalizedContent:"# contributing\n\nprs, bug reports, and issue suggestions are welcome! for major changes, please propose in an issue first so benefits and impacts can be discussed.\n\n👉 you can also click on click on edit this page links at the bottom of each page to jump directly to edit mode.\n\n\n# deployment\n\n\n# running locally\n\n  $ yarn install\n  $ yarn docs:dev \n\n\n\n# building\n\n  $ yarn docs:links   # verify all links are well-formed\n  $ yarn docs:build\n\n\nthen deploy the docs/.vuepress/dist directory to the gh-pages branch of this repo.\n\n\n# deploy script\n\nyou can also run the following script to combine building and deployment together. make sure everything is running okay locally.\n\n#!/usr/bin/env sh\n\n# abort on errors\nset -e\n\n# build\nnpm run docs:build\n\n# navigate into the build output directory\ncd docs/.vuepress/dist\n\n# if you are deploying to a custom domain\necho 'venus.filecoin.io' > cname\n\ngit init\ngit add -a\ngit commit -m 'deploy'\n\n# if you are deploying to https://<username>.github.io\n# git push -f git@github.com:<username>/<username>.github.io.git master\n\n# if you are deploying to https://<username>.github.io/<repo>\ngit push -f git@github.com:filecoin-project/venus-docs.git master:gh-pages\n\ncd -\n\n\n\n# notes:\n\n * when new documentation pages are added ./docs/config.js will need to be manually updated in this repo",charsets:{}},{frontmatter:{},regularPath:"/intro/damocles.html",relativePath:"intro/damocles.md",key:"v-9a046382",path:"/intro/damocles.html",headers:[{level:3,title:"Damocles",slug:"damocles",normalizedTitle:"damocles",charIndex:2}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Damocles",content:"# Damocles\n\nDamocles, formerly known as Venus Power Service, is THE Filecoin storage power solution. Learn more about Damocles here.",normalizedContent:"# damocles\n\ndamocles, formerly known as venus power service, is the filecoin storage power solution. learn more about damocles here.",charsets:{}},{frontmatter:{},regularPath:"/intro/droplet.html",relativePath:"intro/droplet.md",key:"v-9848c836",path:"/intro/droplet.html",headers:[{level:3,title:"Droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:2}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Droplet",content:"# Droplet\n\nDroplet, formerly known as Venus Deal Service, is THE Filecoin storage deal solution. Learn more about Droplet here.",normalizedContent:"# droplet\n\ndroplet, formerly known as venus deal service, is the filecoin storage deal solution. learn more about droplet here.",charsets:{}},{frontmatter:{},regularPath:"/intro/one-pager.html",relativePath:"intro/one-pager.md",key:"v-7b3117b6",path:"/intro/one-pager.html",lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:null,content:"",normalizedContent:"",charsets:{}},{frontmatter:{},regularPath:"/intro/sophon.html",relativePath:"intro/sophon.md",key:"v-aa7f5176",path:"/intro/sophon.html",headers:[{level:3,title:"Sophon",slug:"sophon",normalizedTitle:"sophon",charIndex:2}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Sophon",content:"# Sophon\n\nSophon, formerly known as Venus chain service, is THE Filecoin super node solution. Learn more about Sophon here.",normalizedContent:"# sophon\n\nsophon, formerly known as venus chain service, is the filecoin super node solution. learn more about sophon here.",charsets:{}},{title:"Find your optimal configurations",frontmatter:{},regularPath:"/operation/Efficiency_of_sealing.html",relativePath:"operation/Efficiency_of_sealing.md",key:"v-f0437936",path:"/operation/Efficiency_of_sealing.html",headers:[{level:2,title:"Find your optimal configurations",slug:"find-your-optimal-configurations",normalizedTitle:"find your optimal configurations",charIndex:2},{level:2,title:"Overview",slug:"overview",normalizedTitle:"overview",charIndex:239},{level:2,title:"Record time for each task",slug:"record-time-for-each-task",normalizedTitle:"record time for each task",charIndex:712},{level:2,title:"Performance factors",slug:"performance-factors",normalizedTitle:"performance factors",charIndex:3946},{level:3,title:"Sealing storage",slug:"sealing-storage",normalizedTitle:"sealing storage",charIndex:4051},{level:3,title:"Permanent storage",slug:"permanent-storage",normalizedTitle:"permanent storage",charIndex:5207},{level:3,title:"Network transfer",slug:"network-transfer",normalizedTitle:"network transfer",charIndex:5677},{level:3,title:"Environment variables",slug:"environment-variables",normalizedTitle:"environment variables",charIndex:6373},{level:3,title:"Core restriction",slug:"core-restriction",normalizedTitle:"core restriction",charIndex:7385},{level:2,title:"Worker optimization",slug:"worker-optimization",normalizedTitle:"worker optimization",charIndex:8038},{level:3,title:"P1 optimization",slug:"p1-optimization",normalizedTitle:"p1 optimization",charIndex:8152},{level:3,title:"P2 optimization",slug:"p2-optimization",normalizedTitle:"p2 optimization",charIndex:8708},{level:3,title:"Commit",slug:"commit",normalizedTitle:"commit",charIndex:824},{level:2,title:"Optimize sealing pipeline",slug:"optimize-sealing-pipeline",normalizedTitle:"optimize sealing pipeline",charIndex:9435},{level:3,title:"Calculate your daily growth",slug:"calculate-your-daily-growth",normalizedTitle:"calculate your daily growth",charIndex:9465},{level:3,title:"Finding optimal task configurations",slug:"finding-optimal-task-configurations",normalizedTitle:"finding optimal task configurations",charIndex:10046},{level:3,title:"Finding optimal pledging",slug:"finding-optimal-pledging",normalizedTitle:"finding optimal pledging",charIndex:10995},{level:2,title:"Stop-loss",slug:"stop-loss",normalizedTitle:"stop-loss",charIndex:11180}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Find your optimal configurations Overview Record time for each task Performance factors Sealing storage Permanent storage Network transfer Environment variables Core restriction Worker optimization P1 optimization P2 optimization Commit Optimize sealing pipeline Calculate your daily growth Finding optimal task configurations Finding optimal pledging Stop-loss",content:'# Find your optimal configurations\n\nGet your filecoin mining operation up and running is hard. Expanding growth of your system is even harder. It will take a lot of time to scale growth and make sure your setup running without errors.\n\n\n# Overview\n\nGeneral guidelines to follow when optimizing your sealing pipeline.\n\n * Pledge 2 to 4 sectors and record the exact time of each task (AP, P1, P2, C2) takes to finish\n\n * Make sure all your boxes have tasks assigned to them all the time\n\n * Automate your sector pledge command with script/cron\n\n * Use MaxSealingSectors to cap maximum number of sectors sealing in parallel\n\n * Every worker can be assigned with a subset of tasks (AP, P1, P2, C2) to specialize\n\n\n# Record time for each task\n\nTypes of task that a worker can do.\n\nTTAddPiece   TaskType = "seal/v0/addpiece"\nTTPreCommit1 TaskType = "seal/v0/precommit/1"\nTTPreCommit2 TaskType = "seal/v0/precommit/2"\nTTCommit1    TaskType = "seal/v0/commit/1" // NOTE: We use this to transfer the sector into miner-local storage for now; Don\'t use on workers!\nTTCommit2    TaskType = "seal/v0/commit/2"\n\nTTFinalize   TaskType = "seal/v0/finalize"\nTTFetch      TaskType = "seal/v0/fetch"\nTTUnseal     TaskType = "seal/v0/unseal"\n\n\nEach task shows up in log first with key word of prepare (start and end) then with key word of work as another log entry (also start and end).\n\n# seal/v0/fetch\n2021-08-03T14:00:07.925+0800    INFO    advmgr  sector-storage/sched_worker.go:401  Sector 7 prepare for seal/v0/fetch ...\n2021-08-03T14:05:36.772+0800    INFO    advmgr  sector-storage/sched_worker.go:403  Sector 7 prepare for seal/v0/fetch end ...\n\n2021-08-03T14:05:36.772+0800    INFO    advmgr  sector-storage/sched_worker.go:442  Sector 7 work for seal/v0/fetch ...\n2021-08-03T14:05:36.774+0800    INFO    advmgr  sector-storage/sched_worker.go:444  Sector 7 work for seal/v0/fetch end ...\n\n# seal/v0/addpiece\n2021-08-03T13:38:37.977+0800    INFO    advmgr  sector-storage/sched_worker.go:401  Sector 8 prepare for seal/v0/addpiece ...\n2021-08-03T13:38:37.978+0800    INFO    advmgr  sector-storage/sched_worker.go:403  Sector 8 prepare for seal/v0/addpiece end ...\n\n2021-08-03T13:38:37.978+0800    INFO    advmgr  sector-storage/sched_worker.go:442  Sector 8 work for seal/v0/addpiece ...\n2021-08-03T13:44:26.295+0800    INFO    advmgr  sector-storage/sched_worker.go:444  Sector 8 work for seal/v0/addpiece end ...\n\n# seal/v0/commit/2\n2021-08-03T13:26:02.119+0800    INFO    advmgr  sector-storage/sched_worker.go:401  Sector 7 prepare for seal/v0/commit/2 ...\n2021-08-03T13:26:02.119+0800    INFO    advmgr  sector-storage/sched_worker.go:403  Sector 7 prepare for seal/v0/commit/2 end ...\n\n2021-08-03T13:26:02.119+0800    INFO    advmgr  sector-storage/sched_worker.go:442  Sector 7 work for seal/v0/commit/2 ...\n2021-08-03T13:49:46.180+0800    INFO    advmgr  sector-storage/sched_worker.go:444  Sector 7 work for seal/v0/commit/2 end ...\n\n# seal/v0/finalize\n2021-08-03T13:54:17.414+0800    INFO    advmgr  sector-storage/sched_worker.go:401  Sector 7 prepare for seal/v0/finalize ...\n2021-08-03T13:59:30.471+0800    INFO    advmgr  sector-storage/sched_worker.go:403  Sector 7 prepare for seal/v0/finalize end ...\n\n2021-08-03T13:59:30.471+0800    INFO    advmgr  sector-storage/sched_worker.go:442  Sector 7 work for seal/v0/finalize ...\n2021-08-03T14:00:07.915+0800    INFO    advmgr  sector-storage/sched_worker.go:444  Sector 7 work for seal/v0/finalize end ...\n\n\nSome task may take more time in prepare thanwork and some are the other way around. Generally speaking, when task requires network transfer/bandwidth it will consume more time in prepare while if the task require more computation resources it will consume more time in work. Eg, AP, P1, P2, C2.\n\nTo record time of core tasks like AP, P1, P2 and C2, we aggregate both the time of fetch before it and the task itself. For example, time of P1 = time of P1 + time of fetch before P1.\n\n\n# Performance factors\n\nThere are many factors cobtributes to the performance of your sealing pipeline.\n\n\n# Sealing storage\n\nDuring sealing of a sector, cache files will be generated by the proof algorithm which requires high disk IO speed. Low IO speed may result in idling of your computation resources (CPUs/GPUs).\n\nChoose apropriate hardware using forumla below.\n\nfile size * number of parallel threads / operation time = average file IO speed\n\n\nTo get more precise estimations, sum up per task IO throughput.\n\nAP IO throughput = AP read + AP write\nP1 IO throughput = P1 read + P1 write\nP2 IO throughput = P2 read + P2 write\nC2 IO throughput = C2 read + C2 write\n\n\nSSD and NVMe are commonly used for sealing storages. To ensure effcient usage of these faster storage, it is recommended to use software RAID on these SSDs.\n\nmdadm -C /dev/md1 -l 0 -n 2 /dev/sdb1 /dev/sdc1\nmdadm -C /dev/md2 -l 5 -n 6 /dev/sd[b-g]1\n# Options\n-C, --create\nCreate a new array.\n-l, --level=\nSet RAID level. \n-n, --raid-devices=\nSpecify the number of active devices in the array.\n-x, --spare-devices=\nSpecify the number of spare (eXtra) devices in the initial array.\n-A, --assemble\nAssemble a pre-existing array.\n\n\nMore on mdadm, please visit here. Get latest version from here.\n\n\n# Permanent storage\n\nPossible adversaries to overcome when setting up permanent storage.\n\n 1. When a sector is sealed, it will be transferred from sealer to permanent storage which takes up network bandwidth and disk IOs.\n 2. During a windowPost, random selections files will be read in large number. Slow read may result in failed windowPost.\n 3. Choose high RAID level to have redunancy when possible. Eg, RAID5, RAID6, RAID10.\n 4. Monitor usage of your disk array.\n\n\n# Network transfer\n\nDuring sealing, if you specialize your worker in one type of task (to increase efficiency of your resources), it will result in file transfer over the network. If file being copied too slowly over the network, it will drag the speed of your sealing pipeline down. Closely monitor your computation resources and see if there is any idling. For example, if PC2 takes 25 minutes, reads ~400G and writes ~100G, then IO throughput will be ~368 MB/s (440 * 1024 / 25 / 60 + 100 * 1024 / 25 / 60).\n\nAfter sealing, the sealed sector need to be transferred to permanent storage which can be bottlenecked by the network bandwidth connecting your venus-sealer and your HDD disk array.\n\n\n# Environment variables\n\nSHA extension would make a huge difference in computing P1 tasks. P1 could cost around 250 minutes with SHA extension enabled while may cost 420+ minutes without SHA.\n\nWhen compiling venus-sealer, make sure you have set RUSTFLAGS="-C target-cpu=native -g" FFI_BUILD_FROM_SOURCE="1" flags and you shall see the following example output.\n\n+ trap \'{ rm -f $__build_output_log_tmp; }\' EXIT\n+ local \'__rust_flags=--print native-static-libs -C target-feature=+sse2\'\n+ RUSTFLAGS=\'--print native-static-libs -C target-feature=+sse2\'\n+ cargo +nightly-2021-04-24 build --release --no-default-features --features multicore-sdr --features pairing,gpu\n+ tee /tmp/tmp.IYtnd3xka9\n   Compiling autocfg v1.0.1\n   Compiling libc v0.2.97\n   Compiling cfg-if v1.0.0\n   Compiling proc-macro2 v1.0.27\n   Compiling unicode-xid v0.2.2\n   Compiling syn v1.0.73\n   Compiling lazy_static v1.4.0\n   Compiling cc v1.0.68\n   Compiling typenum v1.13.0\n   Compiling serde_derive v1.0.126\n   Compiling serde v1.0.126\n\n\n\n# Core restriction\n\nWhen running two types of tasks on same box, you may want to restrict CPU cores each task may use without competing for resources of the other.\n\nThrough taskset. Note you cannot dynamically change core restrictions during execution of the program.\n\nTRUST_PARAMS=1 nohup taskset -c 0-32 ./venus-worker run\n# Non-consecutive core selection \ntaskset -c 0-9,19-29,39-49\n\n\nOr through Cgrep, which supports dynamic core restrictions during program execution.\n\nsudo mkdir -p /sys/fs/cgroup/cpuset/Pre1-worker\nsudo echo 0-31 > /sys/fs/cgroup/cpuset/Pre1-worker/cpuset.cpus\nsudo echo <PID> > /sys/fs/cgroup/cpuset/Pre1-worker/cgroup.procs\n\n\n\n# Worker optimization\n\nAll numbers are for 32G sectors. For 64G sectors, double what the numbers of 32G sector.\n\n\n# P1 optimization\n\nSet following environment variable to speed up P1.\n\n# Store cache files in RAM; for 32G sectors, it will cost 56G RAM\nexport FIL_PROOFS_MAXIMIZE_CACHING=1  \n# Use multiple cores for P1\nexport FIL_PROOFS_USE_MULTICORE_SDR=1\n\n\nP1 RAM usage includes 56G cache file and 2 layers of the sector for each sector sealing in parallel.\n\n# Assume 10 sector running in parallel\n56G + 32G * 2 * 10 = 696G\n\n\nP1 SSD usage includes 11 layers of the sector, 64G of tree-d file and 32G of the unsealed sector.\n\n# For 1 sector\n11 * 32G + 64 + 32 = 440G\n\n\n\n# P2 optimization\n\nSet following environment variable to speed up P2.\n\n# Use GPU for tree-r-last\nexport FIL_PROOFS_USE_GPU_COLUMN_BUILDER=1   \n# Use GPU for tree-c\nexport FIL_PROOFS_USE_GPU_TREE_BUILDER=1 \n\n\nP2 RAM usage is 96G.\n\n# Assume 10 sector running in parallel\n96G * 10 = 960G\n\n\nP1 SSD usage includes 4.6G tree-c file * 8, 9.2M tree-r-last file * 8, 4K t_aux file, 4K p_aux file and 32G unsealed sector file.\n\n4.6G * 8 + 8 * 9.2M + 4K * 2 + 32G = ~70G\n\n\n\n# Commit\n\nC1 cost little CPU usage, but require sum of P1 and P2 SSD usage.\n\nP1 440G + P2 79G = 519G\n\n\nC2 environment variable\n\nBELLMAN_NO_GPU=1\n# Example, if you are using 3090\nGPUBELLMAN_CUSTOM_GPU="GeForce RTX 3090:10496" \n\n\nC2 RAM usage.\n\n128G + 64G = 192G\n\n\n\n# Optimize sealing pipeline\n\n\n# Calculate your daily growth\n\nCalculate how many tasks your sealing pipeline can process.\n\n# for each type of task\ntasks done / time = production rate\ndaily production rate * (32G OR 64G) = daily growth in power\n\n\nFor example, if we have one box and can finish P1 in 240 minutes, P2 in 30 minutes and Commit in 35 minutes, then you can derive daily growth by the following chart.\n\nTASK     MINUTE   PARALLEL   HOURLY PRODUCTION RATE\nP1       240      1          0.25 = 1 / (240 /60)\nP2       30       1          2 = 1 / (30 /60)\nCommit   35       1          1.71 = 1 / (35 /60)\n\n\n# Finding optimal task configurations\n\nFrom the table above, we know that daily growth will be bottlenecked by P1. Adjust number of parallel tasks for different types of task to achieve maximum efficiency.\n\nTASK     MINUTES   PARALLEL   HOURLY PRODUCTIN       OUTPUT   MEMORY CONSUMPTION\nP1       240       7          1.75 = 7 / (240 /60)   1344 G   504 G = 7*64+56\nP2       30        1          2 = 1 / (30 /60)       1536 G   96 G = 1*96\nCommit   35        1          1.71 = 1 / (35 /60)    1316 G   192 G = 1*128+64\n\nThe goal is to have output for each task to be as close as possible so that the sealing pipeline runs in its maximum efficiency. Things to watchout for includes...\n\n 1. hourly production for Commit is lower than P1, which may result in tasks backlogged in Commit phase.\n 2. When one type of tasks being overly efficient than others, resources may become idle.\n 3. Miro management is needed to have highest possible efficiency.\n\n\n# Finding optimal pledging\n\nFor example, if you find 7 P1 task to the optimal for your system, change the following venus-sealer configurations.\n\n[Sealing]  \n  MaxSealingSectors = 7\n\n\n\n# Stop-loss\n\nIf one of tasks fails too many times, manual intervention is needed to get sealing pipeline back to its normal output.\n\nRemove sectors when you have the following issues.\n\n 1. Expired ticket\n 2. Expired Commit\n 3. Corrupted proof params\n\nTo remove incomplete sectors.\n\nvenus-sealer sectors remove --really-do-it <sectorNum>\n',normalizedContent:'# find your optimal configurations\n\nget your filecoin mining operation up and running is hard. expanding growth of your system is even harder. it will take a lot of time to scale growth and make sure your setup running without errors.\n\n\n# overview\n\ngeneral guidelines to follow when optimizing your sealing pipeline.\n\n * pledge 2 to 4 sectors and record the exact time of each task (ap, p1, p2, c2) takes to finish\n\n * make sure all your boxes have tasks assigned to them all the time\n\n * automate your sector pledge command with script/cron\n\n * use maxsealingsectors to cap maximum number of sectors sealing in parallel\n\n * every worker can be assigned with a subset of tasks (ap, p1, p2, c2) to specialize\n\n\n# record time for each task\n\ntypes of task that a worker can do.\n\nttaddpiece   tasktype = "seal/v0/addpiece"\nttprecommit1 tasktype = "seal/v0/precommit/1"\nttprecommit2 tasktype = "seal/v0/precommit/2"\nttcommit1    tasktype = "seal/v0/commit/1" // note: we use this to transfer the sector into miner-local storage for now; don\'t use on workers!\nttcommit2    tasktype = "seal/v0/commit/2"\n\nttfinalize   tasktype = "seal/v0/finalize"\nttfetch      tasktype = "seal/v0/fetch"\nttunseal     tasktype = "seal/v0/unseal"\n\n\neach task shows up in log first with key word of prepare (start and end) then with key word of work as another log entry (also start and end).\n\n# seal/v0/fetch\n2021-08-03t14:00:07.925+0800    info    advmgr  sector-storage/sched_worker.go:401  sector 7 prepare for seal/v0/fetch ...\n2021-08-03t14:05:36.772+0800    info    advmgr  sector-storage/sched_worker.go:403  sector 7 prepare for seal/v0/fetch end ...\n\n2021-08-03t14:05:36.772+0800    info    advmgr  sector-storage/sched_worker.go:442  sector 7 work for seal/v0/fetch ...\n2021-08-03t14:05:36.774+0800    info    advmgr  sector-storage/sched_worker.go:444  sector 7 work for seal/v0/fetch end ...\n\n# seal/v0/addpiece\n2021-08-03t13:38:37.977+0800    info    advmgr  sector-storage/sched_worker.go:401  sector 8 prepare for seal/v0/addpiece ...\n2021-08-03t13:38:37.978+0800    info    advmgr  sector-storage/sched_worker.go:403  sector 8 prepare for seal/v0/addpiece end ...\n\n2021-08-03t13:38:37.978+0800    info    advmgr  sector-storage/sched_worker.go:442  sector 8 work for seal/v0/addpiece ...\n2021-08-03t13:44:26.295+0800    info    advmgr  sector-storage/sched_worker.go:444  sector 8 work for seal/v0/addpiece end ...\n\n# seal/v0/commit/2\n2021-08-03t13:26:02.119+0800    info    advmgr  sector-storage/sched_worker.go:401  sector 7 prepare for seal/v0/commit/2 ...\n2021-08-03t13:26:02.119+0800    info    advmgr  sector-storage/sched_worker.go:403  sector 7 prepare for seal/v0/commit/2 end ...\n\n2021-08-03t13:26:02.119+0800    info    advmgr  sector-storage/sched_worker.go:442  sector 7 work for seal/v0/commit/2 ...\n2021-08-03t13:49:46.180+0800    info    advmgr  sector-storage/sched_worker.go:444  sector 7 work for seal/v0/commit/2 end ...\n\n# seal/v0/finalize\n2021-08-03t13:54:17.414+0800    info    advmgr  sector-storage/sched_worker.go:401  sector 7 prepare for seal/v0/finalize ...\n2021-08-03t13:59:30.471+0800    info    advmgr  sector-storage/sched_worker.go:403  sector 7 prepare for seal/v0/finalize end ...\n\n2021-08-03t13:59:30.471+0800    info    advmgr  sector-storage/sched_worker.go:442  sector 7 work for seal/v0/finalize ...\n2021-08-03t14:00:07.915+0800    info    advmgr  sector-storage/sched_worker.go:444  sector 7 work for seal/v0/finalize end ...\n\n\nsome task may take more time in prepare thanwork and some are the other way around. generally speaking, when task requires network transfer/bandwidth it will consume more time in prepare while if the task require more computation resources it will consume more time in work. eg, ap, p1, p2, c2.\n\nto record time of core tasks like ap, p1, p2 and c2, we aggregate both the time of fetch before it and the task itself. for example, time of p1 = time of p1 + time of fetch before p1.\n\n\n# performance factors\n\nthere are many factors cobtributes to the performance of your sealing pipeline.\n\n\n# sealing storage\n\nduring sealing of a sector, cache files will be generated by the proof algorithm which requires high disk io speed. low io speed may result in idling of your computation resources (cpus/gpus).\n\nchoose apropriate hardware using forumla below.\n\nfile size * number of parallel threads / operation time = average file io speed\n\n\nto get more precise estimations, sum up per task io throughput.\n\nap io throughput = ap read + ap write\np1 io throughput = p1 read + p1 write\np2 io throughput = p2 read + p2 write\nc2 io throughput = c2 read + c2 write\n\n\nssd and nvme are commonly used for sealing storages. to ensure effcient usage of these faster storage, it is recommended to use software raid on these ssds.\n\nmdadm -c /dev/md1 -l 0 -n 2 /dev/sdb1 /dev/sdc1\nmdadm -c /dev/md2 -l 5 -n 6 /dev/sd[b-g]1\n# options\n-c, --create\ncreate a new array.\n-l, --level=\nset raid level. \n-n, --raid-devices=\nspecify the number of active devices in the array.\n-x, --spare-devices=\nspecify the number of spare (extra) devices in the initial array.\n-a, --assemble\nassemble a pre-existing array.\n\n\nmore on mdadm, please visit here. get latest version from here.\n\n\n# permanent storage\n\npossible adversaries to overcome when setting up permanent storage.\n\n 1. when a sector is sealed, it will be transferred from sealer to permanent storage which takes up network bandwidth and disk ios.\n 2. during a windowpost, random selections files will be read in large number. slow read may result in failed windowpost.\n 3. choose high raid level to have redunancy when possible. eg, raid5, raid6, raid10.\n 4. monitor usage of your disk array.\n\n\n# network transfer\n\nduring sealing, if you specialize your worker in one type of task (to increase efficiency of your resources), it will result in file transfer over the network. if file being copied too slowly over the network, it will drag the speed of your sealing pipeline down. closely monitor your computation resources and see if there is any idling. for example, if pc2 takes 25 minutes, reads ~400g and writes ~100g, then io throughput will be ~368 mb/s (440 * 1024 / 25 / 60 + 100 * 1024 / 25 / 60).\n\nafter sealing, the sealed sector need to be transferred to permanent storage which can be bottlenecked by the network bandwidth connecting your venus-sealer and your hdd disk array.\n\n\n# environment variables\n\nsha extension would make a huge difference in computing p1 tasks. p1 could cost around 250 minutes with sha extension enabled while may cost 420+ minutes without sha.\n\nwhen compiling venus-sealer, make sure you have set rustflags="-c target-cpu=native -g" ffi_build_from_source="1" flags and you shall see the following example output.\n\n+ trap \'{ rm -f $__build_output_log_tmp; }\' exit\n+ local \'__rust_flags=--print native-static-libs -c target-feature=+sse2\'\n+ rustflags=\'--print native-static-libs -c target-feature=+sse2\'\n+ cargo +nightly-2021-04-24 build --release --no-default-features --features multicore-sdr --features pairing,gpu\n+ tee /tmp/tmp.iytnd3xka9\n   compiling autocfg v1.0.1\n   compiling libc v0.2.97\n   compiling cfg-if v1.0.0\n   compiling proc-macro2 v1.0.27\n   compiling unicode-xid v0.2.2\n   compiling syn v1.0.73\n   compiling lazy_static v1.4.0\n   compiling cc v1.0.68\n   compiling typenum v1.13.0\n   compiling serde_derive v1.0.126\n   compiling serde v1.0.126\n\n\n\n# core restriction\n\nwhen running two types of tasks on same box, you may want to restrict cpu cores each task may use without competing for resources of the other.\n\nthrough taskset. note you cannot dynamically change core restrictions during execution of the program.\n\ntrust_params=1 nohup taskset -c 0-32 ./venus-worker run\n# non-consecutive core selection \ntaskset -c 0-9,19-29,39-49\n\n\nor through cgrep, which supports dynamic core restrictions during program execution.\n\nsudo mkdir -p /sys/fs/cgroup/cpuset/pre1-worker\nsudo echo 0-31 > /sys/fs/cgroup/cpuset/pre1-worker/cpuset.cpus\nsudo echo <pid> > /sys/fs/cgroup/cpuset/pre1-worker/cgroup.procs\n\n\n\n# worker optimization\n\nall numbers are for 32g sectors. for 64g sectors, double what the numbers of 32g sector.\n\n\n# p1 optimization\n\nset following environment variable to speed up p1.\n\n# store cache files in ram; for 32g sectors, it will cost 56g ram\nexport fil_proofs_maximize_caching=1  \n# use multiple cores for p1\nexport fil_proofs_use_multicore_sdr=1\n\n\np1 ram usage includes 56g cache file and 2 layers of the sector for each sector sealing in parallel.\n\n# assume 10 sector running in parallel\n56g + 32g * 2 * 10 = 696g\n\n\np1 ssd usage includes 11 layers of the sector, 64g of tree-d file and 32g of the unsealed sector.\n\n# for 1 sector\n11 * 32g + 64 + 32 = 440g\n\n\n\n# p2 optimization\n\nset following environment variable to speed up p2.\n\n# use gpu for tree-r-last\nexport fil_proofs_use_gpu_column_builder=1   \n# use gpu for tree-c\nexport fil_proofs_use_gpu_tree_builder=1 \n\n\np2 ram usage is 96g.\n\n# assume 10 sector running in parallel\n96g * 10 = 960g\n\n\np1 ssd usage includes 4.6g tree-c file * 8, 9.2m tree-r-last file * 8, 4k t_aux file, 4k p_aux file and 32g unsealed sector file.\n\n4.6g * 8 + 8 * 9.2m + 4k * 2 + 32g = ~70g\n\n\n\n# commit\n\nc1 cost little cpu usage, but require sum of p1 and p2 ssd usage.\n\np1 440g + p2 79g = 519g\n\n\nc2 environment variable\n\nbellman_no_gpu=1\n# example, if you are using 3090\ngpubellman_custom_gpu="geforce rtx 3090:10496" \n\n\nc2 ram usage.\n\n128g + 64g = 192g\n\n\n\n# optimize sealing pipeline\n\n\n# calculate your daily growth\n\ncalculate how many tasks your sealing pipeline can process.\n\n# for each type of task\ntasks done / time = production rate\ndaily production rate * (32g or 64g) = daily growth in power\n\n\nfor example, if we have one box and can finish p1 in 240 minutes, p2 in 30 minutes and commit in 35 minutes, then you can derive daily growth by the following chart.\n\ntask     minute   parallel   hourly production rate\np1       240      1          0.25 = 1 / (240 /60)\np2       30       1          2 = 1 / (30 /60)\ncommit   35       1          1.71 = 1 / (35 /60)\n\n\n# finding optimal task configurations\n\nfrom the table above, we know that daily growth will be bottlenecked by p1. adjust number of parallel tasks for different types of task to achieve maximum efficiency.\n\ntask     minutes   parallel   hourly productin       output   memory consumption\np1       240       7          1.75 = 7 / (240 /60)   1344 g   504 g = 7*64+56\np2       30        1          2 = 1 / (30 /60)       1536 g   96 g = 1*96\ncommit   35        1          1.71 = 1 / (35 /60)    1316 g   192 g = 1*128+64\n\nthe goal is to have output for each task to be as close as possible so that the sealing pipeline runs in its maximum efficiency. things to watchout for includes...\n\n 1. hourly production for commit is lower than p1, which may result in tasks backlogged in commit phase.\n 2. when one type of tasks being overly efficient than others, resources may become idle.\n 3. miro management is needed to have highest possible efficiency.\n\n\n# finding optimal pledging\n\nfor example, if you find 7 p1 task to the optimal for your system, change the following venus-sealer configurations.\n\n[sealing]  \n  maxsealingsectors = 7\n\n\n\n# stop-loss\n\nif one of tasks fails too many times, manual intervention is needed to get sealing pipeline back to its normal output.\n\nremove sectors when you have the following issues.\n\n 1. expired ticket\n 2. expired commit\n 3. corrupted proof params\n\nto remove incomplete sectors.\n\nvenus-sealer sectors remove --really-do-it <sectornum>\n',charsets:{}},{title:"Deployment of a Venus System",frontmatter:{},regularPath:"/operation/",relativePath:"operation/README.md",key:"v-e78b61b4",path:"/operation/",headers:[{level:3,title:"Deployment",slug:"deployment",normalizedTitle:"deployment",charIndex:2},{level:3,title:"Architecture",slug:"architecture",normalizedTitle:"architecture",charIndex:514}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Deployment Architecture",content:"# Deployment of a Venus System\n\nVenus refers to products developed and maintained by Venus team to interact efficiently and robustly with Filecoin protocol. The target audience are storage providers, storage clients, ecosystem partners and Dapp. Venus has been widely adopted in SP and SC use cases.\n\n\n# Deployment\n\nSince the rebranding of Venus by the end of 2022, three main products has been formed, namely Sophon，Damocles and Droplet. Please refer to each product's own documentation for deployment guide.\n\n\n# Architecture",normalizedContent:"# deployment of a venus system\n\nvenus refers to products developed and maintained by venus team to interact efficiently and robustly with filecoin protocol. the target audience are storage providers, storage clients, ecosystem partners and dapp. venus has been widely adopted in sp and sc use cases.\n\n\n# deployment\n\nsince the rebranding of venus by the end of 2022, three main products has been formed, namely sophon，damocles and droplet. please refer to each product's own documentation for deployment guide.\n\n\n# architecture",charsets:{}},{frontmatter:{},regularPath:"/operation/_Footer.html",relativePath:"operation/_Footer.md",key:"v-e8334676",path:"/operation/_Footer.html",lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:null,content:"See something missing? Have tips to share? File an issue, and we'll follow up as soon as possible. (If you have write permission in this repo, feel free to edit directly.)",normalizedContent:"see something missing? have tips to share? file an issue, and we'll follow up as soon as possible. (if you have write permission in this repo, feel free to edit directly.)",charsets:{}},{title:"Venus Single box setup",frontmatter:{},regularPath:"/operation/example-single-box.html",relativePath:"operation/example-single-box.md",key:"v-05feabe2",path:"/operation/example-single-box.html",headers:[{level:2,title:"Venus Single box setup",slug:"venus-single-box-setup",normalizedTitle:"venus single box setup",charIndex:2},{level:2,title:"Specs",slug:"specs",normalizedTitle:"specs",charIndex:118},{level:2,title:"Job scheduling",slug:"job-scheduling",normalizedTitle:"job scheduling",charIndex:320}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Venus Single box setup Specs Job scheduling",content:"# Venus Single box setup\n\nThis is an exmaple venus single box setup that is estimated to grow 1TiB power per day.\n\n\n# Specs\n\nPARTS                RECOMMENDATION\nCPU                  3970X * 1 (32 core)\nRAM                  512G\nNVMe (for sealing)   3T/SSD\nSSD (for OS)         500G\nGPU                  RTX 3080 * 1\n\n\n# Job scheduling\n\nTASK             CORE LIMIT   MINUTES   RAM(G)   HOURLY PRODUCTION RATE   DAILY GROWTH(T)\nP1 * 5           20           220       376      1.3636                   1.0227\nAP, P2, Commit   12           10        120      3                        1.125\n\nFor more information on core limit, please refer to the next tutorial.",normalizedContent:"# venus single box setup\n\nthis is an exmaple venus single box setup that is estimated to grow 1tib power per day.\n\n\n# specs\n\nparts                recommendation\ncpu                  3970x * 1 (32 core)\nram                  512g\nnvme (for sealing)   3t/ssd\nssd (for os)         500g\ngpu                  rtx 3080 * 1\n\n\n# job scheduling\n\ntask             core limit   minutes   ram(g)   hourly production rate   daily growth(t)\np1 * 5           20           220       376      1.3636                   1.0227\nap, p2, commit   12           10        120      3                        1.125\n\nfor more information on core limit, please refer to the next tutorial.",charsets:{}},{title:"Commands from Lotus",frontmatter:{},regularPath:"/operation/lotus-vs-venus.html",relativePath:"operation/lotus-vs-venus.md",key:"v-62d6f28b",path:"/operation/lotus-vs-venus.html",headers:[{level:2,title:"Commands from Lotus",slug:"commands-from-lotus",normalizedTitle:"commands from lotus",charIndex:2}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Commands from Lotus",content:"# Commands from Lotus\n\nMany basic commands including but not limited to creating worker/controler addresses, setting different types of configurations, or changing storage locations apply to both Lotus and Venus. Node operators are expected to follow the same process as what is instructed on the Lotus documentation. If you encounter any questions please do not hesitate to reach out to us on #fil-venus.",normalizedContent:"# commands from lotus\n\nmany basic commands including but not limited to creating worker/controler addresses, setting different types of configurations, or changing storage locations apply to both lotus and venus. node operators are expected to follow the same process as what is instructed on the lotus documentation. if you encounter any questions please do not hesitate to reach out to us on #fil-venus.",charsets:{}},{title:"Upgrading to network version 15",frontmatter:{},regularPath:"/operation/nv15-upgrade.html",relativePath:"operation/nv15-upgrade.md",key:"v-bb95bd2a",path:"/operation/nv15-upgrade.html",headers:[{level:2,title:"Upgrading to network version 15",slug:"upgrading-to-network-version-15",normalizedTitle:"upgrading to network version 15",charIndex:2}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Upgrading to network version 15",content:'# Upgrading to network version 15\n\nPlease upgrade each venus component in the order as it is presented in this document. We recommend that you go through the document before upgrading. When in doubt, please do not hesitate to reach out to us here.\n\nWARNING\n\nPlease make sure that your storage system is not doing any windowPost when you upgrade and leave ample time before the next upcoming windowPost\n\nTIP\n\nIf you have partitions in all deadlines, it is recommended that you build another transition environment for the upgrade.\n\nTIP\n\nIt is recommended that you backup your old binary and critical data as you go through the upgrade process.\n\nTIP\n\nFor large scale storage systems, it is recommended that running chain-co with both venus daemon and venus wrapped daemon.\n\n 1. venus-auth: optional upgrade; branch/tag v1.3.2;\n\n 2. venus-wallet: optional upgrade; branch/tag v1.4.0;\n\n 3. venus daemon: mandatory upgrade; branch/tag v1.2.1;\n\nTIP\n\nCheckups after upgrading:\n\n * integrity of vk files\n * see if upgrade epochs are properly set in config files\n\n # cali\n "upgradeOhSnapHeight": 682006\n # mainnet\n "upgradeOhSnapHeight": 1594680\n\n\n * see if maxfee under mpool section is now in the format of [x] Fil\n\n"mpool": {\n\t"maxNonceGap": 100,\n   \t"maxFee": "10 FIL"\n},\n\n\n * see if chain synchronization is working properly\n\nWARNING\n\nAs a result of a mandatory network upgrade with API changes, sealer connection maybe lost during the this step of the upgrade.\n\n 4. venus wrapped deamon: mandatory upgrade (if you are using chain-co); branch/tag venus/v1.14.0;\n\nTIP\n\nCheckups after upgrading:\n\n * see if chain synchronization is working properly\n * see if connection to venus-auth is okay\n\ncurl http://127.0.0.1:3453/rpc/v0 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer <YOUR_TOKEN>" -d \'{"method": "Filecoin.ChainHead","params":[], "id": 0}\'\n\n\n 5. chain-co: mandatory upgrade (if you deployed chain-co for your HA solution); branch/tag v0.1.0;\n\nTIP\n\nCheckups after upgrading:\n\n * see if two new API MpoolPending and MpoolGetNonce are working properly\n\n 6. venus-messager: mandatory upgrade; branch/tag v1.4.0;\n\n 7. venus-gateway: mandatory upgrade; branch/tag v1.2.0;\n\nTIP\n\n * support for both old and new API due to changes in ComputeProof\'s params\n * see if both v0 and v1 APIs are working properly\n\n 8. venus-miner: mandatory upgrade; branch/tag v1.4.0;\n\nTIP\n\nParameter changes for ComputeProof.\n\n 9.  venus-market: optional upgrade; branch/tag v2.0.0;\n\n 10. venus-sealer: mandatory upgrade; branch/tag v1.4.0;\n\nFor more question regarding nv15 upgrade, please refer to this discussion thread.',normalizedContent:'# upgrading to network version 15\n\nplease upgrade each venus component in the order as it is presented in this document. we recommend that you go through the document before upgrading. when in doubt, please do not hesitate to reach out to us here.\n\nwarning\n\nplease make sure that your storage system is not doing any windowpost when you upgrade and leave ample time before the next upcoming windowpost\n\ntip\n\nif you have partitions in all deadlines, it is recommended that you build another transition environment for the upgrade.\n\ntip\n\nit is recommended that you backup your old binary and critical data as you go through the upgrade process.\n\ntip\n\nfor large scale storage systems, it is recommended that running chain-co with both venus daemon and venus wrapped daemon.\n\n 1. venus-auth: optional upgrade; branch/tag v1.3.2;\n\n 2. venus-wallet: optional upgrade; branch/tag v1.4.0;\n\n 3. venus daemon: mandatory upgrade; branch/tag v1.2.1;\n\ntip\n\ncheckups after upgrading:\n\n * integrity of vk files\n * see if upgrade epochs are properly set in config files\n\n # cali\n "upgradeohsnapheight": 682006\n # mainnet\n "upgradeohsnapheight": 1594680\n\n\n * see if maxfee under mpool section is now in the format of [x] fil\n\n"mpool": {\n\t"maxnoncegap": 100,\n   \t"maxfee": "10 fil"\n},\n\n\n * see if chain synchronization is working properly\n\nwarning\n\nas a result of a mandatory network upgrade with api changes, sealer connection maybe lost during the this step of the upgrade.\n\n 4. venus wrapped deamon: mandatory upgrade (if you are using chain-co); branch/tag venus/v1.14.0;\n\ntip\n\ncheckups after upgrading:\n\n * see if chain synchronization is working properly\n * see if connection to venus-auth is okay\n\ncurl http://127.0.0.1:3453/rpc/v0 -x post -h "content-type: application/json" -h "authorization: bearer <your_token>" -d \'{"method": "filecoin.chainhead","params":[], "id": 0}\'\n\n\n 5. chain-co: mandatory upgrade (if you deployed chain-co for your ha solution); branch/tag v0.1.0;\n\ntip\n\ncheckups after upgrading:\n\n * see if two new api mpoolpending and mpoolgetnonce are working properly\n\n 6. venus-messager: mandatory upgrade; branch/tag v1.4.0;\n\n 7. venus-gateway: mandatory upgrade; branch/tag v1.2.0;\n\ntip\n\n * support for both old and new api due to changes in computeproof\'s params\n * see if both v0 and v1 apis are working properly\n\n 8. venus-miner: mandatory upgrade; branch/tag v1.4.0;\n\ntip\n\nparameter changes for computeproof.\n\n 9.  venus-market: optional upgrade; branch/tag v2.0.0;\n\n 10. venus-sealer: mandatory upgrade; branch/tag v1.4.0;\n\nfor more question regarding nv15 upgrade, please refer to this discussion thread.',charsets:{}},{title:"nv16 upgrade",frontmatter:{},regularPath:"/operation/nv16-upgrade.html",relativePath:"operation/nv16-upgrade.md",key:"v-499e482e",path:"/operation/nv16-upgrade.html",headers:[{level:2,title:"nv16 upgrade",slug:"nv16-upgrade",normalizedTitle:"nv16 upgrade",charIndex:2},{level:3,title:"timeline",slug:"timeline",normalizedTitle:"timeline",charIndex:19},{level:3,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:76},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:76},{level:3,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:3582},{level:3,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:4305},{level:3,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:4487},{level:3,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:4897},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:4973}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"nv16 upgrade timeline venus-auth venus venus-messager venus-miner venus-gateway venus-market venus-wallet",content:'# nv16 upgrade\n\n\n# timeline\n\nMainnet upgrade time: 2022-07-06T14:00:00Z\n\n\n# venus-auth\n\n * tag: v1.6.0\n * New features: shared token access support for multi SPs\n * Dependency on other components: none\n\nThings to look out for:\n\n 1. Add a miners table to save the correspondence between user and miner\n\n 2. Write the values of the name and miner fields of each row of data in the users table to the user and miner fields in the miners table, check whether there is any problem with the writing, the success log: migrate from:0, to:1 success; failure log: migrate from store version:0 failed\n\n 3. Use ./venus-auth user miner list <user> to list all miners binded to user\n\n 4. Use the command ./venus-auth user list to list all users. Note: make sure that the status of the user being used is enabled\n\n\n# venus\n\n * tag: v1.6.0\n * New features: Support for nv16 networks\n * Dependency on other components: none\n\nThings to look out for:\n\n 1. Check whether the vk file is complete after the upgrade\n\n 2. Check the configuration file after the upgrade to see if the upgrade height is properly set. The default configuration file is in ~/.venus/config.json :\n    \n    # cali\n    "upgradeSkyrHeight": 1044660\n    #mainnet\n    "upgradeSkyrHeight": 1960320\n    \n\n 3. After the upgrade, check whether the blocks are properly synchronized\n\n 4. The api version has changed, affecting the miner connection\n    \n    # Use the curl command to test the interfaces StateGetBeaconEntry, BeaconGetEntry, the following three curl commands should return the same results\n    curl http://127.0.0.1:3453/rpc/v0 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer token" -d \'{"method": "Filecoin.BeaconGetEntry", "params":[1933610], "id": 0}\'\n    curl http://127.0.0.1:3453/rpc/v1 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer token" -d \'{"method": "Filecoin.BeaconGetEntry", "params":[1933610], "id": 0}\'\n    curl http://127.0.0.1:3453/rpc/v1 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer token" -d \'{"method": "Filecoin.StateGetBeaconEntry", "params":[1933610], "id": 0}\'\n    \n\n 5. Check the mainnet v8 actors cid and make sure it is the same as the output below\n    \n    ./venus state actor-cids\n    \n    # The order may vary\n    _manifest bafy2bzacebogjbpiemi7npzxchgcjjki3tfxon4ims55obfyfleqntteljsea\n    account bafk2bzacedudbf7fc5va57t3tmo63snmt3en4iaidv4vo3qlyacbxaa6hlx6y\n    storagemarket bafk2bzacediohrxkp2fbsl4yj4jlupjdkgsiwqb4zuezvinhdo2j5hrxco62q\n    storageminer bafk2bzacecgnynvd3tene3bvqoknuspit56canij5bpra6wl4mrq2mxxwriyu\n    multisig bafk2bzacebhldfjuy4o5v7amrhp5p2gzv2qo5275jut4adnbyp56fxkwy5fag\n    paymentchannel bafk2bzacebalad3f72wyk7qyilvfjijcwubdspytnyzlrhvn73254gqis44rq\n    reward bafk2bzacecwzzxlgjiavnc3545cqqil3cmq4hgpvfp2crguxy2pl5ybusfsbe\n    system bafk2bzacedwq5uppsw7vp55zpj7jdieizirmldceehu6wvombw3ixq2tcq57w\n    cron bafk2bzacecqb3eolfurehny6yp7tgmapib4ocazo5ilkopjce2c7wc2bcec62\n    init bafk2bzaceaipvjhoxmtofsnv3aj6gj5ida4afdrxa4ewku2hfipdlxpaektlw\n    storagepower bafk2bzacebjvqva6ppvysn5xpmiqcdfelwbbcxmghx5ww6hr37cgred6dyrpm\n    verifiedregistry bafk2bzaceb3zbkjz3auizmoln2unmxep7dyfcmsre64vnqfhdyh7rkqfoxlw4\n    \n\n 6. Mainnet can use fvm on nv15 network by setting environment variable export VENUS_USE_FVM_TO_SYNC_MAINNET_V15=1\n\n 7. If you do not troubleshoot the problem, the rust log level is not recommended to be set to trace, because more logs will be printed\n\n 8. After the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n\n# venus-messager\n\n * tag:v1.6.0\n * Affected function: Support new network version, add home directory, default in ~/.venus-messager\n * Dependency on other components: none\n\nThings to look out for:\n\n 1. Whether to generate the main directory ~/.venus-messager after the upgrade\n\n 2. After the upgrade, the main directory should contain config.toml and tipset.json, config.toml should be consistent with the configuration file used to start messager, ~/.venus-messager/tipset.json is copied from tipset.json in the current directory\n\n 3. After the upgrade is successful, restarting again is to read the configuration is ~/.venus-messager/config.toml\n\n 4. Whether the message can be received and pushed to the node normally\n\n\n# venus-miner\n\n * tag: v1.6.0\n * New features: Get the interface name of beacon Change from BeaconGetEntry to StateGetBeaconEntry\n * Dependency on other components: venus, venus-auth, venus-gateway\n\nThings to look out for:\n\n 1. After the upgrade, use the commonly used command address state/list/update to verify it.\n 2. If you use a mysql database, check that the parent_key field in the miner_blocks table is varchar(1000)\n\n\n# venus-gateway\n\n * tag: v1.6.0\n * New Feature: Fix requests without auto cleanup timeouts\n\nThings to look out for:\n\n 1. Is wallet re-registered after the upgrade\n\n\n# venus-market\n\n * tag: v2.2.0\n * New features:\n\nThings to look out for::\n\n\n# venus-wallet\n\n# Community\n\n * tag: v1.6.0\n * New features:\n\nThings to look out for::\n\n 1. Need to unlock wallet\n 2. if wallet is properly registered on the gateway',normalizedContent:'# nv16 upgrade\n\n\n# timeline\n\nmainnet upgrade time: 2022-07-06t14:00:00z\n\n\n# venus-auth\n\n * tag: v1.6.0\n * new features: shared token access support for multi sps\n * dependency on other components: none\n\nthings to look out for:\n\n 1. add a miners table to save the correspondence between user and miner\n\n 2. write the values of the name and miner fields of each row of data in the users table to the user and miner fields in the miners table, check whether there is any problem with the writing, the success log: migrate from:0, to:1 success; failure log: migrate from store version:0 failed\n\n 3. use ./venus-auth user miner list <user> to list all miners binded to user\n\n 4. use the command ./venus-auth user list to list all users. note: make sure that the status of the user being used is enabled\n\n\n# venus\n\n * tag: v1.6.0\n * new features: support for nv16 networks\n * dependency on other components: none\n\nthings to look out for:\n\n 1. check whether the vk file is complete after the upgrade\n\n 2. check the configuration file after the upgrade to see if the upgrade height is properly set. the default configuration file is in ~/.venus/config.json :\n    \n    # cali\n    "upgradeskyrheight": 1044660\n    #mainnet\n    "upgradeskyrheight": 1960320\n    \n\n 3. after the upgrade, check whether the blocks are properly synchronized\n\n 4. the api version has changed, affecting the miner connection\n    \n    # use the curl command to test the interfaces stategetbeaconentry, beacongetentry, the following three curl commands should return the same results\n    curl http://127.0.0.1:3453/rpc/v0 -x post -h "content-type: application/json" -h "authorization: bearer token" -d \'{"method": "filecoin.beacongetentry", "params":[1933610], "id": 0}\'\n    curl http://127.0.0.1:3453/rpc/v1 -x post -h "content-type: application/json" -h "authorization: bearer token" -d \'{"method": "filecoin.beacongetentry", "params":[1933610], "id": 0}\'\n    curl http://127.0.0.1:3453/rpc/v1 -x post -h "content-type: application/json" -h "authorization: bearer token" -d \'{"method": "filecoin.stategetbeaconentry", "params":[1933610], "id": 0}\'\n    \n\n 5. check the mainnet v8 actors cid and make sure it is the same as the output below\n    \n    ./venus state actor-cids\n    \n    # the order may vary\n    _manifest bafy2bzacebogjbpiemi7npzxchgcjjki3tfxon4ims55obfyfleqntteljsea\n    account bafk2bzacedudbf7fc5va57t3tmo63snmt3en4iaidv4vo3qlyacbxaa6hlx6y\n    storagemarket bafk2bzacediohrxkp2fbsl4yj4jlupjdkgsiwqb4zuezvinhdo2j5hrxco62q\n    storageminer bafk2bzacecgnynvd3tene3bvqoknuspit56canij5bpra6wl4mrq2mxxwriyu\n    multisig bafk2bzacebhldfjuy4o5v7amrhp5p2gzv2qo5275jut4adnbyp56fxkwy5fag\n    paymentchannel bafk2bzacebalad3f72wyk7qyilvfjijcwubdspytnyzlrhvn73254gqis44rq\n    reward bafk2bzacecwzzxlgjiavnc3545cqqil3cmq4hgpvfp2crguxy2pl5ybusfsbe\n    system bafk2bzacedwq5uppsw7vp55zpj7jdieizirmldceehu6wvombw3ixq2tcq57w\n    cron bafk2bzacecqb3eolfurehny6yp7tgmapib4ocazo5ilkopjce2c7wc2bcec62\n    init bafk2bzaceaipvjhoxmtofsnv3aj6gj5ida4afdrxa4ewku2hfipdlxpaektlw\n    storagepower bafk2bzacebjvqva6ppvysn5xpmiqcdfelwbbcxmghx5ww6hr37cgred6dyrpm\n    verifiedregistry bafk2bzaceb3zbkjz3auizmoln2unmxep7dyfcmsre64vnqfhdyh7rkqfoxlw4\n    \n\n 6. mainnet can use fvm on nv15 network by setting environment variable export venus_use_fvm_to_sync_mainnet_v15=1\n\n 7. if you do not troubleshoot the problem, the rust log level is not recommended to be set to trace, because more logs will be printed\n\n 8. after the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n\n# venus-messager\n\n * tag:v1.6.0\n * affected function: support new network version, add home directory, default in ~/.venus-messager\n * dependency on other components: none\n\nthings to look out for:\n\n 1. whether to generate the main directory ~/.venus-messager after the upgrade\n\n 2. after the upgrade, the main directory should contain config.toml and tipset.json, config.toml should be consistent with the configuration file used to start messager, ~/.venus-messager/tipset.json is copied from tipset.json in the current directory\n\n 3. after the upgrade is successful, restarting again is to read the configuration is ~/.venus-messager/config.toml\n\n 4. whether the message can be received and pushed to the node normally\n\n\n# venus-miner\n\n * tag: v1.6.0\n * new features: get the interface name of beacon change from beacongetentry to stategetbeaconentry\n * dependency on other components: venus, venus-auth, venus-gateway\n\nthings to look out for:\n\n 1. after the upgrade, use the commonly used command address state/list/update to verify it.\n 2. if you use a mysql database, check that the parent_key field in the miner_blocks table is varchar(1000)\n\n\n# venus-gateway\n\n * tag: v1.6.0\n * new feature: fix requests without auto cleanup timeouts\n\nthings to look out for:\n\n 1. is wallet re-registered after the upgrade\n\n\n# venus-market\n\n * tag: v2.2.0\n * new features:\n\nthings to look out for::\n\n\n# venus-wallet\n\n# community\n\n * tag: v1.6.0\n * new features:\n\nthings to look out for::\n\n 1. need to unlock wallet\n 2. if wallet is properly registered on the gateway',charsets:{}},{title:"nv17 upgrade",frontmatter:{},regularPath:"/operation/nv17-upgrade.html",relativePath:"operation/nv17-upgrade.md",key:"v-142c9667",path:"/operation/nv17-upgrade.html",headers:[{level:3,title:"timeline",slug:"timeline",normalizedTitle:"timeline",charIndex:221},{level:3,title:"Versions of each component",slug:"versions-of-each-component",normalizedTitle:"versions of each component",charIndex:320},{level:3,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:381},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:37},{level:3,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:2637},{level:3,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:2989},{level:3,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:53},{level:3,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:3604},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:37}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"timeline Versions of each component venus-auth venus venus-messager venus-miner venus-gateway venus-market venus-wallet",content:'# nv17 upgrade\n\nIf you are upgrading venus-wallet or venus-gateway from v1.6.x to v1.8.0, please read Venus component v1.7.0 usage notes first and pay attention to the upgrade order of venus-gateway and venus-wallet.\n\n\n# timeline\n\nUpgrade time (UTC): 2022-11-30T14:00:00Z Upgrade time (Beijing): 2022-11-30 22:00:00\n\n\n# Versions of each component\n\n * calibrationnet\n * mainnet\n\n\n# venus-auth\n\nAffected function:\n\nDependency: none\n\nPrecautions:\n\n 1. Add field open_mining to miners table, 0 means no block, 1 means block, default is 1\n\n\n# venus\n\nAffected function: nv17 network support\n\nDependency: None\n\nPrecautions:\n\nCompilation: first make dist-clean and then make, this can prevent problems caused by failing to upgrade filecoin-ffi.\n\n 1. Check whether the vk file is complete after upgrading\n\n 2. Check the configuration file after the upgrade, whether the upgrade height is set correctly, the configuration file is in ~/.venus/config.json by default:\n    \n    #cali\n    "upgradeSkyrHeight": 16800\n    #mainnet\n    "upgradeSkyrHeight": 2383680\n    \n\n 3. After the upgrade, you need to check whether height is synchronized correctly\n\n 4. Check the mainnet v9 actors code to make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 17\n    \n    # order may vary\n    Network Version: 17\n    Actor Version: 9\n    Actor CIDs\n    reward bafk2bzacebezgbbmcm2gbcqwisus5fjvpj7hhmu5ubd37phuku3hmkfulxm2o\n    system bafk2bzaceagvlo2jtahj7dloshrmwfulrd6e2izqev32qm46eumf754weec6c\n    _manifest bafy2bzaceb6j6666h36xnhksu3ww4kxb6e25niayfgkdnifaqi6m6ooc66i6i\n    storagemarket bafk2bzacec3j7p6gklk64stax5px3xxd7hdtejaepnd4nw7s2adihde6emkcu\n    multisig bafk2bzacec4va3nmugyqjqrs3lqyr2ij67jhjia5frvx7omnh2isha6abxzya\n    paymentchannel bafk2bzacebhdvjbjcgupklddfavzef4e4gnkt3xk3rbmgfmk7xhecszhfxeds\n    storagepower bafk2bzacedsetphfajgne4qy3vdrpyd6ekcmtfs2zkjut4r34cvnuoqemdrtw\n    verifiedregistry bafk2bzacecf3yodlyudzukumehbuabgqljyhjt5ifiv4vetcfohnvsxzynwga\n    datacap bafk2bzacebb6uy2ys7tapekmtj7apnjg7oyj4ia5t7tlkvbmwtxwv74lb2pug\n    account bafk2bzacect2p7urje3pylrrrjy3tngn6yaih4gtzauuatf2jllk3ksgfiw2y\n    cron bafk2bzacebcec3lffmos3nawm5cvwehssxeqwxixoyyfvejy7viszzsxzyu26\n    init bafk2bzacebtdq4zyuxk2fzbdkva6kc4mx75mkbfmldplfntayhbl5wkqou33i\n    storageminer bafk2bzacedyux5hlrildwutvvjdcsvjtwsoc5xnqdjl73ouiukgklekeuyfl4\n    \n\n 5. If you are not troubleshooting anything, it is NOT recommended to set rust log level to trace as more irrelavant logs will be printed\n\n 6. After the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n\n# venus-messager\n\nAffected function:\n\n 1. Increase the control of basefee, you can set the basefee separately for an address, when the basefee on the chain is higher than the basefee limit, the message will not be pushed out\n\nDependency upgrade components:\n\nPrecautions:\n\n 1. After the upgrade, observe whether the message can be on-chained normally\n\n\n# venus-miner\n\nAffected function:\n\nDependency upgrade components:\n\nPrecautions:\n\n 1. If you are upgrading from 1.7.* to v1.8.0, it will automatically migrate configuration files. Whereas if you are upgrading from 1.6.* to v1.8.0, it is required to have a reinitialization of repo (init). Please checkout this guide to learn more.\n\n 2. Check if blocks can be produced normally after the upgrade.\n\n\n# venus-gateway\n\nAffected function:\n\nPrecautions:\n\nCompile: first make dist-clean and then make\n\n 1. Check wallet after upgrade: ./venus-gateway wallet list\n 2. Check miners after upgrade: ./venus-gateway miner list\n\n\n# venus-market\n\nAffected function:\n\nPrecautions:\n\nCompile: first make dist-clean and then make\n\n\n# venus-wallet\n\nAffect function:\n\nPrecautions:\n\n 1. Make sure to unlock the wallet after startup\n 2. Check whether the wallet is registered on the gateway',normalizedContent:'# nv17 upgrade\n\nif you are upgrading venus-wallet or venus-gateway from v1.6.x to v1.8.0, please read venus component v1.7.0 usage notes first and pay attention to the upgrade order of venus-gateway and venus-wallet.\n\n\n# timeline\n\nupgrade time (utc): 2022-11-30t14:00:00z upgrade time (beijing): 2022-11-30 22:00:00\n\n\n# versions of each component\n\n * calibrationnet\n * mainnet\n\n\n# venus-auth\n\naffected function:\n\ndependency: none\n\nprecautions:\n\n 1. add field open_mining to miners table, 0 means no block, 1 means block, default is 1\n\n\n# venus\n\naffected function: nv17 network support\n\ndependency: none\n\nprecautions:\n\ncompilation: first make dist-clean and then make, this can prevent problems caused by failing to upgrade filecoin-ffi.\n\n 1. check whether the vk file is complete after upgrading\n\n 2. check the configuration file after the upgrade, whether the upgrade height is set correctly, the configuration file is in ~/.venus/config.json by default:\n    \n    #cali\n    "upgradeskyrheight": 16800\n    #mainnet\n    "upgradeskyrheight": 2383680\n    \n\n 3. after the upgrade, you need to check whether height is synchronized correctly\n\n 4. check the mainnet v9 actors code to make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 17\n    \n    # order may vary\n    network version: 17\n    actor version: 9\n    actor cids\n    reward bafk2bzacebezgbbmcm2gbcqwisus5fjvpj7hhmu5ubd37phuku3hmkfulxm2o\n    system bafk2bzaceagvlo2jtahj7dloshrmwfulrd6e2izqev32qm46eumf754weec6c\n    _manifest bafy2bzaceb6j6666h36xnhksu3ww4kxb6e25niayfgkdnifaqi6m6ooc66i6i\n    storagemarket bafk2bzacec3j7p6gklk64stax5px3xxd7hdtejaepnd4nw7s2adihde6emkcu\n    multisig bafk2bzacec4va3nmugyqjqrs3lqyr2ij67jhjia5frvx7omnh2isha6abxzya\n    paymentchannel bafk2bzacebhdvjbjcgupklddfavzef4e4gnkt3xk3rbmgfmk7xhecszhfxeds\n    storagepower bafk2bzacedsetphfajgne4qy3vdrpyd6ekcmtfs2zkjut4r34cvnuoqemdrtw\n    verifiedregistry bafk2bzacecf3yodlyudzukumehbuabgqljyhjt5ifiv4vetcfohnvsxzynwga\n    datacap bafk2bzacebb6uy2ys7tapekmtj7apnjg7oyj4ia5t7tlkvbmwtxwv74lb2pug\n    account bafk2bzacect2p7urje3pylrrrjy3tngn6yaih4gtzauuatf2jllk3ksgfiw2y\n    cron bafk2bzacebcec3lffmos3nawm5cvwehssxeqwxixoyyfvejy7viszzsxzyu26\n    init bafk2bzacebtdq4zyuxk2fzbdkva6kc4mx75mkbfmldplfntayhbl5wkqou33i\n    storageminer bafk2bzacedyux5hlrildwutvvjdcsvjtwsoc5xnqdjl73ouiukgklekeuyfl4\n    \n\n 5. if you are not troubleshooting anything, it is not recommended to set rust log level to trace as more irrelavant logs will be printed\n\n 6. after the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n\n# venus-messager\n\naffected function:\n\n 1. increase the control of basefee, you can set the basefee separately for an address, when the basefee on the chain is higher than the basefee limit, the message will not be pushed out\n\ndependency upgrade components:\n\nprecautions:\n\n 1. after the upgrade, observe whether the message can be on-chained normally\n\n\n# venus-miner\n\naffected function:\n\ndependency upgrade components:\n\nprecautions:\n\n 1. if you are upgrading from 1.7.* to v1.8.0, it will automatically migrate configuration files. whereas if you are upgrading from 1.6.* to v1.8.0, it is required to have a reinitialization of repo (init). please checkout this guide to learn more.\n\n 2. check if blocks can be produced normally after the upgrade.\n\n\n# venus-gateway\n\naffected function:\n\nprecautions:\n\ncompile: first make dist-clean and then make\n\n 1. check wallet after upgrade: ./venus-gateway wallet list\n 2. check miners after upgrade: ./venus-gateway miner list\n\n\n# venus-market\n\naffected function:\n\nprecautions:\n\ncompile: first make dist-clean and then make\n\n\n# venus-wallet\n\naffect function:\n\nprecautions:\n\n 1. make sure to unlock the wallet after startup\n 2. check whether the wallet is registered on the gateway',charsets:{}},{title:"Initial setup",frontmatter:{},regularPath:"/operation/System_monitor_of_Zabbix.html",relativePath:"operation/System_monitor_of_Zabbix.md",key:"v-0d2b8d4f",path:"/operation/System_monitor_of_Zabbix.html",headers:[{level:2,title:"Initial setup",slug:"initial-setup",normalizedTitle:"initial setup",charIndex:2},{level:2,title:"Install software dependencies",slug:"install-software-dependencies",normalizedTitle:"install software dependencies",charIndex:242},{level:2,title:"Install MySQL",slug:"install-mysql",normalizedTitle:"install mysql",charIndex:957},{level:2,title:"Configure zabbix",slug:"configure-zabbix",normalizedTitle:"configure zabbix",charIndex:2026},{level:2,title:"Configure monitoring",slug:"configure-monitoring",normalizedTitle:"configure monitoring",charIndex:3297}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Initial setup Install software dependencies Install MySQL Configure zabbix Configure monitoring",content:"# Initial setup\n\n$ systemctl stop firewalld \n$ systemctl disbale firewalld\n$ vim /etc/selinux/config\n\n$ SELINUX=disabled # change selinux to disabled\n$ setenforce 0 # temporarily change selinux status\n$ getenforce # check selinux status\n\n\n\n# Install software dependencies\n\n$ rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm\n$ yum clean all && yum makecache\n\n# Install zabbix-server and zabbix-agent\n$ yum install zabbix-server-mysql zabbix-agent -y\n\n# Install zabbix-ready nginx\n$ yum install centos-release-scl -y\n$ yum install rh-php72-php-mysqlnd zabbix-nginx-conf-scl -y\n\n\nChange zabbix configurations and start Web GUI.\n\n$ vim /etc/yum.repos.d/zabbix.repo \n\n\n[zabbix-frontend]\n  name=Zabbix Official Repository frontend - $basearch\n  baseurl=http://repo.zabbix.com/zabbix/5.0/rhel/7/$basearch/frontend\n  enabled=1 # change to 1\n  gpgcheck=1\n  gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-ZABBIX-A14FE591\n\n\n\n# Install MySQL\n\n$ mkdir mysql-dir\n$ cd mysql-dir\n$ wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.30-1.el7.x86_64.rpm-bundle.tar\n$ tar -zxvf mysql-5.7.32-1.el7.x86_64.rpm-bundle.tar\n$ yum install *.rpm -y\n\n\n$ systemctl start mysqld\n\n\n$ cat /var/log/mysqld.log | grep root\n\n\nGrep default password.\n\n2021-07-26T10:50:49.538494Z 1 [Note] A temporary password is generated for root@localhost: **20yyk:Ar67S;**\n\n\nLogin to database.\n\n$ mysql -uroot -p\nEnter password: 20yyk:Ar67S;\n\n\nConfig database.\n\nset global validate_password_policy=0;\nset global validate_password_length=1;\nalter user 'root'@'localhost' identified by 'venus'; # Change root password \n\nuse mysql;\nupdate user set host = '%' where user = 'root';\ncreate user 'zabbix'@'%' identified  by '123456';\ngrant all privileges on zabbix.* to 'zabbix'@'%';\nflush privileges;\n\n# Create tables for Zabbix \ncreate database zabbix character set utf8 collate utf8_bin;\n\n\nImport zabbix template files.\n\n$ zcat /usr/share/doc/zabbix-server-mysql-5.0.14/create.sql.gz | mysql -uzabbix -p123456 zabbix\n\n\n\n# Configure zabbix\n\nChange database password.\n\n$ vim /etc/zabbix/zabbix_server.conf\nDBPassword=123456\n\n\nConfigure Nginx.\n\n$ vim /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf\n\n\nAppend nginx at the end of line 6.\n\nlisten.acl_users = apache,nginx\n\n\nChange location to your choice at line 24.\n\nphp_value[date.timezone] = Asia/shanghai\n\n\nConfigure port.\n\n$ vim /etc/opt/rh/rh-nginx116/nginx/conf.d/zabbix.conf\nserver {\n        listen          80; # uncomment this line \n        server_name     test.zabbix.com; # uncomment and change to your own ip\n\n\nChange your hosts file too if using hostname.\n\n$ vim /etc/hosts\n192.168.xx.xx test.zabbix.com\n\n\nIf you are using windows.\n\n# for window hosts\nC:\\Windows\\System32\\drivers\\etc\\hosts\n192.168.xxx.xxx test.zabbix.com \n\n\nStart service and configure to run on boot.\n\nsystemctl restart zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\nsystemctl enable zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\n\n\nChange zabbix agent config fie\n\n$ cat /etc/zabbix/zabbix_agentd.conf | egrep -v \"^$|^#\"\nPidFile=/var/run/zabbix/zabbix_agentd.pid\nLogFile=/var/log/zabbix/zabbix_agentd.log\nLogFileSize=0\nServer=192.168.88.11  # point to ip of zabbix-server\nHostname=venus-sealer\nInclude=/etc/zabbix/zabbix_agentd.d/*.conf\n\n\n\n# Configure monitoring\n\nVisit your zabbix-server with a browser.\n\nConfigure database connection information.\n\nLogin to zabbix. Default user is Admin with zabbix as password.\n\nAdd zabbix-agent.\n\nCheck zabbix RAM usage.\n\nCheck problems in dashboard.",normalizedContent:"# initial setup\n\n$ systemctl stop firewalld \n$ systemctl disbale firewalld\n$ vim /etc/selinux/config\n\n$ selinux=disabled # change selinux to disabled\n$ setenforce 0 # temporarily change selinux status\n$ getenforce # check selinux status\n\n\n\n# install software dependencies\n\n$ rpm -uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm\n$ yum clean all && yum makecache\n\n# install zabbix-server and zabbix-agent\n$ yum install zabbix-server-mysql zabbix-agent -y\n\n# install zabbix-ready nginx\n$ yum install centos-release-scl -y\n$ yum install rh-php72-php-mysqlnd zabbix-nginx-conf-scl -y\n\n\nchange zabbix configurations and start web gui.\n\n$ vim /etc/yum.repos.d/zabbix.repo \n\n\n[zabbix-frontend]\n  name=zabbix official repository frontend - $basearch\n  baseurl=http://repo.zabbix.com/zabbix/5.0/rhel/7/$basearch/frontend\n  enabled=1 # change to 1\n  gpgcheck=1\n  gpgkey=file:///etc/pki/rpm-gpg/rpm-gpg-key-zabbix-a14fe591\n\n\n\n# install mysql\n\n$ mkdir mysql-dir\n$ cd mysql-dir\n$ wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.30-1.el7.x86_64.rpm-bundle.tar\n$ tar -zxvf mysql-5.7.32-1.el7.x86_64.rpm-bundle.tar\n$ yum install *.rpm -y\n\n\n$ systemctl start mysqld\n\n\n$ cat /var/log/mysqld.log | grep root\n\n\ngrep default password.\n\n2021-07-26t10:50:49.538494z 1 [note] a temporary password is generated for root@localhost: **20yyk:ar67s;**\n\n\nlogin to database.\n\n$ mysql -uroot -p\nenter password: 20yyk:ar67s;\n\n\nconfig database.\n\nset global validate_password_policy=0;\nset global validate_password_length=1;\nalter user 'root'@'localhost' identified by 'venus'; # change root password \n\nuse mysql;\nupdate user set host = '%' where user = 'root';\ncreate user 'zabbix'@'%' identified  by '123456';\ngrant all privileges on zabbix.* to 'zabbix'@'%';\nflush privileges;\n\n# create tables for zabbix \ncreate database zabbix character set utf8 collate utf8_bin;\n\n\nimport zabbix template files.\n\n$ zcat /usr/share/doc/zabbix-server-mysql-5.0.14/create.sql.gz | mysql -uzabbix -p123456 zabbix\n\n\n\n# configure zabbix\n\nchange database password.\n\n$ vim /etc/zabbix/zabbix_server.conf\ndbpassword=123456\n\n\nconfigure nginx.\n\n$ vim /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf\n\n\nappend nginx at the end of line 6.\n\nlisten.acl_users = apache,nginx\n\n\nchange location to your choice at line 24.\n\nphp_value[date.timezone] = asia/shanghai\n\n\nconfigure port.\n\n$ vim /etc/opt/rh/rh-nginx116/nginx/conf.d/zabbix.conf\nserver {\n        listen          80; # uncomment this line \n        server_name     test.zabbix.com; # uncomment and change to your own ip\n\n\nchange your hosts file too if using hostname.\n\n$ vim /etc/hosts\n192.168.xx.xx test.zabbix.com\n\n\nif you are using windows.\n\n# for window hosts\nc:\\windows\\system32\\drivers\\etc\\hosts\n192.168.xxx.xxx test.zabbix.com \n\n\nstart service and configure to run on boot.\n\nsystemctl restart zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\nsystemctl enable zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\n\n\nchange zabbix agent config fie\n\n$ cat /etc/zabbix/zabbix_agentd.conf | egrep -v \"^$|^#\"\npidfile=/var/run/zabbix/zabbix_agentd.pid\nlogfile=/var/log/zabbix/zabbix_agentd.log\nlogfilesize=0\nserver=192.168.88.11  # point to ip of zabbix-server\nhostname=venus-sealer\ninclude=/etc/zabbix/zabbix_agentd.d/*.conf\n\n\n\n# configure monitoring\n\nvisit your zabbix-server with a browser.\n\nconfigure database connection information.\n\nlogin to zabbix. default user is admin with zabbix as password.\n\nadd zabbix-agent.\n\ncheck zabbix ram usage.\n\ncheck problems in dashboard.",charsets:{cjk:!0}},{title:"nv18 Upgrade Guide",frontmatter:{},regularPath:"/operation/nv18-upgrade.html",relativePath:"operation/nv18-upgrade.md",key:"v-4d2850e5",path:"/operation/nv18-upgrade.html",headers:[{level:2,title:"About nv18 upgrade",slug:"about-nv18-upgrade",normalizedTitle:"about nv18 upgrade",charIndex:445},{level:3,title:"Upgrade Timeline",slug:"upgrade-timeline",normalizedTitle:"upgrade timeline",charIndex:550},{level:3,title:"nv18 compatible versions",slug:"nv18-compatible-versions",normalizedTitle:"nv18 compatible versions",charIndex:657},{level:2,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:104},{level:2,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:245},{level:2,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:4202},{level:2,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:4497},{level:2,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:4607},{level:2,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:133},{level:2,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:4922},{level:2,title:"venus-sector-manager",slug:"venus-sector-manager",normalizedTitle:"venus-sector-manager",charIndex:5067}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"About nv18 upgrade Upgrade Timeline nv18 compatible versions venus venus-auth venus-messager venus-miner venus-gateway venus-market venus-wallet venus-sector-manager",content:'# nv18 Upgrade Guide\n\nIf you are upgrading chain service components from v1.8.x to v1.10.0, please read venus chain-service v1.9.* & venus-market v2.5.* upgrade list / 链服务 v1.9.*和订单服务 v2.5.*升级清单 first and pay special attention to the upgrade of venus-auth and venus-market. Before upgrading venus-auth, a user account needs to be created for each miner. Also startup CLI and configurations of venus-market major breaking changes made to it.\n\n\n# About nv18 upgrade\n\nWe storngly encourage you to test out the upgrade in calibration before mainnet.\n\n\n# Upgrade Timeline\n\nUpgrade UTC time: 2023-03-14T15:14:00Z, which is 2023-03-14 23:14:00 in Beijing time\n\n\n# nv18 compatible versions\n\n * calibrationnet\n * mainnet\n\n\n# venus\n\nFeature: support nv18 network\n\nDependency: None\n\nPrecautions:\n\n 1. Compile: make sure to first make dist-clean and then make. This can prevent problems caused by failing to upgrade filecoin-ffi normally\n\n 2. Check whether the vk file is complete after upgrading\n\n 3. After upgrading, check the configuration file. And see whether AllowableClockDriftSecs, UpgradeHyggeHeight and UpgradeHyggeHeight are normal in the log:\n    \n    #cali\n    AllowableClockDriftSecs: 1\n    Eip155ChainID:314159\n    UpgradeHyggeHeight: 322354\n    #mainnet\n    AllowableClockDriftSecs: 1\n    Eip155ChainID:314\n    UpgradeHyggeHeight: 2683348\n    \n\n 4. After upgrading, check the status of block synchronization\n\n 5. Check the mainnet v10 actors CID and make sure it is the same as the output below...\n    \n    ./venus state actor-cids --network-version 18\n    \n    # order may vary\n    Network Version: 18\n    Actor Version: 10\n    Actor CIDs\n    datacap bafk2bzacealj5uk7wixhvk7l5tnredtelralwnceafqq34nb2lbylhtuyo64u\n    evm bafk2bzaceahmzdxhqsm7cu2mexusjp6frm7r4kdesvti3etv5evfqboos2j4g\n    init bafk2bzaced2f5rhir3hbpqbz5ght7ohv2kgj42g5ykxrypuo2opxsup3ykwl6\n    account bafk2bzaceampw4romta75hyz5p4cqriypmpbgnkxncgxgqn6zptv5lsp2w2bo\n    ethaccount bafk2bzaceaqoc5zakbhjxn3jljc4lxnthllzunhdor7sxhwgmskvc6drqc3fa\n    multisig bafk2bzaceduf3hayh63jnl4z2knxv7cnrdenoubni22fxersc4octlwpxpmy4\n    paymentchannel bafk2bzaceartlg4mrbwgzcwric6mtvyawpbgx2xclo2vj27nna57nxynf3pgc\n    reward bafk2bzacebnhtaejfjtzymyfmbdrfmo7vgj3zsof6zlucbmkhrvcuotw5dxpq\n    storagemarket bafk2bzaceclejwjtpu2dhw3qbx6ow7b4pmhwa7ocrbbiqwp36sq5yeg6jz2bc\n    storageminer bafk2bzaced4h7noksockro7glnssz2jnmo2rpzd7dvnmfs4p24zx3h6gtx47s\n    verifiedregistry bafk2bzacedfel6edzqpe5oujno7fog4i526go4dtcs6vwrdtbpy2xq6htvcg6\n    eam bafk2bzacedrpm5gbleh4xkyo2jvs7p5g6f34soa6dpv7ashcdgy676snsum6g\n    placeholder bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    storagepower bafk2bzacec4ay4crzo73ypmh7o3fjendhbqrxake46bprabw67fvwjz5q6ixq\n    system bafk2bzacedakk5nofebyup4m7nvx6djksfwhnxzrfuq4oyemhpl4lllaikr64\n    cron bafk2bzacedcbtsifegiu432m5tysjzkxkmoczxscb6hqpmrr6img7xzdbbs2g\n    \n\n 6. When not debugging, it is not recommended is set the rust log level to trace as too much logs may be printed\n\n 7. After upgrading, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n 8. Actor Migration\n    \n    The pre-migration height is 60 epoch before the upgrade epoch of 2683288\n    Pre-migration start: STARTING pre-migration end: COMPLETED pre-migration\n    migration started: STARTING migration ended: COMPLETED migration\n    \n\n 9. Configuration changes\n    \n    # Added fevm related configuration, where the enableEthRPC field is used to control whether to enable ETH RPC, the default is false\n    "fevm": {\n        "enableEthRPC": false,\n        "ethTxHashMappingLifetimeDays": 0,\n        "event": {\n                "enableRealTimeFilterAPI": false,\n                "enableHistoricFilterAPI": false,\n                "filterTTL": "24h0m0s",\n                "maxFilters": 100,\n                "maxFilterResults": 10000,\n                "maxFilterHeightRange": 2880,\n                "databasePath": ""\n        }\n    }\n    \n    # Added allowableClockDriftSecs field, default is 1\n    "parameters": {\n        "allowableClockDriftSecs": 1\n    },\n    \n\n\n# venus-auth\n\nFeature:\n\nDependency: none\n\nPrecautions:\n\n 1. Check whether the command line can be used correctly\n\n\n# venus-messager\n\nFunction:\n\n 1. Added additional interface authentication\n\nDependency:\n\nPrecautions:\n\n 1. Observe if messages can be received normally after upgrading\n\n 2. After upgrading, observe whether the message can be on-chained properly\n\n 3. ReplacedMsg is renamed to NonceConflictMsg\n\n\n# venus-miner\n\nFeature:\n\nDependency:\n\nPrecautions:\n\n 1. Check if block be produced properly after upgrading\n\n\n# venus-gateway\n\nFeature:\n\nPrecautions:\n\n 1. Compile: first make dist-clean and then make\n\n 2. Check remote wallet after upgrading: ./venus-gateway wallet list\n\n 3. Check miners after upgrading: ./venus-gateway miner list\n\n\n# venus-market\n\nFeature:\n\nPrecautions:\n\n 1. Compile: first make dist-clean and then make\n\n\n# venus-wallet\n\nFeature:\n\nPrecautions:\n\n 1. Need to unlock the wallet after restart\n\n 2. Check if wallet is properly registered to the gateway\n\n\n# venus-sector-manager\n\nCompile: first make dist-clean and then make',normalizedContent:'# nv18 upgrade guide\n\nif you are upgrading chain service components from v1.8.x to v1.10.0, please read venus chain-service v1.9.* & venus-market v2.5.* upgrade list / 链服务 v1.9.*和订单服务 v2.5.*升级清单 first and pay special attention to the upgrade of venus-auth and venus-market. before upgrading venus-auth, a user account needs to be created for each miner. also startup cli and configurations of venus-market major breaking changes made to it.\n\n\n# about nv18 upgrade\n\nwe storngly encourage you to test out the upgrade in calibration before mainnet.\n\n\n# upgrade timeline\n\nupgrade utc time: 2023-03-14t15:14:00z, which is 2023-03-14 23:14:00 in beijing time\n\n\n# nv18 compatible versions\n\n * calibrationnet\n * mainnet\n\n\n# venus\n\nfeature: support nv18 network\n\ndependency: none\n\nprecautions:\n\n 1. compile: make sure to first make dist-clean and then make. this can prevent problems caused by failing to upgrade filecoin-ffi normally\n\n 2. check whether the vk file is complete after upgrading\n\n 3. after upgrading, check the configuration file. and see whether allowableclockdriftsecs, upgradehyggeheight and upgradehyggeheight are normal in the log:\n    \n    #cali\n    allowableclockdriftsecs: 1\n    eip155chainid:314159\n    upgradehyggeheight: 322354\n    #mainnet\n    allowableclockdriftsecs: 1\n    eip155chainid:314\n    upgradehyggeheight: 2683348\n    \n\n 4. after upgrading, check the status of block synchronization\n\n 5. check the mainnet v10 actors cid and make sure it is the same as the output below...\n    \n    ./venus state actor-cids --network-version 18\n    \n    # order may vary\n    network version: 18\n    actor version: 10\n    actor cids\n    datacap bafk2bzacealj5uk7wixhvk7l5tnredtelralwnceafqq34nb2lbylhtuyo64u\n    evm bafk2bzaceahmzdxhqsm7cu2mexusjp6frm7r4kdesvti3etv5evfqboos2j4g\n    init bafk2bzaced2f5rhir3hbpqbz5ght7ohv2kgj42g5ykxrypuo2opxsup3ykwl6\n    account bafk2bzaceampw4romta75hyz5p4cqriypmpbgnkxncgxgqn6zptv5lsp2w2bo\n    ethaccount bafk2bzaceaqoc5zakbhjxn3jljc4lxnthllzunhdor7sxhwgmskvc6drqc3fa\n    multisig bafk2bzaceduf3hayh63jnl4z2knxv7cnrdenoubni22fxersc4octlwpxpmy4\n    paymentchannel bafk2bzaceartlg4mrbwgzcwric6mtvyawpbgx2xclo2vj27nna57nxynf3pgc\n    reward bafk2bzacebnhtaejfjtzymyfmbdrfmo7vgj3zsof6zlucbmkhrvcuotw5dxpq\n    storagemarket bafk2bzaceclejwjtpu2dhw3qbx6ow7b4pmhwa7ocrbbiqwp36sq5yeg6jz2bc\n    storageminer bafk2bzaced4h7noksockro7glnssz2jnmo2rpzd7dvnmfs4p24zx3h6gtx47s\n    verifiedregistry bafk2bzacedfel6edzqpe5oujno7fog4i526go4dtcs6vwrdtbpy2xq6htvcg6\n    eam bafk2bzacedrpm5gbleh4xkyo2jvs7p5g6f34soa6dpv7ashcdgy676snsum6g\n    placeholder bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    storagepower bafk2bzacec4ay4crzo73ypmh7o3fjendhbqrxake46bprabw67fvwjz5q6ixq\n    system bafk2bzacedakk5nofebyup4m7nvx6djksfwhnxzrfuq4oyemhpl4lllaikr64\n    cron bafk2bzacedcbtsifegiu432m5tysjzkxkmoczxscb6hqpmrr6img7xzdbbs2g\n    \n\n 6. when not debugging, it is not recommended is set the rust log level to trace as too much logs may be printed\n\n 7. after upgrading, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n 8. actor migration\n    \n    the pre-migration height is 60 epoch before the upgrade epoch of 2683288\n    pre-migration start: starting pre-migration end: completed pre-migration\n    migration started: starting migration ended: completed migration\n    \n\n 9. configuration changes\n    \n    # added fevm related configuration, where the enableethrpc field is used to control whether to enable eth rpc, the default is false\n    "fevm": {\n        "enableethrpc": false,\n        "ethtxhashmappinglifetimedays": 0,\n        "event": {\n                "enablerealtimefilterapi": false,\n                "enablehistoricfilterapi": false,\n                "filterttl": "24h0m0s",\n                "maxfilters": 100,\n                "maxfilterresults": 10000,\n                "maxfilterheightrange": 2880,\n                "databasepath": ""\n        }\n    }\n    \n    # added allowableclockdriftsecs field, default is 1\n    "parameters": {\n        "allowableclockdriftsecs": 1\n    },\n    \n\n\n# venus-auth\n\nfeature:\n\ndependency: none\n\nprecautions:\n\n 1. check whether the command line can be used correctly\n\n\n# venus-messager\n\nfunction:\n\n 1. added additional interface authentication\n\ndependency:\n\nprecautions:\n\n 1. observe if messages can be received normally after upgrading\n\n 2. after upgrading, observe whether the message can be on-chained properly\n\n 3. replacedmsg is renamed to nonceconflictmsg\n\n\n# venus-miner\n\nfeature:\n\ndependency:\n\nprecautions:\n\n 1. check if block be produced properly after upgrading\n\n\n# venus-gateway\n\nfeature:\n\nprecautions:\n\n 1. compile: first make dist-clean and then make\n\n 2. check remote wallet after upgrading: ./venus-gateway wallet list\n\n 3. check miners after upgrading: ./venus-gateway miner list\n\n\n# venus-market\n\nfeature:\n\nprecautions:\n\n 1. compile: first make dist-clean and then make\n\n\n# venus-wallet\n\nfeature:\n\nprecautions:\n\n 1. need to unlock the wallet after restart\n\n 2. check if wallet is properly registered to the gateway\n\n\n# venus-sector-manager\n\ncompile: first make dist-clean and then make',charsets:{cjk:!0}},{title:"Venus nv19 Upgrade Guide",frontmatter:{},regularPath:"/operation/nv19-upgrade.html",relativePath:"operation/nv19-upgrade.md",key:"v-f3b7e93a",path:"/operation/nv19-upgrade.html",headers:[{level:2,title:"Precautions",slug:"precautions",normalizedTitle:"precautions",charIndex:31},{level:2,title:"Components that Need to be Upgraded",slug:"components-that-need-to-be-upgraded",normalizedTitle:"components that need to be upgraded",charIndex:457},{level:3,title:"Upgrade order",slug:"upgrade-order",normalizedTitle:"upgrade order",charIndex:1021},{level:3,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:546},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:546},{level:3,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:705},{level:3,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:652},{level:3,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:811},{level:3,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:864},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:758},{level:3,title:"venus-sector-manger",slug:"venus-sector-manger",normalizedTitle:"venus-sector-manger",charIndex:6441},{level:3,title:"Notes on Database Changes",slug:"notes-on-database-changes",normalizedTitle:"notes on database changes",charIndex:7013}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Precautions Components that Need to be Upgraded Upgrade order venus-auth venus venus-gateway venus-messager venus-miner venus-market venus-wallet venus-sector-manger Notes on Database Changes",content:'# Venus nv19 Upgrade Guide\n\n\n# Precautions\n\n 1. Upgrade all Venus products\n 2. After upgrading, use the curl command to call version interface to check the version number; Interfaces of each Venus component can be referred here\n 3. Check Pre/Pro messages on-chain status\n 4. Check wdPost message on-chain status\n 5. Check whether the block production is normal\n 6. Check whether the gas fee related settings are in effect in accordance to configuration\n\n\n# Components that Need to be Upgraded\n\nCOMPONENT NAME         TAG                   COMMIT\nvenus-auth             v1.11.0               0c30588\nvenus                  v1.11.0               afd3d47\nvenus-messager         v1.11.0               e4c4ab4\nvenus-gateway          v1.11.0               877a851\nvenus-wallet           v1.11.0               7afa1eb\nvenus-miner            v1.11.0               a30f342\nvenus-market           v2.7.0                61f2cb5\nvenus-sector-manager   v0.6.0-rc3            134b502\nvenus-worker           no upgrade required   -\n\n\n# Upgrade order\n\n 1. venus-auth\n 2. Venus\n 3. venus-gateway\n 4. venus-messager\n 5. venus-miner\n 6. venus-market\n 7. venus-wallet-pro\n 8. venus-sector-manager\n\n\n# venus-auth\n\nAffected function:\n\n * updated way for other components to obtain auth services\n\nDependency upgrade components: None\n\nPrecautions:\n\n * Use "--disable-perm-check" at startup to temporarily disable the feature of auth interface protection\n * Before creating a token, you need to create the corresponding user\n\nNote:\n\n * The new version of auth will automatically generate a token named "defaultLocalToken" when it starts, which is used for authentication when auth-cli executes commands\n\n\n# venus\n\nAffected function: none\n\nDependency upgrade component: venus-auth\n\nPrecautions:\n\nCompilation: first make dist-clean and then make, this can prevent problems caused by failing to upgrade filecoin-ffi normally\n\nShould use --auth-token flag when starting, or modify configuration file api.venusAuthToken configuration item\n\n 1. Check whether the vk file is complete after upgrading\n\n 2. Check the configuration file after the upgrade; check whether UpgradeLightningHeight and UpgradeThunderHeight are normal through the log:\n    \n    #cali\n    UpgradeLightningHeight: 489094\n    UpgradeThunderHeight:489094+3120\n    #mainnet\n    UpgradeLightningHeight: 2809800\n    UpgradeThunderHeight: 2809800 + 2880*21 = 2870280\n    \n\n 3. After the upgrade, check whether the chain is synchronized normally\n\n 4. Check the mainnet v11 actors code to make sure it is the same as the output below\n\n./venus state actor-cids --network-version 19\n\n# order may vary\nNetwork Version: 19\nActor Version: 11\nActor CIDs\nreward bafk2bzacebwjw2vxkobs7r2kwjdqqb42h2kucyuk6flbnyzw4odg5s4mogamo\nsystem bafk2bzaced7npe5mt5nh72jxr2igi2sofoa7gedt4w6kueeke7i3xxugqpjfm\neam bafk2bzaceaelwt4yfsfvsu3pa3miwalsvy3cfkcjvmt4sqoeopsppnrmj2mf2\ncron bafk2bzacebpewdvvgt6tk2o2u4rcovdgym67tadiis5usemlbejg7k3kt567o\ndatacap bafk2bzacebslykoyrb2hm7aacjngqgd5n2wmeii2goadrs5zaya3pvdf6pdnq\nethaccount bafk2bzaceclkmc4yidxc6lgcjpfypbde2eddnevcveo4j5kmh4ek6inqysz2k\nevm bafk2bzacediwh6etwzwmb5pivtclpdplewdjzphouwqpppce6opisjv2fjqfe\ninit bafk2bzaceckwf3w6n2nw6eh77ktmsxqgsvshonvgnyk5q5syyngtetxvasfxg\nmultisig bafk2bzaceafajceqwg5ybiz7xw6rxammuirkgtuv625gzaehsqfprm4bazjmk\npaymentchannel bafk2bzaceb4e6cnsnviegmqvsmoxzncruvhra54piq7bwiqfqevle6oob2gvo\naccount bafk2bzacealnlr7st6lkwoh6wxpf2hnrlex5sknaopgmkr2tuhg7vmbfy45so\nstorageminer bafk2bzacec24okjqrp7c7rj3hbrs5ez5apvwah2ruka6haesgfngf37mhk6us\nstoragepower bafk2bzaceaxgloxuzg35vu7l7tohdgaq2frsfp4ejmuo7tkoxjp5zqrze6sf4\nplaceholder bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\nverified registry bafk2bzacedej3dnr62g2je2abmyjg3xqv4otvh6e26du5fcrhvw7zgcaaez3a\nstoragemarket bafk2bzaceazu2j2zu4p24tr22btnqzkhzjvyjltlvsagaj6w3syevikeb5d7m\n\n\n 5. If not troubleshooting, the rust log level not recommended is set to trace, because more logs will be printed\n\n 6. After the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n 7. Actor Migration\n\nThrough testing, the pre-migration time is about 80 seconds, and the mainnet migration time should be about 60 seconds\n\n ```\n # The pre-migration height is 120 heights before the upgrade height: 2809800 - 120 = 2809680\n Pre-migration start: STARTING pre-migration end: COMPLETED pre-migration\n migration start: STARTING migration end: COMPLETED migration\n ```\n\n\n\n# venus-gateway\n\nAffected function: none\n\nDependency upgrade component: venus-auth\n\nPrecautions:\n\n * When compiling, you need to make dist-clean first and then make\n * When starting, you should use the --auth-token flag, or set the configuration item directly in the configuration: AuthConfig.Token\n * Remove flag: --disable-address-verify, Check if the startup command is still using this flag when upgrading\n\n\n# venus-messager\n\nAffected function:\n\n * message replace\n * list --block command\n\nDependency upgrade components: venus, venus-auth, venus-gateway\n\nPrecautions:\n\n * When starts for the first time during the upgrade, use the auth-token falg, or modify the configuration file JWTConfig.Token configuration item first\n * After the upgrade, it is necessary to observe whether the message can be received normally and whether the message can be sent to the chain normally\n\nNote:\n\n * The minimum value of the replace fee coefficient has been reduced from 1.25 to 1.11\n * When listing blocked messages, unfill status messages will now also be listed as blocked messages\n\n\n# venus-miner\n\nAffected function:\n\n * Added timeout mechanism for selecting message\n\nDependency upgrade component: auth, venus, gateway\n\nPrecautions:\n\n * [Auth].[Token] must be configured in the configuration file, and has admin permission in venus-auth, do not use the token from defaultLocalToken, you need to manually create one.\n\n\n# venus-market\n\nAffected function:\n\n * Added and adjusted some commands\n\nDependency upgrade components: auth, venus, gateway, messager\n\nPrecautions:\n\n * You must use cs-token when starting, or modify the configuration item AuthNode.Token\n\n\n# venus-wallet\n\nAffected function: none\n\nDependency upgrade component: gateway\n\nPrecautions:\n\n * After the upgrade, observe whether the signature is normal and whether the message can be sent to the chain normally\n * wallet new, import, and export commands have been removed. The purpose of deletion is to avoid misuse.\n\n\n# venus-sector-manger\n\nAffected features: fip-0061 wdpost algorithm changes\n\nDependency upgrade component: Chain Service component\n\nPrecautions:\n\n * When compiling, you need to make dist-clean first and then make\n\n----------------------------------------\n\nUpgrade verification:\n\n 1. The program starts normally\n 2. Pre/Pro messages are on-chained normally\n 3. Block generation is normal\n 4. WdPost on-chain is normal\n 5. Storage power is increasing normally\n 6. Verified deal retrieval is normal\n 7. Various gas, life cycle, database and aggregation settings are normal\n\n\n# Notes on Database Changes\n\n 1. venus-messager added actor configuration and related commands, and adds actor_cfg table\n\n 2. Added index to venus-market storage_deals table: CREATE INDEX idx_cdpprovider_state ON storage_deals(cdp_provider,state)',normalizedContent:'# venus nv19 upgrade guide\n\n\n# precautions\n\n 1. upgrade all venus products\n 2. after upgrading, use the curl command to call version interface to check the version number; interfaces of each venus component can be referred here\n 3. check pre/pro messages on-chain status\n 4. check wdpost message on-chain status\n 5. check whether the block production is normal\n 6. check whether the gas fee related settings are in effect in accordance to configuration\n\n\n# components that need to be upgraded\n\ncomponent name         tag                   commit\nvenus-auth             v1.11.0               0c30588\nvenus                  v1.11.0               afd3d47\nvenus-messager         v1.11.0               e4c4ab4\nvenus-gateway          v1.11.0               877a851\nvenus-wallet           v1.11.0               7afa1eb\nvenus-miner            v1.11.0               a30f342\nvenus-market           v2.7.0                61f2cb5\nvenus-sector-manager   v0.6.0-rc3            134b502\nvenus-worker           no upgrade required   -\n\n\n# upgrade order\n\n 1. venus-auth\n 2. venus\n 3. venus-gateway\n 4. venus-messager\n 5. venus-miner\n 6. venus-market\n 7. venus-wallet-pro\n 8. venus-sector-manager\n\n\n# venus-auth\n\naffected function:\n\n * updated way for other components to obtain auth services\n\ndependency upgrade components: none\n\nprecautions:\n\n * use "--disable-perm-check" at startup to temporarily disable the feature of auth interface protection\n * before creating a token, you need to create the corresponding user\n\nnote:\n\n * the new version of auth will automatically generate a token named "defaultlocaltoken" when it starts, which is used for authentication when auth-cli executes commands\n\n\n# venus\n\naffected function: none\n\ndependency upgrade component: venus-auth\n\nprecautions:\n\ncompilation: first make dist-clean and then make, this can prevent problems caused by failing to upgrade filecoin-ffi normally\n\nshould use --auth-token flag when starting, or modify configuration file api.venusauthtoken configuration item\n\n 1. check whether the vk file is complete after upgrading\n\n 2. check the configuration file after the upgrade; check whether upgradelightningheight and upgradethunderheight are normal through the log:\n    \n    #cali\n    upgradelightningheight: 489094\n    upgradethunderheight:489094+3120\n    #mainnet\n    upgradelightningheight: 2809800\n    upgradethunderheight: 2809800 + 2880*21 = 2870280\n    \n\n 3. after the upgrade, check whether the chain is synchronized normally\n\n 4. check the mainnet v11 actors code to make sure it is the same as the output below\n\n./venus state actor-cids --network-version 19\n\n# order may vary\nnetwork version: 19\nactor version: 11\nactor cids\nreward bafk2bzacebwjw2vxkobs7r2kwjdqqb42h2kucyuk6flbnyzw4odg5s4mogamo\nsystem bafk2bzaced7npe5mt5nh72jxr2igi2sofoa7gedt4w6kueeke7i3xxugqpjfm\neam bafk2bzaceaelwt4yfsfvsu3pa3miwalsvy3cfkcjvmt4sqoeopsppnrmj2mf2\ncron bafk2bzacebpewdvvgt6tk2o2u4rcovdgym67tadiis5usemlbejg7k3kt567o\ndatacap bafk2bzacebslykoyrb2hm7aacjngqgd5n2wmeii2goadrs5zaya3pvdf6pdnq\nethaccount bafk2bzaceclkmc4yidxc6lgcjpfypbde2eddnevcveo4j5kmh4ek6inqysz2k\nevm bafk2bzacediwh6etwzwmb5pivtclpdplewdjzphouwqpppce6opisjv2fjqfe\ninit bafk2bzaceckwf3w6n2nw6eh77ktmsxqgsvshonvgnyk5q5syyngtetxvasfxg\nmultisig bafk2bzaceafajceqwg5ybiz7xw6rxammuirkgtuv625gzaehsqfprm4bazjmk\npaymentchannel bafk2bzaceb4e6cnsnviegmqvsmoxzncruvhra54piq7bwiqfqevle6oob2gvo\naccount bafk2bzacealnlr7st6lkwoh6wxpf2hnrlex5sknaopgmkr2tuhg7vmbfy45so\nstorageminer bafk2bzacec24okjqrp7c7rj3hbrs5ez5apvwah2ruka6haesgfngf37mhk6us\nstoragepower bafk2bzaceaxgloxuzg35vu7l7tohdgaq2frsfp4ejmuo7tkoxjp5zqrze6sf4\nplaceholder bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\nverified registry bafk2bzacedej3dnr62g2je2abmyjg3xqv4otvh6e26du5fcrhvw7zgcaaez3a\nstoragemarket bafk2bzaceazu2j2zu4p24tr22btnqzkhzjvyjltlvsagaj6w3syevikeb5d7m\n\n\n 5. if not troubleshooting, the rust log level not recommended is set to trace, because more logs will be printed\n\n 6. after the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful\n\n 7. actor migration\n\nthrough testing, the pre-migration time is about 80 seconds, and the mainnet migration time should be about 60 seconds\n\n ```\n # the pre-migration height is 120 heights before the upgrade height: 2809800 - 120 = 2809680\n pre-migration start: starting pre-migration end: completed pre-migration\n migration start: starting migration end: completed migration\n ```\n\n\n\n# venus-gateway\n\naffected function: none\n\ndependency upgrade component: venus-auth\n\nprecautions:\n\n * when compiling, you need to make dist-clean first and then make\n * when starting, you should use the --auth-token flag, or set the configuration item directly in the configuration: authconfig.token\n * remove flag: --disable-address-verify, check if the startup command is still using this flag when upgrading\n\n\n# venus-messager\n\naffected function:\n\n * message replace\n * list --block command\n\ndependency upgrade components: venus, venus-auth, venus-gateway\n\nprecautions:\n\n * when starts for the first time during the upgrade, use the auth-token falg, or modify the configuration file jwtconfig.token configuration item first\n * after the upgrade, it is necessary to observe whether the message can be received normally and whether the message can be sent to the chain normally\n\nnote:\n\n * the minimum value of the replace fee coefficient has been reduced from 1.25 to 1.11\n * when listing blocked messages, unfill status messages will now also be listed as blocked messages\n\n\n# venus-miner\n\naffected function:\n\n * added timeout mechanism for selecting message\n\ndependency upgrade component: auth, venus, gateway\n\nprecautions:\n\n * [auth].[token] must be configured in the configuration file, and has admin permission in venus-auth, do not use the token from defaultlocaltoken, you need to manually create one.\n\n\n# venus-market\n\naffected function:\n\n * added and adjusted some commands\n\ndependency upgrade components: auth, venus, gateway, messager\n\nprecautions:\n\n * you must use cs-token when starting, or modify the configuration item authnode.token\n\n\n# venus-wallet\n\naffected function: none\n\ndependency upgrade component: gateway\n\nprecautions:\n\n * after the upgrade, observe whether the signature is normal and whether the message can be sent to the chain normally\n * wallet new, import, and export commands have been removed. the purpose of deletion is to avoid misuse.\n\n\n# venus-sector-manger\n\naffected features: fip-0061 wdpost algorithm changes\n\ndependency upgrade component: chain service component\n\nprecautions:\n\n * when compiling, you need to make dist-clean first and then make\n\n----------------------------------------\n\nupgrade verification:\n\n 1. the program starts normally\n 2. pre/pro messages are on-chained normally\n 3. block generation is normal\n 4. wdpost on-chain is normal\n 5. storage power is increasing normally\n 6. verified deal retrieval is normal\n 7. various gas, life cycle, database and aggregation settings are normal\n\n\n# notes on database changes\n\n 1. venus-messager added actor configuration and related commands, and adds actor_cfg table\n\n 2. added index to venus-market storage_deals table: create index idx_cdpprovider_state on storage_deals(cdp_provider,state)',charsets:{}},{title:"Venus nv21 Upgrade Guide",frontmatter:{},regularPath:"/operation/nv21-upgrade.html",relativePath:"operation/nv21-upgrade.md",key:"v-b67c6696",path:"/operation/nv21-upgrade.html",headers:[{level:2,title:"Precautions",slug:"precautions",normalizedTitle:"precautions",charIndex:31},{level:2,title:"Products Upgrade Guide",slug:"products-upgrade-guide",normalizedTitle:"products upgrade guide",charIndex:456},{level:3,title:"Recommended Upgrade Sequence",slug:"recommended-upgrade-sequence",normalizedTitle:"recommended upgrade sequence",charIndex:853},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:516},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:553},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:4628},{level:3,title:"sophon-messager",slug:"sophon-messager",normalizedTitle:"sophon-messager",charIndex:590},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:701},{level:3,title:"Droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:5371},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:664},{level:3,title:"damocles-manager",slug:"damocles-manager",normalizedTitle:"damocles-manager",charIndex:775},{level:3,title:"damocles-worker",slug:"damocles-worker",normalizedTitle:"damocles-worker",charIndex:812},{level:3,title:"Database changes",slug:"database-changes",normalizedTitle:"database changes",charIndex:7071}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Precautions Products Upgrade Guide Recommended Upgrade Sequence sophon-auth venus sophon-gateway sophon-messager sophon-miner Droplet venus-wallet damocles-manager damocles-worker Database changes",content:"# Venus nv21 Upgrade Guide\n\n\n# Precautions\n\n 1. Be sure to upgrade all Venus products\n 2. After upgrading, please use the curl command to call the Version API to check the version number. Details of each Venus products' version interface can be found here.\n 3. Monitor proper on-chain of pre and prove messages\n 4. Monitor proper on-chain of window post messages\n 5. Monitor block producing\n 6. Check whether the gas fee related settings are in effect\n\n\n# Products Upgrade Guide\n\nPRODUCT            TAG       COMMIT\nsophon-auth        v1.14.0   7caadbc\nvenus              v1.14.2   9204048\nsophon-messager    v1.14.0   e5f8371\nsoohon-gateway     v1.14.0   1adf038\nvenus-wallet       v1.14.0   b478cd0\nsophon-miner       v1.14.0   9ca976c\ndroplet            v2.10.0   6daf168\ndamocles-manager   v0.9.2    f3c5400\ndamocles-worker    v0.9.2    f3c5400\n\n\n# Recommended Upgrade Sequence\n\n 1. sophon-auth\n 2. venus\n 3. soohon-gateway\n 4. sophon-messager\n 5. sophon-miner\n 6. droplet\n 7. venus-wallet\n 8. damocles-manager 9.damocles-worker\n\n\n# sophon-auth\n\nAffected functions:\n\n * Affecting how other Venus products are authorized to use the sophon service\n\nDependency:\n\n * None\n\nPrecautions:\n\n * Check if authentication is normal after startup\n\n\n# venus\n\nAffected functions:\n\n * None\n\nDependency:\n\n * sophon-auth\n\nPrecautions:\n\nTIP\n\nCompile: First make dist-clean and then make, this can prevent problems caused by failure to upgrade filecoin-ffi properly\n\nIf ~/.venus exists and you need to import a snapshot, you need to delete the ~/.venus/version file first before importing the snapshot\n\nThe memory consumption of migration depends on the CPUs used. You can set the limit of CPU by environment variable (`VENUS_MIGRATION_MAX_WORKER_COUNT=n`), to avoid use out of memory.\nRecommended value of `VENUS_MIGRATION_MAX_WORKER_COUNT`:\n\n48G VENUS_MIGRATION_MAX_WORKER_COUNT=13\n64G VENUS_MIGRATION_MAX_WORKER_COUNT=18\n96G VENUS_MIGRATION_MAX_WORKER_COUNT=24\n\nThe migration of update \n\n\n 1. Check whether the vk file is complete after upgrading\n\n 2. After the upgrade, execute the command ./venus state network-info, and then check whether the UpgradeWatermelonHeight is normal through the log:\n    \n    #cali\n    UpgradeWatermelonHeight: 1013134\n    #mainnet\n    UpgradeWatermelonHeight: 3469380\n    \n\n 3. After the upgrade, you need to check whether the block height is synchronized normally.\n\n 4. Check the mainnet v12 actors code and make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 21\n    \n    # Ordering may be different\n    Network Version: 21\n    Actor Version: 12\n    Actor             CID\n    datacap           bafk2bzacebpiwb2ml4qbnnaayxumtk43ryhc63exdgnhivy3hwgmzemawsmpq\n    ethaccount        bafk2bzaceb4gkau2vgsijcxpfuq33bd7w3efr2rrhxrwiacjmns2ntdiamswq\n    reward            bafk2bzacealqnxn5lwzwexd6reav4dppypquklx2ujlnvaxiqk2tzstyvkp5u\n    verifiedregistry  bafk2bzacedudgflxc75c77c6zkmfyq4u2xuk7k6xw6dfdccarjrvxx453b77q\n    eam               bafk2bzaceb3elj4hfbbjp7g5bptc7su7mptszl4nlqfedilxvstjo5ungm6oe\n    multisig          bafk2bzacecw5lyp3n3t67xdwrmo36h4z7afc3lobmmr6wg55w6yjzg5jhmh42\n    storagemarket     bafk2bzacedylkg5am446lcuih4voyzdn4yjeqfsxfzh5b6mcuhx4mok5ph5c4\n    system            bafk2bzacebfqrja2hip7esf4eafxjmu6xcogoqu5xxtgdg7xa5szgvvdguchu\n    account           bafk2bzaceboftg75mdiba7xbo2i3uvgtca4brhnr3u5ptihonixgpnrvhpxoa\n    cron              bafk2bzacechxjkfe2cehx4s7skj3wzfpzf7zolds64khrrrs66bhazsemktls\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    storagepower      bafk2bzacecsij5tpfzjpfuckxvccv2p3bdqjklkrfyyoei6lx5dyj5j4fvjm6\n    evm               bafk2bzacecmnyfiwb52tkbwmm2dsd7ysi3nvuxl3lmspy7pl26wxj4zj7w4wi\n    init              bafk2bzacebllyegx5r6lggf6ymyetbp7amacwpuxakhtjvjtvoy2bfkzk3vms\n    paymentchannel    bafk2bzacectv4cm47bnhga5febf3lo3fq47g72kmmp2xd5s6tcxz7hiqdywa4\n    storageminer      bafk2bzacedo75pabe4i2l3hvhtsjmijrcytd2y76xwe573uku25fi7sugqld6\n    \n\n 5. If there is no problem troubleshoot, it is not recommended to set the rust log level to trace because more logs will be printed.\n\n 6. After the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful.\n\n 7. actor migration\n\nTIP\n\nAfter testing, the pre-migration time is about 20 to 30 minutes, and the actual migration time is about 70 seconds\n\n ```\n The pre-migration height is the 120 heights before the upgrade height:\n pre-migration start: STARTING pre-migration end: COMPLETED pre-migration\n migration starts: STARTING migration ends: COMPLETED migration\n ```\n\n\n\n# sophon-gateway\n\nFunctions affected:\n\n * None\n\nDependency:\n\n * sophon-auth\n\nPrecautions:\n\n * When compiling, you need to first make dist-clean and then make\n\n\n# sophon-messager\n\nAffected functions:\n\n * None\n\nDependency:\n\n * venus\n * sophon-auth\n * sophon-gateway\n\nPrecautions:\n\n * After the upgrade, monitor whether the messages can be received normally and whether the messages can be on-chained normally.\n\n\n# sophon-miner\n\nAffect functions:\n\nDependency:\n\n * auth\n * venus\n * gateway\n\nPrecautions:\n\n * [Auth].[Token] in the configuration file must be configured, and the token must be created with admin permission from sophon-auth. It is recommended that one does not use the token from defaultLocalToken, one should create one manually.\n\n\n# Droplet\n\nAffected functions:\n\n * Support v2 version of storage deal protocol\n * Support offline computation of commP\n\nDependency:\n\n * auth\n * venus\n * gateway\n * messager\n\nPrecautions:\n\n * Monitor deals and retrievals\n\n\n# venus-wallet\n\nAffected functions:\n\n * None\n\nDependency:\n\n * gateway\n\nPrecautions:\n\n * After the upgrade, monitor whether the signature is normal and whether the message can be on-chained normally.\n\n\n# damocles-manager\n\nDependency:\n\n * Sophon service\n\nPrecautions:\n\n * When compiling, you need to first make dist-clean and then make\n\n\n# damocles-worker\n\nDependency:\n\n * damocles-manager\n\nPrecautions: Translation:\n\n * It is recommended to perform program updates after all tasks have been done and there are no ongoing tasks. If an update is required during the task on going, the sealing thread may get stuck in the 'SyntheticPoRepNeeded' state. In such cases, resetting the task status to 'PCSubmitted' can resolve the issue. You can use the following command: damocles-manager util worker resume <worker name> <thread index> PCSubmitted.\n * The new proof type SyntheticPoRep uses a new proof parameter file. If SyntheticPoRep is enabled, it is best to prepare new proof parameters in advance. Failing to do so may cause SyntheticPoRep deadlock.\n\n----------------------------------------\n\nUpgrade result verification steps:\n\n 1. Check if program starts normally\n 2. Check if Pre & prove messages are on-chained normally\n 3. Check if block producing is normal\n 4. Check if window post is normal\n 5. Check if storage power grows normally\n 6. Check if storage deal retrieval is normal\n 7. Check if various gas, life cycle, and aggregation settings of the database are normal.\n\n\n# Database changes\n\n 1. Add id field to droplet storage_deals table ==> ALTER TABLE storage_deals ADD id varchar(128)",normalizedContent:"# venus nv21 upgrade guide\n\n\n# precautions\n\n 1. be sure to upgrade all venus products\n 2. after upgrading, please use the curl command to call the version api to check the version number. details of each venus products' version interface can be found here.\n 3. monitor proper on-chain of pre and prove messages\n 4. monitor proper on-chain of window post messages\n 5. monitor block producing\n 6. check whether the gas fee related settings are in effect\n\n\n# products upgrade guide\n\nproduct            tag       commit\nsophon-auth        v1.14.0   7caadbc\nvenus              v1.14.2   9204048\nsophon-messager    v1.14.0   e5f8371\nsoohon-gateway     v1.14.0   1adf038\nvenus-wallet       v1.14.0   b478cd0\nsophon-miner       v1.14.0   9ca976c\ndroplet            v2.10.0   6daf168\ndamocles-manager   v0.9.2    f3c5400\ndamocles-worker    v0.9.2    f3c5400\n\n\n# recommended upgrade sequence\n\n 1. sophon-auth\n 2. venus\n 3. soohon-gateway\n 4. sophon-messager\n 5. sophon-miner\n 6. droplet\n 7. venus-wallet\n 8. damocles-manager 9.damocles-worker\n\n\n# sophon-auth\n\naffected functions:\n\n * affecting how other venus products are authorized to use the sophon service\n\ndependency:\n\n * none\n\nprecautions:\n\n * check if authentication is normal after startup\n\n\n# venus\n\naffected functions:\n\n * none\n\ndependency:\n\n * sophon-auth\n\nprecautions:\n\ntip\n\ncompile: first make dist-clean and then make, this can prevent problems caused by failure to upgrade filecoin-ffi properly\n\nif ~/.venus exists and you need to import a snapshot, you need to delete the ~/.venus/version file first before importing the snapshot\n\nthe memory consumption of migration depends on the cpus used. you can set the limit of cpu by environment variable (`venus_migration_max_worker_count=n`), to avoid use out of memory.\nrecommended value of `venus_migration_max_worker_count`:\n\n48g venus_migration_max_worker_count=13\n64g venus_migration_max_worker_count=18\n96g venus_migration_max_worker_count=24\n\nthe migration of update \n\n\n 1. check whether the vk file is complete after upgrading\n\n 2. after the upgrade, execute the command ./venus state network-info, and then check whether the upgradewatermelonheight is normal through the log:\n    \n    #cali\n    upgradewatermelonheight: 1013134\n    #mainnet\n    upgradewatermelonheight: 3469380\n    \n\n 3. after the upgrade, you need to check whether the block height is synchronized normally.\n\n 4. check the mainnet v12 actors code and make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 21\n    \n    # ordering may be different\n    network version: 21\n    actor version: 12\n    actor             cid\n    datacap           bafk2bzacebpiwb2ml4qbnnaayxumtk43ryhc63exdgnhivy3hwgmzemawsmpq\n    ethaccount        bafk2bzaceb4gkau2vgsijcxpfuq33bd7w3efr2rrhxrwiacjmns2ntdiamswq\n    reward            bafk2bzacealqnxn5lwzwexd6reav4dppypquklx2ujlnvaxiqk2tzstyvkp5u\n    verifiedregistry  bafk2bzacedudgflxc75c77c6zkmfyq4u2xuk7k6xw6dfdccarjrvxx453b77q\n    eam               bafk2bzaceb3elj4hfbbjp7g5bptc7su7mptszl4nlqfedilxvstjo5ungm6oe\n    multisig          bafk2bzacecw5lyp3n3t67xdwrmo36h4z7afc3lobmmr6wg55w6yjzg5jhmh42\n    storagemarket     bafk2bzacedylkg5am446lcuih4voyzdn4yjeqfsxfzh5b6mcuhx4mok5ph5c4\n    system            bafk2bzacebfqrja2hip7esf4eafxjmu6xcogoqu5xxtgdg7xa5szgvvdguchu\n    account           bafk2bzaceboftg75mdiba7xbo2i3uvgtca4brhnr3u5ptihonixgpnrvhpxoa\n    cron              bafk2bzacechxjkfe2cehx4s7skj3wzfpzf7zolds64khrrrs66bhazsemktls\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    storagepower      bafk2bzacecsij5tpfzjpfuckxvccv2p3bdqjklkrfyyoei6lx5dyj5j4fvjm6\n    evm               bafk2bzacecmnyfiwb52tkbwmm2dsd7ysi3nvuxl3lmspy7pl26wxj4zj7w4wi\n    init              bafk2bzacebllyegx5r6lggf6ymyetbp7amacwpuxakhtjvjtvoy2bfkzk3vms\n    paymentchannel    bafk2bzacectv4cm47bnhga5febf3lo3fq47g72kmmp2xd5s6tcxz7hiqdywa4\n    storageminer      bafk2bzacedo75pabe4i2l3hvhtsjmijrcytd2y76xwe573uku25fi7sugqld6\n    \n\n 5. if there is no problem troubleshoot, it is not recommended to set the rust log level to trace because more logs will be printed.\n\n 6. after the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful.\n\n 7. actor migration\n\ntip\n\nafter testing, the pre-migration time is about 20 to 30 minutes, and the actual migration time is about 70 seconds\n\n ```\n the pre-migration height is the 120 heights before the upgrade height:\n pre-migration start: starting pre-migration end: completed pre-migration\n migration starts: starting migration ends: completed migration\n ```\n\n\n\n# sophon-gateway\n\nfunctions affected:\n\n * none\n\ndependency:\n\n * sophon-auth\n\nprecautions:\n\n * when compiling, you need to first make dist-clean and then make\n\n\n# sophon-messager\n\naffected functions:\n\n * none\n\ndependency:\n\n * venus\n * sophon-auth\n * sophon-gateway\n\nprecautions:\n\n * after the upgrade, monitor whether the messages can be received normally and whether the messages can be on-chained normally.\n\n\n# sophon-miner\n\naffect functions:\n\ndependency:\n\n * auth\n * venus\n * gateway\n\nprecautions:\n\n * [auth].[token] in the configuration file must be configured, and the token must be created with admin permission from sophon-auth. it is recommended that one does not use the token from defaultlocaltoken, one should create one manually.\n\n\n# droplet\n\naffected functions:\n\n * support v2 version of storage deal protocol\n * support offline computation of commp\n\ndependency:\n\n * auth\n * venus\n * gateway\n * messager\n\nprecautions:\n\n * monitor deals and retrievals\n\n\n# venus-wallet\n\naffected functions:\n\n * none\n\ndependency:\n\n * gateway\n\nprecautions:\n\n * after the upgrade, monitor whether the signature is normal and whether the message can be on-chained normally.\n\n\n# damocles-manager\n\ndependency:\n\n * sophon service\n\nprecautions:\n\n * when compiling, you need to first make dist-clean and then make\n\n\n# damocles-worker\n\ndependency:\n\n * damocles-manager\n\nprecautions: translation:\n\n * it is recommended to perform program updates after all tasks have been done and there are no ongoing tasks. if an update is required during the task on going, the sealing thread may get stuck in the 'syntheticporepneeded' state. in such cases, resetting the task status to 'pcsubmitted' can resolve the issue. you can use the following command: damocles-manager util worker resume <worker name> <thread index> pcsubmitted.\n * the new proof type syntheticporep uses a new proof parameter file. if syntheticporep is enabled, it is best to prepare new proof parameters in advance. failing to do so may cause syntheticporep deadlock.\n\n----------------------------------------\n\nupgrade result verification steps:\n\n 1. check if program starts normally\n 2. check if pre & prove messages are on-chained normally\n 3. check if block producing is normal\n 4. check if window post is normal\n 5. check if storage power grows normally\n 6. check if storage deal retrieval is normal\n 7. check if various gas, life cycle, and aggregation settings of the database are normal.\n\n\n# database changes\n\n 1. add id field to droplet storage_deals table ==> alter table storage_deals add id varchar(128)",charsets:{}},{title:"Venus Stack nv23 Upgrade Guide",frontmatter:{},regularPath:"/operation/nv23-upgrade.html",relativePath:"operation/nv23-upgrade.md",key:"v-16b941b1",path:"/operation/nv23-upgrade.html",headers:[{level:2,title:"Precautions",slug:"precautions",normalizedTitle:"precautions",charIndex:37},{level:2,title:"Products / Components to be Upgraded",slug:"products-components-to-be-upgraded",normalizedTitle:"products / components to be upgraded",charIndex:654},{level:3,title:"Upgrade Sequence",slug:"upgrade-sequence",normalizedTitle:"upgrade sequence",charIndex:1102},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:728},{level:3,title:"Venus",slug:"venus",normalizedTitle:"venus",charIndex:2},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:4706},{level:3,title:"sophon-messager",slug:"sophon-messager",normalizedTitle:"sophon-messager",charIndex:839},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:950},{level:3,title:"droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:987},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:913},{level:3,title:"damocles-manager",slug:"damocles-manager",normalizedTitle:"damocles-manager",charIndex:1024},{level:3,title:"damocles-worker",slug:"damocles-worker",normalizedTitle:"damocles-worker",charIndex:1061},{level:3,title:"Database changes",slug:"database-changes",normalizedTitle:"database changes",charIndex:6284}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Precautions Products / Components to be Upgraded Upgrade Sequence sophon-auth Venus sophon-gateway sophon-messager sophon-miner droplet venus-wallet damocles-manager damocles-worker Database changes",content:"# Venus Stack nv23 Upgrade Guide\n\n\n# Precautions\n\n 1. Upgrade all Venus products / components\n 2. Use the curl command to call the Version interface to check the version number after upgrading. Refer to the guide here for details.\n 3. Check if pre/pro messages are on-chained\n 4. Check if windowPost messages are on-chained\n 5. Check if block producing is working correctly\n 6. Check if the gas fee related settings are in effect\n\n# It is recommended not to perform sealing tasks before upgrading. If p2 messages are on-chain but c2 messages are not on-chain before upgrading, an error will be reported when c2 messages are on-chain after upgrading.\n\n\n# Products / Components to be Upgraded\n\nCOMPONENT NAME     TAG       COMMIT\nsophon-auth        v1.16.0   e2340d5\nvenus              v1.16.0   3fdb199\nsophon-co          v0.9.0    0f344ed\nsophon-messager    v1.16.0   f695806\nsoohon-gateway     v1.16.0   2d32b8e\nvenus-wallet       v1.16.0   48b1e02\nsophon-miner       v1.16.0   500c186\ndroplet            v2.12.0   deec963\ndamocles-manager   v0.11.0   7d06bd4\ndamocles-worker    v0.11.0   7d06bd4\n\n\n# Upgrade Sequence\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\nAffected functions:\n\n * Aquiring auth services from other components\n\nUpgrade Dependency:\n\n * None\n\nPrecautions:\n\n * Check if authentication working normally after startup.\n\n\n# Venus\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * sophon-auth\n\nPrecautions:\n\nCompile: First make dist-clean and then make, this can prevent problems caused by failure to upgrade filecoin-ffi properly.\n\n 1. Check if the vk file is complete after upgrading\n\n 2. After the upgrade, execute the command ./venus state network-info, and then check whether the UpgradeWaffleHeight is normal through the log:\n    \n    #cali\n    UpgradeWaffleHeight: 1779094\n    #mainnet\n    UpgradeWaffleHeight: 4154640\n    \n\n 3. After the upgrade, you need to check if the blocks are synchronized normally.\n\n 4. Check the mainnet v14 actors code and make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 23\n    \n    # The order may be different\n    Network Version: 23\n    Actor Version: 14\n    Manifest CID: bafy2bzacecbueuzsropvqawsri27owo7isa5gp2qtluhrfsto2qg7wpgxnkba\n    Actor             CID\n    account           bafk2bzacebr7ik7lng7vysm754mu5x7sakphwm4soqi6zwbox4ukpd6ndwvqy\n    cron              bafk2bzacecwn6eiwa7ysimmk6i57i5whj4cqzwijx3xdlxwb5canmweaez6xc\n    datacap           bafk2bzacecidw7ajvtjhmygqs2yxhmuybyvtwp25dxpblvdxxo7u4gqfzirjg\n    eam               bafk2bzaced2cxnfwngpcubg63h7zk4y5hjwwuhfjxrh43xozax2u6u2woweju\n    ethaccount        bafk2bzacechu4u7asol5mpcsr6fo6jeaeltvayj5bllupyiux7tcynsxby7ko\n    evm               bafk2bzacedupohbgwrcw5ztbbsvrpqyybnokr4ylegmk7hrbt3ueeykua6zxw\n    init              bafk2bzacecbbcshenkb6z2v4irsudv7tyklfgphhizhghix6ke5gpl4r5f2b6\n    multisig          bafk2bzaceajcmsngu3f2chk2y7nanlen5xlftzatytzm6hxwiiw5i5nz36bfc\n    paymentchannel    bafk2bzaceavslp27u3f4zwjq45rlg6assj6cqod7r5f6wfwkptlpi6j4qkmne\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    reward            bafk2bzacedvfnjittwrkhoar6n5xrykowg2e6rpur4poh2m572f7m7evyx4lc\n    storagemarket     bafk2bzaceaju5wobednmornvdqcyi6khkvdttkru4dqduqicrdmohlwfddwhg\n    storageminer      bafk2bzacea3f43rxzemmakjpktq2ukayngean3oo2de5cdxlg2wsyn53wmepc\n    storagepower      bafk2bzacedo6scxizooytn53wjwg2ooiawnj4fsoylcadnp7mhgzluuckjl42\n    system            bafk2bzacecak4ow7tmauku42s3u2yydonk4hx6ov6ov542hy7lcbji3nhrrhs\n    verifiedregistry  bafk2bzacebvyzjzmvmjvpypphqsumpy6rzxuugnehgum7grc6sv3yqxzrshb4\n    \n\n 5. If you are not troubleshooting the system, it is not recommended to set the rust log level to trace because more logs will be printed.\n\n 6. After the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful.\n\n 7. actor migration\n    \n    After testing, the pre-migration time is about 1 minutes, and the main migration time is about 50 seconds\n    \n    The pre-migration height is 120 heights before the upgrade height:\n    pre-migration start: STARTING pre-migration end: COMPLETED pre-migration\n    migration starts: STARTING migration ends: COMPLETED migration\n    \n\n 8. If ~/.venus exists and you need to import a snapshot, you need to delete the ~/.venus/version file first and then import the snapshot.\n    \n    * Mainnet: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * sophon-auth\n\nPrecautions:\n\n * When compiling, you need to first make dist-clean and then make\n\n\n# sophon-messager\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * venus\n * sophon-auth\n * sophon-gateway\n\nPrecautions:\n\n * After the upgrade, you need to observe whether the messages can be received normally and whether the messages can be on-chained normally.\n\n\n# sophon-miner\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * auth\n * venus\n * gateway\n\nPrecautions:\n\n * None\n\n\n# droplet\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * auth\n * venus\n * gateway\n * messager\n\nPrecautions:\n\n * Check if deals and retrieval can be issued normally after the upgrade?\n\n\n# venus-wallet\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * gateway\n\nPrecautions:\n\n * After the upgrade, observe whether the signing is normal and whether the message can be on-chained normally.\n\n\n# damocles-manager\n\nUpgrade Dependency:\n\n * Sophon service\n\nPrecautions:\n\n * When compiling, you need to first make dist-clean and then make\n\n\n# damocles-worker\n\nUpgrade Dependency:\n\n * damocles-manager\n\nPrecautions:\n\n * None\n\nUpgrade result verification steps:\n\n 1. Check if the program starts normally\n 2. Check if pre / pro messages are uploaded normally\n 3. Check if block producing is normal\n 4. Check if windowPost is normal\n 5. Check if storage power grows normally\n 6. Check if verified deal retrieval is normal\n 7. Check if various gas, sector life cycle, and aggregation settings in the database are normal.\n\n\n# Database changes\n\n * None",normalizedContent:"# venus stack nv23 upgrade guide\n\n\n# precautions\n\n 1. upgrade all venus products / components\n 2. use the curl command to call the version interface to check the version number after upgrading. refer to the guide here for details.\n 3. check if pre/pro messages are on-chained\n 4. check if windowpost messages are on-chained\n 5. check if block producing is working correctly\n 6. check if the gas fee related settings are in effect\n\n# it is recommended not to perform sealing tasks before upgrading. if p2 messages are on-chain but c2 messages are not on-chain before upgrading, an error will be reported when c2 messages are on-chain after upgrading.\n\n\n# products / components to be upgraded\n\ncomponent name     tag       commit\nsophon-auth        v1.16.0   e2340d5\nvenus              v1.16.0   3fdb199\nsophon-co          v0.9.0    0f344ed\nsophon-messager    v1.16.0   f695806\nsoohon-gateway     v1.16.0   2d32b8e\nvenus-wallet       v1.16.0   48b1e02\nsophon-miner       v1.16.0   500c186\ndroplet            v2.12.0   deec963\ndamocles-manager   v0.11.0   7d06bd4\ndamocles-worker    v0.11.0   7d06bd4\n\n\n# upgrade sequence\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\naffected functions:\n\n * aquiring auth services from other components\n\nupgrade dependency:\n\n * none\n\nprecautions:\n\n * check if authentication working normally after startup.\n\n\n# venus\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * sophon-auth\n\nprecautions:\n\ncompile: first make dist-clean and then make, this can prevent problems caused by failure to upgrade filecoin-ffi properly.\n\n 1. check if the vk file is complete after upgrading\n\n 2. after the upgrade, execute the command ./venus state network-info, and then check whether the upgradewaffleheight is normal through the log:\n    \n    #cali\n    upgradewaffleheight: 1779094\n    #mainnet\n    upgradewaffleheight: 4154640\n    \n\n 3. after the upgrade, you need to check if the blocks are synchronized normally.\n\n 4. check the mainnet v14 actors code and make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 23\n    \n    # the order may be different\n    network version: 23\n    actor version: 14\n    manifest cid: bafy2bzacecbueuzsropvqawsri27owo7isa5gp2qtluhrfsto2qg7wpgxnkba\n    actor             cid\n    account           bafk2bzacebr7ik7lng7vysm754mu5x7sakphwm4soqi6zwbox4ukpd6ndwvqy\n    cron              bafk2bzacecwn6eiwa7ysimmk6i57i5whj4cqzwijx3xdlxwb5canmweaez6xc\n    datacap           bafk2bzacecidw7ajvtjhmygqs2yxhmuybyvtwp25dxpblvdxxo7u4gqfzirjg\n    eam               bafk2bzaced2cxnfwngpcubg63h7zk4y5hjwwuhfjxrh43xozax2u6u2woweju\n    ethaccount        bafk2bzacechu4u7asol5mpcsr6fo6jeaeltvayj5bllupyiux7tcynsxby7ko\n    evm               bafk2bzacedupohbgwrcw5ztbbsvrpqyybnokr4ylegmk7hrbt3ueeykua6zxw\n    init              bafk2bzacecbbcshenkb6z2v4irsudv7tyklfgphhizhghix6ke5gpl4r5f2b6\n    multisig          bafk2bzaceajcmsngu3f2chk2y7nanlen5xlftzatytzm6hxwiiw5i5nz36bfc\n    paymentchannel    bafk2bzaceavslp27u3f4zwjq45rlg6assj6cqod7r5f6wfwkptlpi6j4qkmne\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    reward            bafk2bzacedvfnjittwrkhoar6n5xrykowg2e6rpur4poh2m572f7m7evyx4lc\n    storagemarket     bafk2bzaceaju5wobednmornvdqcyi6khkvdttkru4dqduqicrdmohlwfddwhg\n    storageminer      bafk2bzacea3f43rxzemmakjpktq2ukayngean3oo2de5cdxlg2wsyn53wmepc\n    storagepower      bafk2bzacedo6scxizooytn53wjwg2ooiawnj4fsoylcadnp7mhgzluuckjl42\n    system            bafk2bzacecak4ow7tmauku42s3u2yydonk4hx6ov6ov542hy7lcbji3nhrrhs\n    verifiedregistry  bafk2bzacebvyzjzmvmjvpypphqsumpy6rzxuugnehgum7grc6sv3yqxzrshb4\n    \n\n 5. if you are not troubleshooting the system, it is not recommended to set the rust log level to trace because more logs will be printed.\n\n 6. after the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful.\n\n 7. actor migration\n    \n    after testing, the pre-migration time is about 1 minutes, and the main migration time is about 50 seconds\n    \n    the pre-migration height is 120 heights before the upgrade height:\n    pre-migration start: starting pre-migration end: completed pre-migration\n    migration starts: starting migration ends: completed migration\n    \n\n 8. if ~/.venus exists and you need to import a snapshot, you need to delete the ~/.venus/version file first and then import the snapshot.\n    \n    * mainnet: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * sophon-auth\n\nprecautions:\n\n * when compiling, you need to first make dist-clean and then make\n\n\n# sophon-messager\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * venus\n * sophon-auth\n * sophon-gateway\n\nprecautions:\n\n * after the upgrade, you need to observe whether the messages can be received normally and whether the messages can be on-chained normally.\n\n\n# sophon-miner\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * auth\n * venus\n * gateway\n\nprecautions:\n\n * none\n\n\n# droplet\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * auth\n * venus\n * gateway\n * messager\n\nprecautions:\n\n * check if deals and retrieval can be issued normally after the upgrade?\n\n\n# venus-wallet\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * gateway\n\nprecautions:\n\n * after the upgrade, observe whether the signing is normal and whether the message can be on-chained normally.\n\n\n# damocles-manager\n\nupgrade dependency:\n\n * sophon service\n\nprecautions:\n\n * when compiling, you need to first make dist-clean and then make\n\n\n# damocles-worker\n\nupgrade dependency:\n\n * damocles-manager\n\nprecautions:\n\n * none\n\nupgrade result verification steps:\n\n 1. check if the program starts normally\n 2. check if pre / pro messages are uploaded normally\n 3. check if block producing is normal\n 4. check if windowpost is normal\n 5. check if storage power grows normally\n 6. check if verified deal retrieval is normal\n 7. check if various gas, sector life cycle, and aggregation settings in the database are normal.\n\n\n# database changes\n\n * none",charsets:{}},{title:"Have a question?",frontmatter:{editLink:!1},regularPath:"/questions.html",relativePath:"questions.md",key:"v-3059b636",path:"/questions.html",headers:[{level:3,title:"Have a question?",slug:"have-a-question",normalizedTitle:"have a question?",charIndex:2}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Have a question?",content:"# Have a question?\n\nFilecoin.io - general information about the Filecoin network\n\nCommunity Channels - links to Filecoin community chat and forum",normalizedContent:"# have a question?\n\nfilecoin.io - general information about the filecoin network\n\ncommunity channels - links to filecoin community chat and forum",charsets:{}},{title:"Venus Stack nv22 Upgrade Guide",frontmatter:{},regularPath:"/operation/nv22-upgrade.html",relativePath:"operation/nv22-upgrade.md",key:"v-4484f19a",path:"/operation/nv22-upgrade.html",headers:[{level:2,title:"Precautions",slug:"precautions",normalizedTitle:"precautions",charIndex:37},{level:2,title:"Products / Components to be Upgraded",slug:"products-components-to-be-upgraded",normalizedTitle:"products / components to be upgraded",charIndex:434},{level:3,title:"Upgrade Sequence",slug:"upgrade-sequence",normalizedTitle:"upgrade sequence",charIndex:926},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:512},{level:3,title:"Venus",slug:"venus",normalizedTitle:"venus",charIndex:2},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:4384},{level:3,title:"sophon-messager",slug:"sophon-messager",normalizedTitle:"sophon-messager",charIndex:635},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:758},{level:3,title:"droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:799},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:717},{level:3,title:"damocles-manager",slug:"damocles-manager",normalizedTitle:"damocles-manager",charIndex:840},{level:3,title:"damocles-worker",slug:"damocles-worker",normalizedTitle:"damocles-worker",charIndex:881},{level:3,title:"Database changes",slug:"database-changes",normalizedTitle:"database changes",charIndex:5990}],lastUpdated:"8/6/2024, 5:04:12 AM",headersStr:"Precautions Products / Components to be Upgraded Upgrade Sequence sophon-auth Venus sophon-gateway sophon-messager sophon-miner droplet venus-wallet damocles-manager damocles-worker Database changes",content:"# Venus Stack nv22 Upgrade Guide\n\n\n# Precautions\n\n 1. Upgrade all Venus products / components\n 2. Use the curl command to call the Version interface to check the version number after upgrading. Refer to the guide here for details.\n 3. Check if pre/pro messages are on-chained\n 4. Check if windowPost messages are on-chained\n 5. Check if block producing is working correctly\n 6. Check if the gas fee related settings are in effect\n\n\n# Products / Components to be Upgraded\n\nCOMPONENT NAME     TAG           COMMIT\nsophon-auth        v1.15.0       a1e964b\nvenus              v1.15.1       81c99f3\nsophon-co          v0.8.0        0e48712\nsophon-messager    v1.15.0       1e4f0d5\nsoohon-gateway     v1.15.0       541891a\nvenus-wallet       v1.15.0       6b3de34\nsophon-miner       v1.15.0       8dd6c68\ndroplet            v2.11.0       44481dd\ndamocles-manager   v0.10.0-rc1   2f6c5f9\ndamocles-worker    v0.10.0-rc1   2f6c5f9\n\n\n# Upgrade Sequence\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\nAffected functions:\n\n * Aquiring auth services from other components\n\nUpgrade Dependency:\n\n * None\n\nPrecautions:\n\n * Check if authentication working normally after startup.\n\n\n# Venus\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * sophon-auth\n\nPrecautions:\n\nCompile: First make dist-clean and then make, this can prevent problems caused by failure to upgrade filecoin-ffi properly.\n\n 1. Check if the vk file is complete after upgrading\n\n 2. After the upgrade, execute the command ./venus state network-info, and then check whether the UpgradeDragonHeight is normal through the log:\n    \n    #cali\n    UpgradeDragonHeight: 1427974\n    #mainnet\n    UpgradeDragonHeight: 3855360\n    \n\n 3. After the upgrade, you need to check if the blocks are synchronized normally.\n\n 4. Check the mainnet v13 actors code and make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 22\n    \n    # The order may be different\n    Network Version: 22\n    Actor Version: 13\n    Manifest CID: bafy2bzacecdhvfmtirtojwhw2tyciu4jkbpsbk5g53oe24br27oy62sn4dc4e\n    Actor CID\n    account bafk2bzacedxnbtlsqdk76fsfmnhyvsblwyfducerwwtp3mqtx2wbrvs5idl52\n    cron bafk2bzacebbopddyn5csb3fsuhh2an4ttd23x6qnwixgohlirj5ahtcudphyc\n    datacap bafk2bzaceah42tfnhd7xnztawgf46gbvc3m2gudoxshlba2ucmmo2vy67t7ci\n    eam bafk2bzaceb23bhvvcjsth7cn7vp3gbaphrutsaz7v6hkls3ogotzs4bnhm4mk\n    ethaccount bafk2bzaceautge6zhuy6jbj3uldwoxwhpywuon6z3xfvmdbzpbdribc6zzmei\n    evm bafk2bzacedq6v2lyuhgywhlllwmudfj2zufzcauxcsvvd34m2ek5xr55mvh2q\n    init bafk2bzacedr4xacm3fts4vilyeiacjr2hpmwzclyzulbdo24lrfxbtau2wbai\n    multisig bafk2bzacecr5zqarfqak42xqcfeulsxlavcltawsx2fvc7zsjtby6ti4b3wqc\n    paymentchannel bafk2bzacebntdhfmyc24e7tm52ggx5tnw4i3hrr3jmllsepv3mibez4hywsa2\n    placeholder bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    reward bafk2bzacedq4q2kwkruu4xm7rkyygumlbw2yt4nimna2ivea4qarvtkohnuwu\n    storagemarket bafk2bzacebjtoltdviyznpj34hh5qp6u257jnnbjole5rhqfixm7ug3epvrfu\n    storageminer bafk2bzacebf4rrqyk7gcfggggul6nfpzay7f2ordnkwm7z2wcf4mq6r7i77t2\n    storagepower bafk2bzacecjy4dkulvxppg3ocbmeixe2wgg6yxoyjxrm4ko2fm3uhpvfvam6e\n    system bafk2bzacecyf523quuq2kdjfdvyty446z2ounmamtgtgeqnr3ynlu5cqrlt6e\n    verifiedregistry bafk2bzacedkxehp7y7iyukbcje3wbpqcvufisos6exatkanyrbotoecdkrbta\n    \n\n 5. If you are not troubleshooting the system, it is not recommended to set the rust log level to trace because more logs will be printed.\n\n 6. After the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful.\n\n 7. actor migration\n    \n    After testing, the pre-migration time is about 30 minutes, and the main migration time is about 100 seconds\n    \n    The pre-migration height is 120 heights before the upgrade height:\n    pre-migration start: STARTING pre-migration end: COMPLETED pre-migration\n    migration starts: STARTING migration ends: COMPLETED migration\n    \n\n 8. If ~/.venus exists and you need to import a snapshot, you need to delete the ~/.venus/version file first and then import the snapshot.\n    \n    * Mainnet: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * sophon-auth\n\nPrecautions:\n\n * When compiling, you need to first make dist-clean and then make\n\n\n# sophon-messager\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * venus\n * sophon-auth\n * sophon-gateway\n\nPrecautions:\n\n * After the upgrade, you need to observe whether the messages can be received normally and whether the messages can be on-chained normally.\n\n\n# sophon-miner\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * auth\n * venus\n * gateway\n\nPrecautions:\n\n\n# droplet\n\nAffected functions:\n\n * Direct data onboarding support; Documentation here\n\nUpgrade Dependency:\n\n * auth\n * venus\n * gateway\n * messager\n\nPrecautions:\n\n * Check if deals and retrieval can be issued normally after the upgrade?\n\n\n# venus-wallet\n\nAffected functions:\n\n * None\n\nUpgrade Dependency:\n\n * gateway\n\nPrecautions:\n\n * After the upgrade, observe whether the signing is normal and whether the message can be on-chained normally.\n\n\n# damocles-manager\n\nUpgrade Dependency:\n\n * Sophon service\n\nPrecautions:\n\n * When compiling, you need to first make dist-clean and then make\n\n\n# damocles-worker\n\nUpgrade Dependency:\n\n * damocles-manager\n\nPrecautions:\n\nUpgrade result verification steps:\n\n 1. Check if the program starts normally\n 2. Check if pre / pro messages are uploaded normally\n 3. Check if block producing is normal\n 4. Check if windowPost is normal\n 5. Check if storage power grows normally\n 6. Check if verified deal retrieval is normal\n 7. Check if various gas, sector life cycle, and aggregation settings in the database are normal.\n\n\n# Database changes\n\n 1. The droplet adds the direct_deals table to store DDO deals.",normalizedContent:"# venus stack nv22 upgrade guide\n\n\n# precautions\n\n 1. upgrade all venus products / components\n 2. use the curl command to call the version interface to check the version number after upgrading. refer to the guide here for details.\n 3. check if pre/pro messages are on-chained\n 4. check if windowpost messages are on-chained\n 5. check if block producing is working correctly\n 6. check if the gas fee related settings are in effect\n\n\n# products / components to be upgraded\n\ncomponent name     tag           commit\nsophon-auth        v1.15.0       a1e964b\nvenus              v1.15.1       81c99f3\nsophon-co          v0.8.0        0e48712\nsophon-messager    v1.15.0       1e4f0d5\nsoohon-gateway     v1.15.0       541891a\nvenus-wallet       v1.15.0       6b3de34\nsophon-miner       v1.15.0       8dd6c68\ndroplet            v2.11.0       44481dd\ndamocles-manager   v0.10.0-rc1   2f6c5f9\ndamocles-worker    v0.10.0-rc1   2f6c5f9\n\n\n# upgrade sequence\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\naffected functions:\n\n * aquiring auth services from other components\n\nupgrade dependency:\n\n * none\n\nprecautions:\n\n * check if authentication working normally after startup.\n\n\n# venus\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * sophon-auth\n\nprecautions:\n\ncompile: first make dist-clean and then make, this can prevent problems caused by failure to upgrade filecoin-ffi properly.\n\n 1. check if the vk file is complete after upgrading\n\n 2. after the upgrade, execute the command ./venus state network-info, and then check whether the upgradedragonheight is normal through the log:\n    \n    #cali\n    upgradedragonheight: 1427974\n    #mainnet\n    upgradedragonheight: 3855360\n    \n\n 3. after the upgrade, you need to check if the blocks are synchronized normally.\n\n 4. check the mainnet v13 actors code and make sure it is the same as the output below\n    \n    ./venus state actor-cids --network-version 22\n    \n    # the order may be different\n    network version: 22\n    actor version: 13\n    manifest cid: bafy2bzacecdhvfmtirtojwhw2tyciu4jkbpsbk5g53oe24br27oy62sn4dc4e\n    actor cid\n    account bafk2bzacedxnbtlsqdk76fsfmnhyvsblwyfducerwwtp3mqtx2wbrvs5idl52\n    cron bafk2bzacebbopddyn5csb3fsuhh2an4ttd23x6qnwixgohlirj5ahtcudphyc\n    datacap bafk2bzaceah42tfnhd7xnztawgf46gbvc3m2gudoxshlba2ucmmo2vy67t7ci\n    eam bafk2bzaceb23bhvvcjsth7cn7vp3gbaphrutsaz7v6hkls3ogotzs4bnhm4mk\n    ethaccount bafk2bzaceautge6zhuy6jbj3uldwoxwhpywuon6z3xfvmdbzpbdribc6zzmei\n    evm bafk2bzacedq6v2lyuhgywhlllwmudfj2zufzcauxcsvvd34m2ek5xr55mvh2q\n    init bafk2bzacedr4xacm3fts4vilyeiacjr2hpmwzclyzulbdo24lrfxbtau2wbai\n    multisig bafk2bzacecr5zqarfqak42xqcfeulsxlavcltawsx2fvc7zsjtby6ti4b3wqc\n    paymentchannel bafk2bzacebntdhfmyc24e7tm52ggx5tnw4i3hrr3jmllsepv3mibez4hywsa2\n    placeholder bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    reward bafk2bzacedq4q2kwkruu4xm7rkyygumlbw2yt4nimna2ivea4qarvtkohnuwu\n    storagemarket bafk2bzacebjtoltdviyznpj34hh5qp6u257jnnbjole5rhqfixm7ug3epvrfu\n    storageminer bafk2bzacebf4rrqyk7gcfggggul6nfpzay7f2ordnkwm7z2wcf4mq6r7i77t2\n    storagepower bafk2bzacecjy4dkulvxppg3ocbmeixe2wgg6yxoyjxrm4ko2fm3uhpvfvam6e\n    system bafk2bzacecyf523quuq2kdjfdvyty446z2ounmamtgtgeqnr3ynlu5cqrlt6e\n    verifiedregistry bafk2bzacedkxehp7y7iyukbcje3wbpqcvufisos6exatkanyrbotoecdkrbta\n    \n\n 5. if you are not troubleshooting the system, it is not recommended to set the rust log level to trace because more logs will be printed.\n\n 6. after the upgrade, you can use the command ./venus state get-actor t01000 to confirm whether the upgrade is successful.\n\n 7. actor migration\n    \n    after testing, the pre-migration time is about 30 minutes, and the main migration time is about 100 seconds\n    \n    the pre-migration height is 120 heights before the upgrade height:\n    pre-migration start: starting pre-migration end: completed pre-migration\n    migration starts: starting migration ends: completed migration\n    \n\n 8. if ~/.venus exists and you need to import a snapshot, you need to delete the ~/.venus/version file first and then import the snapshot.\n    \n    * mainnet: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * sophon-auth\n\nprecautions:\n\n * when compiling, you need to first make dist-clean and then make\n\n\n# sophon-messager\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * venus\n * sophon-auth\n * sophon-gateway\n\nprecautions:\n\n * after the upgrade, you need to observe whether the messages can be received normally and whether the messages can be on-chained normally.\n\n\n# sophon-miner\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * auth\n * venus\n * gateway\n\nprecautions:\n\n\n# droplet\n\naffected functions:\n\n * direct data onboarding support; documentation here\n\nupgrade dependency:\n\n * auth\n * venus\n * gateway\n * messager\n\nprecautions:\n\n * check if deals and retrieval can be issued normally after the upgrade?\n\n\n# venus-wallet\n\naffected functions:\n\n * none\n\nupgrade dependency:\n\n * gateway\n\nprecautions:\n\n * after the upgrade, observe whether the signing is normal and whether the message can be on-chained normally.\n\n\n# damocles-manager\n\nupgrade dependency:\n\n * sophon service\n\nprecautions:\n\n * when compiling, you need to first make dist-clean and then make\n\n\n# damocles-worker\n\nupgrade dependency:\n\n * damocles-manager\n\nprecautions:\n\nupgrade result verification steps:\n\n 1. check if the program starts normally\n 2. check if pre / pro messages are uploaded normally\n 3. check if block producing is normal\n 4. check if windowpost is normal\n 5. check if storage power grows normally\n 6. check if verified deal retrieval is normal\n 7. check if various gas, sector life cycle, and aggregation settings in the database are normal.\n\n\n# database changes\n\n 1. the droplet adds the direct_deals table to store ddo deals.",charsets:{}},{title:"Home",frontmatter:{home:!0,heroImage:"/assets/venus-hero-logo.png",actionText:"快速上手 →",actionLink:"/zh/intro/",footer:"MIT Apache dual Licensed"},regularPath:"/zh/",relativePath:"zh/README.md",key:"v-abd23af4",path:"/zh/",lastUpdated:"2024/8/6 05:04:12",headersStr:null,content:"分布式架构\n\n依照分布式系统的设计理念和原则，实现了一套快速扩展，高可用的分布式基础架构\n\n\n优化订单体验\n\n完善了一整套方便存储提供者接收真实存储订单，同时也方便存储客户发送存储订单的解决方案\n\n\n全新的算力服务\n\n安全，有韧性的算力维持服务；高效，灵活，可扩容的算力增长服务",normalizedContent:"分布式架构\n\n依照分布式系统的设计理念和原则，实现了一套快速扩展，高可用的分布式基础架构\n\n\n优化订单体验\n\n完善了一整套方便存储提供者接收真实存储订单，同时也方便存储客户发送存储订单的解决方案\n\n\n全新的算力服务\n\n安全，有韧性的算力维持服务；高效，灵活，可扩容的算力增长服务",charsets:{cjk:!0}},{title:"原则",frontmatter:{},regularPath:"/zh/TODO.html",relativePath:"zh/TODO.md",key:"v-e3334036",path:"/zh/TODO.html",headers:[{level:2,title:"原则",slug:"原则",normalizedTitle:"原则",charIndex:2},{level:2,title:"TODO list",slug:"todo-list",normalizedTitle:"todo list",charIndex:340}],lastUpdated:"2024/8/6 05:04:12",headersStr:"原则 TODO list",content:"# 原则\n\n  基于目前的需要，先从重构 guide 和 modules 模块，让两块联动，形成比较易读的 venus 集群部署介绍。\n\n * modules 模块存储各组件的简介，将不相干的文档移到对应位置\n\n * guide 和 modules 对于组件介绍存在很多重复的，只保留一份\n\n * modules 模块组件介绍老旧，超链接到项目的介绍文档，避免项目内更新后 doc 中不及时及重复劳动\n\n * guide 将组件介绍，编译构建，部署文档独立\n\n * guide 模块增加 QA 模块，将 venus discussion 的问题以超链接方式统一到 QA 模块\n\n * 部署模块尽量少一些设计的介绍，简明扼要，每个指定的操作尽量不涉及不相干的，以免造成误解\n\n\n# TODO list\n\n * [ ] modules 模块\n   \n   * [ ] 引导页内容更新\n   * [ ] 不相关文档移走\n   * [ ] 文档命名一致\n   * [ ] 组件介绍匹配项目进度\n   * [x] 编译构建独立到一个文档\n   * [ ] 组件文档移除从项目中搬过来的内容，用超链接\n   * [ ] market 和 cluster 模块的技术文档移到 modules 模块，\n\n * [ ] guide 模块\n   \n   * [ ] 将部署用到的基础知识单独形成文档\n   * [x] 编译构建超链接到对应文档\n   * [x] 增加部分组件的验证：怎么判断部署成功\n   * [ ] 目录结构调整\n     * [ ] market 和 cluster 归属到链服务部署和独立组件部署文档\n     * [ ] .fil_withdraw_and_send.md.swp 文件删除\n     * [ ] sealer 文档放到单独的目录\n   * [ ] Troubleshooting-&-FAQ.md 用超链接方式管理 venus discussion\n\n * [ ] 移除没有价值或过时的文档\n\n * [ ] 在很多模块中重复的内容整合\n\n * [ ] 每个项目搬过来的内容使用超链接",normalizedContent:"# 原则\n\n  基于目前的需要，先从重构 guide 和 modules 模块，让两块联动，形成比较易读的 venus 集群部署介绍。\n\n * modules 模块存储各组件的简介，将不相干的文档移到对应位置\n\n * guide 和 modules 对于组件介绍存在很多重复的，只保留一份\n\n * modules 模块组件介绍老旧，超链接到项目的介绍文档，避免项目内更新后 doc 中不及时及重复劳动\n\n * guide 将组件介绍，编译构建，部署文档独立\n\n * guide 模块增加 qa 模块，将 venus discussion 的问题以超链接方式统一到 qa 模块\n\n * 部署模块尽量少一些设计的介绍，简明扼要，每个指定的操作尽量不涉及不相干的，以免造成误解\n\n\n# todo list\n\n * [ ] modules 模块\n   \n   * [ ] 引导页内容更新\n   * [ ] 不相关文档移走\n   * [ ] 文档命名一致\n   * [ ] 组件介绍匹配项目进度\n   * [x] 编译构建独立到一个文档\n   * [ ] 组件文档移除从项目中搬过来的内容，用超链接\n   * [ ] market 和 cluster 模块的技术文档移到 modules 模块，\n\n * [ ] guide 模块\n   \n   * [ ] 将部署用到的基础知识单独形成文档\n   * [x] 编译构建超链接到对应文档\n   * [x] 增加部分组件的验证：怎么判断部署成功\n   * [ ] 目录结构调整\n     * [ ] market 和 cluster 归属到链服务部署和独立组件部署文档\n     * [ ] .fil_withdraw_and_send.md.swp 文件删除\n     * [ ] sealer 文档放到单独的目录\n   * [ ] troubleshooting-&-faq.md 用超链接方式管理 venus discussion\n\n * [ ] 移除没有价值或过时的文档\n\n * [ ] 在很多模块中重复的内容整合\n\n * [ ] 每个项目搬过来的内容使用超链接",charsets:{cjk:!0}},{title:"使命，愿景，价值观",frontmatter:{},regularPath:"/zh/about/",relativePath:"zh/about/README.md",key:"v-8a78edf4",path:"/zh/about/",headers:[{level:2,title:"使命，愿景，价值观",slug:"使命-愿景-价值观",normalizedTitle:"使命，愿景，价值观",charIndex:2},{level:2,title:"联系方式",slug:"联系方式",normalizedTitle:"联系方式",charIndex:100},{level:2,title:"其他资源",slug:"其他资源",normalizedTitle:"其他资源",charIndex:172}],lastUpdated:"2024/8/6 05:04:12",headersStr:"使命，愿景，价值观 联系方式 其他资源",content:"# 使命，愿景，价值观\n\n * ❗️使命：建设 Filecoin 基础设施和工具，支持生态繁荣发展\n * 🌏 愿景：人人都能参与 Filecoin 生态\n * ☯️ 价值观：开放并且去信任\n\n\n# 联系方式\n\n * Slack:#fil-venus, Slack:#fil-venus-cn, venus@ipfsforce.com\n\n\n# 其他资源\n\n * venus-docs: venus.filecoin.io\n * VenusHub: venushub.io\n * Github: venus\n * Social Media: Twitter, Wechat\n * 安全审计报告：link",normalizedContent:"# 使命，愿景，价值观\n\n * ❗️使命：建设 filecoin 基础设施和工具，支持生态繁荣发展\n * 🌏 愿景：人人都能参与 filecoin 生态\n * ☯️ 价值观：开放并且去信任\n\n\n# 联系方式\n\n * slack:#fil-venus, slack:#fil-venus-cn, venus@ipfsforce.com\n\n\n# 其他资源\n\n * venus-docs: venus.filecoin.io\n * venushub: venushub.io\n * github: venus\n * social media: twitter, wechat\n * 安全审计报告：link",charsets:{cjk:!0}},{title:"前言",frontmatter:{},regularPath:"/zh/intro/",relativePath:"zh/intro/README.md",key:"v-5b14bf66",path:"/zh/intro/",headers:[{level:2,title:"前言",slug:"前言",normalizedTitle:"前言",charIndex:2},{level:2,title:"为什么我们要这样做",slug:"为什么我们要这样做",normalizedTitle:"为什么我们要这样做",charIndex:384},{level:2,title:"venus 如何工作",slug:"venus-如何工作",normalizedTitle:"venus 如何工作",charIndex:2048},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:142},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:281},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:239},{level:3,title:"sophon-messager",slug:"sophon-messager",normalizedTitle:"sophon-messager",charIndex:265},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:252},{level:3,title:"droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:4453},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:293},{level:3,title:"damocles",slug:"damocles",normalizedTitle:"damocles",charIndex:230}],lastUpdated:"2024/8/6 05:04:12",headersStr:"前言 为什么我们要这样做 venus 如何工作 venus sophon-auth sophon-miner sophon-messager venus-wallet droplet sophon-gateway damocles",content:"# 前言\n\n在同一条区块链上需要具有多个互操作的软件实现，每个实现都有自己的安全问题集，但是所有实现不尽相同，因此，启动具有多种实现方式的加密货币网络可降低发生灾难性错误的可能性，Venus 正是 Filecoin 的实现之一。\n\nVenus 代指 Filecoin 的通用实现之一，venus 则代指 Venus 的组件之一。Venus 致力于帮助中小存储提供者能够更加简单的加入到 Filecoin 生态网络建设中。\n\n目前 Venus 通过 venus、damocles、sophon-miner、venus-wallet、sophon-messager、sophon-auth、sophon-gateway 组件，已经实现了 Filecoin 分布式矿池的支持，未来，Venus 将持续完善自身，并共同推进开源的 Filecoin 开发与生态的发展。\n\n\n# 为什么我们要这样做\n\n2020 年 6 月，Protocol Lab 发起了关于由社区后续维护 go-filecoin 的 RFP，IPFSForce 随后申请并获得了维护权。10 月，go-filecoin 更名为 Venus，我们继续推进对 Venus 项目的维护工作。\n\n在重新保持维护之前，Venus 是一个严重缺乏维护的项目。协议和组件上，vm/mpool/chain/rpc 虽然都有了，但是全都存在不同程度的问题，我们用了三个多月的时间，逐渐修复很多协议层、代码层，、性能的问题，使得 Venus 完成了与 Lotus 的互操作，让使用 Venus 的节点可以正常的在网络上运行。后续我们又逐渐的让 Venus 支持了 Calibration、2k 网络。\n\n完成以上工作后，我们着手于 Venus 的开发方向。\n\n我们的设计是让 Venus 向矿池的发展角度去支持，最初的设计是从“如何扩展单一存储提供者”思考，这个方向存在理论上的可行性，但是最大的问题在于 Filecoin 独特的证明机制。因为 Filecoin 网络的存储提供者必须周期性的提交‘时空证明’，而为了生成证明，存储提供者必须读取一整个 partition 的数据，如果 sector 极其分散的分布到不同的地方，通过公网读取，则不是一个可执行的方案。\n\n后来我们通过数次的设计与修改，最终产生了现在的方案，就是分布式矿池。分布式矿池并非体现在单一存储提供者，而是将分布式的概念体现在多存储提供者的管理，这更像一个存储提供者联合体。\n\nVenus 分布式矿池在外部的体现和传统的分布式矿池是相似的。在存储资源上体现在地域分布性，只要有网络可以访问的地方，都可以使节点接入到 Venus 矿池；在出块的角度上，因为 Filecoin 按算力比例来计算出块机率，所以分散的计算和整体的计算的最终结果应该是相同：n1/p+ n2/p+n3/p......= (n1+n2+n3+.....)/p，这在算法的基础上提供了理论基础。\n\n在真实数据存储检索上，存储提供者可以通过 venus 统一入口接入网络或者自主接入。设计中，venus 会在获得存储提供者允许的条件下，按照数据的访问需求来选择合适的节点存储数据，使得数据更贴近真实的使用场景。\n\n 1. 数据存储：支持组件共享，存储会逐渐迁移到 MySQL，通过一些高可用的方案保证 Venus 的元数据安全。\n 2. 共享组件：支持高可用，保证服务的质量，减少存储提供者的时间成本与维护成本，这使得存储提供者能够更容易加入到矿池生态中。现在的挖矿活动专业性很强，而实现 Filecoin 利用闲散存储资源的梦想则不可避免需要降低参与门槛，才能吸引更多的参与者进来。\n 3. 聚集出块权：存储提供者能够将资源整合在一起，互相帮助打包消息，这样可以避免小存储提供者的消息无人打包的困境。\n 4. 提升 Filecoin 网络的吞吐量：如果同一高度存在多个区块，venus-miner 能够保证每个区块中的消息都是不同的，而如果各自出块，消息则很可能大量重复。\n 5. 提升消息的稳定性：挖矿活动中的消息可以和节点分开，由 venus-messager 来管理，venus-messager 会跟踪链的最新状态来设置一个相对合理的预估的 gas 参数，同时也支持用户自己设置一个消息参数。\n 6. 提升数据访问速度：目前的 Filecoin 网络更多的还是存储，但是作为一个存储服务，最终需要对外输出检索服务才能实现根本价值。如果有足够多的存储提供者使用 Venus，那么 Venus 在真实数据的处理上就有更多的可能，比如数据的分布，Venus 可以将数据分布到距离客户最近的一些存储提供者节点，这样可以提高客户的访问速度；比如一些公有数据可以把这些数据尽可能的分散到更多的节点上，保障在任意位置的访问都有效，这可以大大提升 IPFS 网络的效能，进一步实现 IPFS Web3.0 的梦想。\n\n\n# venus 如何工作\n\nVenus 是 Filecoin 的通用实现之一，致力于分布式的集群架构及更简洁的职责划分。\n\nVenus 分布式存储池在外部的呈现和传统的分布式矿池是相似的。在存储资源上体现在地域分布性，只要有网络可以访问的地方，都可以使节点接入到 Venus 矿池。\n\n\n# venus\n\nvenus 类似 lotus-daemon，用于实现全节点。venus 接入 Filecoin 区块链网络，为 Venus 提供数据支持。可以把 venus 当作普通节点来使用，它具有区块链节点必备的所有功能，如 chain、mpool、wallet。venus 的接口和 lotus 基本兼容（如果存在不兼容的接口，欢迎发布 Issue），你可以在 venus 上创建私钥、查询资产、转账等等。在典型部署环境里，venus 仅仅提供基础链上数据查询服务，本身不保存私钥。slashfilter 所需要的区块数据，存储到数据库里，节点本身是无状态的，这样通过 nginx 反向代理后就可以实现 venus 节点的高可用。\n\nvenus 节点自身有一些区别与 lotus 的地方：\n\n 1. 创建区块的接口中支持了外部签名（后续会向 Lotus 提 PR）\n 2. 消息选择的接口支持同时选择多个批次的消息，用于多存储提供者出块时选择消息。\n 3. 支持 sophon-auth 的的中心访问授权\n\n因此如果对 Venus/Lotus 混合部署感兴趣，需要使用我们维护的 lotus 兼容 venus 的项目，可自行 pick 代码编译。\n\n\n# sophon-auth\n\nsophon-auth (原 venus-auth) 是用于授权的组件，在典型的部署环境下 sophon-auth 用于给 venus、sophon-miner、sophon-messager 提供授权服务，每个本地的节点访问共享组件都要经过授权，后续会在这个基础上进行功能扩充，做一些安全方面的控制，比如访问限流、黑名单。\n\n\n# sophon-miner\n\nsophon-miner (原 venus-miner) 的作用是聚集出块权，可以为接入链服务的多个集群执行出块逻辑。sophon-miner 有以下特点：\n\n 1. 分离数据：由于生成区块的过程需要访问数据，并且存储提供者的 sealer 可能是异构的，但目前多数存储提供者会使用自己定制的代码，那么要实现联合挖矿就存在如何访问到这些数据的问题。通过隔断 sophon-miner 对存储组织方式的依赖，通过让证明在存储提供者侧完成，无论存储提供者的 sealer 如何组织存储，只要实现了ComputeProof接口，sophon-miner 就可以通过这个接口来生成证明。\n 2. 分离私钥：计算随机数及签名区块的过程中，所有涉及到私钥的操作都通过远程钱包的方式来访问，这样既无泄漏集群私钥，又能保证出块逻辑正常运行。\n 3. 提高网络 TPS：当 sophon-miner 负责的存储提供者在一个周期获得多个（>1）出块权，sophon-miner 会尽量从消息池中选择不同的消息进行打包，这样一定程度上可以提升消息上链的速度，同时使该出块可能获得更多的小费奖励（Premium）。\n 4. 收益稳定性：多存储提供者联合挖矿配套奖励池分配系统可以让小存储提供者每天都能获得区块奖励，也可以减少某些存储提供者偶发性出块错误造成的损失。\n\n\n# sophon-messager\n\nsophon-messager (原 venus-messager) 组件的目标是更好的帮助消息上链，并能够灵活的控制消息上链的时机，减少 gas 消耗，流量控制等。其中包括远程钱包管理、地址管理、消息管理。\n\n 1. 地址管理：主要是管理 nonce 值，保证 nonce 值能够按照正确的顺序分配。\n 2. 消息管理：消息管理分成三个部分，分别是“消息接收和保存”、“消息选择及推送”“消息上链状态的追踪”。\n 3. GasFee 管理：可以按地址分别设置 gasLimit 的系数和 maxFee。\n\n从功能性上来说：\n\n 1. 远程钱包支持：一个 sophon-messager 支持多个钱包，分别管理自己的 message。\n 2. 支持 sqlite 本地存储和 mysql 远程存储：存储更加安全稳定。\n 3. 动态填充：根据 gas 和 push 策略，在链上发送消息时，需要填写 gas 相关参数和 nonce，以确保 gas 估算和其他设置有效。\n 4. 维护消息状态：包括消息是否被链接和替换，保存执行结果。\n 5. 多点消息传递（通过 Mpool API 推送到多个节点）：确保消息在网络上传播。\n 6. 灵活配置：包括 gas 估算、消息推送策略等。\n\n\n# venus-wallet\n\nvenus-wallet 是一个远程钱包，协议上能够同时支持 lotus 和 venus。在典型的部署环境中，这个组件由存储提供者部署在本地，并通过一定的策略配置保证资产的安全。venus-wallet 有以下功能特点：\n\n 1. 私钥管理模块：目前支持非对称算法 BLS 和 SECP 的私钥管理，能够生成随机私钥，并运用 aes128 对私钥进行对称加密存储，同时支持私钥对数据进行签名。\n 2. 签名验证：每种签名类型都有对应验证策略，保证了签名方不能在签名类型上欺骗钱包。\n 3. 签名策略模块：针对 Filecoin 的 Lotus 及 Venus 实现，对存在的数 10 种数据结构以及 message 数据结构中的 60 余种签名类型进行统一管理，按需配置各种组合方式绑定私钥签名规则，而后可以将数种不同的私钥签名规则组成一个整体，授权于外部组件使用。\n\n\n# droplet\n\ndroplet (原 venus-market) 是 Venus 系统中的市场组件。其愿景是打造 Filecoin 网络中分布式的存储和检索市场。目前已经实现了兼容 Lotus 协议的订单存储和检索，逐渐向着 droplet 服务多个集群的接单，对外提供统一的检索服务方向发展。可参见droplet 设计与路线图\n\n\n# sophon-gateway\n\nsophon-gateway (原 venus-gateway) 是独立组件与链服务层的桥梁，用于简化部署并降低存储提供者访问的复杂性、增加存储提供者访问的安全性。独立组件启动时将其服务接口注册到 sophon-gateway，链服务组件需要时通过 sophon-gateway 请求对应集群的服务接口。\n\n * 存储提供者不需要外部 IP 和曝露钱包服务；\n * 存储池配置 SSL 证书后，集群与存储池的连接是安全的；\n * 存储提供者可以简单地将多个客户端（钱包/证明）注册到存储池以获得高可用性。\n\n\n\n\n# damocles\n\ndamocles (原 venus-cluster) 是 Venus 推出的新版本扇区封装、算力维持组件，相对于原本的 venus-sealer，在任务调度、最大化系统资源方面有一定优势，其面向的用户受众也将有所不同。",normalizedContent:"# 前言\n\n在同一条区块链上需要具有多个互操作的软件实现，每个实现都有自己的安全问题集，但是所有实现不尽相同，因此，启动具有多种实现方式的加密货币网络可降低发生灾难性错误的可能性，venus 正是 filecoin 的实现之一。\n\nvenus 代指 filecoin 的通用实现之一，venus 则代指 venus 的组件之一。venus 致力于帮助中小存储提供者能够更加简单的加入到 filecoin 生态网络建设中。\n\n目前 venus 通过 venus、damocles、sophon-miner、venus-wallet、sophon-messager、sophon-auth、sophon-gateway 组件，已经实现了 filecoin 分布式矿池的支持，未来，venus 将持续完善自身，并共同推进开源的 filecoin 开发与生态的发展。\n\n\n# 为什么我们要这样做\n\n2020 年 6 月，protocol lab 发起了关于由社区后续维护 go-filecoin 的 rfp，ipfsforce 随后申请并获得了维护权。10 月，go-filecoin 更名为 venus，我们继续推进对 venus 项目的维护工作。\n\n在重新保持维护之前，venus 是一个严重缺乏维护的项目。协议和组件上，vm/mpool/chain/rpc 虽然都有了，但是全都存在不同程度的问题，我们用了三个多月的时间，逐渐修复很多协议层、代码层，、性能的问题，使得 venus 完成了与 lotus 的互操作，让使用 venus 的节点可以正常的在网络上运行。后续我们又逐渐的让 venus 支持了 calibration、2k 网络。\n\n完成以上工作后，我们着手于 venus 的开发方向。\n\n我们的设计是让 venus 向矿池的发展角度去支持，最初的设计是从“如何扩展单一存储提供者”思考，这个方向存在理论上的可行性，但是最大的问题在于 filecoin 独特的证明机制。因为 filecoin 网络的存储提供者必须周期性的提交‘时空证明’，而为了生成证明，存储提供者必须读取一整个 partition 的数据，如果 sector 极其分散的分布到不同的地方，通过公网读取，则不是一个可执行的方案。\n\n后来我们通过数次的设计与修改，最终产生了现在的方案，就是分布式矿池。分布式矿池并非体现在单一存储提供者，而是将分布式的概念体现在多存储提供者的管理，这更像一个存储提供者联合体。\n\nvenus 分布式矿池在外部的体现和传统的分布式矿池是相似的。在存储资源上体现在地域分布性，只要有网络可以访问的地方，都可以使节点接入到 venus 矿池；在出块的角度上，因为 filecoin 按算力比例来计算出块机率，所以分散的计算和整体的计算的最终结果应该是相同：n1/p+ n2/p+n3/p......= (n1+n2+n3+.....)/p，这在算法的基础上提供了理论基础。\n\n在真实数据存储检索上，存储提供者可以通过 venus 统一入口接入网络或者自主接入。设计中，venus 会在获得存储提供者允许的条件下，按照数据的访问需求来选择合适的节点存储数据，使得数据更贴近真实的使用场景。\n\n 1. 数据存储：支持组件共享，存储会逐渐迁移到 mysql，通过一些高可用的方案保证 venus 的元数据安全。\n 2. 共享组件：支持高可用，保证服务的质量，减少存储提供者的时间成本与维护成本，这使得存储提供者能够更容易加入到矿池生态中。现在的挖矿活动专业性很强，而实现 filecoin 利用闲散存储资源的梦想则不可避免需要降低参与门槛，才能吸引更多的参与者进来。\n 3. 聚集出块权：存储提供者能够将资源整合在一起，互相帮助打包消息，这样可以避免小存储提供者的消息无人打包的困境。\n 4. 提升 filecoin 网络的吞吐量：如果同一高度存在多个区块，venus-miner 能够保证每个区块中的消息都是不同的，而如果各自出块，消息则很可能大量重复。\n 5. 提升消息的稳定性：挖矿活动中的消息可以和节点分开，由 venus-messager 来管理，venus-messager 会跟踪链的最新状态来设置一个相对合理的预估的 gas 参数，同时也支持用户自己设置一个消息参数。\n 6. 提升数据访问速度：目前的 filecoin 网络更多的还是存储，但是作为一个存储服务，最终需要对外输出检索服务才能实现根本价值。如果有足够多的存储提供者使用 venus，那么 venus 在真实数据的处理上就有更多的可能，比如数据的分布，venus 可以将数据分布到距离客户最近的一些存储提供者节点，这样可以提高客户的访问速度；比如一些公有数据可以把这些数据尽可能的分散到更多的节点上，保障在任意位置的访问都有效，这可以大大提升 ipfs 网络的效能，进一步实现 ipfs web3.0 的梦想。\n\n\n# venus 如何工作\n\nvenus 是 filecoin 的通用实现之一，致力于分布式的集群架构及更简洁的职责划分。\n\nvenus 分布式存储池在外部的呈现和传统的分布式矿池是相似的。在存储资源上体现在地域分布性，只要有网络可以访问的地方，都可以使节点接入到 venus 矿池。\n\n\n# venus\n\nvenus 类似 lotus-daemon，用于实现全节点。venus 接入 filecoin 区块链网络，为 venus 提供数据支持。可以把 venus 当作普通节点来使用，它具有区块链节点必备的所有功能，如 chain、mpool、wallet。venus 的接口和 lotus 基本兼容（如果存在不兼容的接口，欢迎发布 issue），你可以在 venus 上创建私钥、查询资产、转账等等。在典型部署环境里，venus 仅仅提供基础链上数据查询服务，本身不保存私钥。slashfilter 所需要的区块数据，存储到数据库里，节点本身是无状态的，这样通过 nginx 反向代理后就可以实现 venus 节点的高可用。\n\nvenus 节点自身有一些区别与 lotus 的地方：\n\n 1. 创建区块的接口中支持了外部签名（后续会向 lotus 提 pr）\n 2. 消息选择的接口支持同时选择多个批次的消息，用于多存储提供者出块时选择消息。\n 3. 支持 sophon-auth 的的中心访问授权\n\n因此如果对 venus/lotus 混合部署感兴趣，需要使用我们维护的 lotus 兼容 venus 的项目，可自行 pick 代码编译。\n\n\n# sophon-auth\n\nsophon-auth (原 venus-auth) 是用于授权的组件，在典型的部署环境下 sophon-auth 用于给 venus、sophon-miner、sophon-messager 提供授权服务，每个本地的节点访问共享组件都要经过授权，后续会在这个基础上进行功能扩充，做一些安全方面的控制，比如访问限流、黑名单。\n\n\n# sophon-miner\n\nsophon-miner (原 venus-miner) 的作用是聚集出块权，可以为接入链服务的多个集群执行出块逻辑。sophon-miner 有以下特点：\n\n 1. 分离数据：由于生成区块的过程需要访问数据，并且存储提供者的 sealer 可能是异构的，但目前多数存储提供者会使用自己定制的代码，那么要实现联合挖矿就存在如何访问到这些数据的问题。通过隔断 sophon-miner 对存储组织方式的依赖，通过让证明在存储提供者侧完成，无论存储提供者的 sealer 如何组织存储，只要实现了computeproof接口，sophon-miner 就可以通过这个接口来生成证明。\n 2. 分离私钥：计算随机数及签名区块的过程中，所有涉及到私钥的操作都通过远程钱包的方式来访问，这样既无泄漏集群私钥，又能保证出块逻辑正常运行。\n 3. 提高网络 tps：当 sophon-miner 负责的存储提供者在一个周期获得多个（>1）出块权，sophon-miner 会尽量从消息池中选择不同的消息进行打包，这样一定程度上可以提升消息上链的速度，同时使该出块可能获得更多的小费奖励（premium）。\n 4. 收益稳定性：多存储提供者联合挖矿配套奖励池分配系统可以让小存储提供者每天都能获得区块奖励，也可以减少某些存储提供者偶发性出块错误造成的损失。\n\n\n# sophon-messager\n\nsophon-messager (原 venus-messager) 组件的目标是更好的帮助消息上链，并能够灵活的控制消息上链的时机，减少 gas 消耗，流量控制等。其中包括远程钱包管理、地址管理、消息管理。\n\n 1. 地址管理：主要是管理 nonce 值，保证 nonce 值能够按照正确的顺序分配。\n 2. 消息管理：消息管理分成三个部分，分别是“消息接收和保存”、“消息选择及推送”“消息上链状态的追踪”。\n 3. gasfee 管理：可以按地址分别设置 gaslimit 的系数和 maxfee。\n\n从功能性上来说：\n\n 1. 远程钱包支持：一个 sophon-messager 支持多个钱包，分别管理自己的 message。\n 2. 支持 sqlite 本地存储和 mysql 远程存储：存储更加安全稳定。\n 3. 动态填充：根据 gas 和 push 策略，在链上发送消息时，需要填写 gas 相关参数和 nonce，以确保 gas 估算和其他设置有效。\n 4. 维护消息状态：包括消息是否被链接和替换，保存执行结果。\n 5. 多点消息传递（通过 mpool api 推送到多个节点）：确保消息在网络上传播。\n 6. 灵活配置：包括 gas 估算、消息推送策略等。\n\n\n# venus-wallet\n\nvenus-wallet 是一个远程钱包，协议上能够同时支持 lotus 和 venus。在典型的部署环境中，这个组件由存储提供者部署在本地，并通过一定的策略配置保证资产的安全。venus-wallet 有以下功能特点：\n\n 1. 私钥管理模块：目前支持非对称算法 bls 和 secp 的私钥管理，能够生成随机私钥，并运用 aes128 对私钥进行对称加密存储，同时支持私钥对数据进行签名。\n 2. 签名验证：每种签名类型都有对应验证策略，保证了签名方不能在签名类型上欺骗钱包。\n 3. 签名策略模块：针对 filecoin 的 lotus 及 venus 实现，对存在的数 10 种数据结构以及 message 数据结构中的 60 余种签名类型进行统一管理，按需配置各种组合方式绑定私钥签名规则，而后可以将数种不同的私钥签名规则组成一个整体，授权于外部组件使用。\n\n\n# droplet\n\ndroplet (原 venus-market) 是 venus 系统中的市场组件。其愿景是打造 filecoin 网络中分布式的存储和检索市场。目前已经实现了兼容 lotus 协议的订单存储和检索，逐渐向着 droplet 服务多个集群的接单，对外提供统一的检索服务方向发展。可参见droplet 设计与路线图\n\n\n# sophon-gateway\n\nsophon-gateway (原 venus-gateway) 是独立组件与链服务层的桥梁，用于简化部署并降低存储提供者访问的复杂性、增加存储提供者访问的安全性。独立组件启动时将其服务接口注册到 sophon-gateway，链服务组件需要时通过 sophon-gateway 请求对应集群的服务接口。\n\n * 存储提供者不需要外部 ip 和曝露钱包服务；\n * 存储池配置 ssl 证书后，集群与存储池的连接是安全的；\n * 存储提供者可以简单地将多个客户端（钱包/证明）注册到存储池以获得高可用性。\n\n\n\n\n# damocles\n\ndamocles (原 venus-cluster) 是 venus 推出的新版本扇区封装、算力维持组件，相对于原本的 venus-sealer，在任务调度、最大化系统资源方面有一定优势，其面向的用户受众也将有所不同。",charsets:{cjk:!0}},{frontmatter:{},regularPath:"/zh/intro/_Footer.html",relativePath:"zh/intro/_Footer.md",key:"v-1ca74985",path:"/zh/intro/_Footer.html",lastUpdated:"2024/8/6 05:04:12",headersStr:null,content:"See something missing? Have tips to share? File an issue, and we'll follow up as soon as possible. (If you have write permission in this repo, feel free to edit directly.)",normalizedContent:"see something missing? have tips to share? file an issue, and we'll follow up as soon as possible. (if you have write permission in this repo, feel free to edit directly.)",charsets:{}},{title:"如何运行文档项目",frontmatter:{},regularPath:"/zh/intro/contribute-doc.html",relativePath:"zh/intro/contribute-doc.md",key:"v-68c1b705",path:"/zh/intro/contribute-doc.html",headers:[{level:2,title:"依赖",slug:"依赖",normalizedTitle:"依赖",charIndex:15},{level:2,title:"拉取项目",slug:"拉取项目",normalizedTitle:"拉取项目",charIndex:50},{level:2,title:"本地运行",slug:"本地运行",normalizedTitle:"本地运行",charIndex:153},{level:2,title:"编译与部署",slug:"编译与部署",normalizedTitle:"编译与部署",charIndex:337}],lastUpdated:"2024/8/6 05:04:12",headersStr:"依赖 拉取项目 本地运行 编译与部署",content:"# 如何运行文档项目\n\n\n# 依赖\n\n运行 docs 项目需要安装 node 和 yarn\n\n\n# 拉取项目\n\ngit clone git@github.com:filecoin-project/venus-docs.git\ncd venus-docs\nyarn install   #安装依赖\n\n\n\n# 本地运行\n\n运行命令：\n\nyarn docs:dev \n\n\n英文文档直接在 master 下更改，中文在 zh 文件夹下面更改，请确保文件夹结构完全相同。在文档上做的修改能够实时的反映在网站上，不需要重新运行命令。 增加文档需要修改 ./docs/.vuepress/config.js 文件，并在 sidebar 下的 children 增加一行新的记录。\n\n\n# 编译与部署\n\nyarn docs:links   # verify all links are well-formed\nyarn docs:build   # generate html pages\n\n\nbuild 完成后结果输入到 ./docs/.vuepress/dist 目录里面，将本目录覆盖 gh-page 分支即可部署项目文档。",normalizedContent:"# 如何运行文档项目\n\n\n# 依赖\n\n运行 docs 项目需要安装 node 和 yarn\n\n\n# 拉取项目\n\ngit clone git@github.com:filecoin-project/venus-docs.git\ncd venus-docs\nyarn install   #安装依赖\n\n\n\n# 本地运行\n\n运行命令：\n\nyarn docs:dev \n\n\n英文文档直接在 master 下更改，中文在 zh 文件夹下面更改，请确保文件夹结构完全相同。在文档上做的修改能够实时的反映在网站上，不需要重新运行命令。 增加文档需要修改 ./docs/.vuepress/config.js 文件，并在 sidebar 下的 children 增加一行新的记录。\n\n\n# 编译与部署\n\nyarn docs:links   # verify all links are well-formed\nyarn docs:build   # generate html pages\n\n\nbuild 完成后结果输入到 ./docs/.vuepress/dist 目录里面，将本目录覆盖 gh-page 分支即可部署项目文档。",charsets:{cjk:!0}},{frontmatter:{},regularPath:"/zh/intro/droplet.html",relativePath:"zh/intro/droplet.md",key:"v-1a80f121",path:"/zh/intro/droplet.html",headers:[{level:3,title:"水滴",slug:"水滴",normalizedTitle:"水滴",charIndex:2}],lastUpdated:"2024/8/6 05:04:12",headersStr:"水滴",content:"# 水滴\n\n水滴，原 Venus 订单服务，是一个Filecoin存储订单解决方案。请在此了解更多关于水滴的信息。",normalizedContent:"# 水滴\n\n水滴，原 venus 订单服务，是一个filecoin存储订单解决方案。请在此了解更多关于水滴的信息。",charsets:{cjk:!0}},{frontmatter:{},regularPath:"/zh/intro/damocles.html",relativePath:"zh/intro/damocles.md",key:"v-41764076",path:"/zh/intro/damocles.html",headers:[{level:3,title:"执剑人",slug:"执剑人",normalizedTitle:"执剑人",charIndex:2}],lastUpdated:"2024/8/6 05:04:12",headersStr:"执剑人",content:"# 执剑人\n\n执剑人，原 Venus 算力服务，是一个Filecoin存储算力解决方案。请在此了解更多关于执剑人的信息。",normalizedContent:"# 执剑人\n\n执剑人，原 venus 算力服务，是一个filecoin存储算力解决方案。请在此了解更多关于执剑人的信息。",charsets:{cjk:!0}},{frontmatter:{},regularPath:"/zh/intro/one-pager.html",relativePath:"zh/intro/one-pager.md",key:"v-161e7101",path:"/zh/intro/one-pager.html",lastUpdated:"2024/8/6 05:04:12",headersStr:null,content:"",normalizedContent:"",charsets:{}},{frontmatter:{},regularPath:"/zh/intro/sophon.html",relativePath:"zh/intro/sophon.md",key:"v-6794a0e5",path:"/zh/intro/sophon.html",headers:[{level:3,title:"智子",slug:"智子",normalizedTitle:"智子",charIndex:2}],lastUpdated:"2024/8/6 05:04:12",headersStr:"智子",content:"# 智子\n\n智子，原 Venus 链服务，是一个 Filecoin 超级节点解决方案。请在此了解更多关于智子的信息。",normalizedContent:"# 智子\n\n智子，原 venus 链服务，是一个 filecoin 超级节点解决方案。请在此了解更多关于智子的信息。",charsets:{cjk:!0}},{title:"Venus-集群最大化利用资源增长算力方案",frontmatter:{},regularPath:"/zh/operation/Efficiency_of_sealing.html",relativePath:"zh/operation/Efficiency_of_sealing.md",key:"v-04b09bc6",path:"/zh/operation/Efficiency_of_sealing.html",headers:[{level:2,title:"总体思路",slug:"总体思路",normalizedTitle:"总体思路",charIndex:212},{level:2,title:"任务耗时统计",slug:"任务耗时统计",normalizedTitle:"任务耗时统计",charIndex:587},{level:2,title:"速率因子",slug:"速率因子",normalizedTitle:"速率因子",charIndex:3532},{level:3,title:"临时存储设备",slug:"临时存储设备",normalizedTitle:"临时存储设备",charIndex:3541},{level:3,title:"永久存储设备",slug:"永久存储设备",normalizedTitle:"永久存储设备",charIndex:4398},{level:3,title:"网络传输",slug:"网络传输",normalizedTitle:"网络传输",charIndex:4722},{level:3,title:"worker 的指令集加速",slug:"worker-的指令集加速",normalizedTitle:"worker 的指令集加速",charIndex:5555},{level:3,title:"核数限制",slug:"核数限制",normalizedTitle:"核数限制",charIndex:6498},{level:2,title:"worker 运行方式和资源消耗",slug:"worker-运行方式和资源消耗",normalizedTitle:"worker 运行方式和资源消耗",charIndex:7340},{level:3,title:"P1 阶段",slug:"p1-阶段",normalizedTitle:"p1 阶段",charIndex:3782},{level:3,title:"P2 阶段",slug:"p2-阶段",normalizedTitle:"p2 阶段",charIndex:7836},{level:3,title:"Commit",slug:"commit",normalizedTitle:"commit",charIndex:666},{level:2,title:"产量优化",slug:"产量优化",normalizedTitle:"产量优化",charIndex:8897},{level:3,title:"产量的计算公式",slug:"产量的计算公式",normalizedTitle:"产量的计算公式",charIndex:8906},{level:2,title:"损失和止损",slug:"损失和止损",normalizedTitle:"损失和止损",charIndex:10774}],lastUpdated:"2024/8/6 05:04:12",headersStr:"总体思路 任务耗时统计 速率因子 临时存储设备 永久存储设备 网络传输 worker 的指令集加速 核数限制 worker 运行方式和资源消耗 P1 阶段 P2 阶段 Commit 产量优化 产量的计算公式 损失和止损",content:'# Venus-集群最大化利用资源增长算力方案\n\n   在 Filecoin 的网络中，算力大小至关重要，与矿工的收入息息相关。算力的增长与维持需要软硬件资源较多，每个扇区的密封需要 P1、P2、C1，C2 等 诸多过程，并且每个过程所依赖的资源各不相同，如：P1 偏向多核 CPU，P4 可用 GPU 优化等。故如何找出能最大化利用现有资源提升算力的方案是一个复杂的过程。这篇文章为如何找出最优方案提供一些思路。\n\n\n# 总体思路\n\n> 本文方案是通过各个阶段的任务耗时来推算如何均衡的分配各阶段任务的机器数量占比\n\n * 根据实际场景，将所有加速配置都打开，做几个 sector，统计每个阶段任务耗时。每个阶段对硬件资源的的依赖如下：\n   * P1：cpu 及磁盘 io\n   * P2：cpu，gpu，带宽及磁盘 io\n   * C1-C2：cpu，gpu，带宽及磁盘 io\n\n> 这里多做几个是为了统计出较稳定的耗时，此阶段需保持加速设置及软硬件资源始终不变。\n\n * 维持任务数平衡，即每个机器都有任何时刻都有任务可做，理论上每个阶段任务数与耗时成反比；\n\n * 扇区任务由 pledge 命令控制，配合最大并发密封扇区数（MaxSealingSectors）管理集群中 sector 并发数量；\n\n * 每个 worker 可以指定可接受的任务类型。\n\n\n# 任务耗时统计\n\n   worker 可以领取的任务类型有：\n\nTTAddPiece   TaskType = "seal/v0/addpiece"\nTTPreCommit1 TaskType = "seal/v0/precommit/1"\nTTPreCommit2 TaskType = "seal/v0/precommit/2"\nTTCommit1    TaskType = "seal/v0/commit/1" // NOTE: We use this to transfer the sector into miner-local storage for now; Don\'t use on workers!\nTTCommit2    TaskType = "seal/v0/commit/2"\n\nTTFinalize TaskType = "seal/v0/finalize"\n\nTTFetch  TaskType = "seal/v0/fetch"\nTTUnseal TaskType = "seal/v0/unseal"\n\n\n\n   每个任务都分为两个阶段：prepare 阶段和 worker 阶段，在日志中表现为：\n\n# seal/v0/fetch\n2021-08-03T14:00:07.925+0800    INFO    advmgr  sector-storage/sched_worker.go:401      Sector 7 prepare for seal/v0/fetch ...\n2021-08-03T14:05:36.772+0800    INFO    advmgr  sector-storage/sched_worker.go:403      Sector 7 prepare for seal/v0/fetch end ...\n\n2021-08-03T14:05:36.772+0800    INFO    advmgr  sector-storage/sched_worker.go:442      Sector 7 work for seal/v0/fetch ...\n2021-08-03T14:05:36.774+0800    INFO    advmgr  sector-storage/sched_worker.go:444      Sector 7 work for seal/v0/fetch end ...\n\n# seal/v0/addpiece\n2021-08-03T13:38:37.977+0800    INFO    advmgr  sector-storage/sched_worker.go:401      Sector 8 prepare for seal/v0/addpiece ...\n2021-08-03T13:38:37.978+0800    INFO    advmgr  sector-storage/sched_worker.go:403      Sector 8 prepare for seal/v0/addpiece end ...\n\n2021-08-03T13:38:37.978+0800    INFO    advmgr  sector-storage/sched_worker.go:442      Sector 8 work for seal/v0/addpiece ...\n2021-08-03T13:44:26.295+0800    INFO    advmgr  sector-storage/sched_worker.go:444      Sector 8 work for seal/v0/addpiece end ...\n\n# seal/v0/commit/2\n2021-08-03T13:26:02.119+0800    INFO    advmgr  sector-storage/sched_worker.go:401      Sector 7 prepare for seal/v0/commit/2 ...\n2021-08-03T13:26:02.119+0800    INFO    advmgr  sector-storage/sched_worker.go:403      Sector 7 prepare for seal/v0/commit/2 end ...\n\n2021-08-03T13:26:02.119+0800    INFO    advmgr  sector-storage/sched_worker.go:442      Sector 7 work for seal/v0/commit/2 ...\n2021-08-03T13:49:46.180+0800    INFO    advmgr  sector-storage/sched_worker.go:444      Sector 7 work for seal/v0/commit/2 end ...\n\n# seal/v0/finalize\n2021-08-03T13:54:17.414+0800    INFO    advmgr  sector-storage/sched_worker.go:401      Sector 7 prepare for seal/v0/finalize ...\n2021-08-03T13:59:30.471+0800    INFO    advmgr  sector-storage/sched_worker.go:403      Sector 7 prepare for seal/v0/finalize end ...\n\n2021-08-03T13:59:30.471+0800    INFO    advmgr  sector-storage/sched_worker.go:442      Sector 7 work for seal/v0/finalize ...\n2021-08-03T14:00:07.915+0800    INFO    advmgr  sector-storage/sched_worker.go:444      Sector 7 work for seal/v0/finalize end ...\n\n\n\n   可以看出有些任务在 prepare 阶段比较耗时，有些在 work 阶段比较耗时，一般来说需要网路传输，带宽资源的在 prepare 比较耗时，如 fetch，finalize 等；而需要计算的任务在 work 阶段比较耗时，如 AP，P1，P2，C2 等。\n\n   为了便于计算，这里将任务阶段进行合并，主要分为：AP，P1，P2，C2 阶段，将这四个阶段之前的仍无耗时统一归为相应阶段的耗时，如 T（P1）=P1 耗时+P1 前的 fetch 耗时。这里 waitseed 怎么归类，在后面的时间逻辑中有没有考虑进去\n\n\n# 速率因子\n\n\n# 临时存储设备\n\n  Filecoin 在封装算力是会产生一些临时文件，在任务的进行中存在很多随机存取，这就要求磁盘吞吐量不能太差，否则会导致磁盘 IO 过高，计算资源等待磁盘读取处于闲置状态。\n\n * 如何挑选适合的设备\n\n  如何寻找适合的设备，其实就是需要多少的磁盘吞吐量，可以通过一个简单的计算公式得到它。\n\n文件大小 * 线程并行数量 / 运行时间 = 平均每秒钟传输速度\n  \n因为每个阶段的吞吐不同，拆分计算可以让得到的数据更精准\n  \nP1 读取 + P1 写入 = P1 阶段所需的吞吐量，其他阶段相同，把所有阶段所需的吞吐加起来就得到了所需的吞吐量，当然需要一些性能上的冗余\n\n\n  通常情况下绝大多数的矿工都会使用 SSD 或者 NVME，当有多块硬盘时我们可以通过venus-worker storage attach --seal </path/>命令或者启动多个 worker 来设置多个路径，但这并不是一个比较好的方法，路径过于分散会导致后续的维护相对复杂，无法充分利用，通过创建 raid 方式可以获得更好的性能和空间利用率，并且便于后续的维护。\n\n * 软 raid 创建\n\nmdadm -C /dev/md1 -l 0 -n 2 /dev/sdb1 /dev/sdc1\nmdadm -C /dev/md2 -l 5 -n 6 /dev/sd[b-g]1\n-C $创建软件RAID\n-l $指定RAID级别  1表示raid1  其他同理  \n-n $指定磁盘个数\n-x $指定备用设备个数\n-A $重组之前的设备\n\n\n有关 mdadm 用法、MD 和各种级别的 RAID 的更多信息，请参阅：http://raid.wiki.kernel.org/\n\n获取最新版本的 mdadm 应始终可以从如下链接获取：http://www.kernel.org/pub/linux/utils/raid/mdadm/\n\n硬 raid 创建时请查看您的 raid 卡型号和说明进行操作\n\n\n# 永久存储设备\n\n   永久存储设备的访问机制和可能遇到的问题：\n\n 1. 在每个任务阶段产生的文件有些是要永久存储的，用于 wdPoSt 或 winningPoSt，在每个 sector 完成阶段需要传输到永久存储目录，这个过程需要带宽资源，并且要保证磁盘 io；\n 2. wdPoSt 大量的随机读取非常小的文件，这可能会导致读取过慢而影响时空证明导致算力惩罚；\n 3. 当存储过于集中时，少量的机器损坏会导致所有的数据丢失；\n 4. 当磁盘过多时，并且盘符没有固定，启动时可能导致盘符移动；\n 5. 如果是 raid，尽量选择 raid5 或者 raid6，raid10 这种冗余性更高的方式；\n 6. 需要监控磁盘空间利用率并报警。\n\n\n# 网络传输\n\n   网络传输会有两个部分：\n\n * 临时数据的网络传输，某个阶段的任务需要上个阶段的数据时会用 http 协议请求所需文件，需要保证传输时间小于计算时间。\n   \n   举例： 传输往往和计算是同步进行的\n   \n   传输时间 > 计算时间 资源闲置，计算资源等待网络资源，拉长整个扇区封装的声明周期，就是降产\n   \n   传输时间 < 计算时间 计算资源充分利用\n   \n   * 观察计算资源是否出现闲置\n   \n   * 计算网络传输速度能否满足计算时间\n     \n     Precommit2 如果计算耗时 25 分钟，读取 440G 左右文件，写入 100G 左右文件\n     (440G * 1024 / 25 / 60) + (100G * 1024 / 25 / 60) = 单个线程所需的吞吐量\n   \n   * 多台机器同步阶段的文件传输\n     \n     我们有 A，B，C 三个机器分别负责 P1，P2，Commit\n     \n     当 A 机器开始 P1 时会向 B 机器的 P2 传输 32G 左右的 Unsealed\n     \n     当 B 机器开始 P2 时，A 机器的 P1 生成的 440G 左右所有文件会传输到 B 的机器上\n     \n     Commit 又分为 C1 和 C2.当 C 机器运行 C1 时需要 P1 和 P2 的所有文件，计算的结果通过内存直接传递给 C2，所以并不会在落盘新的文件\n\n * 最终数据传输，我们要知道当最终的存储也会成为我们的产量瓶颈（貌似和下面的不符合）\n   \n   1. 假设计算资源的产量是每天产出 6T 的算力，但如果存储的网络传输最大每天只能传输 5T，那么这就会导致产量的下降\n   \n   2. 如果我们使用了 NFS 这样的网络文件系统，当网络断开链接是，NFS 往往是会直接卡死的，所以可能需要设置 NFS 的超时机制\n\n\n# worker 的指令集加速\n\n   P1 阶段时，使用 SHA 指令集和不使用指令集会有巨大的差距，目前大多数矿工都采用 AMD 型号的 CPU 原因就是 SHA 指令集的关系，研究发现，使用 SHA 指令集基本可以跑进 250 分钟以内，但不使用 SHA 指令集能够跑进 420 分钟已经非常艰难了\n\n确保编译时使用RUSTFLAGS="-C target-cpu=native -g" FFI_BUILD_FROM_SOURCE="1" 源码编译filecoin-ffi库，如果cpu支持则启用SHA扩展，这会大幅提高扇区封装速度，源码编译（make deps）时特征如下:\n\n+ trap \'{ rm -f $__build_output_log_tmp; }\' EXIT\n+ local \'__rust_flags=--print native-static-libs -C target-feature=+sse2\'\n+ RUSTFLAGS=\'--print native-static-libs -C target-feature=+sse2\'\n+ cargo +nightly-2021-04-24 build --release --no-default-features --features multicore-sdr --features pairing,gpu\n+ tee /tmp/tmp.IYtnd3xka9\n   Compiling autocfg v1.0.1\n   Compiling libc v0.2.97\n   Compiling cfg-if v1.0.0\n   Compiling proc-macro2 v1.0.27\n   Compiling unicode-xid v0.2.2\n   Compiling syn v1.0.73\n   Compiling lazy_static v1.4.0\n   Compiling cc v1.0.68\n   Compiling typenum v1.13.0\n   Compiling serde_derive v1.0.126\n   Compiling serde v1.0.126\n\n\n\n# 核数限制\n\n当想要把 CPU 的资源利用的更高时，需要非常合理的规划 CPU 的使用，比如有一个 64 核的 CPU，我们要想 PreCommit2 和 Commit 分别分到 32 核，这样两种任务相互不受影响，也不会导致某一个占用大量的计算资源导致另一个卡住的情况，此时我们就需要利用到核数限制\n\n * 通过taskset限核\n\n# 当我们想要启动某个进程时，可以通过 taskset -c 0-31 这种方式来进行限核操作\n# 例如\n\nTRUST_PARAMS=1 nohup taskset -c 0-32 ./venus-worker run \\\n--miner-addr=</ip4/sealer-ip/tcp/sealer-port> \\\n--miner-token=<token> \\  \n--listen=<0.0.0.0:3458> <flags> >> worker.log 2>&1 &\\\n\n# 扩展使用 taskset -c 0-9,19-29,39-49 进行跳跃式限核\n\n\n这种方式的弊端就在于不方便在程序运行时对核数进行实时调整\n\n * 通过 Cgrep 限核\n\n# 好的目录划分会帮助对多个进程的管理\nsudo mkdir -p /sys/fs/cgroup/cpuset/Pre1-worker\n\n# 设置能够使用的核数范围\nsudo echo 0-31 > /sys/fs/cgroup/cpuset/Pre1-worker/cpuset.cpus\n\n# 加入进程的PID\nsudo echo <PID> > /sys/fs/cgroup/cpuset/Pre1-worker/cgroup.procs\n\n\nCgrep 是在进程启动之后加入到配置文件的，并且支持实时的修改核数限制，当然也可以尝试使用 docker 限核，但 docker 的限核也是通过 Cgrep 来实现，至于 Cgrep 其他的用法我们基本都用不到，就不一一说明了\n\n\n# worker 运行方式和资源消耗\n\n\n# P1 阶段\n\n * P1 阶段的加速因子\n\nexport FIL_PROOFS_MAXIMIZE_CACHING=1  # 控制cache文件缓存到内存中，起到加速作用，会占用56G内存\n  \nexport FIL_PROOFS_USE_MULTICORE_SDR=1 # 控制P1阶段是否使用多核运行，他会占用单个CPU组，所以每个CPU缓存组只会运行一个任务\n\n\nP1阶段有两种选择，可以选择更快的速度或者更少的 CPU，需要根据实际资源决定。\n\n * P1 的内存资源消耗\n\n# 内存中会存储56G的cache文件\n# 加上2层layer文件，32G的矿工每层文件32G，64G每层文件64G\n  \n# 以32G矿工为例，如果我们同时运行了10个任务\n  \n56G cahce 文件 + 32 *2 * 并行线程数 = 696G Mem\n\n\n * P1 的磁盘资源消耗\n\n# 11层layer文件 \n  \n# 64G的tree-d文件\n  \n# 32G的unsealed文件\n  \n11 * 32G + 64 + 32 = 440G\n\n\n\n# P2 阶段\n\n * P2 的加速因子有两个\n\nexport FIL_PROOFS_USE_GPU_COLUMN_BUILDER=1  # 使用GPU运算tree-r-last阶段\n   \nexport FIL_PROOFS_USE_GPU_TREE_BUILDER=1 # 使用GPU运算tree-c阶段\n   \n# 任何环境变量都不增加的情况下使用CPU运算\n\n\n从实验结果来看使用 GPU 运算要明显比 CPU 快得多，而 CPU 运算时的核数，主频跟时间是成线性比例的，CPU 核数越多速度越快，主频越高越快，反之亦然。\n\n * P2 内存资源\n\n--precommit2   enable precommit2 (32G sectors: all cores, 96GiB Memory) (default: true)\n  \n# 在命令行中可以看到运行一个需要96GiB的内存，如果并行2个就是2倍\n\n\n * P2 的磁盘资源消耗\n\n# 32G\n# 8个tree-c文件，每个 4.6G左右\n  \n# 8个tree-r-last,每个9.2M\n  \n# t_aux，4K，p_aux，4K\n\n# 32G的sealed文件\n  \n----------------------\n# 64G\n# 16个tree-c文件，每个 4.6G左右\n  \n# 16个tree-r-last,每个9.2M\n  \n# t_aux，4K，p_aux，4K\n\n# 64G的sealed文件\n\n\n\n# Commit\n\n * Commit 中的 C1 的磁盘资源消耗\n\n# C1需要前面2个阶段产生的所有文件\n\nP1 440G + P2 79G = 519G \n\n# 每个C1的任务需要消耗487G左右的空间\n\n\nC1 并没有太多的 CPU 消耗，并且时间极短\n\n * Commit 中的 C2 的运行方式，CPU 和 GPU\n\nBELLMAN_NO_GPU=1 # 禁用GPU\n\nBELLMAN_CUSTOM_GPU="GeForce RTX 3090:10496" \n# 指定GPU的cuda核心数，当GPU型号比较冷门无法识别时可使用\n\n\n * C2 的内存资源消耗\n\nenable commit (32G sectors: all cores or GPUs, 128GiB Memory + 64GiB swap) (default: true)\n\n# 命令行中指出总共需要 128G + 64 G = 192G的内存\n\n\n\n# 产量优化\n\n\n# 产量的计算公式\n\n  每个阶段的效率：\n\n 产出数量 / 时间 = 效率\n \n # 得到效率之后，我们就可以很轻松的算出产量\n \n 效率/h/个数 * 24h * 32G = 日产量\n\n\n例如我们有 1 台机器\n\nP1:240 分钟\n\nP2:30 分钟\n\nCommit：35 分钟\n\n此时我们可以简单一个计算公式的表格\n\n运行阶段     时间/M   并行线程数   效率/时间H/个数      计算公式\nP1       240    1       0.25           = 1 / (240 /60)\nP2       30     1       2              = 1 / (30 /60)\nCommit   35     1       1.7142857143   = 1 / (35 /60)\n\n# 如何找到每个阶段的最佳运行数量和配置\n\n   从上面的表格中我们明显看出 P1 的效率明显不足，而此时 P2 和 Commit 机器必定会闲置，如何处理呢？产出的时间无法调整，那么我们就可以调整并行的线程数，当然我们可以新增一些计算内存的公式来指导我们对内存的消耗\n\n运行阶段     时间/M   并行线程数   效率/时间H/个数      计算公式              日产量/G         公式          MEM/G\nP1       240    7       1.75           = 7 / (240 /60)   1344          =7*64+56    504\nP2       30     1       2              = 1 / (30 /60)    1536          =1*96       96\nCommit   35     1       1.7142857143   = 1 / (35 /60)    1316.571429   =1*128+64   192\n\n现在三个阶段的效率已经非常接近了，但是此时我们仍然存在一些问题：\n\n 1. Commit 效率低于 P1，这会导致大量的任务阻塞到 Commit 阶段\n 2. 当某个阶段的效率过高时就会出现闲置\n 3. 我们需要微调资源的分布来尽可能的保证每个阶段的效率无限相等\n\n# 集群方案运行的的可能性\n\n当我们有多台机器时，我们就要决定某些机器运行哪些阶段，在这之前我们再来看下不同阶段的特性：\n\n 1. P1 : 极度消耗内存，可以单核，多核，并行运行，临时存储需要伴随着并行数量的增多而增多\n 2. P2 : 轻度消耗内存，CPU，GPU 都可以运行，如果拆分，需要传输大量的文件\n 3. Commit: 中度消耗内存，CPU，GPU 都可以运行，如果拆分，需要传输所有临时文件\n\n如果我们此时只考虑这些因素，那么我们的组合方式有多少种呢？而这些不同的组合方式一定会带来不通的产量，虽然每个矿工的机器都有所不同，但我们的目标是一样的：\n\n 1. 更高的产量组合运行方式\n 2. 各个阶段更加均衡的分布\n\n我们可能无法做到完美，但无限接近也是最好的结果\n\n# 如何寻找最佳的下发任务数，始终保持机器满负荷运行\n\n  当我们找到最佳的组合方式之后我们需要考虑的就是如何才能保证这些机器 24 小时都是不间断运行的呢？我们不希望任何一个阶段的出现闲置\n\n当我们发现 P1 需要并行 7 个时，那么我们如果保证 P1 的任务量是充足的，那么后续的两个阶段在不考虑其他问题的情况下，也一定是充足的，所以我们需要保证始终维持 P1 时刻都有 7 个任务\n\n# 在 venus-sealer 的配置文件中我们可以设置最大的任务数，这可以帮我我们避免任务数下发过多\n\nDataDir = "~/.venussealer"\n\n[API]\n  ListenAddress = "/ip4/0.0.0.0/tcp/2345/http"\n  RemoteListenAddress = "192.168.200.6:2345"\n  Timeout = "30s"\n\n[Sealing]\n  MaxWaitDealsSectors = 0\n  MaxSealingSectors = 7    # 修改为 7\n  MaxSealingSectorsForDeals = 0\n\n\n此时我们可以通过一个简单的定时脚本就可以做到，始终维持最佳的任务量了\n\n\n# 损失和止损\n\n  如果一个任务执行错误之后又被反复的重试，这就像我们有 7 个通道进行算力的封装，但是此时有一通道阻塞或者损坏，这就会降低我们 1 / 7 的产量，所以及时的处理错误也是非常重要的\n\n * 何种情况下应该立刻抛弃任务\n   \n   1. ticket 过期\n   2. Commit 过期\n   3. 依赖文件损坏重试多次都未成功时;\n\n * 移除无法完成的 sector\n\nvenus-sealer sectors remove --really-do-it <sectorNum>\n\n\n如遇到无法彻底删除请查询：顽固扇区如何删除',normalizedContent:'# venus-集群最大化利用资源增长算力方案\n\n   在 filecoin 的网络中，算力大小至关重要，与矿工的收入息息相关。算力的增长与维持需要软硬件资源较多，每个扇区的密封需要 p1、p2、c1，c2 等 诸多过程，并且每个过程所依赖的资源各不相同，如：p1 偏向多核 cpu，p4 可用 gpu 优化等。故如何找出能最大化利用现有资源提升算力的方案是一个复杂的过程。这篇文章为如何找出最优方案提供一些思路。\n\n\n# 总体思路\n\n> 本文方案是通过各个阶段的任务耗时来推算如何均衡的分配各阶段任务的机器数量占比\n\n * 根据实际场景，将所有加速配置都打开，做几个 sector，统计每个阶段任务耗时。每个阶段对硬件资源的的依赖如下：\n   * p1：cpu 及磁盘 io\n   * p2：cpu，gpu，带宽及磁盘 io\n   * c1-c2：cpu，gpu，带宽及磁盘 io\n\n> 这里多做几个是为了统计出较稳定的耗时，此阶段需保持加速设置及软硬件资源始终不变。\n\n * 维持任务数平衡，即每个机器都有任何时刻都有任务可做，理论上每个阶段任务数与耗时成反比；\n\n * 扇区任务由 pledge 命令控制，配合最大并发密封扇区数（maxsealingsectors）管理集群中 sector 并发数量；\n\n * 每个 worker 可以指定可接受的任务类型。\n\n\n# 任务耗时统计\n\n   worker 可以领取的任务类型有：\n\nttaddpiece   tasktype = "seal/v0/addpiece"\nttprecommit1 tasktype = "seal/v0/precommit/1"\nttprecommit2 tasktype = "seal/v0/precommit/2"\nttcommit1    tasktype = "seal/v0/commit/1" // note: we use this to transfer the sector into miner-local storage for now; don\'t use on workers!\nttcommit2    tasktype = "seal/v0/commit/2"\n\nttfinalize tasktype = "seal/v0/finalize"\n\nttfetch  tasktype = "seal/v0/fetch"\nttunseal tasktype = "seal/v0/unseal"\n\n\n\n   每个任务都分为两个阶段：prepare 阶段和 worker 阶段，在日志中表现为：\n\n# seal/v0/fetch\n2021-08-03t14:00:07.925+0800    info    advmgr  sector-storage/sched_worker.go:401      sector 7 prepare for seal/v0/fetch ...\n2021-08-03t14:05:36.772+0800    info    advmgr  sector-storage/sched_worker.go:403      sector 7 prepare for seal/v0/fetch end ...\n\n2021-08-03t14:05:36.772+0800    info    advmgr  sector-storage/sched_worker.go:442      sector 7 work for seal/v0/fetch ...\n2021-08-03t14:05:36.774+0800    info    advmgr  sector-storage/sched_worker.go:444      sector 7 work for seal/v0/fetch end ...\n\n# seal/v0/addpiece\n2021-08-03t13:38:37.977+0800    info    advmgr  sector-storage/sched_worker.go:401      sector 8 prepare for seal/v0/addpiece ...\n2021-08-03t13:38:37.978+0800    info    advmgr  sector-storage/sched_worker.go:403      sector 8 prepare for seal/v0/addpiece end ...\n\n2021-08-03t13:38:37.978+0800    info    advmgr  sector-storage/sched_worker.go:442      sector 8 work for seal/v0/addpiece ...\n2021-08-03t13:44:26.295+0800    info    advmgr  sector-storage/sched_worker.go:444      sector 8 work for seal/v0/addpiece end ...\n\n# seal/v0/commit/2\n2021-08-03t13:26:02.119+0800    info    advmgr  sector-storage/sched_worker.go:401      sector 7 prepare for seal/v0/commit/2 ...\n2021-08-03t13:26:02.119+0800    info    advmgr  sector-storage/sched_worker.go:403      sector 7 prepare for seal/v0/commit/2 end ...\n\n2021-08-03t13:26:02.119+0800    info    advmgr  sector-storage/sched_worker.go:442      sector 7 work for seal/v0/commit/2 ...\n2021-08-03t13:49:46.180+0800    info    advmgr  sector-storage/sched_worker.go:444      sector 7 work for seal/v0/commit/2 end ...\n\n# seal/v0/finalize\n2021-08-03t13:54:17.414+0800    info    advmgr  sector-storage/sched_worker.go:401      sector 7 prepare for seal/v0/finalize ...\n2021-08-03t13:59:30.471+0800    info    advmgr  sector-storage/sched_worker.go:403      sector 7 prepare for seal/v0/finalize end ...\n\n2021-08-03t13:59:30.471+0800    info    advmgr  sector-storage/sched_worker.go:442      sector 7 work for seal/v0/finalize ...\n2021-08-03t14:00:07.915+0800    info    advmgr  sector-storage/sched_worker.go:444      sector 7 work for seal/v0/finalize end ...\n\n\n\n   可以看出有些任务在 prepare 阶段比较耗时，有些在 work 阶段比较耗时，一般来说需要网路传输，带宽资源的在 prepare 比较耗时，如 fetch，finalize 等；而需要计算的任务在 work 阶段比较耗时，如 ap，p1，p2，c2 等。\n\n   为了便于计算，这里将任务阶段进行合并，主要分为：ap，p1，p2，c2 阶段，将这四个阶段之前的仍无耗时统一归为相应阶段的耗时，如 t（p1）=p1 耗时+p1 前的 fetch 耗时。这里 waitseed 怎么归类，在后面的时间逻辑中有没有考虑进去\n\n\n# 速率因子\n\n\n# 临时存储设备\n\n  filecoin 在封装算力是会产生一些临时文件，在任务的进行中存在很多随机存取，这就要求磁盘吞吐量不能太差，否则会导致磁盘 io 过高，计算资源等待磁盘读取处于闲置状态。\n\n * 如何挑选适合的设备\n\n  如何寻找适合的设备，其实就是需要多少的磁盘吞吐量，可以通过一个简单的计算公式得到它。\n\n文件大小 * 线程并行数量 / 运行时间 = 平均每秒钟传输速度\n  \n因为每个阶段的吞吐不同，拆分计算可以让得到的数据更精准\n  \np1 读取 + p1 写入 = p1 阶段所需的吞吐量，其他阶段相同，把所有阶段所需的吞吐加起来就得到了所需的吞吐量，当然需要一些性能上的冗余\n\n\n  通常情况下绝大多数的矿工都会使用 ssd 或者 nvme，当有多块硬盘时我们可以通过venus-worker storage attach --seal </path/>命令或者启动多个 worker 来设置多个路径，但这并不是一个比较好的方法，路径过于分散会导致后续的维护相对复杂，无法充分利用，通过创建 raid 方式可以获得更好的性能和空间利用率，并且便于后续的维护。\n\n * 软 raid 创建\n\nmdadm -c /dev/md1 -l 0 -n 2 /dev/sdb1 /dev/sdc1\nmdadm -c /dev/md2 -l 5 -n 6 /dev/sd[b-g]1\n-c $创建软件raid\n-l $指定raid级别  1表示raid1  其他同理  \n-n $指定磁盘个数\n-x $指定备用设备个数\n-a $重组之前的设备\n\n\n有关 mdadm 用法、md 和各种级别的 raid 的更多信息，请参阅：http://raid.wiki.kernel.org/\n\n获取最新版本的 mdadm 应始终可以从如下链接获取：http://www.kernel.org/pub/linux/utils/raid/mdadm/\n\n硬 raid 创建时请查看您的 raid 卡型号和说明进行操作\n\n\n# 永久存储设备\n\n   永久存储设备的访问机制和可能遇到的问题：\n\n 1. 在每个任务阶段产生的文件有些是要永久存储的，用于 wdpost 或 winningpost，在每个 sector 完成阶段需要传输到永久存储目录，这个过程需要带宽资源，并且要保证磁盘 io；\n 2. wdpost 大量的随机读取非常小的文件，这可能会导致读取过慢而影响时空证明导致算力惩罚；\n 3. 当存储过于集中时，少量的机器损坏会导致所有的数据丢失；\n 4. 当磁盘过多时，并且盘符没有固定，启动时可能导致盘符移动；\n 5. 如果是 raid，尽量选择 raid5 或者 raid6，raid10 这种冗余性更高的方式；\n 6. 需要监控磁盘空间利用率并报警。\n\n\n# 网络传输\n\n   网络传输会有两个部分：\n\n * 临时数据的网络传输，某个阶段的任务需要上个阶段的数据时会用 http 协议请求所需文件，需要保证传输时间小于计算时间。\n   \n   举例： 传输往往和计算是同步进行的\n   \n   传输时间 > 计算时间 资源闲置，计算资源等待网络资源，拉长整个扇区封装的声明周期，就是降产\n   \n   传输时间 < 计算时间 计算资源充分利用\n   \n   * 观察计算资源是否出现闲置\n   \n   * 计算网络传输速度能否满足计算时间\n     \n     precommit2 如果计算耗时 25 分钟，读取 440g 左右文件，写入 100g 左右文件\n     (440g * 1024 / 25 / 60) + (100g * 1024 / 25 / 60) = 单个线程所需的吞吐量\n   \n   * 多台机器同步阶段的文件传输\n     \n     我们有 a，b，c 三个机器分别负责 p1，p2，commit\n     \n     当 a 机器开始 p1 时会向 b 机器的 p2 传输 32g 左右的 unsealed\n     \n     当 b 机器开始 p2 时，a 机器的 p1 生成的 440g 左右所有文件会传输到 b 的机器上\n     \n     commit 又分为 c1 和 c2.当 c 机器运行 c1 时需要 p1 和 p2 的所有文件，计算的结果通过内存直接传递给 c2，所以并不会在落盘新的文件\n\n * 最终数据传输，我们要知道当最终的存储也会成为我们的产量瓶颈（貌似和下面的不符合）\n   \n   1. 假设计算资源的产量是每天产出 6t 的算力，但如果存储的网络传输最大每天只能传输 5t，那么这就会导致产量的下降\n   \n   2. 如果我们使用了 nfs 这样的网络文件系统，当网络断开链接是，nfs 往往是会直接卡死的，所以可能需要设置 nfs 的超时机制\n\n\n# worker 的指令集加速\n\n   p1 阶段时，使用 sha 指令集和不使用指令集会有巨大的差距，目前大多数矿工都采用 amd 型号的 cpu 原因就是 sha 指令集的关系，研究发现，使用 sha 指令集基本可以跑进 250 分钟以内，但不使用 sha 指令集能够跑进 420 分钟已经非常艰难了\n\n确保编译时使用rustflags="-c target-cpu=native -g" ffi_build_from_source="1" 源码编译filecoin-ffi库，如果cpu支持则启用sha扩展，这会大幅提高扇区封装速度，源码编译（make deps）时特征如下:\n\n+ trap \'{ rm -f $__build_output_log_tmp; }\' exit\n+ local \'__rust_flags=--print native-static-libs -c target-feature=+sse2\'\n+ rustflags=\'--print native-static-libs -c target-feature=+sse2\'\n+ cargo +nightly-2021-04-24 build --release --no-default-features --features multicore-sdr --features pairing,gpu\n+ tee /tmp/tmp.iytnd3xka9\n   compiling autocfg v1.0.1\n   compiling libc v0.2.97\n   compiling cfg-if v1.0.0\n   compiling proc-macro2 v1.0.27\n   compiling unicode-xid v0.2.2\n   compiling syn v1.0.73\n   compiling lazy_static v1.4.0\n   compiling cc v1.0.68\n   compiling typenum v1.13.0\n   compiling serde_derive v1.0.126\n   compiling serde v1.0.126\n\n\n\n# 核数限制\n\n当想要把 cpu 的资源利用的更高时，需要非常合理的规划 cpu 的使用，比如有一个 64 核的 cpu，我们要想 precommit2 和 commit 分别分到 32 核，这样两种任务相互不受影响，也不会导致某一个占用大量的计算资源导致另一个卡住的情况，此时我们就需要利用到核数限制\n\n * 通过taskset限核\n\n# 当我们想要启动某个进程时，可以通过 taskset -c 0-31 这种方式来进行限核操作\n# 例如\n\ntrust_params=1 nohup taskset -c 0-32 ./venus-worker run \\\n--miner-addr=</ip4/sealer-ip/tcp/sealer-port> \\\n--miner-token=<token> \\  \n--listen=<0.0.0.0:3458> <flags> >> worker.log 2>&1 &\\\n\n# 扩展使用 taskset -c 0-9,19-29,39-49 进行跳跃式限核\n\n\n这种方式的弊端就在于不方便在程序运行时对核数进行实时调整\n\n * 通过 cgrep 限核\n\n# 好的目录划分会帮助对多个进程的管理\nsudo mkdir -p /sys/fs/cgroup/cpuset/pre1-worker\n\n# 设置能够使用的核数范围\nsudo echo 0-31 > /sys/fs/cgroup/cpuset/pre1-worker/cpuset.cpus\n\n# 加入进程的pid\nsudo echo <pid> > /sys/fs/cgroup/cpuset/pre1-worker/cgroup.procs\n\n\ncgrep 是在进程启动之后加入到配置文件的，并且支持实时的修改核数限制，当然也可以尝试使用 docker 限核，但 docker 的限核也是通过 cgrep 来实现，至于 cgrep 其他的用法我们基本都用不到，就不一一说明了\n\n\n# worker 运行方式和资源消耗\n\n\n# p1 阶段\n\n * p1 阶段的加速因子\n\nexport fil_proofs_maximize_caching=1  # 控制cache文件缓存到内存中，起到加速作用，会占用56g内存\n  \nexport fil_proofs_use_multicore_sdr=1 # 控制p1阶段是否使用多核运行，他会占用单个cpu组，所以每个cpu缓存组只会运行一个任务\n\n\np1阶段有两种选择，可以选择更快的速度或者更少的 cpu，需要根据实际资源决定。\n\n * p1 的内存资源消耗\n\n# 内存中会存储56g的cache文件\n# 加上2层layer文件，32g的矿工每层文件32g，64g每层文件64g\n  \n# 以32g矿工为例，如果我们同时运行了10个任务\n  \n56g cahce 文件 + 32 *2 * 并行线程数 = 696g mem\n\n\n * p1 的磁盘资源消耗\n\n# 11层layer文件 \n  \n# 64g的tree-d文件\n  \n# 32g的unsealed文件\n  \n11 * 32g + 64 + 32 = 440g\n\n\n\n# p2 阶段\n\n * p2 的加速因子有两个\n\nexport fil_proofs_use_gpu_column_builder=1  # 使用gpu运算tree-r-last阶段\n   \nexport fil_proofs_use_gpu_tree_builder=1 # 使用gpu运算tree-c阶段\n   \n# 任何环境变量都不增加的情况下使用cpu运算\n\n\n从实验结果来看使用 gpu 运算要明显比 cpu 快得多，而 cpu 运算时的核数，主频跟时间是成线性比例的，cpu 核数越多速度越快，主频越高越快，反之亦然。\n\n * p2 内存资源\n\n--precommit2   enable precommit2 (32g sectors: all cores, 96gib memory) (default: true)\n  \n# 在命令行中可以看到运行一个需要96gib的内存，如果并行2个就是2倍\n\n\n * p2 的磁盘资源消耗\n\n# 32g\n# 8个tree-c文件，每个 4.6g左右\n  \n# 8个tree-r-last,每个9.2m\n  \n# t_aux，4k，p_aux，4k\n\n# 32g的sealed文件\n  \n----------------------\n# 64g\n# 16个tree-c文件，每个 4.6g左右\n  \n# 16个tree-r-last,每个9.2m\n  \n# t_aux，4k，p_aux，4k\n\n# 64g的sealed文件\n\n\n\n# commit\n\n * commit 中的 c1 的磁盘资源消耗\n\n# c1需要前面2个阶段产生的所有文件\n\np1 440g + p2 79g = 519g \n\n# 每个c1的任务需要消耗487g左右的空间\n\n\nc1 并没有太多的 cpu 消耗，并且时间极短\n\n * commit 中的 c2 的运行方式，cpu 和 gpu\n\nbellman_no_gpu=1 # 禁用gpu\n\nbellman_custom_gpu="geforce rtx 3090:10496" \n# 指定gpu的cuda核心数，当gpu型号比较冷门无法识别时可使用\n\n\n * c2 的内存资源消耗\n\nenable commit (32g sectors: all cores or gpus, 128gib memory + 64gib swap) (default: true)\n\n# 命令行中指出总共需要 128g + 64 g = 192g的内存\n\n\n\n# 产量优化\n\n\n# 产量的计算公式\n\n  每个阶段的效率：\n\n 产出数量 / 时间 = 效率\n \n # 得到效率之后，我们就可以很轻松的算出产量\n \n 效率/h/个数 * 24h * 32g = 日产量\n\n\n例如我们有 1 台机器\n\np1:240 分钟\n\np2:30 分钟\n\ncommit：35 分钟\n\n此时我们可以简单一个计算公式的表格\n\n运行阶段     时间/m   并行线程数   效率/时间h/个数      计算公式\np1       240    1       0.25           = 1 / (240 /60)\np2       30     1       2              = 1 / (30 /60)\ncommit   35     1       1.7142857143   = 1 / (35 /60)\n\n# 如何找到每个阶段的最佳运行数量和配置\n\n   从上面的表格中我们明显看出 p1 的效率明显不足，而此时 p2 和 commit 机器必定会闲置，如何处理呢？产出的时间无法调整，那么我们就可以调整并行的线程数，当然我们可以新增一些计算内存的公式来指导我们对内存的消耗\n\n运行阶段     时间/m   并行线程数   效率/时间h/个数      计算公式              日产量/g         公式          mem/g\np1       240    7       1.75           = 7 / (240 /60)   1344          =7*64+56    504\np2       30     1       2              = 1 / (30 /60)    1536          =1*96       96\ncommit   35     1       1.7142857143   = 1 / (35 /60)    1316.571429   =1*128+64   192\n\n现在三个阶段的效率已经非常接近了，但是此时我们仍然存在一些问题：\n\n 1. commit 效率低于 p1，这会导致大量的任务阻塞到 commit 阶段\n 2. 当某个阶段的效率过高时就会出现闲置\n 3. 我们需要微调资源的分布来尽可能的保证每个阶段的效率无限相等\n\n# 集群方案运行的的可能性\n\n当我们有多台机器时，我们就要决定某些机器运行哪些阶段，在这之前我们再来看下不同阶段的特性：\n\n 1. p1 : 极度消耗内存，可以单核，多核，并行运行，临时存储需要伴随着并行数量的增多而增多\n 2. p2 : 轻度消耗内存，cpu，gpu 都可以运行，如果拆分，需要传输大量的文件\n 3. commit: 中度消耗内存，cpu，gpu 都可以运行，如果拆分，需要传输所有临时文件\n\n如果我们此时只考虑这些因素，那么我们的组合方式有多少种呢？而这些不同的组合方式一定会带来不通的产量，虽然每个矿工的机器都有所不同，但我们的目标是一样的：\n\n 1. 更高的产量组合运行方式\n 2. 各个阶段更加均衡的分布\n\n我们可能无法做到完美，但无限接近也是最好的结果\n\n# 如何寻找最佳的下发任务数，始终保持机器满负荷运行\n\n  当我们找到最佳的组合方式之后我们需要考虑的就是如何才能保证这些机器 24 小时都是不间断运行的呢？我们不希望任何一个阶段的出现闲置\n\n当我们发现 p1 需要并行 7 个时，那么我们如果保证 p1 的任务量是充足的，那么后续的两个阶段在不考虑其他问题的情况下，也一定是充足的，所以我们需要保证始终维持 p1 时刻都有 7 个任务\n\n# 在 venus-sealer 的配置文件中我们可以设置最大的任务数，这可以帮我我们避免任务数下发过多\n\ndatadir = "~/.venussealer"\n\n[api]\n  listenaddress = "/ip4/0.0.0.0/tcp/2345/http"\n  remotelistenaddress = "192.168.200.6:2345"\n  timeout = "30s"\n\n[sealing]\n  maxwaitdealssectors = 0\n  maxsealingsectors = 7    # 修改为 7\n  maxsealingsectorsfordeals = 0\n\n\n此时我们可以通过一个简单的定时脚本就可以做到，始终维持最佳的任务量了\n\n\n# 损失和止损\n\n  如果一个任务执行错误之后又被反复的重试，这就像我们有 7 个通道进行算力的封装，但是此时有一通道阻塞或者损坏，这就会降低我们 1 / 7 的产量，所以及时的处理错误也是非常重要的\n\n * 何种情况下应该立刻抛弃任务\n   \n   1. ticket 过期\n   2. commit 过期\n   3. 依赖文件损坏重试多次都未成功时;\n\n * 移除无法完成的 sector\n\nvenus-sealer sectors remove --really-do-it <sectornum>\n\n\n如遇到无法彻底删除请查询：顽固扇区如何删除',charsets:{cjk:!0}},{title:"部署Venus解决方案",frontmatter:{},regularPath:"/zh/operation/",relativePath:"zh/operation/README.md",key:"v-2b7be474",path:"/zh/operation/",headers:[{level:2,title:"部署Venus解决方案",slug:"部署venus解决方案",normalizedTitle:"部署venus解决方案",charIndex:2},{level:3,title:"部署",slug:"部署",normalizedTitle:"部署",charIndex:2},{level:3,title:"架构",slug:"架构",normalizedTitle:"架构",charIndex:219}],lastUpdated:"2024/8/6 05:04:12",headersStr:"部署Venus解决方案 部署 架构",content:"# 部署Venus解决方案\n\nVenus泛指一系列与filecoin协议稳定/高效互动的软件产品。Venus的，目标群体大致分为4类。SP存储提供者，SC存储客户，生态合作伙伴，以及去中心化应用Dapp。Venus解决方案当前被广泛应用于SP和SC的场景中。\n\n\n# 部署\n\n经过Venus在 2022 年底的品牌重塑之后，Venus拆分出 3 个产品，分别是智子，执剑人以及水滴。关于各产品的具体部署流程，请参见各产品的文档。\n\n\n# 架构",normalizedContent:"# 部署venus解决方案\n\nvenus泛指一系列与filecoin协议稳定/高效互动的软件产品。venus的，目标群体大致分为4类。sp存储提供者，sc存储客户，生态合作伙伴，以及去中心化应用dapp。venus解决方案当前被广泛应用于sp和sc的场景中。\n\n\n# 部署\n\n经过venus在 2022 年底的品牌重塑之后，venus拆分出 3 个产品，分别是智子，执剑人以及水滴。关于各产品的具体部署流程，请参见各产品的文档。\n\n\n# 架构",charsets:{cjk:!0}},{title:"venus-wallet 健康状态检查：",frontmatter:{},regularPath:"/zh/operation/Independent_com_access_analysis.html",relativePath:"zh/operation/Independent_com_access_analysis.md",key:"v-813ddbca",path:"/zh/operation/Independent_com_access_analysis.html",headers:[{level:3,title:"venus-wallet 健康状态检查：",slug:"venus-wallet-健康状态检查",normalizedTitle:"venus-wallet 健康状态检查：",charIndex:2},{level:3,title:"Venus-sealer 健康状态检查：",slug:"venus-sealer-健康状态检查",normalizedTitle:"venus-sealer 健康状态检查：",charIndex:1064},{level:3,title:"venus-worker 健康状态检查：",slug:"venus-worker-健康状态检查",normalizedTitle:"venus-worker 健康状态检查：",charIndex:1179}],lastUpdated:"2024/8/6 05:04:12",headersStr:"venus-wallet 健康状态检查： Venus-sealer 健康状态检查： venus-worker 健康状态检查：",content:'# venus-wallet 健康状态检查：\n\n# 1、启动\n\n可以看到 venus-wallet 连接到的 gateway 节点地址信息和 venus-gateway 建立连接的会话 ID 信息\n\nwallet_event/listenevent.go:173\trestarting listenWalletRequestOnce\t{"api hub": "/dns/gateway.filincubator.com/tcp/83/wss"}\nwallet_event/listenevent.go:200\tconnect to server 9ad36ec8-4a47-4f84-b618-e89cf03f6f38\t{"api hub": "/dns/gateway.filincubator.com/tcp/83/wss"\n\n\n但如果有类似如下的报错信息，则为异常启动：\n\n ERROR   wallet_event    wallet_event/listenevent.go:236 WalletSign error password not set       {"api hub": "/dns/gateway.filincubator.com/tcp/83/wss"}\n\n\n从日志报 venus-wallet 的密码没有设置，需要执行**./venus-wallet setpwd**来配置 wallet 的密码。\n\n# 2、锁定钱包\n\n如下执行以下命令，则可以上锁钱包，建议不要尝试:\n\n./venus-wallet  lock\nPassword:******\nwallet lock successfully\n\n\n此时，在日志中会有一条如下信息：\n\nWARN  rpc  go-jsonrpc@v1.1ec/handler.go:279  error in RPC call to \'Filecoin.Unlock\': wallet already unlocked\n\n\n现在 venus-wallet 已经上锁了，这个会影响 venus-sealer 发送到 venus-message 的消息不会被签名，如下图：\n\n\n\n可以执行如下命令，解锁 venus-wallet，可以对 venus-sealer 发出来的消息进行签名后，由 venus 节点向链上发送\n\n./venus-wallet  unlock\nPassword:******\nwallet unlock successfully\n\n\n\n# Venus-sealer 健康状态检查：\n\n主要可以从输出的日志中看到版本信息、节点同步状态、加载证明参数文件、本地存储 id 和 venus-sealer 连接到 venus-gateway 节点的会话建立等信息；\n\n\n\n\n# venus-worker 健康状态检查：\n\n INFO    main    venus-worker/main.go:158        Starting venus worker\n INFO    main    venus-worker/main.go:188        config: {~/.venusworker/config.toml ~/.venusworker {/ip4/10.108.2.42/tcp/6666 eyJhbGciOiJIUzaW4iXX0.4ZDslo6-8kD74} {sqlite {    0 0 0s} {worker.db}}}\n INFO    main    venus-worker/main.go:255        Remote version 1.0.2+api1.2.0\n WARN    paramfetch      go-paramfetch@v0.0.2-0.20210614165157-25a6c7769498/paramfetch.go:158    Assuming parameter files are ok. DO NOT USE IN PRODUCTION\n WARN    paramfetch      go-paramfetch@v0.0.2-0.20210614165157-25a6c7769498/paramfetch.go:158    Assuming parameter files are ok. DO NOT USE IN PRODUCTION\n INFO    paramfetch      go-paramfetch@v0.0.2-0.20210614165157-25a6c7769498/paramfetch.go:207    parameter and key-fetching complete\n INFO    main    venus-worker/main.go:306        Acceptable task types: [seal/v0/fetch seal/v0/commit/1 seal/v0/finalize seal/v0/commit/2]\n INFO    main    venus-worker/main.go:356        Opening local storage; connecting to master\n INFO    main    venus-worker/main.go:408        Setting up control endpoint at 10.121.2.214:5555\n INFO    main    venus-worker/main.go:507        Making sure no local tasks are running\n INFO    main    venus-worker/main.go:530        Worker registered successfully, waiting for tasks\n\n\n可以从 venus-worker 日志中，看到 venus-worker 启动后加载的配置文件目录，监控的端口号；以及在启动之后注册到 venus-sealer 上，等待获取任务。\n\n如下输出以下信息，则说明 venus-worker 已经获得了新的任务：\n\nINFO filcrypto::proofs::api > seal_commit_phase2: start\nINFO filecoin_proofs::api::seal > seal_commit_phase2:start: SectorId(1000054)\nINFO filecoin_proofs::caches > trying parameters memory cache for: STACKED[34359738368]\nINFO filecoin_proofs::caches > no params in memory cache for STACKED[34359738368]\nINFO storage_proofs_core::parameter_cache > parameter set identifier for cache: layered_drgporep::PublicParams{ graph: stacked_graph::StackedGraph{expansion_degree: 8 base_graph\n',normalizedContent:'# venus-wallet 健康状态检查：\n\n# 1、启动\n\n可以看到 venus-wallet 连接到的 gateway 节点地址信息和 venus-gateway 建立连接的会话 id 信息\n\nwallet_event/listenevent.go:173\trestarting listenwalletrequestonce\t{"api hub": "/dns/gateway.filincubator.com/tcp/83/wss"}\nwallet_event/listenevent.go:200\tconnect to server 9ad36ec8-4a47-4f84-b618-e89cf03f6f38\t{"api hub": "/dns/gateway.filincubator.com/tcp/83/wss"\n\n\n但如果有类似如下的报错信息，则为异常启动：\n\n error   wallet_event    wallet_event/listenevent.go:236 walletsign error password not set       {"api hub": "/dns/gateway.filincubator.com/tcp/83/wss"}\n\n\n从日志报 venus-wallet 的密码没有设置，需要执行**./venus-wallet setpwd**来配置 wallet 的密码。\n\n# 2、锁定钱包\n\n如下执行以下命令，则可以上锁钱包，建议不要尝试:\n\n./venus-wallet  lock\npassword:******\nwallet lock successfully\n\n\n此时，在日志中会有一条如下信息：\n\nwarn  rpc  go-jsonrpc@v1.1ec/handler.go:279  error in rpc call to \'filecoin.unlock\': wallet already unlocked\n\n\n现在 venus-wallet 已经上锁了，这个会影响 venus-sealer 发送到 venus-message 的消息不会被签名，如下图：\n\n\n\n可以执行如下命令，解锁 venus-wallet，可以对 venus-sealer 发出来的消息进行签名后，由 venus 节点向链上发送\n\n./venus-wallet  unlock\npassword:******\nwallet unlock successfully\n\n\n\n# venus-sealer 健康状态检查：\n\n主要可以从输出的日志中看到版本信息、节点同步状态、加载证明参数文件、本地存储 id 和 venus-sealer 连接到 venus-gateway 节点的会话建立等信息；\n\n\n\n\n# venus-worker 健康状态检查：\n\n info    main    venus-worker/main.go:158        starting venus worker\n info    main    venus-worker/main.go:188        config: {~/.venusworker/config.toml ~/.venusworker {/ip4/10.108.2.42/tcp/6666 eyjhbgcioijiuzaw4ixx0.4zdslo6-8kd74} {sqlite {    0 0 0s} {worker.db}}}\n info    main    venus-worker/main.go:255        remote version 1.0.2+api1.2.0\n warn    paramfetch      go-paramfetch@v0.0.2-0.20210614165157-25a6c7769498/paramfetch.go:158    assuming parameter files are ok. do not use in production\n warn    paramfetch      go-paramfetch@v0.0.2-0.20210614165157-25a6c7769498/paramfetch.go:158    assuming parameter files are ok. do not use in production\n info    paramfetch      go-paramfetch@v0.0.2-0.20210614165157-25a6c7769498/paramfetch.go:207    parameter and key-fetching complete\n info    main    venus-worker/main.go:306        acceptable task types: [seal/v0/fetch seal/v0/commit/1 seal/v0/finalize seal/v0/commit/2]\n info    main    venus-worker/main.go:356        opening local storage; connecting to master\n info    main    venus-worker/main.go:408        setting up control endpoint at 10.121.2.214:5555\n info    main    venus-worker/main.go:507        making sure no local tasks are running\n info    main    venus-worker/main.go:530        worker registered successfully, waiting for tasks\n\n\n可以从 venus-worker 日志中，看到 venus-worker 启动后加载的配置文件目录，监控的端口号；以及在启动之后注册到 venus-sealer 上，等待获取任务。\n\n如下输出以下信息，则说明 venus-worker 已经获得了新的任务：\n\ninfo filcrypto::proofs::api > seal_commit_phase2: start\ninfo filecoin_proofs::api::seal > seal_commit_phase2:start: sectorid(1000054)\ninfo filecoin_proofs::caches > trying parameters memory cache for: stacked[34359738368]\ninfo filecoin_proofs::caches > no params in memory cache for stacked[34359738368]\ninfo storage_proofs_core::parameter_cache > parameter set identifier for cache: layered_drgporep::publicparams{ graph: stacked_graph::stackedgraph{expansion_degree: 8 base_graph\n',charsets:{cjk:!0}},{title:"算力增加与维持部署参考方案 1",frontmatter:{},regularPath:"/zh/operation/Sealing_deploy_plan_1.html",relativePath:"zh/operation/Sealing_deploy_plan_1.md",key:"v-b1b87fde",path:"/zh/operation/Sealing_deploy_plan_1.html",headers:[{level:2,title:"集群规模：",slug:"集群规模",normalizedTitle:"集群规模：",charIndex:22},{level:2,title:"方案",slug:"方案",normalizedTitle:"方案",charIndex:13}],lastUpdated:"2024/8/6 05:04:12",headersStr:"集群规模： 方案",content:"# 算力增加与维持部署参考方案 1\n\n\n# 集群规模：\n\n * 机器：两台\n * 配置:128 核，1T 内存，双 3060Ti(GPU)\n\n\n# 方案\n\n * 建议每台机器各去掉一块 GPU，因为目前程序只能访问一块 GPU;\n\n * 安装 zabbix 监控\n\n * 因为单个机器上运行不同的任务，需要给每个 worker 限核，需关闭超线程以确保限核的精准\n   \n   # 绝大多数的主板都可以设置关闭超线程，但需要重新启动。我们通过一种方式关闭一半 CPU 的映射关系来做到相同的效果，这种方式不需要重启，但是每次重启都会失效。\n   \n   #!/bin/bash\n   for cpunum in $(cat /sys/devices/system/cpu/cpu*/topology/thread_siblings_list | cut -s -d, -f2- | tr ',' '\\n' | sort -un)\n   do\n       echo 0 > /sys/devices/system/cpu/cpu$cpunum/online\n   done\n   \n\n * 部署方案：\n\n * A 机器：venus-sealer 只做 wdpost 和 winningpost 的计算;跑一个 venus-worker 只做 AP，P1，P2（用 cpu 做）；\n\n./venus-sealer --network=mainnet init --actor=<MINER_ID> --node-url=/ip4/<IP_ADDRESS_OF_VENUS/tcp/3453 --messager-url=/ip4/<IP_ADDRESS_OF_VENUS_MESSAGER>/tcp/<PORT_OF_VENUS_MESSAGER> --gateway-url=/ip4/<IP_ADDRESS_OF_VENUS_GATEWAY>/tcp/<PORT_OF_VENUS_GATEWAY> --auth-token <AUTH_TOKEN_FOR_ACCOUNT_NAME> --no-local-storage\n    \n# 修改配置文件只允许sealer做wdpost\n\n[Storage]\n    ParallelFetchLimit = 10\n    AllowAddPiece = false\n    AllowPreCommit1 = false\n    AllowPreCommit2 = false\n    AllowCommit = false\n    AllowUnseal = false\n    \n\n# 启动venus-sealer\n\nBELLMAN_CPU_UTILIZATION=0.2 FIL_PROOFS_USE_MULTICORE_SDR=1 nohup ./venus-sealer run > sealer.log 2>&1 &\n\n# FIL_PROOFS_MAXIMIZE_CACHING=1 表示做P1的时候把部分临时文件缓存到内存\n\n# 设置store目录，因为sealer我们不做任务，故只需设置store目录\n  ./venus-sealer storage attach --init --seal <ABSOLUTE_PATH_OF_YOUR_PERMANENT_STORAGE>\n\n\n# 启动一个worker,只做AP,P1,P2,unseal(不允许用GPU)\nFIL_PROOFS_MAXIMIZE_CACHING=1 BELLMAN_CPU_UTILIZATION=0.2 FIL_PROOFS_USE_MULTICORE_SDR=1 ./venus-worker run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> --commit=false --no-local-storage \n\n# 指定worker的seal路径\n./venus-worker storage attach --init --seal <ABSOLUTE_LOCAL_PATH>\n\n\n> venus-sealer 不做任务，故只需指定 store 目录，不需要 seal 目录。\n\n> 这里 worker 为什么只用 cpu 而不用 GPU 做呢？因为 wdpost 需要 gpu 做，并且是具有时效性的任务，如果 worker 竞争 gpu，wdpost 没法及时完成，存在惩罚算力的隐患。\n\n> venus-sealer 默认只监听 127.0.0.1，要想别的机器连接 sealer 需要修改配置文件：\n\n[API]\n  ListenAddress = \"/ip4/0.0.0.0/tcp/2345/http\"\n  RemoteListenAddress = \"内网ip:2345\"\n\n\n> 设置 p2，C2，wdPost 等消息的 from，即发送消息消耗 fil 的 address\n\n[Addresses]\n  PreCommitControl = [] # P2\n  CommitControl = [] # C2\n  DisableOwnerFallback = true # 禁用owner发消息\n  DisableWorkerFallback = false\n\n\n> 设置 sealer 可接受任务类型\n\n[Storage]\n  ParallelFetchLimit = 10\n  AllowAddPiece = true\n  AllowPreCommit1 = true\n  AllowPreCommit2 = true\n  AllowCommit = true\n  AllowUnseal = true\n\n\n * B 机器：启动两个 worker，一个做 P2，一个做 Commit。p2 阶段使用 CPU，commit 阶段使用 GPU 运行。\n   * 限核：这台机器我们运行 2 个 worker 为了避免一个 worker 占满 cpu 资源，故需要对每个 worker 进程进行限核。这里我们将 75% 的核数分配给 worker01，将 25% 的核数分配给 worker02.参考文档：https://venus.filecoin.io/zh/operation/Efficiency_of_sealing.html\n\n# worker01\nBELLMAN_CPU_UTILIZATION=0.2 FIL_PROOFS_USE_MULTICORE_SDR=1 FIL_PROOFS_MAXIMIZE_CACHING=1 ./venus-worker run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> --unseal=false --addpiece=false --commit=false --no-local-storage\n    \n# 指定worker01的seal路径\n./venus-worker storage attach --init --seal <ABSOLUTE_LOCAL_PATH>\n\n# worker02\nVENUS_WORKER_PATH=<worker_path> BELLMAN_CPU_UTILIZATION=0.2 ./venus-worker run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> --precommit1=false --precommit2=false --addpiece=false --unseal=false --no-local-storage\n\n# 指定worker02的seal路径与worker01相同，这样做的好处是不需要文件的拷贝。\n./venus-worker storage attach --seal <ABSOLUTE_LOCAL_PATH>\n\n\n> TRUST_PARAMS=1 环境变量可以跳过校验证明参数文件，如果你确定参数文件都在且是正确的可以用此环境变量用加快 venus-sealer 或 venus-worker 的启动的速度；\n\n> seal 要求较高的磁盘吞吐量，建议 ssd 盘。\n\n * 磁盘空间及并发数计算：\n   \n   * 32G 内存消耗：56G cache + 64G * 运行数量\n   \n   * 32G 磁盘消耗：520G 左右 * 运行数量\n   \n   * 64G 内存消耗：112G cache + 128G\n   \n   * 64G 磁盘消耗：1T 左右 * 运行数量\n   \n   * 故这两台机器 1t 的内存大约能做 64G sector 的数量为：\n\n   (1024G-112G)/128G=7.125，保险起见我们可以先并发 6 个观察一段时间资源使用率。\n\n   确定了并发密封扇区个数后，就可以确定 seal 需要的磁盘空间= 6*1t=6t.\n\n> 做策略的思路：先考虑内存，确定并发数，在补充其他资源，如临时磁盘空间，至于 cpu，如果不足，可以限额，这样做的好处是系统可以持续运行，而不被 oom。\n\n> 可以利用 gpu 加速的任务时 P2，C2 和 windowPoSt，分配 gpu 的顺序是：wdPoSt>C2>P2\n\n * 并发数控制    ./venus-sealer sectors pledge 发送一个密封任务，通常写一个定时脚本或系统事务，每隔一段时间发送一个 sector 任务；配置文件 MaxSealingSectors 控制同时进行的 sector 上限数。",normalizedContent:"# 算力增加与维持部署参考方案 1\n\n\n# 集群规模：\n\n * 机器：两台\n * 配置:128 核，1t 内存，双 3060ti(gpu)\n\n\n# 方案\n\n * 建议每台机器各去掉一块 gpu，因为目前程序只能访问一块 gpu;\n\n * 安装 zabbix 监控\n\n * 因为单个机器上运行不同的任务，需要给每个 worker 限核，需关闭超线程以确保限核的精准\n   \n   # 绝大多数的主板都可以设置关闭超线程，但需要重新启动。我们通过一种方式关闭一半 cpu 的映射关系来做到相同的效果，这种方式不需要重启，但是每次重启都会失效。\n   \n   #!/bin/bash\n   for cpunum in $(cat /sys/devices/system/cpu/cpu*/topology/thread_siblings_list | cut -s -d, -f2- | tr ',' '\\n' | sort -un)\n   do\n       echo 0 > /sys/devices/system/cpu/cpu$cpunum/online\n   done\n   \n\n * 部署方案：\n\n * a 机器：venus-sealer 只做 wdpost 和 winningpost 的计算;跑一个 venus-worker 只做 ap，p1，p2（用 cpu 做）；\n\n./venus-sealer --network=mainnet init --actor=<miner_id> --node-url=/ip4/<ip_address_of_venus/tcp/3453 --messager-url=/ip4/<ip_address_of_venus_messager>/tcp/<port_of_venus_messager> --gateway-url=/ip4/<ip_address_of_venus_gateway>/tcp/<port_of_venus_gateway> --auth-token <auth_token_for_account_name> --no-local-storage\n    \n# 修改配置文件只允许sealer做wdpost\n\n[storage]\n    parallelfetchlimit = 10\n    allowaddpiece = false\n    allowprecommit1 = false\n    allowprecommit2 = false\n    allowcommit = false\n    allowunseal = false\n    \n\n# 启动venus-sealer\n\nbellman_cpu_utilization=0.2 fil_proofs_use_multicore_sdr=1 nohup ./venus-sealer run > sealer.log 2>&1 &\n\n# fil_proofs_maximize_caching=1 表示做p1的时候把部分临时文件缓存到内存\n\n# 设置store目录，因为sealer我们不做任务，故只需设置store目录\n  ./venus-sealer storage attach --init --seal <absolute_path_of_your_permanent_storage>\n\n\n# 启动一个worker,只做ap,p1,p2,unseal(不允许用gpu)\nfil_proofs_maximize_caching=1 bellman_cpu_utilization=0.2 fil_proofs_use_multicore_sdr=1 ./venus-worker run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> --commit=false --no-local-storage \n\n# 指定worker的seal路径\n./venus-worker storage attach --init --seal <absolute_local_path>\n\n\n> venus-sealer 不做任务，故只需指定 store 目录，不需要 seal 目录。\n\n> 这里 worker 为什么只用 cpu 而不用 gpu 做呢？因为 wdpost 需要 gpu 做，并且是具有时效性的任务，如果 worker 竞争 gpu，wdpost 没法及时完成，存在惩罚算力的隐患。\n\n> venus-sealer 默认只监听 127.0.0.1，要想别的机器连接 sealer 需要修改配置文件：\n\n[api]\n  listenaddress = \"/ip4/0.0.0.0/tcp/2345/http\"\n  remotelistenaddress = \"内网ip:2345\"\n\n\n> 设置 p2，c2，wdpost 等消息的 from，即发送消息消耗 fil 的 address\n\n[addresses]\n  precommitcontrol = [] # p2\n  commitcontrol = [] # c2\n  disableownerfallback = true # 禁用owner发消息\n  disableworkerfallback = false\n\n\n> 设置 sealer 可接受任务类型\n\n[storage]\n  parallelfetchlimit = 10\n  allowaddpiece = true\n  allowprecommit1 = true\n  allowprecommit2 = true\n  allowcommit = true\n  allowunseal = true\n\n\n * b 机器：启动两个 worker，一个做 p2，一个做 commit。p2 阶段使用 cpu，commit 阶段使用 gpu 运行。\n   * 限核：这台机器我们运行 2 个 worker 为了避免一个 worker 占满 cpu 资源，故需要对每个 worker 进程进行限核。这里我们将 75% 的核数分配给 worker01，将 25% 的核数分配给 worker02.参考文档：https://venus.filecoin.io/zh/operation/efficiency_of_sealing.html\n\n# worker01\nbellman_cpu_utilization=0.2 fil_proofs_use_multicore_sdr=1 fil_proofs_maximize_caching=1 ./venus-worker run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> --unseal=false --addpiece=false --commit=false --no-local-storage\n    \n# 指定worker01的seal路径\n./venus-worker storage attach --init --seal <absolute_local_path>\n\n# worker02\nvenus_worker_path=<worker_path> bellman_cpu_utilization=0.2 ./venus-worker run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> --precommit1=false --precommit2=false --addpiece=false --unseal=false --no-local-storage\n\n# 指定worker02的seal路径与worker01相同，这样做的好处是不需要文件的拷贝。\n./venus-worker storage attach --seal <absolute_local_path>\n\n\n> trust_params=1 环境变量可以跳过校验证明参数文件，如果你确定参数文件都在且是正确的可以用此环境变量用加快 venus-sealer 或 venus-worker 的启动的速度；\n\n> seal 要求较高的磁盘吞吐量，建议 ssd 盘。\n\n * 磁盘空间及并发数计算：\n   \n   * 32g 内存消耗：56g cache + 64g * 运行数量\n   \n   * 32g 磁盘消耗：520g 左右 * 运行数量\n   \n   * 64g 内存消耗：112g cache + 128g\n   \n   * 64g 磁盘消耗：1t 左右 * 运行数量\n   \n   * 故这两台机器 1t 的内存大约能做 64g sector 的数量为：\n\n   (1024g-112g)/128g=7.125，保险起见我们可以先并发 6 个观察一段时间资源使用率。\n\n   确定了并发密封扇区个数后，就可以确定 seal 需要的磁盘空间= 6*1t=6t.\n\n> 做策略的思路：先考虑内存，确定并发数，在补充其他资源，如临时磁盘空间，至于 cpu，如果不足，可以限额，这样做的好处是系统可以持续运行，而不被 oom。\n\n> 可以利用 gpu 加速的任务时 p2，c2 和 windowpost，分配 gpu 的顺序是：wdpost>c2>p2\n\n * 并发数控制    ./venus-sealer sectors pledge 发送一个密封任务，通常写一个定时脚本或系统事务，每隔一段时间发送一个 sector 任务；配置文件 maxsealingsectors 控制同时进行的 sector 上限数。",charsets:{cjk:!0}},{title:"算力增加与维持部署参考方案 2",frontmatter:{},regularPath:"/zh/operation/Sealing_deploy_plan_2.html",relativePath:"zh/operation/Sealing_deploy_plan_2.md",key:"v-6bc5020f",path:"/zh/operation/Sealing_deploy_plan_2.html",headers:[{level:2,title:"机器配置",slug:"机器配置",normalizedTitle:"机器配置",charIndex:22},{level:2,title:"任务配比",slug:"任务配比",normalizedTitle:"任务配比",charIndex:214},{level:2,title:"部署",slug:"部署",normalizedTitle:"部署",charIndex:9}],lastUpdated:"2024/8/6 05:04:12",headersStr:"机器配置 任务配比 部署",content:"# 算力增加与维持部署参考方案 2\n\n\n# 机器配置\n\n资源    配置\nCPU   AMD EPYC 7282 *1 (32c) 单路\n内存    32GB ECC/Reg, DDR4-3200 *8\n硬盘    M.2 NVME PCIe Gen3 x4 2TB SSD *2\n网卡    10G\n系统盘   500G\n显卡    3090 * 1\n存储    4TB SSD *25 RAID 5\n\n台数:1 台\n\n\n# 任务配比\n\n任务分为 AP,P1,P2,Commit 阶段\n\n运行方式           核数限制   耗时 (分钟)   内存消耗 (G)   效率 (个/小时)   日产量 (T)\nP1 * 5         20     220       376        1.3636      1.0227\nP2,AP,Commit   12     10        120        3           1.125\n\n资源说明：\n\n * 内存加到 512G;\n\n\n# 部署\n\n * 关闭超线程\n\n    # 绝大多数的主板都可以设置关闭超线程，但需要重新启动。我们通过一种方式关闭一半CPU的映射关系来做到相同的效果，这种方式不需要重启，但是每次重启都会失效。\n    \n    #!/bin/bash\n    for cpunum in $(cat /sys/devices/system/cpu/cpu*/topology/thread_siblings_list | cut -s -d, -f2- | tr ',' '\\n' | sort -un)\n    do\n        echo 0 > /sys/devices/system/cpu/cpu$cpunum/online\n    done\n\n\n * 确保证明参数文件已下载，参数文件默认目录：/var/tmp/filecoin-proof-parameters\n\n * 启动 venus-sealer: sealer 只做 windowPoSt.\n\n./venus-sealer --network=mainnet init --actor=<MINER_ID> --node-url=/ip4/<IP_ADDRESS_OF_VENUS/tcp/3453 --messager-url=/ip4/<IP_ADDRESS_OF_VENUS_MESSAGER>/tcp/<PORT_OF_VENUS_MESSAGER> --gateway-url=/ip4/<IP_ADDRESS_OF_VENUS_GATEWAY>/tcp/<PORT_OF_VENUS_GATEWAY> --auth-token <AUTH_TOKEN_FOR_ACCOUNT_NAME> --no-local-storage\n    \n# 修改配置文件只允许sealer做wdpost\n[Storage]\n    ParallelFetchLimit = 10\n    AllowAddPiece = false\n    AllowPreCommit1 = false\n    AllowPreCommit2 = false\n    AllowCommit = false\n    AllowUnseal = false\n    \n\n# 启动venus-sealer\nBELLMAN_CPU_UTILIZATION=0.2 FIL_PROOFS_USE_MULTICORE_SDR=1 nohup ./venus-sealer run > sealer.log 2>&1 &\n\n# 设置store目录，因为sealer我们不做任务，故只需设置store目录\n./venus-sealer storage attach --init --store <ABSOLUTE_PATH_OF_YOUR_PERMANENT_STORAGE>\n\n\n> init 时加--no-local-storage不回创建默认的store/seal目录;\n\n * 启动 venus-worker-01: 只做 P1\n\nFIL_PROOFS_MAXIMIZE_CACHING=1 BELLMAN_CPU_UTILIZATION=0.2 FIL_PROOFS_USE_MULTICORE_SDR=1 \\\nnohup ./venus-worker --repo=<ABSOLUTE_PATH_OF_WORKER_01> run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> \\\n--addpiece=false --unseal=false --precommit2=false --commit=false --no-local-storage  > worker-01.log 2>&1 &\n\n# 指定seal路径\n./venus-worker --repo=<ABSOLUTE_PATH_OF_WORKER_01> storage attach --init --seal <ABSOLUTE_LOCAL_PATH>\n\n\n> FIL_PROOFS_MAXIMIZE_CACHING=1 表示做 P1 的时候把部分临时文件缓存到内存\n\n * 启动 venus-worker-02: 做 AP,P2,Commit 等任务\n\nBELLMAN_CPU_UTILIZATION=0.2 FIL_PROOFS_USE_MULTICORE_SDR=1 TMP_DIR=<OTHER_PATH> \\\nnohup ./venus-worker --repo=<ABSOLUTE_PATH_OF_WORKER_02> run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> \\\n--precommit1=false --no-local-storage  > worker-02.log 2>&1 &\n\n# 指定seal路径\n./venus-worker --repo=<ABSOLUTE_PATH_OF_WORKER_02> storage attach --init --seal <ABSOLUTE_LOCAL_PATH>\n\n\n> 设置 worker01 和 worker02 的 seal 路径相同，可以避免不必要的拷贝;\n\n> P2 没有设置用 GPU;\n\n> TMP_DIR 目的是为了避免和 venus-sealer 竞争 bellman.gpu.lock,C2 阶段会自动搜索用 GPU，如果和 wdPost 竞争 gpu 锁会报错\n\n * 设置发送消息的 wallet\n\n[Addresses]\n  PreCommitControl = [] # P2\n  CommitControl = [] # C2\n  DisableOwnerFallback = true # 禁用owner发消息\n  DisableWorkerFallback = false\n\n\n> 根据上面字段的含义自己配置想要的结果\n\n * 限核：Cgrep 限核\n\n# 设置进程管理目录\nsudo mkdir -p /sys/fs/cgroup/cpuset/worker\n\n# 设置能够使用的核数范围\nsudo echo 0-20 > /sys/fs/cgroup/cpuset/worker/cpuset.cpus\n\n# 设置使用内存\necho 0 > cpuset.mems\n\n# 加入进程的PID\nsudo echo <PID> > /sys/fs/cgroup/cpuset/worker/cgroup.procs\n\n\n\n> PID: 进程 ID 号;\n\n> 每次 worker 重启后 PID 会变化，需要更新文件。\n\n> /sys/fs/cgroup/cpuset是系统目录,worker是自己创建的.",normalizedContent:"# 算力增加与维持部署参考方案 2\n\n\n# 机器配置\n\n资源    配置\ncpu   amd epyc 7282 *1 (32c) 单路\n内存    32gb ecc/reg, ddr4-3200 *8\n硬盘    m.2 nvme pcie gen3 x4 2tb ssd *2\n网卡    10g\n系统盘   500g\n显卡    3090 * 1\n存储    4tb ssd *25 raid 5\n\n台数:1 台\n\n\n# 任务配比\n\n任务分为 ap,p1,p2,commit 阶段\n\n运行方式           核数限制   耗时 (分钟)   内存消耗 (g)   效率 (个/小时)   日产量 (t)\np1 * 5         20     220       376        1.3636      1.0227\np2,ap,commit   12     10        120        3           1.125\n\n资源说明：\n\n * 内存加到 512g;\n\n\n# 部署\n\n * 关闭超线程\n\n    # 绝大多数的主板都可以设置关闭超线程，但需要重新启动。我们通过一种方式关闭一半cpu的映射关系来做到相同的效果，这种方式不需要重启，但是每次重启都会失效。\n    \n    #!/bin/bash\n    for cpunum in $(cat /sys/devices/system/cpu/cpu*/topology/thread_siblings_list | cut -s -d, -f2- | tr ',' '\\n' | sort -un)\n    do\n        echo 0 > /sys/devices/system/cpu/cpu$cpunum/online\n    done\n\n\n * 确保证明参数文件已下载，参数文件默认目录：/var/tmp/filecoin-proof-parameters\n\n * 启动 venus-sealer: sealer 只做 windowpost.\n\n./venus-sealer --network=mainnet init --actor=<miner_id> --node-url=/ip4/<ip_address_of_venus/tcp/3453 --messager-url=/ip4/<ip_address_of_venus_messager>/tcp/<port_of_venus_messager> --gateway-url=/ip4/<ip_address_of_venus_gateway>/tcp/<port_of_venus_gateway> --auth-token <auth_token_for_account_name> --no-local-storage\n    \n# 修改配置文件只允许sealer做wdpost\n[storage]\n    parallelfetchlimit = 10\n    allowaddpiece = false\n    allowprecommit1 = false\n    allowprecommit2 = false\n    allowcommit = false\n    allowunseal = false\n    \n\n# 启动venus-sealer\nbellman_cpu_utilization=0.2 fil_proofs_use_multicore_sdr=1 nohup ./venus-sealer run > sealer.log 2>&1 &\n\n# 设置store目录，因为sealer我们不做任务，故只需设置store目录\n./venus-sealer storage attach --init --store <absolute_path_of_your_permanent_storage>\n\n\n> init 时加--no-local-storage不回创建默认的store/seal目录;\n\n * 启动 venus-worker-01: 只做 p1\n\nfil_proofs_maximize_caching=1 bellman_cpu_utilization=0.2 fil_proofs_use_multicore_sdr=1 \\\nnohup ./venus-worker --repo=<absolute_path_of_worker_01> run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> \\\n--addpiece=false --unseal=false --precommit2=false --commit=false --no-local-storage  > worker-01.log 2>&1 &\n\n# 指定seal路径\n./venus-worker --repo=<absolute_path_of_worker_01> storage attach --init --seal <absolute_local_path>\n\n\n> fil_proofs_maximize_caching=1 表示做 p1 的时候把部分临时文件缓存到内存\n\n * 启动 venus-worker-02: 做 ap,p2,commit 等任务\n\nbellman_cpu_utilization=0.2 fil_proofs_use_multicore_sdr=1 tmp_dir=<other_path> \\\nnohup ./venus-worker --repo=<absolute_path_of_worker_02> run --miner-addr=/ip4/127.0.0.1/tcp/2345 --miner-token=<sealer token> \\\n--precommit1=false --no-local-storage  > worker-02.log 2>&1 &\n\n# 指定seal路径\n./venus-worker --repo=<absolute_path_of_worker_02> storage attach --init --seal <absolute_local_path>\n\n\n> 设置 worker01 和 worker02 的 seal 路径相同，可以避免不必要的拷贝;\n\n> p2 没有设置用 gpu;\n\n> tmp_dir 目的是为了避免和 venus-sealer 竞争 bellman.gpu.lock,c2 阶段会自动搜索用 gpu，如果和 wdpost 竞争 gpu 锁会报错\n\n * 设置发送消息的 wallet\n\n[addresses]\n  precommitcontrol = [] # p2\n  commitcontrol = [] # c2\n  disableownerfallback = true # 禁用owner发消息\n  disableworkerfallback = false\n\n\n> 根据上面字段的含义自己配置想要的结果\n\n * 限核：cgrep 限核\n\n# 设置进程管理目录\nsudo mkdir -p /sys/fs/cgroup/cpuset/worker\n\n# 设置能够使用的核数范围\nsudo echo 0-20 > /sys/fs/cgroup/cpuset/worker/cpuset.cpus\n\n# 设置使用内存\necho 0 > cpuset.mems\n\n# 加入进程的pid\nsudo echo <pid> > /sys/fs/cgroup/cpuset/worker/cgroup.procs\n\n\n\n> pid: 进程 id 号;\n\n> 每次 worker 重启后 pid 会变化，需要更新文件。\n\n> /sys/fs/cgroup/cpuset是系统目录,worker是自己创建的.",charsets:{cjk:!0}},{frontmatter:{},regularPath:"/zh/operation/_Footer.html",relativePath:"zh/operation/_Footer.md",key:"v-6f04e94f",path:"/zh/operation/_Footer.html",lastUpdated:"2024/8/6 05:04:12",headersStr:null,content:"See something missing? Have tips to share? File an issue, and we'll follow up as soon as possible. (If you have write permission in this repo, feel free to edit directly.)",normalizedContent:"see something missing? have tips to share? file an issue, and we'll follow up as soon as possible. (if you have write permission in this repo, feel free to edit directly.)",charsets:{}},{title:"venus 集群日增算力 1T 机器选型方案",frontmatter:{},regularPath:"/zh/operation/example-single-box.html",relativePath:"zh/operation/example-single-box.md",key:"v-5f13d676",path:"/zh/operation/example-single-box.html",headers:[{level:2,title:"机器配置",slug:"机器配置",normalizedTitle:"机器配置",charIndex:29},{level:2,title:"任务配比",slug:"任务配比",normalizedTitle:"任务配比",charIndex:137}],lastUpdated:"2024/8/6 05:04:12",headersStr:"机器配置 任务配比",content:"# venus 集群日增算力 1T 机器选型方案\n\n\n# 机器配置\n\n资源    配置\nCPU   3970X * 1 (32c)\n内存    512G\n硬盘    3T/SSD\n网卡    千兆\n系统盘   500G\n显卡    3080 * 1\n\n台数:1 台\n\n\n# 任务配比\n\n任务分为 AP,P1,P2,Commit 阶段\n\n运行方式           核数限制   耗时 (分钟)   内存消耗 (G)   效率 (个/小时)   日产量 (T)\nP1 * 5         20     220       376        1.3636      1.0227\nP2,AP,Commit   12     10        120        3           1.125\n\n> 关于限核，配置执行任务类型，并发任务数等请参考 venus-docs 项目中相关文档。",normalizedContent:"# venus 集群日增算力 1t 机器选型方案\n\n\n# 机器配置\n\n资源    配置\ncpu   3970x * 1 (32c)\n内存    512g\n硬盘    3t/ssd\n网卡    千兆\n系统盘   500g\n显卡    3080 * 1\n\n台数:1 台\n\n\n# 任务配比\n\n任务分为 ap,p1,p2,commit 阶段\n\n运行方式           核数限制   耗时 (分钟)   内存消耗 (g)   效率 (个/小时)   日产量 (t)\np1 * 5         20     220       376        1.3636      1.0227\np2,ap,commit   12     10        120        3           1.125\n\n> 关于限核，配置执行任务类型，并发任务数等请参考 venus-docs 项目中相关文档。",charsets:{cjk:!0}},{title:"从 Lotus 来的命令",frontmatter:{},regularPath:"/zh/operation/lotus-vs-venus.html",relativePath:"zh/operation/lotus-vs-venus.md",key:"v-2554b505",path:"/zh/operation/lotus-vs-venus.html",headers:[{level:2,title:"从 Lotus 来的命令",slug:"从-lotus-来的命令",normalizedTitle:"从 lotus 来的命令",charIndex:2}],lastUpdated:"2024/8/6 05:04:12",headersStr:"从 Lotus 来的命令",content:"# 从 Lotus 来的命令\n\n很多日常的命令包括但不限于创建worker/controler地址，设置不同的配置，或者修改存储路径等等，都同时适用于Lotus和Venus。节点运维工程师可以按照 Lotus 文档中的步骤来操作。如果遇到任何问题，欢迎到#fil-venus-cn来提出问题。",normalizedContent:"# 从 lotus 来的命令\n\n很多日常的命令包括但不限于创建worker/controler地址，设置不同的配置，或者修改存储路径等等，都同时适用于lotus和venus。节点运维工程师可以按照 lotus 文档中的步骤来操作。如果遇到任何问题，欢迎到#fil-venus-cn来提出问题。",charsets:{cjk:!0}},{title:"一、服务器基础配置：",frontmatter:{},regularPath:"/zh/operation/System_monitor_of_Zabbix.html",relativePath:"zh/operation/System_monitor_of_Zabbix.md",key:"v-423c9cc5",path:"/zh/operation/System_monitor_of_Zabbix.html",lastUpdated:"2024/8/6 05:04:12",headersStr:null,content:"# 一、服务器基础配置：\n\nsystemctl stop firewalld \nsystemctl disbale firewalld\nvim /etc/selinux/config\n\nSELINUX=disabled //修改selinux为disabled\nsetenforce 0 //临时修改selinux状态\ngetenforce //查看selinux状态\n\n\n# 二、安装相关软件包\n\n# rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm\n# yum clean all && yum makecache\n\n// server端安装zabbix-server和zabbix-agent\n# yum install zabbix-server-mysql zabbix-agent -y\n\n//安装zabbix默认的nginx\n# yum install centos-release-scl -y\n# yum install rh-php72-php-mysqlnd zabbix-nginx-conf-scl -y\n\n\n修改 zabbix 的安装源配置文件，启用前端的源\n\n# vim /etc/yum.repos.d/zabbix.repo \n[zabbix-frontend]\nname=Zabbix Official Repository frontend - $basearch\nbaseurl=http://repo.zabbix.com/zabbix/5.0/rhel/7/$basearch/frontend\nenabled=1 //此处改为1\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-ZABBIX-A14FE591\n\n\n# 三、安装 MySQL\n\nmkdir mysql-dir\ncd mysql-dir\nwget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.30-1.el7.x86_64.rpm-bundle.tar\ntar -zxvf mysql-5.7.32-1.el7.x86_64.rpm-bundle.tar\nyum install *.rpm -y\n\n\nsystemctl start mysqld\n\n\ncat /var/log/mysqld.log | grep root\n\n\n2021-07-26T10:50:49.538494Z 1 [Note] A temporary password is generated for root@localhost: 20yyk:Ar67S;\n\n登录数据库：\n\n# mysql -uroot -p\nEnter password: 20yyk:Ar67S;\n\n\n配置数据库：\n\nset global validate_password_policy=0;\nset global validate_password_length=1;\nalter user 'root'@'localhost' identified by 'venus'; #修改root登录密码为venus\n\nuse mysql;\nupdate user set host = '%' where user = 'root';\ncreate user 'zabbix'@'%' identified  by '123456';\ngrant all privileges on zabbix.* to 'zabbix'@'%';\nflush privileges;\n\n# 创建zabbix所需的数据库\ncreate database zabbix character set utf8 collate utf8_bin;\n\n\n导入 zabbix 模版文件：\n\nzcat /usr/share/doc/zabbix-server-mysql-5.0.14/create.sql.gz | mysql -uzabbix -p123456 zabbix\n\n\n# 四、修改 zabbix 默认配置文件\n\n1、修改连接数据库的密码：\n\n# vim /etc/zabbix/zabbix_server.conf\nDBPassword=123456\n\n\n2、修改 nginx 和所属地域\n\n# vim /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf\n# 在第6行后边加上一个nginx\nlisten.acl_users = apache,nginx\n\n# 在第24行修改zabbix所属的地域\nphp_value[date.timezone] = Asia/shanghai\n\n\n3、配置监听端口和访问方式\n\nvim /etc/opt/rh/rh-nginx116/nginx/conf.d/zabbix.conf\nserver {\n        listen          80;//取消注释\n        server_name     test.zabbix.com;//取消注释修改成IP或自己的域名\n\n\n4、如果是伪装域名则修改本地的 hosts 文件\n\nvim /etc/hosts\n192.168.xx.xx test.zabbix.com\n\nwindow hosts文件也需要添加一下\nC:\\Windows\\System32\\drivers\\etc\\hosts\n192.168.xxx.xxx test.zabbix.com \n\n\n5、启动服务并设为开机自启\n\n# 启动服务\nsystemctl restart zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\nsystemctl enable zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\n\n\n6、修改 zabbix-agent 的配置文件\n\ncat /etc/zabbix/zabbix_agentd.conf | egrep -v \"^$|^#\"\nPidFile=/var/run/zabbix/zabbix_agentd.pid\nLogFile=/var/log/zabbix/zabbix_agentd.log\nLogFileSize=0\nServer=192.168.88.11  //指定zabbix-server的ip地址\nHostname=venus-sealer\nInclude=/etc/zabbix/zabbix_agentd.d/*.conf\n\n\n# 四、配置 zabbix 监控主机\n\n1、在浏览器输入 zabbix-server 的 ip 地址或者主机名\n\n2、配置数据库连接地址信息\n\n3、登录到 zabbix 系统，默认的用户为 Admin，密码为 zabbix;注意 Admin 的 A 是大写字母\n\n4、添加 zabbix-agent 主机\n\n5、查看 zabbix 监控机器的内存图\n\n6、异常报警，需要处理的机器",normalizedContent:"# 一、服务器基础配置：\n\nsystemctl stop firewalld \nsystemctl disbale firewalld\nvim /etc/selinux/config\n\nselinux=disabled //修改selinux为disabled\nsetenforce 0 //临时修改selinux状态\ngetenforce //查看selinux状态\n\n\n# 二、安装相关软件包\n\n# rpm -uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm\n# yum clean all && yum makecache\n\n// server端安装zabbix-server和zabbix-agent\n# yum install zabbix-server-mysql zabbix-agent -y\n\n//安装zabbix默认的nginx\n# yum install centos-release-scl -y\n# yum install rh-php72-php-mysqlnd zabbix-nginx-conf-scl -y\n\n\n修改 zabbix 的安装源配置文件，启用前端的源\n\n# vim /etc/yum.repos.d/zabbix.repo \n[zabbix-frontend]\nname=zabbix official repository frontend - $basearch\nbaseurl=http://repo.zabbix.com/zabbix/5.0/rhel/7/$basearch/frontend\nenabled=1 //此处改为1\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/rpm-gpg-key-zabbix-a14fe591\n\n\n# 三、安装 mysql\n\nmkdir mysql-dir\ncd mysql-dir\nwget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.30-1.el7.x86_64.rpm-bundle.tar\ntar -zxvf mysql-5.7.32-1.el7.x86_64.rpm-bundle.tar\nyum install *.rpm -y\n\n\nsystemctl start mysqld\n\n\ncat /var/log/mysqld.log | grep root\n\n\n2021-07-26t10:50:49.538494z 1 [note] a temporary password is generated for root@localhost: 20yyk:ar67s;\n\n登录数据库：\n\n# mysql -uroot -p\nenter password: 20yyk:ar67s;\n\n\n配置数据库：\n\nset global validate_password_policy=0;\nset global validate_password_length=1;\nalter user 'root'@'localhost' identified by 'venus'; #修改root登录密码为venus\n\nuse mysql;\nupdate user set host = '%' where user = 'root';\ncreate user 'zabbix'@'%' identified  by '123456';\ngrant all privileges on zabbix.* to 'zabbix'@'%';\nflush privileges;\n\n# 创建zabbix所需的数据库\ncreate database zabbix character set utf8 collate utf8_bin;\n\n\n导入 zabbix 模版文件：\n\nzcat /usr/share/doc/zabbix-server-mysql-5.0.14/create.sql.gz | mysql -uzabbix -p123456 zabbix\n\n\n# 四、修改 zabbix 默认配置文件\n\n1、修改连接数据库的密码：\n\n# vim /etc/zabbix/zabbix_server.conf\ndbpassword=123456\n\n\n2、修改 nginx 和所属地域\n\n# vim /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf\n# 在第6行后边加上一个nginx\nlisten.acl_users = apache,nginx\n\n# 在第24行修改zabbix所属的地域\nphp_value[date.timezone] = asia/shanghai\n\n\n3、配置监听端口和访问方式\n\nvim /etc/opt/rh/rh-nginx116/nginx/conf.d/zabbix.conf\nserver {\n        listen          80;//取消注释\n        server_name     test.zabbix.com;//取消注释修改成ip或自己的域名\n\n\n4、如果是伪装域名则修改本地的 hosts 文件\n\nvim /etc/hosts\n192.168.xx.xx test.zabbix.com\n\nwindow hosts文件也需要添加一下\nc:\\windows\\system32\\drivers\\etc\\hosts\n192.168.xxx.xxx test.zabbix.com \n\n\n5、启动服务并设为开机自启\n\n# 启动服务\nsystemctl restart zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\nsystemctl enable zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm\n\n\n6、修改 zabbix-agent 的配置文件\n\ncat /etc/zabbix/zabbix_agentd.conf | egrep -v \"^$|^#\"\npidfile=/var/run/zabbix/zabbix_agentd.pid\nlogfile=/var/log/zabbix/zabbix_agentd.log\nlogfilesize=0\nserver=192.168.88.11  //指定zabbix-server的ip地址\nhostname=venus-sealer\ninclude=/etc/zabbix/zabbix_agentd.d/*.conf\n\n\n# 四、配置 zabbix 监控主机\n\n1、在浏览器输入 zabbix-server 的 ip 地址或者主机名\n\n2、配置数据库连接地址信息\n\n3、登录到 zabbix 系统，默认的用户为 admin，密码为 zabbix;注意 admin 的 a 是大写字母\n\n4、添加 zabbix-agent 主机\n\n5、查看 zabbix 监控机器的内存图\n\n6、异常报警，需要处理的机器",charsets:{cjk:!0}},{title:"market v1-v2 升级指南",frontmatter:{},regularPath:"/zh/operation/migrate_market_v1_to_v2.html",relativePath:"zh/operation/migrate_market_v1_to_v2.md",key:"v-378b472d",path:"/zh/operation/migrate_market_v1_to_v2.html",headers:[{level:2,title:"编译升级工具",slug:"编译升级工具",normalizedTitle:"编译升级工具",charIndex:80},{level:2,title:"升级步骤",slug:"升级步骤",normalizedTitle:"升级步骤",charIndex:264}],lastUpdated:"2024/8/6 05:04:12",headersStr:"编译升级工具 升级步骤",content:"# market v1-v2 升级指南\n\nmarket v1 升级到 v2 的过程中数据结构发生了变化，如果需要现有的数据请按照现有的步骤进行升级数据\n\n\n# 编译升级工具\n\ngit clone https://github.com/filecoin-project/venus-market.git\ngit checkout feat/export_v1_data\n\nmake deps\ncd cli/market_export\ngo build\n\n\n执行上述步骤后会生成一个工具，这个工具用于导出 v1 版本的数据\n\n\n# 升级步骤\n\n 1. 停止 venus-market 程序\n\n 2. 备份 venus-market 数据目录，这个目录默认保存在 ~/.venusmarket.\n\n 3. 导出 v1 版本的数据\n    \n     ./market_export --repo <venus-market repo> export <path of export data file> \n    \n\n 4. 重新初始化 v2 版本的 venus-market(版本号必须高于 2.0.0 rc2)\n\n 5. 执行 v2 版本的升级命令，这个命令用于导入步骤 3 中导出的数据。\n    \n    ./market_export --repo <venus-market repo> migrate import_v1 <path of export data file>\n    \n\n稳妥起见，做升级之前请确保没有处于 (Publish/Publishing/StorageDealAwaitingPreCommit) 状态的订单",normalizedContent:"# market v1-v2 升级指南\n\nmarket v1 升级到 v2 的过程中数据结构发生了变化，如果需要现有的数据请按照现有的步骤进行升级数据\n\n\n# 编译升级工具\n\ngit clone https://github.com/filecoin-project/venus-market.git\ngit checkout feat/export_v1_data\n\nmake deps\ncd cli/market_export\ngo build\n\n\n执行上述步骤后会生成一个工具，这个工具用于导出 v1 版本的数据\n\n\n# 升级步骤\n\n 1. 停止 venus-market 程序\n\n 2. 备份 venus-market 数据目录，这个目录默认保存在 ~/.venusmarket.\n\n 3. 导出 v1 版本的数据\n    \n     ./market_export --repo <venus-market repo> export <path of export data file> \n    \n\n 4. 重新初始化 v2 版本的 venus-market(版本号必须高于 2.0.0 rc2)\n\n 5. 执行 v2 版本的升级命令，这个命令用于导入步骤 3 中导出的数据。\n    \n    ./market_export --repo <venus-market repo> migrate import_v1 <path of export data file>\n    \n\n稳妥起见，做升级之前请确保没有处于 (publish/publishing/storagedealawaitingprecommit) 状态的订单",charsets:{cjk:!0}},{title:"nv16 各组件升级文档",frontmatter:{},regularPath:"/zh/operation/nv16-upgrade.html",relativePath:"zh/operation/nv16-upgrade.md",key:"v-134c07e5",path:"/zh/operation/nv16-upgrade.html",headers:[{level:2,title:"nv16 各组件升级文档",slug:"nv16-各组件升级文档",normalizedTitle:"nv16 各组件升级文档",charIndex:2},{level:3,title:"时间线",slug:"时间线",normalizedTitle:"时间线",charIndex:19},{level:3,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:84},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:84},{level:3,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:2742},{level:3,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:3074},{level:3,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:3192},{level:3,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:3411},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:3455}],lastUpdated:"2024/8/6 05:04:12",headersStr:"nv16 各组件升级文档 时间线 venus-auth venus venus-messager venus-miner venus-gateway venus-market venus-wallet",content:'# nv16 各组件升级文档\n\n\n# 时间线\n\n升级时间：2022-07-06T14:00:00Z，北京时间是 2022-07-06 22:00:00（周三）\n\n\n# venus-auth\n\ntag: v1.6.0\n\n影响功能：支持多个 miner 共享同一个 token 的功能\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 新增加一张 miners 表，用于保存 user 和 miner 的对应关系\n\n 2. 会把 users 表每行数据的 name 和 miner 字段的值写入到 miners 表中的 user 和 miner字段，检查写入是否有问题，成功日志:migrate from:0, to:1 success；失败日志：migrate from store version:0 failed\n\n 3. ./venus-auth user miner list <user> 可以查看每个用户绑定的 miner\n\n 4. 使用命令 ./venus-auth user list列出所有 user，确保被使用的 user 状态都为 enabled 状态\n\n\n# venus\n\ntag: v1.6.0\n\n影响功能：支持 nv16 网络\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 升级后检查 vk 文件是否完整\n\n 2. 升级后检查配置文件，升级高度是否正常设置，配置文件默认在 ~/.venus/config.json :\n    \n    # cali\n    "upgradeSkyrHeight": 1044660\n    # mainnet\n    "upgradeSkyrHeight": 1960320\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. api 版本发生变化，影响 miner 的连接\n    \n    # 用 curl 命令测试接口 StateGetBeaconEntry、BeaconGetEntry，下面三个 curl 命令返回结果应该一样\n    curl http://127.0.0.1:3453/rpc/v0 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer token" -d \'{"method": "Filecoin.BeaconGetEntry","params":[1933610], "id": 0}\'\n    curl http://127.0.0.1:3453/rpc/v1 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer token" -d \'{"method": "Filecoin.BeaconGetEntry","params":[1933610], "id": 0}\'       \n    curl http://127.0.0.1:3453/rpc/v1 -X POST -H "Content-Type: application/json" -H "Authorization: Bearer token" -d \'{"method": "Filecoin.StateGetBeaconEntry","params":[1933610], "id": 0}\'\n    \n\n 5. 检查主网 v8 actors cid，确保与下面输出一样\n    \n    ./venus state actor-cids\n    \n    # 顺序可能会不一样\n    _manifest         bafy2bzacebogjbpiemi7npzxchgcjjki3tfxon4ims55obfyfleqntteljsea  \n    account           bafk2bzacedudbf7fc5va57t3tmo63snmt3en4iaidv4vo3qlyacbxaa6hlx6y  \n    storagemarket     bafk2bzacediohrxkp2fbsl4yj4jlupjdkgsiwqb4zuezvinhdo2j5hrxco62q  \n    storageminer      bafk2bzacecgnynvd3tene3bvqoknuspit56canij5bpra6wl4mrq2mxxwriyu  \n    multisig          bafk2bzacebhldfjuy4o5v7amrhp5p2gzv2qo5275jut4adnbyp56fxkwy5fag  \n    paymentchannel    bafk2bzacebalad3f72wyk7qyilvfjijcwubdspytnyzlrhvn73254gqis44rq  \n    reward            bafk2bzacecwzzxlgjiavnc3545cqqil3cmq4hgpvfp2crguxy2pl5ybusfsbe  \n    system            bafk2bzacedwq5uppsw7vp55zpj7jdieizirmldceehu6wvombw3ixq2tcq57w  \n    cron              bafk2bzacecqb3eolfurehny6yp7tgmapib4ocazo5ilkopjce2c7wc2bcec62  \n    init              bafk2bzaceaipvjhoxmtofsnv3aj6gj5ida4afdrxa4ewku2hfipdlxpaektlw  \n    storagepower      bafk2bzacebjvqva6ppvysn5xpmiqcdfelwbbcxmghx5ww6hr37cgred6dyrpm  \n    verifiedregistry  bafk2bzaceb3zbkjz3auizmoln2unmxep7dyfcmsre64vnqfhdyh7rkqfoxlw4\n    \n\n 6. 主网可以通过设置环境变量 export VENUS_USE_FVM_TO_SYNC_MAINNET_V15=1 在 nv15 网络使用 fvm\n\n 7. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 8. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n\n# venus-messager\n\ntag:v1.6.0\n\n影响功能：支持新的网络版本，新增主目录，默认在 ~/.venus-messager\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后是否生成主目录 ~/.venus-messager\n\n 2. 升级后主目录应包含 config.toml 和 tipset.json，config.toml 应与启动 messager 使用的配置文件内容一致，~/.venus-messager/tipset.json 是由当前目录中的 tipset.json 拷贝而来\n\n 3. 升级成功后再次重启是读取的配置是~/.venus-messager/config.toml\n\n 4. 能否正常收到消息和推送消息到节点\n\n\n# venus-miner\n\ntag: v1.6.0\n\n影响功能：\n\n 1. 获取 beacon 的接口名字 由 BeaconGetEntry 改为 StateGetBeaconEntry\n\n依赖升级组件：venus,venus-auth,venus-gateway\n\n注意事项：\n\n 1. 升级后常用命令 address state/list/update验证一遍.\n 2. 如果用 mysql 数据库，检查下 miner_blocks 表中 parent_key 字段是 varchar(1000)\n\n\n# venus-gateway\n\ntag: v1.6.0\n\n影响功能：修复没有自动清理超时的请求\n\n注意事项：\n\n 1. 升级后 wallet 是否重新注册上来\n\n\n# venus-market\n\ntag: v2.2.0\n\n影响功能：\n\n注意事项：\n\n\n# venus-wallet\n\n# 社区\n\ntag: v1.6.0\n\n影响功能：\n\n注意事项：\n\n 1. 需要解锁钱包\n 2. 是否注册到 gateway',normalizedContent:'# nv16 各组件升级文档\n\n\n# 时间线\n\n升级时间：2022-07-06t14:00:00z，北京时间是 2022-07-06 22:00:00（周三）\n\n\n# venus-auth\n\ntag: v1.6.0\n\n影响功能：支持多个 miner 共享同一个 token 的功能\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 新增加一张 miners 表，用于保存 user 和 miner 的对应关系\n\n 2. 会把 users 表每行数据的 name 和 miner 字段的值写入到 miners 表中的 user 和 miner字段，检查写入是否有问题，成功日志:migrate from:0, to:1 success；失败日志：migrate from store version:0 failed\n\n 3. ./venus-auth user miner list <user> 可以查看每个用户绑定的 miner\n\n 4. 使用命令 ./venus-auth user list列出所有 user，确保被使用的 user 状态都为 enabled 状态\n\n\n# venus\n\ntag: v1.6.0\n\n影响功能：支持 nv16 网络\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 升级后检查 vk 文件是否完整\n\n 2. 升级后检查配置文件，升级高度是否正常设置，配置文件默认在 ~/.venus/config.json :\n    \n    # cali\n    "upgradeskyrheight": 1044660\n    # mainnet\n    "upgradeskyrheight": 1960320\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. api 版本发生变化，影响 miner 的连接\n    \n    # 用 curl 命令测试接口 stategetbeaconentry、beacongetentry，下面三个 curl 命令返回结果应该一样\n    curl http://127.0.0.1:3453/rpc/v0 -x post -h "content-type: application/json" -h "authorization: bearer token" -d \'{"method": "filecoin.beacongetentry","params":[1933610], "id": 0}\'\n    curl http://127.0.0.1:3453/rpc/v1 -x post -h "content-type: application/json" -h "authorization: bearer token" -d \'{"method": "filecoin.beacongetentry","params":[1933610], "id": 0}\'       \n    curl http://127.0.0.1:3453/rpc/v1 -x post -h "content-type: application/json" -h "authorization: bearer token" -d \'{"method": "filecoin.stategetbeaconentry","params":[1933610], "id": 0}\'\n    \n\n 5. 检查主网 v8 actors cid，确保与下面输出一样\n    \n    ./venus state actor-cids\n    \n    # 顺序可能会不一样\n    _manifest         bafy2bzacebogjbpiemi7npzxchgcjjki3tfxon4ims55obfyfleqntteljsea  \n    account           bafk2bzacedudbf7fc5va57t3tmo63snmt3en4iaidv4vo3qlyacbxaa6hlx6y  \n    storagemarket     bafk2bzacediohrxkp2fbsl4yj4jlupjdkgsiwqb4zuezvinhdo2j5hrxco62q  \n    storageminer      bafk2bzacecgnynvd3tene3bvqoknuspit56canij5bpra6wl4mrq2mxxwriyu  \n    multisig          bafk2bzacebhldfjuy4o5v7amrhp5p2gzv2qo5275jut4adnbyp56fxkwy5fag  \n    paymentchannel    bafk2bzacebalad3f72wyk7qyilvfjijcwubdspytnyzlrhvn73254gqis44rq  \n    reward            bafk2bzacecwzzxlgjiavnc3545cqqil3cmq4hgpvfp2crguxy2pl5ybusfsbe  \n    system            bafk2bzacedwq5uppsw7vp55zpj7jdieizirmldceehu6wvombw3ixq2tcq57w  \n    cron              bafk2bzacecqb3eolfurehny6yp7tgmapib4ocazo5ilkopjce2c7wc2bcec62  \n    init              bafk2bzaceaipvjhoxmtofsnv3aj6gj5ida4afdrxa4ewku2hfipdlxpaektlw  \n    storagepower      bafk2bzacebjvqva6ppvysn5xpmiqcdfelwbbcxmghx5ww6hr37cgred6dyrpm  \n    verifiedregistry  bafk2bzaceb3zbkjz3auizmoln2unmxep7dyfcmsre64vnqfhdyh7rkqfoxlw4\n    \n\n 6. 主网可以通过设置环境变量 export venus_use_fvm_to_sync_mainnet_v15=1 在 nv15 网络使用 fvm\n\n 7. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 8. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n\n# venus-messager\n\ntag:v1.6.0\n\n影响功能：支持新的网络版本，新增主目录，默认在 ~/.venus-messager\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后是否生成主目录 ~/.venus-messager\n\n 2. 升级后主目录应包含 config.toml 和 tipset.json，config.toml 应与启动 messager 使用的配置文件内容一致，~/.venus-messager/tipset.json 是由当前目录中的 tipset.json 拷贝而来\n\n 3. 升级成功后再次重启是读取的配置是~/.venus-messager/config.toml\n\n 4. 能否正常收到消息和推送消息到节点\n\n\n# venus-miner\n\ntag: v1.6.0\n\n影响功能：\n\n 1. 获取 beacon 的接口名字 由 beacongetentry 改为 stategetbeaconentry\n\n依赖升级组件：venus,venus-auth,venus-gateway\n\n注意事项：\n\n 1. 升级后常用命令 address state/list/update验证一遍.\n 2. 如果用 mysql 数据库，检查下 miner_blocks 表中 parent_key 字段是 varchar(1000)\n\n\n# venus-gateway\n\ntag: v1.6.0\n\n影响功能：修复没有自动清理超时的请求\n\n注意事项：\n\n 1. 升级后 wallet 是否重新注册上来\n\n\n# venus-market\n\ntag: v2.2.0\n\n影响功能：\n\n注意事项：\n\n\n# venus-wallet\n\n# 社区\n\ntag: v1.6.0\n\n影响功能：\n\n注意事项：\n\n 1. 需要解锁钱包\n 2. 是否注册到 gateway',charsets:{cjk:!0}},{title:"nv15 升级指南",frontmatter:{},regularPath:"/zh/operation/nv15-upgrade.html",relativePath:"zh/operation/nv15-upgrade.md",key:"v-4c2ccf85",path:"/zh/operation/nv15-upgrade.html",headers:[{level:2,title:"版本信息",slug:"版本信息",normalizedTitle:"版本信息",charIndex:16},{level:2,title:"升级细节",slug:"升级细节",normalizedTitle:"升级细节",charIndex:162},{level:2,title:"升级顺序",slug:"升级顺序",normalizedTitle:"升级顺序",charIndex:1203},{level:2,title:"升级建议",slug:"升级建议",normalizedTitle:"升级建议",charIndex:1442}],lastUpdated:"2024/8/6 05:04:12",headersStr:"版本信息 升级细节 升级顺序 升级建议",content:'# nv15 升级指南\n\n\n# 版本信息\n\n 1. venus-wallet\n 2. venus\n 3. lotus 兼容版本\n 4. chain-co\n 5. messager\n 6. venus-gateway\n 7. venus-miner\n 8. venus-market\n 9. venus-sealer\n\n\n# 升级细节\n\n 1. venus-auth: 可选择升级 分支：v1.3.2 影响功能：无\n\n 2. venus：升级 分支：v1.2.1 影响功能：支持新网络版本 注意事项：\n    \n    1. 升级后检查 vk 文件是否完整\n    2. 升级后检查配置文件，升级高度是否正常设置：\n    \n    # cali\n    "upgradeOhSnapHeight": 682006\n    # mainnet\n    "upgradeOhSnapHeight": 1594680\n    \n    \n    3. 升级后检查 mpool 下 maxfee 配置是否由数字转换成 xxFil 形式\n    \n    "mpool": {\n              "maxNonceGap": 100,\n              "maxFee": "10 FIL"\n    },\n    \n    \n    4. 升级后需检查是否正常同步区块\n    5. api 版本发生变化，影响 sealer 的连接，升级方式需要按照大升级的方式来处理\n\n 3. lotus 兼容版本：升级 分支：venus/v1.14.0 影响功能：支持新网络版本 注意事项：\n    \n    1. 检查是否正常同步\n    2. 检查和 venus-auth 的连接是否完好（curl 命令验证）\n\n 4. chain-co：升级 分支：v0.1.0 注意事项： 影响功能：\n    \n    1. 暴露新的接口MpoolPending/MpoolGetNonce\n    2. 升级后检查两个接口是否存在，且能正常工作\n\n 5. venus-messager：升级 分支:v1.4.0 影响功能：仅支持新的网络版本 注意事项：无\n\n 6. venus-miner：升级 Tag： v1.4.0 影响功能： 1. 计算证明的接口 (ComputeProof) 参数发生变化 注意事项：无\n\n 7. venus-gateway：升级 分支：v1.2.0 影响功能： 1. ComputeProof 接口参数发生变化， 2. 需同时支持新老两组接口 注意事项： 1. 升级后需检查是否v0/v1两组接口都在正常工作\n\n 8. venus-wallet：可选择升级 Tag：v1.4.0 影响功能：无\n\n 9. venus-market：可选择升级 分支：v2.0.0 影响功能 新版本\n\n\n# 升级顺序\n\n 1. venus-wallet Tag:v1.4.0\n 2. venus v1.2.0\n 3. lotus for venuspool venus/v1.14.0\n 4. chain-co v0.1.0\n 5. venus-messager v1.4.0\n 6. venus-gateway v1.2.0\n 7. venus-miner Tag:v1.4.0\n 8. venus-market v2.0.0\n 9. venus-sealer v1.4.0\n\n\n# 升级建议\n\n 1. 对于还有证明空窗期的用户，选择一个安全的时间来升级。\n 2. 对于已经不具备空窗期的用户，最好的办法是在建立一个环境来进行过度。\n 3. 建议运行一个备用的兼容版本 lotus 用于备份。\n\n有任何关于升级的问题可以到 disscusion 讨论：https://github.com/filecoin-project/venus/discussions/4688',normalizedContent:'# nv15 升级指南\n\n\n# 版本信息\n\n 1. venus-wallet\n 2. venus\n 3. lotus 兼容版本\n 4. chain-co\n 5. messager\n 6. venus-gateway\n 7. venus-miner\n 8. venus-market\n 9. venus-sealer\n\n\n# 升级细节\n\n 1. venus-auth: 可选择升级 分支：v1.3.2 影响功能：无\n\n 2. venus：升级 分支：v1.2.1 影响功能：支持新网络版本 注意事项：\n    \n    1. 升级后检查 vk 文件是否完整\n    2. 升级后检查配置文件，升级高度是否正常设置：\n    \n    # cali\n    "upgradeohsnapheight": 682006\n    # mainnet\n    "upgradeohsnapheight": 1594680\n    \n    \n    3. 升级后检查 mpool 下 maxfee 配置是否由数字转换成 xxfil 形式\n    \n    "mpool": {\n              "maxnoncegap": 100,\n              "maxfee": "10 fil"\n    },\n    \n    \n    4. 升级后需检查是否正常同步区块\n    5. api 版本发生变化，影响 sealer 的连接，升级方式需要按照大升级的方式来处理\n\n 3. lotus 兼容版本：升级 分支：venus/v1.14.0 影响功能：支持新网络版本 注意事项：\n    \n    1. 检查是否正常同步\n    2. 检查和 venus-auth 的连接是否完好（curl 命令验证）\n\n 4. chain-co：升级 分支：v0.1.0 注意事项： 影响功能：\n    \n    1. 暴露新的接口mpoolpending/mpoolgetnonce\n    2. 升级后检查两个接口是否存在，且能正常工作\n\n 5. venus-messager：升级 分支:v1.4.0 影响功能：仅支持新的网络版本 注意事项：无\n\n 6. venus-miner：升级 tag： v1.4.0 影响功能： 1. 计算证明的接口 (computeproof) 参数发生变化 注意事项：无\n\n 7. venus-gateway：升级 分支：v1.2.0 影响功能： 1. computeproof 接口参数发生变化， 2. 需同时支持新老两组接口 注意事项： 1. 升级后需检查是否v0/v1两组接口都在正常工作\n\n 8. venus-wallet：可选择升级 tag：v1.4.0 影响功能：无\n\n 9. venus-market：可选择升级 分支：v2.0.0 影响功能 新版本\n\n\n# 升级顺序\n\n 1. venus-wallet tag:v1.4.0\n 2. venus v1.2.0\n 3. lotus for venuspool venus/v1.14.0\n 4. chain-co v0.1.0\n 5. venus-messager v1.4.0\n 6. venus-gateway v1.2.0\n 7. venus-miner tag:v1.4.0\n 8. venus-market v2.0.0\n 9. venus-sealer v1.4.0\n\n\n# 升级建议\n\n 1. 对于还有证明空窗期的用户，选择一个安全的时间来升级。\n 2. 对于已经不具备空窗期的用户，最好的办法是在建立一个环境来进行过度。\n 3. 建议运行一个备用的兼容版本 lotus 用于备份。\n\n有任何关于升级的问题可以到 disscusion 讨论：https://github.com/filecoin-project/venus/discussions/4688',charsets:{cjk:!0}},{title:"nv17 各组件升级文档",frontmatter:{},regularPath:"/zh/operation/nv17-upgrade.html",relativePath:"zh/operation/nv17-upgrade.md",key:"v-4b297f76",path:"/zh/operation/nv17-upgrade.html",headers:[{level:3,title:"时间线",slug:"时间线",normalizedTitle:"时间线",charIndex:143},{level:3,title:"各组件版本",slug:"各组件版本",normalizedTitle:"各组件版本",charIndex:204},{level:3,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:244},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:19},{level:3,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:2029},{level:3,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:2166},{level:3,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:35},{level:3,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:2428},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:19}],lastUpdated:"2024/8/6 05:04:12",headersStr:"时间线 各组件版本 venus-auth venus venus-messager venus-miner venus-gateway venus-market venus-wallet",content:'# nv17 各组件升级文档\n\n如果 venus-wallet 或者 venus-gateway 的版本从 v1.6.x 升级到 v1.8.0，请先阅读 Venus 组件 v1.7.0 使用注意事项 ，注意 venus-gateway 和 venus-wallet的升级顺序。\n\n\n# 时间线\n\n升级时间：2022-11-30T14:00:00Z，北京时间是 2022-11-30 22:00:00\n\n\n# 各组件版本\n\n * calibrationnet\n * mainnet\n\n\n# venus-auth\n\n影响功能：\n\n依赖升级组件：无\n\n注意事项：\n\n 1. miners 表增加字段 open_mining，0 表示不出块，1 表示出块，默认是 1\n\n\n# venus\n\n影响功能：支持 nv17 网络\n\n依赖升级组件：无\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 1. 升级后检查 vk 文件是否完整\n\n 2. 升级后检查配置文件，升级高度是否正常设置，配置文件默认在 ~/.venus/config.json :\n    \n    # cali\n    "upgradeSkyrHeight": 16800\n    # mainnet\n    "upgradeSkyrHeight": 2383680\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v9 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 17\n    \n    # 顺序可能会不一样\n    Network Version: 17\n    Actor Version: 9\n    Actor             CID\n    reward            bafk2bzacebezgbbmcm2gbcqwisus5fjvpj7hhmu5ubd37phuku3hmkfulxm2o\n    system            bafk2bzaceagvlo2jtahj7dloshrmwfulrd6e2izqev32qm46eumf754weec6c\n    _manifest         bafy2bzaceb6j6666h36xnhksu3ww4kxb6e25niayfgkdnifaqi6m6ooc66i6i\n    storagemarket     bafk2bzacec3j7p6gklk64stax5px3xxd7hdtejaepnd4nw7s2adihde6emkcu\n    multisig          bafk2bzacec4va3nmugyqjqrs3lqyr2ij67jhjia5frvx7omnh2isha6abxzya\n    paymentchannel    bafk2bzacebhdvjbjcgupklddfavzef4e4gnkt3xk3rbmgfmk7xhecszhfxeds\n    storagepower      bafk2bzacedsetphfajgne4qy3vdrpyd6ekcmtfs2zkjut4r34cvnuoqemdrtw\n    verifiedregistry  bafk2bzacecf3yodlyudzukumehbuabgqljyhjt5ifiv4vetcfohnvsxzynwga\n    datacap           bafk2bzacebb6uy2ys7tapekmtj7apnjg7oyj4ia5t7tlkvbmwtxwv74lb2pug\n    account           bafk2bzacect2p7urje3pylrrrjy3tngn6yaih4gtzauuatf2jllk3ksgfiw2y\n    cron              bafk2bzacebcec3lffmos3nawm5cvwehssxeqwxixoyyfvejy7viszzsxzyu26\n    init              bafk2bzacebtdq4zyuxk2fzbdkva6kc4mx75mkbfmldplfntayhbl5wkqou33i\n    storageminer      bafk2bzacedyux5hlrildwutvvjdcsvjtwsoc5xnqdjl73ouiukgklekeuyfl4\n    \n\n 5. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n\n# venus-messager\n\n功能：\n\n 1. 增加对 basefee 的控制，可以对某个地址单独设置 basefee，当链上 basefee 高于限制的 basefee，消息将不会被推送出去\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后观察消息能否正常上链\n\n\n# venus-miner\n\n影响功能：\n\n依赖升级组件：\n\n注意事项：\n\n 1. 从 1.7.*升级到v1.8.0会自动迁移配置文件，从 1.6.* 升级到v1.8.0需重新初始化repo(init)，参考\n 2. 升级后能否正常出块\n\n\n# venus-gateway\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n 1. 升级后检查钱包：./venus-gateway wallet list\n 2. 升级后检查矿工：./venus-gateway miner list\n\n\n# venus-market\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n\n# venus-wallet\n\n影响功能：\n\n注意事项：\n\n 1. 启动后需要解锁钱包\n 2. 是否注册到 gateway',normalizedContent:'# nv17 各组件升级文档\n\n如果 venus-wallet 或者 venus-gateway 的版本从 v1.6.x 升级到 v1.8.0，请先阅读 venus 组件 v1.7.0 使用注意事项 ，注意 venus-gateway 和 venus-wallet的升级顺序。\n\n\n# 时间线\n\n升级时间：2022-11-30t14:00:00z，北京时间是 2022-11-30 22:00:00\n\n\n# 各组件版本\n\n * calibrationnet\n * mainnet\n\n\n# venus-auth\n\n影响功能：\n\n依赖升级组件：无\n\n注意事项：\n\n 1. miners 表增加字段 open_mining，0 表示不出块，1 表示出块，默认是 1\n\n\n# venus\n\n影响功能：支持 nv17 网络\n\n依赖升级组件：无\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 1. 升级后检查 vk 文件是否完整\n\n 2. 升级后检查配置文件，升级高度是否正常设置，配置文件默认在 ~/.venus/config.json :\n    \n    # cali\n    "upgradeskyrheight": 16800\n    # mainnet\n    "upgradeskyrheight": 2383680\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v9 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 17\n    \n    # 顺序可能会不一样\n    network version: 17\n    actor version: 9\n    actor             cid\n    reward            bafk2bzacebezgbbmcm2gbcqwisus5fjvpj7hhmu5ubd37phuku3hmkfulxm2o\n    system            bafk2bzaceagvlo2jtahj7dloshrmwfulrd6e2izqev32qm46eumf754weec6c\n    _manifest         bafy2bzaceb6j6666h36xnhksu3ww4kxb6e25niayfgkdnifaqi6m6ooc66i6i\n    storagemarket     bafk2bzacec3j7p6gklk64stax5px3xxd7hdtejaepnd4nw7s2adihde6emkcu\n    multisig          bafk2bzacec4va3nmugyqjqrs3lqyr2ij67jhjia5frvx7omnh2isha6abxzya\n    paymentchannel    bafk2bzacebhdvjbjcgupklddfavzef4e4gnkt3xk3rbmgfmk7xhecszhfxeds\n    storagepower      bafk2bzacedsetphfajgne4qy3vdrpyd6ekcmtfs2zkjut4r34cvnuoqemdrtw\n    verifiedregistry  bafk2bzacecf3yodlyudzukumehbuabgqljyhjt5ifiv4vetcfohnvsxzynwga\n    datacap           bafk2bzacebb6uy2ys7tapekmtj7apnjg7oyj4ia5t7tlkvbmwtxwv74lb2pug\n    account           bafk2bzacect2p7urje3pylrrrjy3tngn6yaih4gtzauuatf2jllk3ksgfiw2y\n    cron              bafk2bzacebcec3lffmos3nawm5cvwehssxeqwxixoyyfvejy7viszzsxzyu26\n    init              bafk2bzacebtdq4zyuxk2fzbdkva6kc4mx75mkbfmldplfntayhbl5wkqou33i\n    storageminer      bafk2bzacedyux5hlrildwutvvjdcsvjtwsoc5xnqdjl73ouiukgklekeuyfl4\n    \n\n 5. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n\n# venus-messager\n\n功能：\n\n 1. 增加对 basefee 的控制，可以对某个地址单独设置 basefee，当链上 basefee 高于限制的 basefee，消息将不会被推送出去\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后观察消息能否正常上链\n\n\n# venus-miner\n\n影响功能：\n\n依赖升级组件：\n\n注意事项：\n\n 1. 从 1.7.*升级到v1.8.0会自动迁移配置文件，从 1.6.* 升级到v1.8.0需重新初始化repo(init)，参考\n 2. 升级后能否正常出块\n\n\n# venus-gateway\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n 1. 升级后检查钱包：./venus-gateway wallet list\n 2. 升级后检查矿工：./venus-gateway miner list\n\n\n# venus-market\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n\n# venus-wallet\n\n影响功能：\n\n注意事项：\n\n 1. 启动后需要解锁钱包\n 2. 是否注册到 gateway',charsets:{cjk:!0}},{title:"nv18 各组件升级文档",frontmatter:{},regularPath:"/zh/operation/nv18-upgrade.html",relativePath:"zh/operation/nv18-upgrade.md",key:"v-bceb0eb6",path:"/zh/operation/nv18-upgrade.html",headers:[{level:2,title:"nv18 各组件升级文档",slug:"nv18-各组件升级文档",normalizedTitle:"nv18 各组件升级文档",charIndex:2},{level:3,title:"时间线",slug:"时间线",normalizedTitle:"时间线",charIndex:245},{level:3,title:"各组件版本",slug:"各组件版本",normalizedTitle:"各组件版本",charIndex:306},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:19},{level:3,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:153},{level:3,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:3401},{level:3,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:3532},{level:3,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:3586},{level:3,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:86},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:3787},{level:3,title:"venus-sector-manager",slug:"venus-sector-manager",normalizedTitle:"venus-sector-manager",charIndex:3851}],lastUpdated:"2024/8/6 05:04:12",headersStr:"nv18 各组件升级文档 时间线 各组件版本 venus venus-auth venus-messager venus-miner venus-gateway venus-market venus-wallet venus-sector-manager",content:'# nv18 各组件升级文档\n\n如果 venus 各组件的版本从 v1.8.x 升级到 v1.10.0，请先阅读 venus chain-service v1.9.* & venus-market v2.5.* upgrade list / 链服务 v1.9.*和订单服务 v2.5.*升级清单，尤其注意 venus-auth 和 venus-market 的升级，venus-auth 升级前需要为每一个矿工都创建一个用户，venus-market 的启动方式和配置有较大变动。\n\n\n# 时间线\n\n升级时间：2023-03-14T15:14:00Z，北京时间是 2023-03-14 23:14:00\n\n\n# 各组件版本\n\n * calibrationnet\n * mainnet\n\n\n# venus\n\n影响功能：支持 nv18 网络\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 2. 升级后检查 vk 文件是否完整\n\n 3. 升级后检查配置文件，通过日志检查 AllowableClockDriftSecs UpgradeHyggeHeight 和 UpgradeHyggeHeight 是否正常 :\n    \n    # cali\n    AllowableClockDriftSecs:1\n    Eip155ChainID:314159\n    UpgradeHyggeHeight:322354\n    # mainnet\n    AllowableClockDriftSecs:1\n    Eip155ChainID:314\n    UpgradeHyggeHeight:2683348\n    \n\n 4. 升级后需检查是否正常同步区块\n\n 5. 检查主网 v10 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 18\n    \n    # 顺序可能会不一样\n    Network Version: 18\n    Actor Version: 10\n    Actor             CID                                                             \n    datacap           bafk2bzacealj5uk7wixhvk7l5tnredtelralwnceafqq34nb2lbylhtuyo64u  \n    evm               bafk2bzaceahmzdxhqsm7cu2mexusjp6frm7r4kdesvti3etv5evfqboos2j4g  \n    init              bafk2bzaced2f5rhir3hbpqbz5ght7ohv2kgj42g5ykxrypuo2opxsup3ykwl6  \n    account           bafk2bzaceampw4romta75hyz5p4cqriypmpbgnkxncgxgqn6zptv5lsp2w2bo  \n    ethaccount        bafk2bzaceaqoc5zakbhjxn3jljc4lxnthllzunhdor7sxhwgmskvc6drqc3fa  \n    multisig          bafk2bzaceduf3hayh63jnl4z2knxv7cnrdenoubni22fxersc4octlwpxpmy4  \n    paymentchannel    bafk2bzaceartlg4mrbwgzcwric6mtvyawpbgx2xclo2vj27nna57nxynf3pgc  \n    reward            bafk2bzacebnhtaejfjtzymyfmbdrfmo7vgj3zsof6zlucbmkhrvcuotw5dxpq  \n    storagemarket     bafk2bzaceclejwjtpu2dhw3qbx6ow7b4pmhwa7ocrbbiqwp36sq5yeg6jz2bc  \n    storageminer      bafk2bzaced4h7noksockro7glnssz2jnmo2rpzd7dvnmfs4p24zx3h6gtx47s  \n    verifiedregistry  bafk2bzacedfel6edzqpe5oujno7fog4i526go4dtcs6vwrdtbpy2xq6htvcg6  \n    eam               bafk2bzacedrpm5gbleh4xkyo2jvs7p5g6f34soa6dpv7ashcdgy676snsum6g  \n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro  \n    storagepower      bafk2bzacec4ay4crzo73ypmh7o3fjendhbqrxake46bprabw67fvwjz5q6ixq  \n    system            bafk2bzacedakk5nofebyup4m7nvx6djksfwhnxzrfuq4oyemhpl4lllaikr64  \n    cron              bafk2bzacedcbtsifegiu432m5tysjzkxkmoczxscb6hqpmrr6img7xzdbbs2g\n    \n\n 6. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 7. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 8. actor 迁移\n    \n    预迁移高度是升级高度前 60 个高度：2683288\n    pre-migration  开始：STARTING pre-migration  结束：COMPLETED pre-migration\n    migration      开始：STARTING migration      结束：COMPLETED migration\n    \n\n 9. 配置变更\n    \n    # 增加 fevm 相关配置，其中 enableEthRPC 字段用来控制是否启用 ETH RPC，默认是 false\n    "fevm": {\n        "enableEthRPC": false,\n        "ethTxHashMappingLifetimeDays": 0,\n        "event": {\n                "enableRealTimeFilterAPI": false,\n                "enableHistoricFilterAPI": false,\n                "filterTTL": "24h0m0s",\n                "maxFilters": 100,\n                "maxFilterResults": 10000,\n                "maxFilterHeightRange": 2880,\n                "databasePath": ""\n        }\n    }\n    \n    # 增加 allowableClockDriftSecs 字段，默认是 1\n    "parameters": {\n        "allowableClockDriftSecs": 1\n    },\n    \n\n\n# venus-auth\n\n影响功能：\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 命令行能否正常使用\n\n\n# venus-messager\n\n功能：\n\n 1. 补充对接口权限的验证\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后观察能够正常收消息\n\n 2. 升级后观察消息能否正常上链\n\n 3. ReplacedMsg 更名为 NonceConflictMsg\n\n\n# venus-miner\n\n影响功能：\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后能否正常出块\n\n\n# venus-gateway\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n 1. 升级后检查钱包：./venus-gateway wallet list\n 2. 升级后检查矿工：./venus-gateway miner list\n\n\n# venus-market\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n\n# venus-wallet\n\n影响功能：\n\n注意事项：\n\n 1. 启动后需要解锁钱包\n 2. 是否注册到 gateway\n\n\n# venus-sector-manager\n\n编译：先 make dist-clean 再 make',normalizedContent:'# nv18 各组件升级文档\n\n如果 venus 各组件的版本从 v1.8.x 升级到 v1.10.0，请先阅读 venus chain-service v1.9.* & venus-market v2.5.* upgrade list / 链服务 v1.9.*和订单服务 v2.5.*升级清单，尤其注意 venus-auth 和 venus-market 的升级，venus-auth 升级前需要为每一个矿工都创建一个用户，venus-market 的启动方式和配置有较大变动。\n\n\n# 时间线\n\n升级时间：2023-03-14t15:14:00z，北京时间是 2023-03-14 23:14:00\n\n\n# 各组件版本\n\n * calibrationnet\n * mainnet\n\n\n# venus\n\n影响功能：支持 nv18 网络\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 2. 升级后检查 vk 文件是否完整\n\n 3. 升级后检查配置文件，通过日志检查 allowableclockdriftsecs upgradehyggeheight 和 upgradehyggeheight 是否正常 :\n    \n    # cali\n    allowableclockdriftsecs:1\n    eip155chainid:314159\n    upgradehyggeheight:322354\n    # mainnet\n    allowableclockdriftsecs:1\n    eip155chainid:314\n    upgradehyggeheight:2683348\n    \n\n 4. 升级后需检查是否正常同步区块\n\n 5. 检查主网 v10 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 18\n    \n    # 顺序可能会不一样\n    network version: 18\n    actor version: 10\n    actor             cid                                                             \n    datacap           bafk2bzacealj5uk7wixhvk7l5tnredtelralwnceafqq34nb2lbylhtuyo64u  \n    evm               bafk2bzaceahmzdxhqsm7cu2mexusjp6frm7r4kdesvti3etv5evfqboos2j4g  \n    init              bafk2bzaced2f5rhir3hbpqbz5ght7ohv2kgj42g5ykxrypuo2opxsup3ykwl6  \n    account           bafk2bzaceampw4romta75hyz5p4cqriypmpbgnkxncgxgqn6zptv5lsp2w2bo  \n    ethaccount        bafk2bzaceaqoc5zakbhjxn3jljc4lxnthllzunhdor7sxhwgmskvc6drqc3fa  \n    multisig          bafk2bzaceduf3hayh63jnl4z2knxv7cnrdenoubni22fxersc4octlwpxpmy4  \n    paymentchannel    bafk2bzaceartlg4mrbwgzcwric6mtvyawpbgx2xclo2vj27nna57nxynf3pgc  \n    reward            bafk2bzacebnhtaejfjtzymyfmbdrfmo7vgj3zsof6zlucbmkhrvcuotw5dxpq  \n    storagemarket     bafk2bzaceclejwjtpu2dhw3qbx6ow7b4pmhwa7ocrbbiqwp36sq5yeg6jz2bc  \n    storageminer      bafk2bzaced4h7noksockro7glnssz2jnmo2rpzd7dvnmfs4p24zx3h6gtx47s  \n    verifiedregistry  bafk2bzacedfel6edzqpe5oujno7fog4i526go4dtcs6vwrdtbpy2xq6htvcg6  \n    eam               bafk2bzacedrpm5gbleh4xkyo2jvs7p5g6f34soa6dpv7ashcdgy676snsum6g  \n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro  \n    storagepower      bafk2bzacec4ay4crzo73ypmh7o3fjendhbqrxake46bprabw67fvwjz5q6ixq  \n    system            bafk2bzacedakk5nofebyup4m7nvx6djksfwhnxzrfuq4oyemhpl4lllaikr64  \n    cron              bafk2bzacedcbtsifegiu432m5tysjzkxkmoczxscb6hqpmrr6img7xzdbbs2g\n    \n\n 6. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 7. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 8. actor 迁移\n    \n    预迁移高度是升级高度前 60 个高度：2683288\n    pre-migration  开始：starting pre-migration  结束：completed pre-migration\n    migration      开始：starting migration      结束：completed migration\n    \n\n 9. 配置变更\n    \n    # 增加 fevm 相关配置，其中 enableethrpc 字段用来控制是否启用 eth rpc，默认是 false\n    "fevm": {\n        "enableethrpc": false,\n        "ethtxhashmappinglifetimedays": 0,\n        "event": {\n                "enablerealtimefilterapi": false,\n                "enablehistoricfilterapi": false,\n                "filterttl": "24h0m0s",\n                "maxfilters": 100,\n                "maxfilterresults": 10000,\n                "maxfilterheightrange": 2880,\n                "databasepath": ""\n        }\n    }\n    \n    # 增加 allowableclockdriftsecs 字段，默认是 1\n    "parameters": {\n        "allowableclockdriftsecs": 1\n    },\n    \n\n\n# venus-auth\n\n影响功能：\n\n依赖升级组件：无\n\n注意事项：\n\n 1. 命令行能否正常使用\n\n\n# venus-messager\n\n功能：\n\n 1. 补充对接口权限的验证\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后观察能够正常收消息\n\n 2. 升级后观察消息能否正常上链\n\n 3. replacedmsg 更名为 nonceconflictmsg\n\n\n# venus-miner\n\n影响功能：\n\n依赖升级组件：\n\n注意事项：\n\n 1. 升级后能否正常出块\n\n\n# venus-gateway\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n 1. 升级后检查钱包：./venus-gateway wallet list\n 2. 升级后检查矿工：./venus-gateway miner list\n\n\n# venus-market\n\n影响功能：\n\n注意事项：\n\n编译：先 make dist-clean 再 make\n\n\n# venus-wallet\n\n影响功能：\n\n注意事项：\n\n 1. 启动后需要解锁钱包\n 2. 是否注册到 gateway\n\n\n# venus-sector-manager\n\n编译：先 make dist-clean 再 make',charsets:{cjk:!0}},{title:"Venus 各组件升级文档",frontmatter:{},regularPath:"/zh/operation/nv21-upgrade.html",relativePath:"zh/operation/nv21-upgrade.md",key:"v-4c77c1a5",path:"/zh/operation/nv21-upgrade.html",headers:[{level:2,title:"注意事项",slug:"注意事项",normalizedTitle:"注意事项",charIndex:20},{level:2,title:"需要升级的组件",slug:"需要升级的组件",normalizedTitle:"需要升级的组件",charIndex:210},{level:3,title:"升级顺序",slug:"升级顺序",normalizedTitle:"升级顺序",charIndex:592},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:255},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:121},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:3460},{level:3,title:"sophon-messager",slug:"sophon-messager",normalizedTitle:"sophon-messager",charIndex:329},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:440},{level:3,title:"droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:477},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:403},{level:3,title:"damocles-manager",slug:"damocles-manager",normalizedTitle:"damocles-manager",charIndex:514},{level:3,title:"damocles-worker",slug:"damocles-worker",normalizedTitle:"damocles-worker",charIndex:551},{level:3,title:"数据库变更",slug:"数据库变更",normalizedTitle:"数据库变更",charIndex:4590}],lastUpdated:"2024/8/6 05:04:12",headersStr:"注意事项 需要升级的组件 升级顺序 sophon-auth venus sophon-gateway sophon-messager sophon-miner droplet venus-wallet damocles-manager damocles-worker 数据库变更",content:"# Venus 各组件升级文档\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 Version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. WD消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n\n# 需要升级的组件\n\n组件名                TAG       COMMIT\nsophon-auth        v1.14.0   7caadbc\nvenus              v1.14.2   9204048\nsophon-messager    v1.14.0   e5f8371\nsoohon-gateway     v1.14.0   1adf038\nvenus-wallet       v1.14.0   b478cd0\nsophon-miner       v1.14.0   9ca976c\ndroplet            v2.10.0   6daf168\ndamocles-manager   v0.9.2    f3c5400\ndamocles-worker    v0.9.2    f3c5400\n\n\n# 升级顺序\n\n 1. sophon-auth\n 2. venus\n 3. soohon-gateway\n 4. sophon-messager\n 5. sophon-miner\n 6. droplet\n 7. venus-wallet\n 8. damocles-manager\n 9. damocles-worker\n\n\n# sophon-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件: 无\n\n注意事项：\n\n * 启动后能否正常鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题 如果 ~/.venus 存在且需要导入快照，需要先删除 ~/.venus/version 文件再导入快照\n\n本次升级 migration（actor迁移）使用的CPU越多，消耗的内存也越多，所以需要限制CPU使用的数量。\n在 venus 中可以通过环境变量（VENUS_MIGRATION_MAX_WORKER_COUN）来控制 migration 使用的CPU数量，\n例子：export VENUS_MIGRATION_MAX_WORKER_COUNT=13。以下是对于不同机器内存时，建议设置 VENUS_MIGRATION_MAX_WORKER_COUNT 的数量：\n\n48G VENUS_MIGRATION_MAX_WORKER_COUNT=13\n64G VENUS_MIGRATION_MAX_WORKER_COUNT=18\n96G VENUS_MIGRATION_MAX_WORKER_COUNT=24\n\n\n 1. 升级后检查vk文件是否完整\n\n 2. 升级后执行命令 ./venus state network-info，然后检查通过日志检查 UpgradeWatermelonHeight 是否正常:\n    \n    # cali\n    UpgradeWatermelonHeight: 1013134\n    # mainnet\n    UpgradeWatermelonHeight: 3469380\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v12 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 21\n    \n    # 顺序可能会不一样\n    Network Version: 21\n    Actor Version: 12\n    Actor             CID\n    datacap           bafk2bzacebpiwb2ml4qbnnaayxumtk43ryhc63exdgnhivy3hwgmzemawsmpq\n    ethaccount        bafk2bzaceb4gkau2vgsijcxpfuq33bd7w3efr2rrhxrwiacjmns2ntdiamswq\n    reward            bafk2bzacealqnxn5lwzwexd6reav4dppypquklx2ujlnvaxiqk2tzstyvkp5u\n    verifiedregistry  bafk2bzacedudgflxc75c77c6zkmfyq4u2xuk7k6xw6dfdccarjrvxx453b77q\n    eam               bafk2bzaceb3elj4hfbbjp7g5bptc7su7mptszl4nlqfedilxvstjo5ungm6oe\n    multisig          bafk2bzacecw5lyp3n3t67xdwrmo36h4z7afc3lobmmr6wg55w6yjzg5jhmh42\n    storagemarket     bafk2bzacedylkg5am446lcuih4voyzdn4yjeqfsxfzh5b6mcuhx4mok5ph5c4\n    system            bafk2bzacebfqrja2hip7esf4eafxjmu6xcogoqu5xxtgdg7xa5szgvvdguchu\n    account           bafk2bzaceboftg75mdiba7xbo2i3uvgtca4brhnr3u5ptihonixgpnrvhpxoa\n    cron              bafk2bzacechxjkfe2cehx4s7skj3wzfpzf7zolds64khrrrs66bhazsemktls\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    storagepower      bafk2bzacecsij5tpfzjpfuckxvccv2p3bdqjklkrfyyoei6lx5dyj5j4fvjm6\n    evm               bafk2bzacecmnyfiwb52tkbwmm2dsd7ysi3nvuxl3lmspy7pl26wxj4zj7w4wi\n    init              bafk2bzacebllyegx5r6lggf6ymyetbp7amacwpuxakhtjvjtvoy2bfkzk3vms\n    paymentchannel    bafk2bzacectv4cm47bnhga5febf3lo3fq47g72kmmp2xd5s6tcxz7hiqdywa4\n    storageminer      bafk2bzacedo75pabe4i2l3hvhtsjmijrcytd2y76xwe573uku25fi7sugqld6\n    \n\n 5. 若不排查问题，rust日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在 20-30 分钟，正式迁移时间在 70 秒左右\n    \n    预迁移高度是升级高度前 180 个高度：\n    pre-migration  开始：STARTING pre-migration  结束：COMPLETED pre-migration\n    migration      开始：STARTING migration      结束：COMPLETED migration\n    \n\n\n# sophon-gateway\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# sophon-messager\n\n影响功能：\n\n依赖升级组件: venus, sophon-auth, soohon-gateway\n\n注意事项：\n\n * 升级之后需要观察能否正常接收消息, 消息能否正常上链\n\n\n# sophon-miner\n\n影响功能：\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n * 配置文件中 [Auth].[Token] 必须配置，且在sophon-auth中具有admin权限，不要使用defaultLocalToken对应的token，应手动创建一个.\n\n\n# droplet\n\n影响功能：\n\n * 支持 v2 版本发单协议\n * 支持离线计算 commP\n\n依赖升级组件: auth, venus, gateway, messager\n\n注意事项：\n\n * 升级后能否正常发单和检索\n\n\n# venus-wallet\n\n影响功能： 无\n\n依赖升级组件: gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# damocles-manager\n\n依赖升级组件: 链服务组件\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# damocles-worker\n\n依赖升级组件: damocles-manager\n\n注意事项：\n\n * 建议等封装完所有的任务之后, 没有正在进行的的封装任务时, 进行程序更新。如果需要再封装进行的过程中进行更新的话，封装线程可能会卡在 SyntheticPoRepNeeded 状态。这个时候重置任务的状态为 PCSubmitted 即可：damocles-manager util worker resume <worker name> <thread index> PCSubmitted\n * 新的证明类型 SyntheticPoRep 会使用新的证明参数文件。 如果启用 SyntheticPoRep 最好提前准备好新的证明参数，证明参数有问题可能会导致 SyntheticPoRep 死锁。\n\n----------------------------------------\n\n更新结果验证步骤:\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. WD上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n 1. droplet storage_deals 表增加 id 字段 ==> ALTER TABLE storage_deals ADD id varchar(128)",normalizedContent:"# venus 各组件升级文档\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. wd消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n\n# 需要升级的组件\n\n组件名                tag       commit\nsophon-auth        v1.14.0   7caadbc\nvenus              v1.14.2   9204048\nsophon-messager    v1.14.0   e5f8371\nsoohon-gateway     v1.14.0   1adf038\nvenus-wallet       v1.14.0   b478cd0\nsophon-miner       v1.14.0   9ca976c\ndroplet            v2.10.0   6daf168\ndamocles-manager   v0.9.2    f3c5400\ndamocles-worker    v0.9.2    f3c5400\n\n\n# 升级顺序\n\n 1. sophon-auth\n 2. venus\n 3. soohon-gateway\n 4. sophon-messager\n 5. sophon-miner\n 6. droplet\n 7. venus-wallet\n 8. damocles-manager\n 9. damocles-worker\n\n\n# sophon-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件: 无\n\n注意事项：\n\n * 启动后能否正常鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题 如果 ~/.venus 存在且需要导入快照，需要先删除 ~/.venus/version 文件再导入快照\n\n本次升级 migration（actor迁移）使用的cpu越多，消耗的内存也越多，所以需要限制cpu使用的数量。\n在 venus 中可以通过环境变量（venus_migration_max_worker_coun）来控制 migration 使用的cpu数量，\n例子：export venus_migration_max_worker_count=13。以下是对于不同机器内存时，建议设置 venus_migration_max_worker_count 的数量：\n\n48g venus_migration_max_worker_count=13\n64g venus_migration_max_worker_count=18\n96g venus_migration_max_worker_count=24\n\n\n 1. 升级后检查vk文件是否完整\n\n 2. 升级后执行命令 ./venus state network-info，然后检查通过日志检查 upgradewatermelonheight 是否正常:\n    \n    # cali\n    upgradewatermelonheight: 1013134\n    # mainnet\n    upgradewatermelonheight: 3469380\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v12 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 21\n    \n    # 顺序可能会不一样\n    network version: 21\n    actor version: 12\n    actor             cid\n    datacap           bafk2bzacebpiwb2ml4qbnnaayxumtk43ryhc63exdgnhivy3hwgmzemawsmpq\n    ethaccount        bafk2bzaceb4gkau2vgsijcxpfuq33bd7w3efr2rrhxrwiacjmns2ntdiamswq\n    reward            bafk2bzacealqnxn5lwzwexd6reav4dppypquklx2ujlnvaxiqk2tzstyvkp5u\n    verifiedregistry  bafk2bzacedudgflxc75c77c6zkmfyq4u2xuk7k6xw6dfdccarjrvxx453b77q\n    eam               bafk2bzaceb3elj4hfbbjp7g5bptc7su7mptszl4nlqfedilxvstjo5ungm6oe\n    multisig          bafk2bzacecw5lyp3n3t67xdwrmo36h4z7afc3lobmmr6wg55w6yjzg5jhmh42\n    storagemarket     bafk2bzacedylkg5am446lcuih4voyzdn4yjeqfsxfzh5b6mcuhx4mok5ph5c4\n    system            bafk2bzacebfqrja2hip7esf4eafxjmu6xcogoqu5xxtgdg7xa5szgvvdguchu\n    account           bafk2bzaceboftg75mdiba7xbo2i3uvgtca4brhnr3u5ptihonixgpnrvhpxoa\n    cron              bafk2bzacechxjkfe2cehx4s7skj3wzfpzf7zolds64khrrrs66bhazsemktls\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    storagepower      bafk2bzacecsij5tpfzjpfuckxvccv2p3bdqjklkrfyyoei6lx5dyj5j4fvjm6\n    evm               bafk2bzacecmnyfiwb52tkbwmm2dsd7ysi3nvuxl3lmspy7pl26wxj4zj7w4wi\n    init              bafk2bzacebllyegx5r6lggf6ymyetbp7amacwpuxakhtjvjtvoy2bfkzk3vms\n    paymentchannel    bafk2bzacectv4cm47bnhga5febf3lo3fq47g72kmmp2xd5s6tcxz7hiqdywa4\n    storageminer      bafk2bzacedo75pabe4i2l3hvhtsjmijrcytd2y76xwe573uku25fi7sugqld6\n    \n\n 5. 若不排查问题，rust日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在 20-30 分钟，正式迁移时间在 70 秒左右\n    \n    预迁移高度是升级高度前 180 个高度：\n    pre-migration  开始：starting pre-migration  结束：completed pre-migration\n    migration      开始：starting migration      结束：completed migration\n    \n\n\n# sophon-gateway\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# sophon-messager\n\n影响功能：\n\n依赖升级组件: venus, sophon-auth, soohon-gateway\n\n注意事项：\n\n * 升级之后需要观察能否正常接收消息, 消息能否正常上链\n\n\n# sophon-miner\n\n影响功能：\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n * 配置文件中 [auth].[token] 必须配置，且在sophon-auth中具有admin权限，不要使用defaultlocaltoken对应的token，应手动创建一个.\n\n\n# droplet\n\n影响功能：\n\n * 支持 v2 版本发单协议\n * 支持离线计算 commp\n\n依赖升级组件: auth, venus, gateway, messager\n\n注意事项：\n\n * 升级后能否正常发单和检索\n\n\n# venus-wallet\n\n影响功能： 无\n\n依赖升级组件: gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# damocles-manager\n\n依赖升级组件: 链服务组件\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# damocles-worker\n\n依赖升级组件: damocles-manager\n\n注意事项：\n\n * 建议等封装完所有的任务之后, 没有正在进行的的封装任务时, 进行程序更新。如果需要再封装进行的过程中进行更新的话，封装线程可能会卡在 syntheticporepneeded 状态。这个时候重置任务的状态为 pcsubmitted 即可：damocles-manager util worker resume <worker name> <thread index> pcsubmitted\n * 新的证明类型 syntheticporep 会使用新的证明参数文件。 如果启用 syntheticporep 最好提前准备好新的证明参数，证明参数有问题可能会导致 syntheticporep 死锁。\n\n----------------------------------------\n\n更新结果验证步骤:\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. wd上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n 1. droplet storage_deals 表增加 id 字段 ==> alter table storage_deals add id varchar(128)",charsets:{cjk:!0}},{title:"Venus 各组件升级文档 (持续更新中)",frontmatter:{},regularPath:"/zh/operation/nv22-upgrade.html",relativePath:"zh/operation/nv22-upgrade.md",key:"v-1396fa05",path:"/zh/operation/nv22-upgrade.html",headers:[{level:2,title:"注意事项",slug:"注意事项",normalizedTitle:"注意事项",charIndex:28},{level:2,title:"需要升级的组件",slug:"需要升级的组件",normalizedTitle:"需要升级的组件",charIndex:218},{level:3,title:"升级顺序",slug:"升级顺序",normalizedTitle:"升级顺序",charIndex:681},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:267},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:129},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:3439},{level:3,title:"sophon-messager",slug:"sophon-messager",normalizedTitle:"sophon-messager",charIndex:390},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:513},{level:3,title:"droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:554},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:472},{level:3,title:"damocles-manager",slug:"damocles-manager",normalizedTitle:"damocles-manager",charIndex:595},{level:3,title:"damocles-worker",slug:"damocles-worker",normalizedTitle:"damocles-worker",charIndex:636},{level:3,title:"数据库变更",slug:"数据库变更",normalizedTitle:"数据库变更",charIndex:4264}],lastUpdated:"2024/8/6 05:04:12",headersStr:"注意事项 需要升级的组件 升级顺序 sophon-auth venus sophon-gateway sophon-messager sophon-miner droplet venus-wallet damocles-manager damocles-worker 数据库变更",content:"# Venus 各组件升级文档 (持续更新中)\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 Version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. WD消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n\n# 需要升级的组件\n\n组件名                TAG           COMMIT\nsophon-auth        v1.15.0       a1e964b\nvenus              v1.15.1       81c99f3\nsophon-co          v0.8.0        0e48712\nsophon-messager    v1.15.0       1e4f0d5\nsoohon-gateway     v1.15.0       541891a\nvenus-wallet       v1.15.0       6b3de34\nsophon-miner       v1.15.0       8dd6c68\ndroplet            v2.11.0       44481dd\ndamocles-manager   v0.10.0-rc1   2f6c5f9\ndamocles-worker    v0.10.0-rc1   2f6c5f9\n\n\n# 升级顺序\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件: 无\n\n注意事项：\n\n * 启动后能否正常鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 1. 升级后检查vk文件是否完整\n\n 2. 升级后执行命令 ./venus state network-info，然后检查通过日志检查 UpgradeDragonHeight 是否正常:\n    \n    # cali\n    UpgradeDragonHeight: 1427974\n    # mainnet\n    UpgradeDragonHeight: 3855360\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v13 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 22\n    \n    # 顺序可能会不一样\n    Network Version: 22\n    Actor Version: 13\n    Manifest CID: bafy2bzacecdhvfmtirtojwhw2tyciu4jkbpsbk5g53oe24br27oy62sn4dc4e\n    Actor             CID\n    account           bafk2bzacedxnbtlsqdk76fsfmnhyvsblwyfducerwwtp3mqtx2wbrvs5idl52\n    cron              bafk2bzacebbopddyn5csb3fsuhh2an4ttd23x6qnwixgohlirj5ahtcudphyc\n    datacap           bafk2bzaceah42tfnhd7xnztawgf46gbvc3m2gudoxshlba2ucmmo2vy67t7ci\n    eam               bafk2bzaceb23bhvvcjsth7cn7vp3gbaphrutsaz7v6hkls3ogotzs4bnhm4mk\n    ethaccount        bafk2bzaceautge6zhuy6jbj3uldwoxwhpywuon6z3xfvmdbzpbdribc6zzmei\n    evm               bafk2bzacedq6v2lyuhgywhlllwmudfj2zufzcauxcsvvd34m2ek5xr55mvh2q\n    init              bafk2bzacedr4xacm3fts4vilyeiacjr2hpmwzclyzulbdo24lrfxbtau2wbai\n    multisig          bafk2bzacecr5zqarfqak42xqcfeulsxlavcltawsx2fvc7zsjtby6ti4b3wqc\n    paymentchannel    bafk2bzacebntdhfmyc24e7tm52ggx5tnw4i3hrr3jmllsepv3mibez4hywsa2\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    reward            bafk2bzacedq4q2kwkruu4xm7rkyygumlbw2yt4nimna2ivea4qarvtkohnuwu\n    storagemarket     bafk2bzacebjtoltdviyznpj34hh5qp6u257jnnbjole5rhqfixm7ug3epvrfu\n    storageminer      bafk2bzacebf4rrqyk7gcfggggul6nfpzay7f2ordnkwm7z2wcf4mq6r7i77t2\n    storagepower      bafk2bzacecjy4dkulvxppg3ocbmeixe2wgg6yxoyjxrm4ko2fm3uhpvfvam6e\n    system            bafk2bzacecyf523quuq2kdjfdvyty446z2ounmamtgtgeqnr3ynlu5cqrlt6e\n    verifiedregistry  bafk2bzacedkxehp7y7iyukbcje3wbpqcvufisos6exatkanyrbotoecdkrbta\n    \n\n 5. 若不排查问题，rust日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在 30 分钟左右，正式迁移时间在 100 秒左右\n    \n    预迁移高度是升级高度前 120 个高度：\n    pre-migration  开始：STARTING pre-migration  结束：COMPLETED pre-migration\n    migration      开始：STARTING migration      结束：COMPLETED migration\n    \n\n 8. 如果 ~/.venus 存在且需要导入快照，需要先删除 ~/.venus/version 文件再导入快照\n    \n    * 主网: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# sophon-messager\n\n影响功能：\n\n依赖升级组件: venus, sophon-auth, soohon-gateway\n\n注意事项：\n\n * 升级之后需要观察能否正常接收消息, 消息能否正常上链\n\n\n# sophon-miner\n\n影响功能：\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n\n# droplet\n\n影响功能：\n\n * 支持 direct data onboarding，使用文档：https://github.com/ipfs-force-community/droplet/blob/master/docs/zh/direct-on-boarding.md\n\n依赖升级组件: auth, venus, gateway, messager\n\n注意事项：\n\n * 升级后能否正常发单和检索\n\n\n# venus-wallet\n\n影响功能： 无\n\n依赖升级组件: gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# damocles-manager\n\n依赖升级组件: 链服务组件\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# damocles-worker\n\n依赖升级组件: damocles-manager\n\n注意事项：\n\n----------------------------------------\n\n更新结果验证步骤:\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. WD上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n 1. droplet 增加 direct_deals 表，用于存储 direct 订单。",normalizedContent:"# venus 各组件升级文档 (持续更新中)\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. wd消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n\n# 需要升级的组件\n\n组件名                tag           commit\nsophon-auth        v1.15.0       a1e964b\nvenus              v1.15.1       81c99f3\nsophon-co          v0.8.0        0e48712\nsophon-messager    v1.15.0       1e4f0d5\nsoohon-gateway     v1.15.0       541891a\nvenus-wallet       v1.15.0       6b3de34\nsophon-miner       v1.15.0       8dd6c68\ndroplet            v2.11.0       44481dd\ndamocles-manager   v0.10.0-rc1   2f6c5f9\ndamocles-worker    v0.10.0-rc1   2f6c5f9\n\n\n# 升级顺序\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件: 无\n\n注意事项：\n\n * 启动后能否正常鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 1. 升级后检查vk文件是否完整\n\n 2. 升级后执行命令 ./venus state network-info，然后检查通过日志检查 upgradedragonheight 是否正常:\n    \n    # cali\n    upgradedragonheight: 1427974\n    # mainnet\n    upgradedragonheight: 3855360\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v13 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 22\n    \n    # 顺序可能会不一样\n    network version: 22\n    actor version: 13\n    manifest cid: bafy2bzacecdhvfmtirtojwhw2tyciu4jkbpsbk5g53oe24br27oy62sn4dc4e\n    actor             cid\n    account           bafk2bzacedxnbtlsqdk76fsfmnhyvsblwyfducerwwtp3mqtx2wbrvs5idl52\n    cron              bafk2bzacebbopddyn5csb3fsuhh2an4ttd23x6qnwixgohlirj5ahtcudphyc\n    datacap           bafk2bzaceah42tfnhd7xnztawgf46gbvc3m2gudoxshlba2ucmmo2vy67t7ci\n    eam               bafk2bzaceb23bhvvcjsth7cn7vp3gbaphrutsaz7v6hkls3ogotzs4bnhm4mk\n    ethaccount        bafk2bzaceautge6zhuy6jbj3uldwoxwhpywuon6z3xfvmdbzpbdribc6zzmei\n    evm               bafk2bzacedq6v2lyuhgywhlllwmudfj2zufzcauxcsvvd34m2ek5xr55mvh2q\n    init              bafk2bzacedr4xacm3fts4vilyeiacjr2hpmwzclyzulbdo24lrfxbtau2wbai\n    multisig          bafk2bzacecr5zqarfqak42xqcfeulsxlavcltawsx2fvc7zsjtby6ti4b3wqc\n    paymentchannel    bafk2bzacebntdhfmyc24e7tm52ggx5tnw4i3hrr3jmllsepv3mibez4hywsa2\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    reward            bafk2bzacedq4q2kwkruu4xm7rkyygumlbw2yt4nimna2ivea4qarvtkohnuwu\n    storagemarket     bafk2bzacebjtoltdviyznpj34hh5qp6u257jnnbjole5rhqfixm7ug3epvrfu\n    storageminer      bafk2bzacebf4rrqyk7gcfggggul6nfpzay7f2ordnkwm7z2wcf4mq6r7i77t2\n    storagepower      bafk2bzacecjy4dkulvxppg3ocbmeixe2wgg6yxoyjxrm4ko2fm3uhpvfvam6e\n    system            bafk2bzacecyf523quuq2kdjfdvyty446z2ounmamtgtgeqnr3ynlu5cqrlt6e\n    verifiedregistry  bafk2bzacedkxehp7y7iyukbcje3wbpqcvufisos6exatkanyrbotoecdkrbta\n    \n\n 5. 若不排查问题，rust日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在 30 分钟左右，正式迁移时间在 100 秒左右\n    \n    预迁移高度是升级高度前 120 个高度：\n    pre-migration  开始：starting pre-migration  结束：completed pre-migration\n    migration      开始：starting migration      结束：completed migration\n    \n\n 8. 如果 ~/.venus 存在且需要导入快照，需要先删除 ~/.venus/version 文件再导入快照\n    \n    * 主网: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# sophon-messager\n\n影响功能：\n\n依赖升级组件: venus, sophon-auth, soohon-gateway\n\n注意事项：\n\n * 升级之后需要观察能否正常接收消息, 消息能否正常上链\n\n\n# sophon-miner\n\n影响功能：\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n\n# droplet\n\n影响功能：\n\n * 支持 direct data onboarding，使用文档：https://github.com/ipfs-force-community/droplet/blob/master/docs/zh/direct-on-boarding.md\n\n依赖升级组件: auth, venus, gateway, messager\n\n注意事项：\n\n * 升级后能否正常发单和检索\n\n\n# venus-wallet\n\n影响功能： 无\n\n依赖升级组件: gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# damocles-manager\n\n依赖升级组件: 链服务组件\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# damocles-worker\n\n依赖升级组件: damocles-manager\n\n注意事项：\n\n----------------------------------------\n\n更新结果验证步骤:\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. wd上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n 1. droplet 增加 direct_deals 表，用于存储 direct 订单。",charsets:{cjk:!0}},{title:"Venus 各组件升级文档",frontmatter:{},regularPath:"/zh/operation/nv19-upgrade.html",relativePath:"zh/operation/nv19-upgrade.md",key:"v-68a9b105",path:"/zh/operation/nv19-upgrade.html",headers:[{level:2,title:"注意事项",slug:"注意事项",normalizedTitle:"注意事项",charIndex:20},{level:2,title:"需要升级的组件",slug:"需要升级的组件",normalizedTitle:"需要升级的组件",charIndex:211},{level:3,title:"升级顺序",slug:"升级顺序",normalizedTitle:"升级顺序",charIndex:657},{level:3,title:"venus-auth",slug:"venus-auth",normalizedTitle:"venus-auth",charIndex:263},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:121},{level:3,title:"venus-gateway",slug:"venus-gateway",normalizedTitle:"venus-gateway",charIndex:395},{level:3,title:"venus-messager",slug:"venus-messager",normalizedTitle:"venus-messager",charIndex:351},{level:3,title:"venus-miner",slug:"venus-miner",normalizedTitle:"venus-miner",charIndex:483},{level:3,title:"venus-market",slug:"venus-market",normalizedTitle:"venus-market",charIndex:527},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:439},{level:3,title:"venus-sector-manger",slug:"venus-sector-manger",normalizedTitle:"venus-sector-manger",charIndex:4298},{level:3,title:"数据库变更",slug:"数据库变更",normalizedTitle:"数据库变更",charIndex:4690}],lastUpdated:"2024/8/6 05:04:12",headersStr:"注意事项 需要升级的组件 升级顺序 venus-auth venus venus-gateway venus-messager venus-miner venus-market venus-wallet venus-sector-manger 数据库变更",content:'# Venus 各组件升级文档\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 Version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. WD 消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n\n# 需要升级的组件\n\n组件名                    TAG          COMMIT\nvenus-auth             v1.11.0      0c30588\nvenus                  v1.11.1      870f1b4\nvenus-messager         v1.11.0      e4c4ab4\nvenus-gateway          v1.11.1      8d7be74\nvenus-wallet           v1.11.0      7afa1eb\nvenus-miner            v1.11.0      a30f342\nvenus-market           v2.7.1       b920551\nvenus-sector-manager   v0.6.0-rc3   134b502\nvenus-worker           无需升级         -\n\n\n# 升级顺序\n\n 1. venus-auth\n 2. venus\n 3. venus-gateway\n 4. venus-messager\n 5. venus-miner\n 6. venus-market\n 7. venus-wallet-pro\n 8. venus-sector-manager\n\n\n# venus-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件：无\n\n注意事项：\n\n * 启动时使用 "--disable-perm-check" ,暂时关闭 auth 接口保护的特性\n * 创建 token 之前需要先创建对应的用户\n\n备注：\n\n * 新版本的 auth 在启动的时候会自动生成一个名为 "defaultLocalToken" 的 token, 该 token 用于 auth-cli 执行命令时的鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件：venus-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n启动时应带上 flag --auth-token ,或者修改配置文件 api.venusAuthToken 配置项\n\n 1. 升级后检查 vk 文件是否完整\n\n 2. 升级后检查配置文件，通过日志检查 UpgradeLightningHeight 和 UpgradeThunderHeight 是否正常 :\n    \n    # cali\n    UpgradeLightningHeight:489094\n    UpgradeThunderHeight:489094+3120\n    # mainnet\n    UpgradeLightningHeight:2809800\n    UpgradeThunderHeight:  2809800 + 2880*21 = 2870280\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v11 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 19\n    \n    # 顺序可能会不一样\n    Network Version: 19\n    Actor Version: 11\n    Actor             CID\n    reward            bafk2bzacebwjw2vxkobs7r2kwjdqqb42h2kucyuk6flbnyzw4odg5s4mogamo\n    system            bafk2bzaced7npe5mt5nh72jxr2igi2sofoa7gedt4w6kueeke7i3xxugqpjfm\n    eam               bafk2bzaceaelwt4yfsfvsu3pa3miwalsvy3cfkcjvmt4sqoeopsppnrmj2mf2\n    cron              bafk2bzacebpewdvvgt6tk2o2u4rcovdgym67tadiis5usemlbejg7k3kt567o\n    datacap           bafk2bzacebslykoyrb2hm7aacjngqgd5n2wmeii2goadrs5zaya3pvdf6pdnq\n    ethaccount        bafk2bzaceclkmc4yidxc6lgcjpfypbde2eddnevcveo4j5kmh4ek6inqysz2k\n    evm               bafk2bzacediwh6etwzwmb5pivtclpdplewdjzphouwqpppce6opisjv2fjqfe\n    init              bafk2bzaceckwf3w6n2nw6eh77ktmsxqgsvshonvgnyk5q5syyngtetxvasfxg\n    multisig          bafk2bzaceafajceqwg5ybiz7xw6rxammuirkgtuv625gzaehsqfprm4bazjmk\n    paymentchannel    bafk2bzaceb4e6cnsnviegmqvsmoxzncruvhra54piq7bwiqfqevle6oob2gvo\n    account           bafk2bzacealnlr7st6lkwoh6wxpf2hnrlex5sknaopgmkr2tuhg7vmbfy45so\n    storageminer      bafk2bzacec24okjqrp7c7rj3hbrs5ez5apvwah2ruka6haesgfngf37mhk6us\n    storagepower      bafk2bzaceaxgloxuzg35vu7l7tohdgaq2frsfp4ejmuo7tkoxjp5zqrze6sf4\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    verifiedregistry  bafk2bzacedej3dnr62g2je2abmyjg3xqv4otvh6e26du5fcrhvw7zgcaaez3a\n    storagemarket     bafk2bzaceazu2j2zu4p24tr22btnqzkhzjvyjltlvsagaj6w3syevikeb5d7m\n    \n\n 5. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在 80 秒左右，正式迁移时间再 60 秒左右\n    \n    预迁移高度是升级高度前 120 个高度：2809800 - 120 = 2809680\n    pre-migration  开始：STARTING pre-migration  结束：COMPLETED pre-migration\n    migration      开始：STARTING migration      结束：COMPLETED migration\n    \n\n\n# venus-gateway\n\n影响功能：无\n\n依赖升级组件：venus-auth\n\n注意事项：\n\n * 编译时，需要先 make dist-clean 再 make\n * 启动时，应带上 flag --auth-token ,或者直接在配置中设置配置项：AuthConfig.Token\n * 移除 flag：--disable-address-verify，升级时检查启动命令是否还在使用该 flag\n\n\n# venus-messager\n\n影响功能：\n\n * 消息 replace\n * list --block 命令\n\n依赖升级组件：venus, venus-auth, venus-gateway\n\n注意事项：\n\n * 升级第一次启动时，带上 auth-token flag, 或者先修改配置文件 JWTConfig.Token 配置项\n * 升级之后需要观察能否正常接收消息，消息能否正常上链\n\n备注：\n\n * replace fee 系数的最小值 由 1.25 下调 到 1.11\n * list blocked 消息的时候，unfill 状态的消息也会作为 blocked 消息被列出来\n\n\n# venus-miner\n\n影响功能：\n\n * 选消息增加超时机制\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n * 配置文件中 [Auth].[Token] 必须配置，且在 venus-auth 中具有 admin 权限，不要使用defaultLocalToken对应的 token，应手动创建一个。\n\n\n# venus-market\n\n影响功能：\n\n * 新增和调整部分命令 依赖升级组件：auth, venus, gateway, messager\n\n注意事项：\n\n * 启动时必须带上 cs-token, 或者修改 配置项 AuthNode.Token\n\n\n# venus-wallet\n\n影响功能：无\n\n依赖升级组件：gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# venus-sector-manger\n\n影响功能：fip-0061 wdpost 算法改动\n\n依赖升级组件：链服务组件\n\n注意事项：\n\n * 编译时，需要先 make dist-clean 再 make\n * wdpost 算法回滚步骤\n   1. vsm 切换到 [fip-0061-fallback] https://github.com/ipfs-force-community/venus-cluster/tree/fip-0061-fallback 分支\n\n----------------------------------------\n\n更新结果验证步骤：\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. WD 上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种 gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n 1. venus-messager 增加对 actor 的配置及相关命令，新增 actor_cfg 表\n\n 2. venus-market storage_deals 表增加索引：CREATE INDEX idx_cdpprovider_state ON storage_deals(cdp_provider,state)',normalizedContent:'# venus 各组件升级文档\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. wd 消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n\n# 需要升级的组件\n\n组件名                    tag          commit\nvenus-auth             v1.11.0      0c30588\nvenus                  v1.11.1      870f1b4\nvenus-messager         v1.11.0      e4c4ab4\nvenus-gateway          v1.11.1      8d7be74\nvenus-wallet           v1.11.0      7afa1eb\nvenus-miner            v1.11.0      a30f342\nvenus-market           v2.7.1       b920551\nvenus-sector-manager   v0.6.0-rc3   134b502\nvenus-worker           无需升级         -\n\n\n# 升级顺序\n\n 1. venus-auth\n 2. venus\n 3. venus-gateway\n 4. venus-messager\n 5. venus-miner\n 6. venus-market\n 7. venus-wallet-pro\n 8. venus-sector-manager\n\n\n# venus-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件：无\n\n注意事项：\n\n * 启动时使用 "--disable-perm-check" ,暂时关闭 auth 接口保护的特性\n * 创建 token 之前需要先创建对应的用户\n\n备注：\n\n * 新版本的 auth 在启动的时候会自动生成一个名为 "defaultlocaltoken" 的 token, 该 token 用于 auth-cli 执行命令时的鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件：venus-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n启动时应带上 flag --auth-token ,或者修改配置文件 api.venusauthtoken 配置项\n\n 1. 升级后检查 vk 文件是否完整\n\n 2. 升级后检查配置文件，通过日志检查 upgradelightningheight 和 upgradethunderheight 是否正常 :\n    \n    # cali\n    upgradelightningheight:489094\n    upgradethunderheight:489094+3120\n    # mainnet\n    upgradelightningheight:2809800\n    upgradethunderheight:  2809800 + 2880*21 = 2870280\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v11 actors code，确保与下面输出一样\n    \n    ./venus state actor-cids --network-version 19\n    \n    # 顺序可能会不一样\n    network version: 19\n    actor version: 11\n    actor             cid\n    reward            bafk2bzacebwjw2vxkobs7r2kwjdqqb42h2kucyuk6flbnyzw4odg5s4mogamo\n    system            bafk2bzaced7npe5mt5nh72jxr2igi2sofoa7gedt4w6kueeke7i3xxugqpjfm\n    eam               bafk2bzaceaelwt4yfsfvsu3pa3miwalsvy3cfkcjvmt4sqoeopsppnrmj2mf2\n    cron              bafk2bzacebpewdvvgt6tk2o2u4rcovdgym67tadiis5usemlbejg7k3kt567o\n    datacap           bafk2bzacebslykoyrb2hm7aacjngqgd5n2wmeii2goadrs5zaya3pvdf6pdnq\n    ethaccount        bafk2bzaceclkmc4yidxc6lgcjpfypbde2eddnevcveo4j5kmh4ek6inqysz2k\n    evm               bafk2bzacediwh6etwzwmb5pivtclpdplewdjzphouwqpppce6opisjv2fjqfe\n    init              bafk2bzaceckwf3w6n2nw6eh77ktmsxqgsvshonvgnyk5q5syyngtetxvasfxg\n    multisig          bafk2bzaceafajceqwg5ybiz7xw6rxammuirkgtuv625gzaehsqfprm4bazjmk\n    paymentchannel    bafk2bzaceb4e6cnsnviegmqvsmoxzncruvhra54piq7bwiqfqevle6oob2gvo\n    account           bafk2bzacealnlr7st6lkwoh6wxpf2hnrlex5sknaopgmkr2tuhg7vmbfy45so\n    storageminer      bafk2bzacec24okjqrp7c7rj3hbrs5ez5apvwah2ruka6haesgfngf37mhk6us\n    storagepower      bafk2bzaceaxgloxuzg35vu7l7tohdgaq2frsfp4ejmuo7tkoxjp5zqrze6sf4\n    placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n    verifiedregistry  bafk2bzacedej3dnr62g2je2abmyjg3xqv4otvh6e26du5fcrhvw7zgcaaez3a\n    storagemarket     bafk2bzaceazu2j2zu4p24tr22btnqzkhzjvyjltlvsagaj6w3syevikeb5d7m\n    \n\n 5. 若不排查问题，rust 日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在 80 秒左右，正式迁移时间再 60 秒左右\n    \n    预迁移高度是升级高度前 120 个高度：2809800 - 120 = 2809680\n    pre-migration  开始：starting pre-migration  结束：completed pre-migration\n    migration      开始：starting migration      结束：completed migration\n    \n\n\n# venus-gateway\n\n影响功能：无\n\n依赖升级组件：venus-auth\n\n注意事项：\n\n * 编译时，需要先 make dist-clean 再 make\n * 启动时，应带上 flag --auth-token ,或者直接在配置中设置配置项：authconfig.token\n * 移除 flag：--disable-address-verify，升级时检查启动命令是否还在使用该 flag\n\n\n# venus-messager\n\n影响功能：\n\n * 消息 replace\n * list --block 命令\n\n依赖升级组件：venus, venus-auth, venus-gateway\n\n注意事项：\n\n * 升级第一次启动时，带上 auth-token flag, 或者先修改配置文件 jwtconfig.token 配置项\n * 升级之后需要观察能否正常接收消息，消息能否正常上链\n\n备注：\n\n * replace fee 系数的最小值 由 1.25 下调 到 1.11\n * list blocked 消息的时候，unfill 状态的消息也会作为 blocked 消息被列出来\n\n\n# venus-miner\n\n影响功能：\n\n * 选消息增加超时机制\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n * 配置文件中 [auth].[token] 必须配置，且在 venus-auth 中具有 admin 权限，不要使用defaultlocaltoken对应的 token，应手动创建一个。\n\n\n# venus-market\n\n影响功能：\n\n * 新增和调整部分命令 依赖升级组件：auth, venus, gateway, messager\n\n注意事项：\n\n * 启动时必须带上 cs-token, 或者修改 配置项 authnode.token\n\n\n# venus-wallet\n\n影响功能：无\n\n依赖升级组件：gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# venus-sector-manger\n\n影响功能：fip-0061 wdpost 算法改动\n\n依赖升级组件：链服务组件\n\n注意事项：\n\n * 编译时，需要先 make dist-clean 再 make\n * wdpost 算法回滚步骤\n   1. vsm 切换到 [fip-0061-fallback] https://github.com/ipfs-force-community/venus-cluster/tree/fip-0061-fallback 分支\n\n----------------------------------------\n\n更新结果验证步骤：\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. wd 上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种 gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n 1. venus-messager 增加对 actor 的配置及相关命令，新增 actor_cfg 表\n\n 2. venus-market storage_deals 表增加索引：create index idx_cdpprovider_state on storage_deals(cdp_provider,state)',charsets:{cjk:!0}},{title:"prometheus 使用说明",frontmatter:{},regularPath:"/zh/operation/prometheus-instruction.html",relativePath:"zh/operation/prometheus-instruction.md",key:"v-1eb25f05",path:"/zh/operation/prometheus-instruction.html",headers:[{level:2,title:"配置解析",slug:"配置解析",normalizedTitle:"配置解析",charIndex:70},{level:3,title:"服务发现",slug:"服务发现",normalizedTitle:"服务发现",charIndex:1221},{level:2,title:"启动",slug:"启动",normalizedTitle:"启动",charIndex:2089}],lastUpdated:"2024/8/6 05:04:12",headersStr:"配置解析 服务发现 启动",content:'# prometheus 使用说明\n\n本文主要介绍 prometheus 的基本部署，及用其监控 venus 系统指标的基本方案。\n\n\n# 配置解析\n\n默认的配置文件为 prometheus.yml\n\n# my global config\nglobal:\n  scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.\n  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.\n  # scrape_timeout is set to the global default (10s).\n\n# Alertmanager configuration\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          # - alertmanager:9093\n\n# Load rules once and periodically evaluate them according to the global \'evaluation_interval\'.\nrule_files:\n  # - "first_rules.yml"\n  # - "second_rules.yml"\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it\'s Prometheus itself.\nscrape_configs:\n  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\n  - job_name: "prometheus"\n\n    # metrics_path defaults to \'/metrics\'\n    # scheme defaults to \'http\'.\n\n    static_configs:\n      - targets: ["localhost:9090"]\n \n  # 配置采集点，一个 job 可对应一个或多个采集点\n  - job_name: "venus"\n  \n    metrics_path: "/metrics"\n    scheme: "http"\n  \n    static_configs:\n      - targets: ["localhost:4567", "localhost:5678"]\n\n\n\n# 服务发现\n\n可以通过额外的文件来配置采集点，支持热加载，相当于基于文件的服务发现。\n\nprometheus.yml\n\nscrape_configs:\n  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\n  - job_name: "prometheus"\n\n    # metrics_path defaults to \'/metrics\'\n    # scheme defaults to \'http\'.\n\n    static_configs:\n      - targets: ["localhost:9090"]\n \n  # 热加载\n  - job_name: "venus"\n   \n    file_sd_configs:\n      - files: \n        - "./venus.yml"\n      \n        # 多久重新加载\n        refresh_interval: 10m\n\n\nvenus 每个实现指标监控的服务可以认为是单独的采集点。下面配置采集 venus-miner 和 venus-messager 的监控指标。文件名为 venus.yml。\n\n# 该文件中的每一个 targets 都是一个采集点\n- targets:\n  # venus-miner 指标监控服务地址\n  - "<ip>:<port>" \n  labels:\n    __metrics_path__: "/debug/metrics"\n    instance: "miner"\n  \n- targets:\n  # venus-messager 指标监控服务地址\n  - "<ip>:<port>"\n  labels:\n    __metrics_path__: "/debug/metrics"  \n    instance: "messager"\n\n\n\n# 启动\n\n$ ./prometheus --config.file=prometheus.yml\n\n\n使用http://localhost:9090/targets, 可查询组件的指标。',normalizedContent:'# prometheus 使用说明\n\n本文主要介绍 prometheus 的基本部署，及用其监控 venus 系统指标的基本方案。\n\n\n# 配置解析\n\n默认的配置文件为 prometheus.yml\n\n# my global config\nglobal:\n  scrape_interval: 15s # set the scrape interval to every 15 seconds. default is every 1 minute.\n  evaluation_interval: 15s # evaluate rules every 15 seconds. the default is every 1 minute.\n  # scrape_timeout is set to the global default (10s).\n\n# alertmanager configuration\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          # - alertmanager:9093\n\n# load rules once and periodically evaluate them according to the global \'evaluation_interval\'.\nrule_files:\n  # - "first_rules.yml"\n  # - "second_rules.yml"\n\n# a scrape configuration containing exactly one endpoint to scrape:\n# here it\'s prometheus itself.\nscrape_configs:\n  # the job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\n  - job_name: "prometheus"\n\n    # metrics_path defaults to \'/metrics\'\n    # scheme defaults to \'http\'.\n\n    static_configs:\n      - targets: ["localhost:9090"]\n \n  # 配置采集点，一个 job 可对应一个或多个采集点\n  - job_name: "venus"\n  \n    metrics_path: "/metrics"\n    scheme: "http"\n  \n    static_configs:\n      - targets: ["localhost:4567", "localhost:5678"]\n\n\n\n# 服务发现\n\n可以通过额外的文件来配置采集点，支持热加载，相当于基于文件的服务发现。\n\nprometheus.yml\n\nscrape_configs:\n  # the job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\n  - job_name: "prometheus"\n\n    # metrics_path defaults to \'/metrics\'\n    # scheme defaults to \'http\'.\n\n    static_configs:\n      - targets: ["localhost:9090"]\n \n  # 热加载\n  - job_name: "venus"\n   \n    file_sd_configs:\n      - files: \n        - "./venus.yml"\n      \n        # 多久重新加载\n        refresh_interval: 10m\n\n\nvenus 每个实现指标监控的服务可以认为是单独的采集点。下面配置采集 venus-miner 和 venus-messager 的监控指标。文件名为 venus.yml。\n\n# 该文件中的每一个 targets 都是一个采集点\n- targets:\n  # venus-miner 指标监控服务地址\n  - "<ip>:<port>" \n  labels:\n    __metrics_path__: "/debug/metrics"\n    instance: "miner"\n  \n- targets:\n  # venus-messager 指标监控服务地址\n  - "<ip>:<port>"\n  labels:\n    __metrics_path__: "/debug/metrics"  \n    instance: "messager"\n\n\n\n# 启动\n\n$ ./prometheus --config.file=prometheus.yml\n\n\n使用http://localhost:9090/targets, 可查询组件的指标。',charsets:{cjk:!0}},{title:"Venus 各组件升级文档 (持续更新中)",frontmatter:{},regularPath:"/zh/operation/nv23-upgrade.html",relativePath:"zh/operation/nv23-upgrade.md",key:"v-4a939b36",path:"/zh/operation/nv23-upgrade.html",headers:[{level:2,title:"注意事项",slug:"注意事项",normalizedTitle:"注意事项",charIndex:28},{level:2,title:"需要升级的组件",slug:"需要升级的组件",normalizedTitle:"需要升级的组件",charIndex:272},{level:3,title:"升级顺序",slug:"升级顺序",normalizedTitle:"升级顺序",charIndex:691},{level:3,title:"sophon-auth",slug:"sophon-auth",normalizedTitle:"sophon-auth",charIndex:317},{level:3,title:"venus",slug:"venus",normalizedTitle:"venus",charIndex:129},{level:3,title:"sophon-gateway",slug:"sophon-gateway",normalizedTitle:"sophon-gateway",charIndex:3465},{level:3,title:"sophon-messager",slug:"sophon-messager",normalizedTitle:"sophon-messager",charIndex:428},{level:3,title:"sophon-miner",slug:"sophon-miner",normalizedTitle:"sophon-miner",charIndex:539},{level:3,title:"droplet",slug:"droplet",normalizedTitle:"droplet",charIndex:576},{level:3,title:"venus-wallet",slug:"venus-wallet",normalizedTitle:"venus-wallet",charIndex:502},{level:3,title:"damocles-manager",slug:"damocles-manager",normalizedTitle:"damocles-manager",charIndex:613},{level:3,title:"damocles-worker",slug:"damocles-worker",normalizedTitle:"damocles-worker",charIndex:650},{level:3,title:"数据库变更",slug:"数据库变更",normalizedTitle:"数据库变更",charIndex:4171}],lastUpdated:"2024/8/6 05:04:12",headersStr:"注意事项 需要升级的组件 升级顺序 sophon-auth venus sophon-gateway sophon-messager sophon-miner droplet venus-wallet damocles-manager damocles-worker 数据库变更",content:"# Venus 各组件升级文档 (持续更新中)\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 Version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. WD消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n# 建议升级之前不要做算力，如果升级前 p2 消息上链但 c2 消息没上链，升级后 c2 消息上链会报错\n\n\n# 需要升级的组件\n\n组件名                TAG       COMMIT\nsophon-auth        v1.16.0   e2340d5\nvenus              v1.16.0   3fdb199\nsophon-co          v0.9.0    0f344ed\nsophon-messager    v1.16.0   f695806\nsoohon-gateway     v1.16.0   2d32b8e\nvenus-wallet       v1.16.0   48b1e02\nsophon-miner       v1.16.0   500c186\ndroplet            v2.12.0   deec963\ndamocles-manager   v0.11.0   7d06bd4\ndamocles-worker    v0.11.0   7d06bd4\n\n\n# 升级顺序\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件: 无\n\n注意事项：\n\n * 启动后能否正常鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 1. 升级后检查vk文件是否完整\n\n 2. 升级后执行命令 ./venus state network-info，然后检查通过日志检查 UpgradeWaffleHeight 是否正常:\n    \n    # cali\n    UpgradeWaffleHeight: 1779094\n    # mainnet\n    UpgradeWaffleHeight: 4154640\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v14 actors code，确保与下面输出一样\n    \n     ./venus state actor-cids --network-version 23\n    \n     # 顺序可能会不一样\n     Network Version: 23\n     Actor Version: 14\n     Manifest CID: bafy2bzacecbueuzsropvqawsri27owo7isa5gp2qtluhrfsto2qg7wpgxnkba\n     Actor             CID\n     account           bafk2bzacebr7ik7lng7vysm754mu5x7sakphwm4soqi6zwbox4ukpd6ndwvqy\n     cron              bafk2bzacecwn6eiwa7ysimmk6i57i5whj4cqzwijx3xdlxwb5canmweaez6xc\n     datacap           bafk2bzacecidw7ajvtjhmygqs2yxhmuybyvtwp25dxpblvdxxo7u4gqfzirjg\n     eam               bafk2bzaced2cxnfwngpcubg63h7zk4y5hjwwuhfjxrh43xozax2u6u2woweju\n     ethaccount        bafk2bzacechu4u7asol5mpcsr6fo6jeaeltvayj5bllupyiux7tcynsxby7ko\n     evm               bafk2bzacedupohbgwrcw5ztbbsvrpqyybnokr4ylegmk7hrbt3ueeykua6zxw\n     init              bafk2bzacecbbcshenkb6z2v4irsudv7tyklfgphhizhghix6ke5gpl4r5f2b6\n     multisig          bafk2bzaceajcmsngu3f2chk2y7nanlen5xlftzatytzm6hxwiiw5i5nz36bfc\n     paymentchannel    bafk2bzaceavslp27u3f4zwjq45rlg6assj6cqod7r5f6wfwkptlpi6j4qkmne\n     placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n     reward            bafk2bzacedvfnjittwrkhoar6n5xrykowg2e6rpur4poh2m572f7m7evyx4lc\n     storagemarket     bafk2bzaceaju5wobednmornvdqcyi6khkvdttkru4dqduqicrdmohlwfddwhg\n     storageminer      bafk2bzacea3f43rxzemmakjpktq2ukayngean3oo2de5cdxlg2wsyn53wmepc\n     storagepower      bafk2bzacedo6scxizooytn53wjwg2ooiawnj4fsoylcadnp7mhgzluuckjl42\n     system            bafk2bzacecak4ow7tmauku42s3u2yydonk4hx6ov6ov542hy7lcbji3nhrrhs\n     verifiedregistry  bafk2bzacebvyzjzmvmjvpypphqsumpy6rzxuugnehgum7grc6sv3yqxzrshb4\n    \n\n 5. 若不排查问题，rust日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在1分钟左右，正式迁移时间在50秒左右\n    \n    预迁移高度是升级高度前 120 个高度：\n    pre-migration  开始：STARTING pre-migration  结束：COMPLETED pre-migration\n    migration      开始：STARTING migration      结束：COMPLETED migration\n    \n\n 8. 如果 ~/.venus 存在且需要导入快照，需要先删除 ~/.venus/version 文件再导入快照\n    \n    * 主网: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# sophon-messager\n\n影响功能：\n\n依赖升级组件: venus, sophon-auth, soohon-gateway\n\n注意事项：\n\n * 升级之后需要观察能否正常接收消息, 消息能否正常上链\n\n\n# sophon-miner\n\n影响功能：\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n\n# droplet\n\n影响功能：\n\n * 无\n\n依赖升级组件: auth, venus, gateway, messager\n\n注意事项：\n\n * 升级后能否正常发单和检索\n\n\n# venus-wallet\n\n影响功能： 无\n\n依赖升级组件: gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# damocles-manager\n\n依赖升级组件: 链服务组件\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# damocles-worker\n\n依赖升级组件: damocles-manager\n\n注意事项：\n\n----------------------------------------\n\n更新结果验证步骤:\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. WD上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n无",normalizedContent:"# venus 各组件升级文档 (持续更新中)\n\n\n# 注意事项\n\n 1. 所有组件全部更换\n 2. 更新完通过 curl 命令调用 version 接口检查版本号，各组件接口调用方式：https://github.com/filecoin-project/venus/issues/5132\n 3. pre/pro消息上链的情况\n 4. wd消息上链的情况\n 5. 出块情况是否正常\n 6. gas fee 相关设置是否生效\n\n# 建议升级之前不要做算力，如果升级前 p2 消息上链但 c2 消息没上链，升级后 c2 消息上链会报错\n\n\n# 需要升级的组件\n\n组件名                tag       commit\nsophon-auth        v1.16.0   e2340d5\nvenus              v1.16.0   3fdb199\nsophon-co          v0.9.0    0f344ed\nsophon-messager    v1.16.0   f695806\nsoohon-gateway     v1.16.0   2d32b8e\nvenus-wallet       v1.16.0   48b1e02\nsophon-miner       v1.16.0   500c186\ndroplet            v2.12.0   deec963\ndamocles-manager   v0.11.0   7d06bd4\ndamocles-worker    v0.11.0   7d06bd4\n\n\n# 升级顺序\n\n 1.  sophon-auth\n 2.  venus\n 3.  soohon-co\n 4.  soohon-gateway\n 5.  sophon-messager\n 6.  sophon-miner\n 7.  droplet\n 8.  venus-wallet\n 9.  damocles-manager\n 10. damocles-worker\n\n\n# sophon-auth\n\n影响功能：\n\n * 其他组件对获取 auth 的服务\n\n依赖升级组件: 无\n\n注意事项：\n\n * 启动后能否正常鉴权\n\n\n# venus\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n编译：先 make dist-clean 再 make，这样可以防止未能正常升级 filecoin-ffi 而带来的问题\n\n 1. 升级后检查vk文件是否完整\n\n 2. 升级后执行命令 ./venus state network-info，然后检查通过日志检查 upgradewaffleheight 是否正常:\n    \n    # cali\n    upgradewaffleheight: 1779094\n    # mainnet\n    upgradewaffleheight: 4154640\n    \n\n 3. 升级后需检查是否正常同步区块\n\n 4. 检查主网 v14 actors code，确保与下面输出一样\n    \n     ./venus state actor-cids --network-version 23\n    \n     # 顺序可能会不一样\n     network version: 23\n     actor version: 14\n     manifest cid: bafy2bzacecbueuzsropvqawsri27owo7isa5gp2qtluhrfsto2qg7wpgxnkba\n     actor             cid\n     account           bafk2bzacebr7ik7lng7vysm754mu5x7sakphwm4soqi6zwbox4ukpd6ndwvqy\n     cron              bafk2bzacecwn6eiwa7ysimmk6i57i5whj4cqzwijx3xdlxwb5canmweaez6xc\n     datacap           bafk2bzacecidw7ajvtjhmygqs2yxhmuybyvtwp25dxpblvdxxo7u4gqfzirjg\n     eam               bafk2bzaced2cxnfwngpcubg63h7zk4y5hjwwuhfjxrh43xozax2u6u2woweju\n     ethaccount        bafk2bzacechu4u7asol5mpcsr6fo6jeaeltvayj5bllupyiux7tcynsxby7ko\n     evm               bafk2bzacedupohbgwrcw5ztbbsvrpqyybnokr4ylegmk7hrbt3ueeykua6zxw\n     init              bafk2bzacecbbcshenkb6z2v4irsudv7tyklfgphhizhghix6ke5gpl4r5f2b6\n     multisig          bafk2bzaceajcmsngu3f2chk2y7nanlen5xlftzatytzm6hxwiiw5i5nz36bfc\n     paymentchannel    bafk2bzaceavslp27u3f4zwjq45rlg6assj6cqod7r5f6wfwkptlpi6j4qkmne\n     placeholder       bafk2bzacedfvut2myeleyq67fljcrw4kkmn5pb5dpyozovj7jpoez5irnc3ro\n     reward            bafk2bzacedvfnjittwrkhoar6n5xrykowg2e6rpur4poh2m572f7m7evyx4lc\n     storagemarket     bafk2bzaceaju5wobednmornvdqcyi6khkvdttkru4dqduqicrdmohlwfddwhg\n     storageminer      bafk2bzacea3f43rxzemmakjpktq2ukayngean3oo2de5cdxlg2wsyn53wmepc\n     storagepower      bafk2bzacedo6scxizooytn53wjwg2ooiawnj4fsoylcadnp7mhgzluuckjl42\n     system            bafk2bzacecak4ow7tmauku42s3u2yydonk4hx6ov6ov542hy7lcbji3nhrrhs\n     verifiedregistry  bafk2bzacebvyzjzmvmjvpypphqsumpy6rzxuugnehgum7grc6sv3yqxzrshb4\n    \n\n 5. 若不排查问题，rust日志级别不建议设置为 trace，因为会打印较多日志\n\n 6. 升级后可以通过命令来 ./venus state get-actor t01000 来确认是否升级成功\n\n 7. actor 迁移\n    \n    经测试本次预迁移时间在1分钟左右，正式迁移时间在50秒左右\n    \n    预迁移高度是升级高度前 120 个高度：\n    pre-migration  开始：starting pre-migration  结束：completed pre-migration\n    migration      开始：starting migration      结束：completed migration\n    \n\n 8. 如果 ~/.venus 存在且需要导入快照，需要先删除 ~/.venus/version 文件再导入快照\n    \n    * 主网: ./venus daemon --import-snapshot snapshot.car\n    * calibnet: ./venus daemon --import-snapshot snapshot.car --network calibrationnet\n\n\n# sophon-gateway\n\n影响功能：无\n\n依赖升级组件: sophon-auth\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# sophon-messager\n\n影响功能：\n\n依赖升级组件: venus, sophon-auth, soohon-gateway\n\n注意事项：\n\n * 升级之后需要观察能否正常接收消息, 消息能否正常上链\n\n\n# sophon-miner\n\n影响功能：\n\n依赖升级组件：auth, venus, gateway\n\n注意事项：\n\n\n# droplet\n\n影响功能：\n\n * 无\n\n依赖升级组件: auth, venus, gateway, messager\n\n注意事项：\n\n * 升级后能否正常发单和检索\n\n\n# venus-wallet\n\n影响功能： 无\n\n依赖升级组件: gateway\n\n注意事项：\n\n * 升级后观察是否正常签名，消息能否正常上链\n\n\n# damocles-manager\n\n依赖升级组件: 链服务组件\n\n注意事项：\n\n * 编译时,需要先 make dist-clean 再 make\n\n\n# damocles-worker\n\n依赖升级组件: damocles-manager\n\n注意事项：\n\n----------------------------------------\n\n更新结果验证步骤:\n\n 1. 程序启动正常\n 2. pre/pro消息正常上链\n 3. 出块正常\n 4. wd上链正常\n 5. 算力增长正常\n 6. 真实订单检索正常\n 7. 数据库各种gas，生命周期，聚合设置正常\n\n\n# 数据库变更\n\n无",charsets:{cjk:!0}},{title:"Venus Tipset Execution trace 比较工具使用说明",frontmatter:{},regularPath:"/zh/operation/troubleshoot-consensus-fault.html",relativePath:"zh/operation/troubleshoot-consensus-fault.md",key:"v-14c38005",path:"/zh/operation/troubleshoot-consensus-fault.html",headers:[{level:2,title:"Venus Tipset Execution trace 比较工具使用说明",slug:"venus-tipset-execution-trace-比较工具使用说明",normalizedTitle:"venus tipset execution trace 比较工具使用说明",charIndex:2},{level:3,title:"原理",slug:"原理",normalizedTitle:"原理",charIndex:123},{level:3,title:"操作步骤：",slug:"操作步骤",normalizedTitle:"操作步骤：",charIndex:244}],lastUpdated:"2024/8/6 05:04:12",headersStr:"Venus Tipset Execution trace 比较工具使用说明 原理 操作步骤：",content:'# Venus Tipset Execution trace 比较工具使用说明\n\nexecution-trace 比较工具是用于当 venus 链同步发生共识错误导致同步异常时， 用于快速定位不一致的消息及其执行细节，帮助精准定位问题。\n\n\n# 原理\n\n此工具通过 API 接口在 lotus 和 venus 上执行整个 tipset 中的消息，并获取所有的 execution-trace 进行比较， 通常共识错误发生时，execution-traced 的细节也是不一致的。\n\n\n# 操作步骤：\n\n# 编译 lotus，并启动\n\n在原力区维护的 lotus, v1.12.0/incubation 分支上，支持了相关接口， 编译时添加ENABLE_GAS_TARCE=1\n\ngit clone https://github.com/ipfs-force-community/lotus.git \ngit checkout -b v1.12.0/incubation oriign/v1.12.0/incubation\nmake lotus ENABLE_GAS_TRACE=1\n\n\n# 获取 execution-trace 分析工具\n\ngit clone https://github.com/zl03jsj/filecoin-head-comparer.git\n\n\n# 配置 execution-trace 分析工具\n\n在项目的跟目录下打开配置文件./cfg_exec_trace.json 编辑配置 venus 和 lotus 的节点信息：\n\n{\n  "lotus": {\n    "url": "http://192.168.200.21:1234/rpc/v0",\n    "token": ""\n  },\n  "venus": {\n    "url": "http://192.168.1.125:3453/rpc/v0",\n    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIiwiYWRtaW4iXX0.oLkKAMWEiUA6oK-stwd3Spiwrx9TlGOuVFgrgn7JPwU"\n  }\n}\n\n\n# 启动 execution-trace 工具开始问题检测\n\n由于共识问题，导致链同步时问题时，通过日志，很容易就可以定位有问题的 tipset epoch, 在根目录执行命令，在参数中指定高度，就可以对指定的 tipset 进行分析比较了。\n\npython3 ./exec_trace_cmp.py 1288233\nvenus url:http://192.168.1.125:3453/rpc/v0\nlotus url:http://192.168.200.21:1234/rpc/v0\n\n    Venus and lotus got the same state root(bafy2bzacebhpihnow4fwuebtxenpl27kvl4k7aeozlsruwcdj3berrposkfgs) after apply tipset(1288233)\n\n    start compile tipset(1288233) traces\n    venus total message count(contain implicit)= 481\n    lotus total message count(contain implicit)= 481\n    \nidx:  0, Compare msg(bafy2bzacebo67zpnnaqb4jzz3peflh6mu3hczu7isd4yxkymvlao5li6lrqwi) stateAfterApply: bafy2bzaceaijdjyg263zawvczt3alkciu2ptrzv3pftu434gvxjujqmam2nxe execution-traces: ok\nidx:  1, Compare msg(bafy2bzaceavrkj7coojud5amhn2ukrhrkntaxk6r7esnilldbjocia7ut7jzw) stateAfterApply: bafy2bzacedus5agquqptf3o3yy3cylg7j2jb2sil24clvtyff4vcoedzxdaha execution-traces: ok\nidx:  2, Compare msg(bafy2bzaceaadqo5lv75q7qvsbgx3prm5oh7nqfz6volerwleyt65jizhcyxqa) stateAfterApply: bafy2bzacebkdqv25av4bjabifpe2vye74j73ou62le3hztyx33pxy254cul5u execution-traces: ok\nidx:  3, Compare msg(bafy2bzacebrmjo2ahojpjj5rvdd6fxqvtgntoovvb722o25dmwmlub4u6icdw) stateAfterApply: bafy2bzacebzez4rvo4yteqjtsdmwmaqpz7vadepdoikbaqcvnzqnhkuhkzt5y execution-traces: ok\nidx:  4, Compare msg(bafy2bzaceapwk7p5c7gy35buhy6mqs42rv36kxvczca3siwl6h2evufsld5b6) stateAfterApply: bafy2bzaceahpmfeq46nagmbzpvjnabrsem2zjrvcy77cxldaf43aniclduqik execution-traces: ok\nidx:  5, Compare msg(bafy2bzacecdl2zt4bd4nwhxnehlqejtlikvqwztnk3leil54dsmnx6koz42zu) stateAfterApply: bafy2bzacec7uk7o6rbnxdwyluvlm3fsposlvangkqdaj5fargbwlbwws4ezuo execution-traces: ok\nidx:  6, Compare msg(bafy2bzaceakhot2tzgn4zt3nr6aokq2brcity2eh2d67gc2iqrpswlgch5ng6) stateAfterApply: bafy2bzacea3n7ku4epbmqq2ecebmgifpb26etb2hrww4ryqmhiumzwpsvf7es execution-traces: ok\nidx:  7, Compare msg(bafy2bzacecc5zqh2fm55hno66f56pqji5245huk45xqpxzt7b5hz63o7nh622) stateAfterApply: bafy2bzaceb223qjyqk53zic5th7npzik3redyvy723egt47dsgwlshmaksqr6 execution-traces: ok\nidx:  8, Compare msg(bafy2bzacedoohork3gnnzfvv5kme3gqfxrygw4otcwh5lklfbdz3mxy2evinq) stateAfterApply: bafy2bzacea6ks7weiqy65m6m426dvihljvapmbts6cdlu6ytirrpveupvoj2y execution-traces: ok\nidx:  9, Compare msg(bafy2bzacecivu4pfhvvdiwfk23ntidy2aein2y646uzrt4hotve46mejtgjsa) stateAfterApply: bafy2bzaceaqjbks2bjmdal6tu7yoxrecygrcn2s2pmwxwkukzj23p5lsjms2s execution-traces: ok\nidx: 10, Compare msg(bafy2bzacecn6mfxfspglrrwu26uvj3fcirbz2femaeyv7f63vh7ochrwt76ay) stateAfterApply: bafy2bzacec5rnu4a6xunucqpvks5eujn5t3cywpqwieoirex25mgycucbesky execution-traces: ok\nidx: 11, Compare msg(bafy2bzacebvxwcnorwmplriluvus6jjvqvfcknkn44lzf37ptbe5oeiwpt3vu) stateAfterApply: bafy2bzaceaobqsuortebd4nujtqinnwnc7dgs44majmnnkdtt4dqow3wyxah2 execution-traces: ok\nidx: 12, Compare msg(bafy2bzacear7yqpsjwvz5cofocunlyesh3q43ppvqgcs5pcnbsjmxqd4gbmtm) stateAfterApply: bafy2bzacecxjuehhuu2hadecr4avab4qwyy5nenyilbftuuppdoxmohj7emjs execution-traces: ok\nidx: 13, Compare msg(bafy2bzacedqliipes5nh74aeyy3wbn4md6t33kkgqx7m2ukke7qvajp2lrbkw) stateAfterApply: bafy2bzaceb37mvzapylc67d3vtz5fcbusziz2bofdicwny6zehonlkd3zwhus execution-traces: ok\nidx: 14, Compare msg(bafy2bzaceas2brzrd3qhto26hfdi7diouff3yzemsvje5yyv66st3vgqzbjcg) stateAfterApply: bafy2bzacec27fdotcosdnj423naofdqczrykexqblhvu3iey4eptaublp4aeq execution-traces: ok\nidx: 15, Compare msg(bafy2bzacebuyl637qzpqzw46jossgq4tef6j7bh62ec237mghrx4yj4ltu6h6) stateAfterApply: bafy2bzacec3hijr5nvasludlrpa37muy4o64326tofzii7hop4zxynao3oquc execution-traces: ok\nidx: 16, Compare msg(bafy2bzaceagr3ucrm3exnpnm62sq6qrpnyjb74u257by2i52axnqjtvsy5t5m) stateAfterApply: bafy2bzacecbhtzedpwlpdr7imuv7j47rsbj3vsilibcp5j6ocrtqr4qiekp7s execution-traces: ok\nidx: 17, Compare msg(bafy2bzacedqpta5vr5ha4wvezsenbu7qczhctnwndu2yiclgp52ienbk6oljk) stateAfterApply: bafy2bzacedblssnkunnlr2zl3rji5457mlgtc2oxunc6q37swqygtopu47eck execution-traces: ok\nidx: 18, Compare msg(bafy2bzaceduw75wrsj6fdokywn4mm72hzvsfk74i2bu7zjmvmvntmupztsa62) stateAfterApply: bafy2bzaceapkogzfoym2n4q6mwnjfvkiqp2ff5ueampjxa2o3htjy2sknq4hm execution-traces: ok\nidx: 19, Compare msg(bafy2bzacea4eoihdgbaui4rchhz66pk5ybeeyyv63qtnb3zbednp5p6m7prtq) stateAfterApply: bafy2bzacebqhutaiusljv4cgwh235cyvd3mrwbruypz7utk7tmwjf5esxekjq execution-traces: ok\nidx: 20, Compare msg(bafy2bzaceatyz5v6cxbnb7lw4zrw574aogec4aaeaxy2rwzs3fvr2qnvvoc6g) stateAfterApply: bafy2bzaceczfrg57g4fhmxugaf53s3h7a3hgqyziv5h6ztq7jdsinuaickr6c execution-traces: ok\n          .......................................\n\n\n当执行一致时，会看到下面的输出。\n\nVenus and lotus got the same state root(bafy2bzacebhpihnow4fwuebtxenpl27kvl4k7aeozlsruwcdj3berrposkfgs) after apply tipset(1288233)\n\n\n当执行不一致是，会看到如下的输出\n\n....\nidx:477, Compare msg(bafy2bzaceclyunwu6ig3pvwurm34vxengjc33igcax3rxmmazo4ypevkcc4xg) stateAfterApply: bafy2bzacebmfzfvdp7x6fg7yk7i7p7gbvu56afosgbxyju6236b4ytpllv2tg execution-traces: ok\nidx:478, Compare msg(bafy2bzaceaftdrisbrnb2yppgx37dahsp4ko23l47wsfg7g6gczx6czmtdvoa) stateAfterApply: bafy2bzaceaj3jyduelozrbaggwu2v5mokmbds67ouh5s6gdajneqrp6pdbxem execution-traces: ok\n-> this is a cron message: <-\nimplicit message(f00 -> f03, method : 2, nonce:1288233)\nidx:479, Compare msg({\'/\': \'bafy2bzacedqbx4tfp7qwpe7oylrwueiye4ipfx6ii7f2p4r5w55thwayci44q\'}) stateAfterApply: bafy2bzacea2o5ylrpovsg6f3bvufgolcd6z46kxgfohzp3c27gendhpirug5i execution-traces: ok\n-> this is a cron message: <-\n\n    message trace(283) not equals:\n    message details : cid:{\'/\': \'bafy2bzacebka5xwpzelt4cl5pa452k3oi45mbcy7pyrlc3om7sfnul4cz7dcu\'}, from:f00, to:f03, nonce:1288233\n-----\x3e lotus_trace:---------------\n{\n    "Name": "OnMethodInvocation",\n    "loc": [\n        {\n            "File": "/root/theduan/lotus-src/chain/vm/vm.go",\n            "Line": 333,\n            "Function": "github.com/filecoin-project/lotus/chain/vm.(*VM).send.func3"\n        },\n        {\n            "File": "/root/theduan/lotus-src/chain/vm/vm.go",\n            "Line": 354,\n            "Function": "github.com/filecoin-project/lotus/chain/vm.(*VM).send"\n        },\n        {\n            "File": "/root/theduan/lotus-src/chain/vm/runtime.go",\n            "Line": 445,\n            "Function": "github.com/filecoin-project/lotus/chain/vm.(*Runtime).internalSend"\n        },\n        {\n            "File": "/root/theduan/lotus-src/chain/vm/runtime.go",\n            "Line": 402,\n            "Function": "github.com/filecoin-project/lotus/chain/vm.(*Runtime).Send"\n        },\n        {\n            "File": "/root/go/pkg/mod/github.com/filecoin-project/specs-actors/v6@v6.0.0/actors/builtin/power/power_actor.go",\n            "Line": 450,\n            "Function": "github.com/filecoin-project/specs-actors/v6/actors/builtin/power.Actor.processBatchProofVerifies"\n        },\n        {\n            "File": "/root/go/pkg/mod/github.com/filecoin-project/specs-actors/v6@v6.0.0/actors/builtin/power/power_actor.go",\n            "Line": 222,\n            "Function": "github.com/filecoin-project/specs-actors/v6/actors/builtin/power.Actor.OnEpochTickEnd"\n        },\n        {\n            "File": "/usr/lib/go/src/reflect/value.go",\n            "Line": 543,\n            "Function": "reflect.Value.call"\n        },\n        {\n            "File": "/usr/lib/go/src/reflect/value.go",\n            "Line": 339,\n            "Function": "reflect.Value.Call"\n        },\n        {\n            "File": "/root/theduan/lotus-src/chain/vm/invoker.go",\n            "Line": 247,\n            "Function": "github.com/filecoin-project/lotus/chain/vm.(*ActorRegistry).transform.func2.1"\n        },\n        {\n            "File": "/root/theduan/lotus-src/chain/vm/runtime.go",\n            "Line": 171,\n            "Function": "github.com/filecoin-project/lotus/chain/vm.(*Runtime).shimCall"\n        }\n    ],\n    "tg": 23856,\n    "cg": 23856,\n    "sg": 0,\n    "vtg": 23856,\n    "vcg": 23856,\n    "vsg": 0,\n    "tt": 2830,\n    "ex": "i"\n}  \n-----\x3e venus_trace:---------------\n{\n    "Name": "OnVerifySeal",\n    "loc": [\n        {\n            "File": "/home/zl/venus-src/pkg/vm/vmcontext/syscalls.go",\n            "Line": 106,\n            "Function": "github.com/filecoin-project/venus/pkg/vm/vmcontext.syscalls.BatchVerifySeals.func1"\n        },\n        {\n            "File": "/root/go/src/runtime/asm_amd64.s",\n            "Line": 1371,\n            "Function": "runtime.goexit"\n        }\n    ],\n    "tg": 2000,\n    "cg": 2000,\n    "sg": 0,\n    "vtg": 0,\n    "vcg": 2000,\n    "vsg": 0,\n    "tt": 0\n}\n\nimplicit message(f00 -> f03, method : 2, nonce:1288233)\nidx:480, Compare msg({\'/\': \'bafy2bzacebka5xwpzelt4cl5pa452k3oi45mbcy7pyrlc3om7sfnul4cz7dcu\'}) stateAfterApply: bafy2bzacebhpihnow4fwuebtxenpl27kvl4k7aeozlsruwcdj3berrposkfgs execution-traces: failed\n\n\n程序会打印出不同的 execution-trace 的消息，以及不匹配的调用堆栈，可以方便快速定位问题。',normalizedContent:'# venus tipset execution trace 比较工具使用说明\n\nexecution-trace 比较工具是用于当 venus 链同步发生共识错误导致同步异常时， 用于快速定位不一致的消息及其执行细节，帮助精准定位问题。\n\n\n# 原理\n\n此工具通过 api 接口在 lotus 和 venus 上执行整个 tipset 中的消息，并获取所有的 execution-trace 进行比较， 通常共识错误发生时，execution-traced 的细节也是不一致的。\n\n\n# 操作步骤：\n\n# 编译 lotus，并启动\n\n在原力区维护的 lotus, v1.12.0/incubation 分支上，支持了相关接口， 编译时添加enable_gas_tarce=1\n\ngit clone https://github.com/ipfs-force-community/lotus.git \ngit checkout -b v1.12.0/incubation oriign/v1.12.0/incubation\nmake lotus enable_gas_trace=1\n\n\n# 获取 execution-trace 分析工具\n\ngit clone https://github.com/zl03jsj/filecoin-head-comparer.git\n\n\n# 配置 execution-trace 分析工具\n\n在项目的跟目录下打开配置文件./cfg_exec_trace.json 编辑配置 venus 和 lotus 的节点信息：\n\n{\n  "lotus": {\n    "url": "http://192.168.200.21:1234/rpc/v0",\n    "token": ""\n  },\n  "venus": {\n    "url": "http://192.168.1.125:3453/rpc/v0",\n    "token": "eyjhbgcioijiuzi1niisinr5cci6ikpxvcj9.eyjbbgxvdyi6wyjyzwfkiiwid3jpdguilcjzawduiiwiywrtaw4ixx0.olkkamweiua6ok-stwd3spiwrx9tlgouvfgrgn7jpwu"\n  }\n}\n\n\n# 启动 execution-trace 工具开始问题检测\n\n由于共识问题，导致链同步时问题时，通过日志，很容易就可以定位有问题的 tipset epoch, 在根目录执行命令，在参数中指定高度，就可以对指定的 tipset 进行分析比较了。\n\npython3 ./exec_trace_cmp.py 1288233\nvenus url:http://192.168.1.125:3453/rpc/v0\nlotus url:http://192.168.200.21:1234/rpc/v0\n\n    venus and lotus got the same state root(bafy2bzacebhpihnow4fwuebtxenpl27kvl4k7aeozlsruwcdj3berrposkfgs) after apply tipset(1288233)\n\n    start compile tipset(1288233) traces\n    venus total message count(contain implicit)= 481\n    lotus total message count(contain implicit)= 481\n    \nidx:  0, compare msg(bafy2bzacebo67zpnnaqb4jzz3peflh6mu3hczu7isd4yxkymvlao5li6lrqwi) stateafterapply: bafy2bzaceaijdjyg263zawvczt3alkciu2ptrzv3pftu434gvxjujqmam2nxe execution-traces: ok\nidx:  1, compare msg(bafy2bzaceavrkj7coojud5amhn2ukrhrkntaxk6r7esnilldbjocia7ut7jzw) stateafterapply: bafy2bzacedus5agquqptf3o3yy3cylg7j2jb2sil24clvtyff4vcoedzxdaha execution-traces: ok\nidx:  2, compare msg(bafy2bzaceaadqo5lv75q7qvsbgx3prm5oh7nqfz6volerwleyt65jizhcyxqa) stateafterapply: bafy2bzacebkdqv25av4bjabifpe2vye74j73ou62le3hztyx33pxy254cul5u execution-traces: ok\nidx:  3, compare msg(bafy2bzacebrmjo2ahojpjj5rvdd6fxqvtgntoovvb722o25dmwmlub4u6icdw) stateafterapply: bafy2bzacebzez4rvo4yteqjtsdmwmaqpz7vadepdoikbaqcvnzqnhkuhkzt5y execution-traces: ok\nidx:  4, compare msg(bafy2bzaceapwk7p5c7gy35buhy6mqs42rv36kxvczca3siwl6h2evufsld5b6) stateafterapply: bafy2bzaceahpmfeq46nagmbzpvjnabrsem2zjrvcy77cxldaf43aniclduqik execution-traces: ok\nidx:  5, compare msg(bafy2bzacecdl2zt4bd4nwhxnehlqejtlikvqwztnk3leil54dsmnx6koz42zu) stateafterapply: bafy2bzacec7uk7o6rbnxdwyluvlm3fsposlvangkqdaj5fargbwlbwws4ezuo execution-traces: ok\nidx:  6, compare msg(bafy2bzaceakhot2tzgn4zt3nr6aokq2brcity2eh2d67gc2iqrpswlgch5ng6) stateafterapply: bafy2bzacea3n7ku4epbmqq2ecebmgifpb26etb2hrww4ryqmhiumzwpsvf7es execution-traces: ok\nidx:  7, compare msg(bafy2bzacecc5zqh2fm55hno66f56pqji5245huk45xqpxzt7b5hz63o7nh622) stateafterapply: bafy2bzaceb223qjyqk53zic5th7npzik3redyvy723egt47dsgwlshmaksqr6 execution-traces: ok\nidx:  8, compare msg(bafy2bzacedoohork3gnnzfvv5kme3gqfxrygw4otcwh5lklfbdz3mxy2evinq) stateafterapply: bafy2bzacea6ks7weiqy65m6m426dvihljvapmbts6cdlu6ytirrpveupvoj2y execution-traces: ok\nidx:  9, compare msg(bafy2bzacecivu4pfhvvdiwfk23ntidy2aein2y646uzrt4hotve46mejtgjsa) stateafterapply: bafy2bzaceaqjbks2bjmdal6tu7yoxrecygrcn2s2pmwxwkukzj23p5lsjms2s execution-traces: ok\nidx: 10, compare msg(bafy2bzacecn6mfxfspglrrwu26uvj3fcirbz2femaeyv7f63vh7ochrwt76ay) stateafterapply: bafy2bzacec5rnu4a6xunucqpvks5eujn5t3cywpqwieoirex25mgycucbesky execution-traces: ok\nidx: 11, compare msg(bafy2bzacebvxwcnorwmplriluvus6jjvqvfcknkn44lzf37ptbe5oeiwpt3vu) stateafterapply: bafy2bzaceaobqsuortebd4nujtqinnwnc7dgs44majmnnkdtt4dqow3wyxah2 execution-traces: ok\nidx: 12, compare msg(bafy2bzacear7yqpsjwvz5cofocunlyesh3q43ppvqgcs5pcnbsjmxqd4gbmtm) stateafterapply: bafy2bzacecxjuehhuu2hadecr4avab4qwyy5nenyilbftuuppdoxmohj7emjs execution-traces: ok\nidx: 13, compare msg(bafy2bzacedqliipes5nh74aeyy3wbn4md6t33kkgqx7m2ukke7qvajp2lrbkw) stateafterapply: bafy2bzaceb37mvzapylc67d3vtz5fcbusziz2bofdicwny6zehonlkd3zwhus execution-traces: ok\nidx: 14, compare msg(bafy2bzaceas2brzrd3qhto26hfdi7diouff3yzemsvje5yyv66st3vgqzbjcg) stateafterapply: bafy2bzacec27fdotcosdnj423naofdqczrykexqblhvu3iey4eptaublp4aeq execution-traces: ok\nidx: 15, compare msg(bafy2bzacebuyl637qzpqzw46jossgq4tef6j7bh62ec237mghrx4yj4ltu6h6) stateafterapply: bafy2bzacec3hijr5nvasludlrpa37muy4o64326tofzii7hop4zxynao3oquc execution-traces: ok\nidx: 16, compare msg(bafy2bzaceagr3ucrm3exnpnm62sq6qrpnyjb74u257by2i52axnqjtvsy5t5m) stateafterapply: bafy2bzacecbhtzedpwlpdr7imuv7j47rsbj3vsilibcp5j6ocrtqr4qiekp7s execution-traces: ok\nidx: 17, compare msg(bafy2bzacedqpta5vr5ha4wvezsenbu7qczhctnwndu2yiclgp52ienbk6oljk) stateafterapply: bafy2bzacedblssnkunnlr2zl3rji5457mlgtc2oxunc6q37swqygtopu47eck execution-traces: ok\nidx: 18, compare msg(bafy2bzaceduw75wrsj6fdokywn4mm72hzvsfk74i2bu7zjmvmvntmupztsa62) stateafterapply: bafy2bzaceapkogzfoym2n4q6mwnjfvkiqp2ff5ueampjxa2o3htjy2sknq4hm execution-traces: ok\nidx: 19, compare msg(bafy2bzacea4eoihdgbaui4rchhz66pk5ybeeyyv63qtnb3zbednp5p6m7prtq) stateafterapply: bafy2bzacebqhutaiusljv4cgwh235cyvd3mrwbruypz7utk7tmwjf5esxekjq execution-traces: ok\nidx: 20, compare msg(bafy2bzaceatyz5v6cxbnb7lw4zrw574aogec4aaeaxy2rwzs3fvr2qnvvoc6g) stateafterapply: bafy2bzaceczfrg57g4fhmxugaf53s3h7a3hgqyziv5h6ztq7jdsinuaickr6c execution-traces: ok\n          .......................................\n\n\n当执行一致时，会看到下面的输出。\n\nvenus and lotus got the same state root(bafy2bzacebhpihnow4fwuebtxenpl27kvl4k7aeozlsruwcdj3berrposkfgs) after apply tipset(1288233)\n\n\n当执行不一致是，会看到如下的输出\n\n....\nidx:477, compare msg(bafy2bzaceclyunwu6ig3pvwurm34vxengjc33igcax3rxmmazo4ypevkcc4xg) stateafterapply: bafy2bzacebmfzfvdp7x6fg7yk7i7p7gbvu56afosgbxyju6236b4ytpllv2tg execution-traces: ok\nidx:478, compare msg(bafy2bzaceaftdrisbrnb2yppgx37dahsp4ko23l47wsfg7g6gczx6czmtdvoa) stateafterapply: bafy2bzaceaj3jyduelozrbaggwu2v5mokmbds67ouh5s6gdajneqrp6pdbxem execution-traces: ok\n-> this is a cron message: <-\nimplicit message(f00 -> f03, method : 2, nonce:1288233)\nidx:479, compare msg({\'/\': \'bafy2bzacedqbx4tfp7qwpe7oylrwueiye4ipfx6ii7f2p4r5w55thwayci44q\'}) stateafterapply: bafy2bzacea2o5ylrpovsg6f3bvufgolcd6z46kxgfohzp3c27gendhpirug5i execution-traces: ok\n-> this is a cron message: <-\n\n    message trace(283) not equals:\n    message details : cid:{\'/\': \'bafy2bzacebka5xwpzelt4cl5pa452k3oi45mbcy7pyrlc3om7sfnul4cz7dcu\'}, from:f00, to:f03, nonce:1288233\n-----\x3e lotus_trace:---------------\n{\n    "name": "onmethodinvocation",\n    "loc": [\n        {\n            "file": "/root/theduan/lotus-src/chain/vm/vm.go",\n            "line": 333,\n            "function": "github.com/filecoin-project/lotus/chain/vm.(*vm).send.func3"\n        },\n        {\n            "file": "/root/theduan/lotus-src/chain/vm/vm.go",\n            "line": 354,\n            "function": "github.com/filecoin-project/lotus/chain/vm.(*vm).send"\n        },\n        {\n            "file": "/root/theduan/lotus-src/chain/vm/runtime.go",\n            "line": 445,\n            "function": "github.com/filecoin-project/lotus/chain/vm.(*runtime).internalsend"\n        },\n        {\n            "file": "/root/theduan/lotus-src/chain/vm/runtime.go",\n            "line": 402,\n            "function": "github.com/filecoin-project/lotus/chain/vm.(*runtime).send"\n        },\n        {\n            "file": "/root/go/pkg/mod/github.com/filecoin-project/specs-actors/v6@v6.0.0/actors/builtin/power/power_actor.go",\n            "line": 450,\n            "function": "github.com/filecoin-project/specs-actors/v6/actors/builtin/power.actor.processbatchproofverifies"\n        },\n        {\n            "file": "/root/go/pkg/mod/github.com/filecoin-project/specs-actors/v6@v6.0.0/actors/builtin/power/power_actor.go",\n            "line": 222,\n            "function": "github.com/filecoin-project/specs-actors/v6/actors/builtin/power.actor.onepochtickend"\n        },\n        {\n            "file": "/usr/lib/go/src/reflect/value.go",\n            "line": 543,\n            "function": "reflect.value.call"\n        },\n        {\n            "file": "/usr/lib/go/src/reflect/value.go",\n            "line": 339,\n            "function": "reflect.value.call"\n        },\n        {\n            "file": "/root/theduan/lotus-src/chain/vm/invoker.go",\n            "line": 247,\n            "function": "github.com/filecoin-project/lotus/chain/vm.(*actorregistry).transform.func2.1"\n        },\n        {\n            "file": "/root/theduan/lotus-src/chain/vm/runtime.go",\n            "line": 171,\n            "function": "github.com/filecoin-project/lotus/chain/vm.(*runtime).shimcall"\n        }\n    ],\n    "tg": 23856,\n    "cg": 23856,\n    "sg": 0,\n    "vtg": 23856,\n    "vcg": 23856,\n    "vsg": 0,\n    "tt": 2830,\n    "ex": "i"\n}  \n-----\x3e venus_trace:---------------\n{\n    "name": "onverifyseal",\n    "loc": [\n        {\n            "file": "/home/zl/venus-src/pkg/vm/vmcontext/syscalls.go",\n            "line": 106,\n            "function": "github.com/filecoin-project/venus/pkg/vm/vmcontext.syscalls.batchverifyseals.func1"\n        },\n        {\n            "file": "/root/go/src/runtime/asm_amd64.s",\n            "line": 1371,\n            "function": "runtime.goexit"\n        }\n    ],\n    "tg": 2000,\n    "cg": 2000,\n    "sg": 0,\n    "vtg": 0,\n    "vcg": 2000,\n    "vsg": 0,\n    "tt": 0\n}\n\nimplicit message(f00 -> f03, method : 2, nonce:1288233)\nidx:480, compare msg({\'/\': \'bafy2bzacebka5xwpzelt4cl5pa452k3oi45mbcy7pyrlc3om7sfnul4cz7dcu\'}) stateafterapply: bafy2bzacebhpihnow4fwuebtxenpl27kvl4k7aeozlsruwcdj3berrposkfgs execution-traces: failed\n\n\n程序会打印出不同的 execution-trace 的消息，以及不匹配的调用堆栈，可以方便快速定位问题。',charsets:{cjk:!0}}],themeConfig:{logo:"/assets/venus-logo-title.svg",lastUpdated:"Last Updated",docsRepo:"filecoin-project/venus-docs",docsDir:"docs",docsBranch:"master",editLinks:!0,displayAllHeaders:!1,locales:{"/":{selectText:"Languages",label:"English",lang:"en-US",title:"Venus Filecoin",description:"Venus is a Go implementation of the Filecoin Distributed Storage Network.",nav:[{text:"Introduction",link:"/intro/"},{text:"Deployment & Operation",link:"/operation/"},{text:"About",link:"/about/"}],sidebar:{"/intro/":[{title:"Introduction",collapsable:!1,children:[["","Overview"],["one-pager.md","One Pager"]]},{title:"Products",collapsable:!1,children:[["https://sophon.venus-fil.io","Sophon"],["https://damocles.venus-fil.io","Damocles"],["https://droplet.venus-fil.io","Droplet"]]},{title:"Contributing",collapsable:!1,children:[["contribute-docs.md","Contribute to doc"]]}],"/operation/":[{title:"Deployment",collapsable:!1,children:[["","Deployment of a Venus system"]]},{title:"Network Upgrade",collapsable:!1,children:[["nv23-upgrade.md","nv23 upgrade"],["nv22-upgrade.md","nv22 upgrade"],["nv21-upgrade.md","nv21 upgrade"],["nv19-upgrade.md","nv19 upgrade"],["nv18-upgrade.md","nv18 upgrade"],["nv17-upgrade.md","nv17 upgrade"],["nv16-upgrade.md","nv16 upgrade"],["nv15-upgrade.md","nv15 upgrade"]]}],"/about/":[{title:"",collapsable:!1,children:[["","About"]]}]}},"/zh/":{selectText:"选择语言",label:"简体中文",title:"启明星",description:"Venus is a Go implementation of the Filecoin Distributed Storage Network.",nav:[{text:"简介",link:"/zh/intro/"},{text:"运维/部署",link:"/zh/operation/"},{text:"关于",link:"/zh/about/"}],sidebar:{"/zh/intro/":[{title:"概述",collapsable:!1,children:[["","启明星概要"],["one-pager.md","单页介绍文档"]]},{title:"产品",collapsable:!1,children:[["https://sophon.venus-fil.io/zh/","智子"],["https://damocles.venus-fil.io/zh/","执剑人"],["https://droplet.venus-fil.io/zh/","水滴"]]},{title:"参与",collapsable:!1,children:[["contribute-doc.md","贡献文档"]]}],"/zh/operation/":[{title:"部署",collapsable:!1,children:[["","部署Venus解决方案"]]},{title:"网络/产品升级",collapsable:!1,children:[["nv23-upgrade.md","nv23网络升级"],["nv22-upgrade.md","nv22网络升级"],["nv21-upgrade.md","nv21网络升级"],["nv19-upgrade.md","nv19网络升级"],["nv18-upgrade.md","nv18网络升级"],["nv17-upgrade.md","nv17网络升级"],["nv16-upgrade.md","nv16网络升级"],["nv15-upgrade.md","nv15网络升级"],["migrate_market_v1_to_v2.md","market_v2升级"]]}],"/zh/about/":[{title:"",collapsable:!1,children:[["","关于我们"]]}]}}}},locales:{"/":{lang:"en-US",title:"Venus Filecoin",description:"Venus is a Go implementation of the Filecoin Distributed Storage Network.",path:"/"},"/zh/":{lang:"zh-CN",title:"启明星",description:"GO语言实现的Filecoin分布式存储网络",path:"/zh/"}}};t(317);Oo.component("RedirectTutorial",(function(){return t.e(17).then(t.bind(null,396))})),Oo.component("Badge",(function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,454))})),Oo.component("CodeBlock",(function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,397))})),Oo.component("CodeGroup",(function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,398))}));t(318);var Ts={name:"BackToTop",props:{threshold:{type:Number,default:300}},data:function(){return{scrollTop:null}},computed:{show:function(){return this.scrollTop>this.threshold}},mounted:function(){var e=this;this.scrollTop=this.getScrollTop(),window.addEventListener("scroll",ts()((function(){e.scrollTop=e.getScrollTop()}),100))},methods:{getScrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollToTop:function(){window.scrollTo({top:0,behavior:"smooth"}),this.scrollTop=0}}},Cs=(t(319),Object(ys.a)(Ts,(function(){var e=this.$createElement,n=this._self._c||e;return n("transition",{attrs:{name:"fade"}},[this.show?n("svg",{staticClass:"go-to-top",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 49.484 28.284"},on:{click:this.scrollToTop}},[n("g",{attrs:{transform:"translate(-229 -126.358)"}},[n("rect",{attrs:{fill:"currentColor",width:"35",height:"5",rx:"2",transform:"translate(229 151.107) rotate(-45)"}}),this._v(" "),n("rect",{attrs:{fill:"currentColor",width:"35",height:"5",rx:"2",transform:"translate(274.949 154.642) rotate(-135)"}})])]):this._e()])}),[],!1,null,"5fd4ef0c",null).exports),Ss=(t(320),[{},function(e){e.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},function(e){e.Vue.component("BackToTop",Cs)},{},function(e){e.Vue.component("CodeCopy",ws)}]),As=["BackToTop"];t(181);function qs(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t(101);function Ps(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Is(e,n,t){return n&&Ps(e.prototype,n),t&&Ps(e,t),e}t(173);function Os(e,n){return(Os=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}t(174);function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t(116),t(107);function Ls(e,n){return!n||"object"!==ji(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Us(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=Es(e);if(n){var o=Es(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ls(this,t)}}var Rs=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Os(e,n)}(t,e);var n=Us(t);function t(){return qs(this,t),n.apply(this,arguments)}return t}(function(){function e(){qs(this,e),this.store=new Oo({data:{state:{}}})}return Is(e,[{key:"$get",value:function(e){return this.store.state[e]}},{key:"$set",value:function(e,n){Oo.set(this.store.state,e,n)}},{key:"$emit",value:function(){var e;(e=this.store).$emit.apply(e,arguments)}},{key:"$on",value:function(){var e;(e=this.store).$on.apply(e,arguments)}}]),e}());Object.assign(Rs.prototype,{getPageAsyncComponent:Di,getLayoutAsyncComponent:Mi,getAsyncComponent:Vi,getVueComponent:Gi});var Ns={install:function(e){var n=new Rs;e.$vuepress=n,e.prototype.$vuepress=n}};function $s(e){e.beforeEach((function(n,t,r){if(Fs(e,n.path))r();else if(/(\/|\.html)$/.test(n.path))if(/\/$/.test(n.path)){var o=n.path.replace(/\/$/,"")+".html";Fs(e,o)?r(o):r()}else r();else{var a=n.path+"/",i=n.path+".html";Fs(e,i)?r(i):Fs(e,a)?r(a):r()}}))}function Fs(e,n){return e.options.routes.filter((function(e){return e.path.toLowerCase()===n.toLowerCase()})).length>0}var Ds={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(e){var n=this.pageKey||this.$parent.$page.key;return Bi("pageKey",n),Oo.component(n)||Oo.component(n,Di(n)),Oo.component(n)?e(n):e("")}},Ms={functional:!0,props:{slotKey:String,required:!0},render:function(e,n){var t=n.props,r=n.slots;return e("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Vs={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Gs=(t(322),t(323),Object(ys.a)(Vs,(function(){var e=this.$createElement,n=this._self._c||e;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function Hs(){return(Hs=Object(r.a)(regeneratorRuntime.mark((function e(n){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:js.routerBase||js.base,$s(r=new zi({base:t,mode:"history",fallback:!1,routes:_s,scrollBehavior:function(e,n,t){return t||(e.hash?!Oo.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(e.hash)}:{x:0,y:0})}})),o={},e.prev=4,e.next=7,Promise.all(Ss.filter((function(e){return"function"==typeof e})).map((function(e){return e({Vue:Oo,options:o,router:r,siteData:js,isServer:n})})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:return a=new Oo(Object.assign(o,{router:r,render:function(e){return e("div",{attrs:{id:"app"}},[e("RouterView",{ref:"layout"}),e("div",{class:"global-ui"},As.map((function(n){return e(n)})))])}})),e.abrupt("return",{app:a,router:r});case 14:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}Oo.config.productionTip=!1,Oo.use(zi),Oo.use(Ns),Oo.mixin(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oo;_i(n),t.$vuepress.$set("siteData",n);var r=e(t.$vuepress.$get("siteData")),o=new r,a=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(o)),i={};return Object.keys(a).reduce((function(e,n){return n.startsWith("$")&&(e[n]=a[n].get),e}),i),{computed:i}}((function(e){return function(){function n(){qs(this,n)}return Is(n,[{key:"setPage",value:function(e){this.__page=e}},{key:"$site",get:function(){return e}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var e,n,t=this.$site.locales,r=void 0===t?{}:t;for(var o in r)"/"===o?n=r[o]:0===this.$page.path.indexOf(o)&&(e=r[o]);return e||n||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var e=this.$page.frontmatter.canonicalUrl;return"string"==typeof e&&e}},{key:"$title",get:function(){var e=this.$page,n=this.$page.frontmatter.metaTitle;if("string"==typeof n)return n;var t=this.$siteTitle,r=e.frontmatter.home?null:e.frontmatter.title||e.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var e=function(e){if(e){var n=e.filter((function(e){return"description"===e.name}))[0];if(n)return n.content}}(this.$page.frontmatter.meta);return e||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.path.toLowerCase()===n.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),n}()}),js)),Oo.component("Content",Ds),Oo.component("ContentSlotsDistributor",Ms),Oo.component("OutboundLink",Gs),Oo.component("ClientOnly",{functional:!0,render:function(e,n){var t=n.parent,r=n.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Oo.component("Layout",Mi("Layout")),Oo.component("NotFound",Mi("NotFound")),Oo.prototype.$withBase=function(e){var n=this.$site.base;return"/"===e.charAt(0)?n+e.slice(1):e},window.__VUEPRESS__={version:"1.8.0",hash:"35b7b95"},function(e){return Hs.apply(this,arguments)}(!1).then((function(e){var n=e.app;e.router.onReady((function(){n.$mount("#app")}))}))}]);